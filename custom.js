$(function () {

    $(document).on("change", ".hospital_select", function () {

        var id = $(this).val();
        //alert(id);
        var Link = $(".base_url_practice").val();
        var post_url = Link + 'action/select_hospital.php';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {
            if (result == 1) {
                window.location.href = Link + "dashboard.php";
            } else {
                window.location.href = Link + "dashboard_nondoc.php";
            }


            //location.reload();


        });

    });

    $(document).on("change", ".hospital_select_non", function () {

        var id = $(this).val();
        //alert(id);
        var Link = $(".base_url_practice").val();
        var post_url = Link + 'action/select_hospital.php';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.href = Link + "dashboard_nondoc.php";

            //location.reload();


        });

    });

    $("#search_patient_name").autocomplete({

        // var Url_post = Link+"action/get_old_patient_from_barcode_id.php";
        source: $(".base_url_practice").val() + 'action/get_patient_from_name.php',
        minLength: 1,
        focus: function (event, ui) {
            //$( "#old_patient_fname" ).val( ui.item.label );
            return false;
            event.preventDefault();
            //$( "#old_patient_fname" ).val( ui.item.label );
            $('#old_pm_first_name').trigger('click');

        },
        change: function (event, ui) {
            if (!ui.item) {
                //$('#old_pm_first_name').val("");
            }
        },

        select: function (event, ui) {

            $("#old_pm_first_name").val(ui.item.fname);
            $("#old_pm_middle_name").val(ui.item.mname);
            $("#old_pm_last_name").val(ui.item.lname);
            $("#pm_last_visit").val(ui.item.pm_last_date);

            window.location.href = 'case_manager/casemanager_patientdetails.php?random_id=' + ui.item.patient_unique_id;

        },

    });

    $(document).on("click", ".opt_prefix", function () {

        if (this.value == "Yes") { //check value if it is domicilio
            $('.custom_prefix_div').fadeIn('slow');
        } else {
            $('.custom_prefix_div').fadeOut('slow');;
            $("#prefix_num").val("");
        }
    });

    $(".opt_type").on('click', function (e) {
        if (this.value == "Custom") { //check value if it is domicilio
            $('.custom_custom_div').fadeIn('slow');
            $('.custom_serialize_div').fadeOut('slow');
            $('#ser_number').val("");
        } else if (this.value == "Random_Number") {
            $('.custom_custom_div').fadeOut('slow');
            $('.custom_serialize_div').fadeOut('slow');
            $('#ser_number').val("");
            $(".checkSingleOutpatient").prop('checked', false).iCheck('update');;
        } else {
            $('.custom_custom_div').fadeOut('slow');
            $('.custom_serialize_div').fadeIn('slow');
            $(".checkSingleOutpatient").prop('checked', false).iCheck('update');;
        }
    });

    $(".opt_appoprefix").on('click', function (e) {
        if (this.value == "Yes") { //check value if it is domicilio
            $('.custom_appoprefix_div').fadeIn('slow');
        } else {
            $('.custom_appoprefix_div').fadeOut('slow');;
            $("#prefix_apponum").val("");
        }
    });

    $(".opt_appotype").on('click', function (e) {
        if (this.value == "Custom") { //check value if it is domicilio
            $('.custom_appocustom_div').fadeIn('slow');
            $('.custom_apposerialize_div').fadeOut('slow');
            $('#ser_apponumber').val("");
        } else if (this.value == "Random_Number") {
            $('.custom_appocustom_div').fadeOut('slow');
            $('.custom_apposerialize_div').fadeOut('slow');
            $('#ser_apponumber').val("");
            $(".checkSingleInpatient").prop('checked', false).iCheck('update');;
        } else {
            $('.custom_appocustom_div').fadeOut('slow');
            $('.custom_apposerialize_div').fadeIn('slow');
            $(".checkSingleInpatient").prop('checked', false).iCheck('update');;
        }
    });

    $(".opt_inprefix").on('click', function (e) {
        if (this.value == "Yes") { //check value if it is domicilio
            $('.custom_inprefix_div').fadeIn('slow');
        } else {
            $('.custom_inprefix_div').fadeOut('slow');;
            $("#prefix_innum").val("");
        }
    });

    $(".opt_intype").on('click', function (e) {
        if (this.value == "Custom") { //check value if it is domicilio
            $('.custom_incustom_div').fadeIn('slow');
            $('.custom_inserialize_div').fadeOut('slow');
            $('#ser_innumber').val("");
        } else if (this.value == "Random_Number") {
            $('.custom_incustom_div').fadeOut('slow');
            $('.custom_inserialize_div').fadeOut('slow');
            $('#ser_innumber').val("");
            $(".checkSingleInpatient").prop('checked', false).iCheck('update');;
        } else {
            $('.custom_incustom_div').fadeOut('slow');
            $('.custom_inserialize_div').fadeIn('slow');
            $(".checkSingleInpatient").prop('checked', false).iCheck('update');;
        }
    });

    $(document).on("click", "#submit_confirm_phy_verfy_invoiuce_button", function () {

        $("#id_generator_form_add").submit();

    });

    $(document).on('click', '#submit_button_id_generater', function () {

        if (!$("#id_prefix1").is(":checked") && !$("#id_prefix2").is(":checked")) {
            alert("Please Select Outpatient Prefix.");
            $('#id_prefix1').focus();
            return false;
        } else {

            if ($("#id_prefix1").is(":checked")) {

                var prefix_num = $("#prefix_num").val();
                if (prefix_num == "") {
                    alert("Please enter the Outpatient Prefix.");
                    $('#prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_type1").is(":checked") && !$("#id_id_type2").is(":checked") && !$("#id_id_type3").is(":checked")) {
            alert("Please Select Outpatient Type.");
            $('#id_id_type1').focus();
            return false;
        } else {

            if ($("#id_id_type3").is(":checked")) {

                var ser_number = $("#ser_number").val();
                if (ser_number == "") {
                    alert("Please enter the Outpatient Starting From.");
                    $('#ser_number').focus();
                    return false;
                }
            } else if ($("#id_id_type1").is(":checked")) {

                if (!$("#id_custom_opt1").is(":checked") && !$("#id_custom_opt2").is(":checked") && !$("#id_custom_opt3").is(":checked")) {
                    alert("Please Select Outpatient Custom Option.");
                    $('#id_custom_opt1').focus();
                    return false;
                }
            } else {

            }
        }

        if (!$("#id_appoprefix1").is(":checked") && !$("#id_appoprefix2").is(":checked")) {
            alert("Please Select Appointment Id Prefix.");
            $('#id_appoprefix1').focus();
            return false;
        } else {

            if ($("#id_appoprefix1").is(":checked")) {

                var appo_prefix_num = $("#appo_prefix_num").val();
                if (appo_prefix_num == "") {
                    alert("Please enter the Appointment Id Prefix.");
                    $('#appo_prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_appotype1").is(":checked") && !$("#id_id_appotype2").is(":checked") && !$("#id_id_appotype3").is(":checked")) {
            alert("Please Select Appointment Type.");
            $('#id_id_appotype1').focus();
            return false;
        } else {

            if ($("#id_id_appotype3").is(":checked")) {

                var ser_apponumber = $("#ser_apponumber").val();
                if (ser_apponumber == "") {
                    alert("Please enter the Appointment Starting From.");
                    $('#ser_apponumber').focus();
                    return false;
                }
            } else if ($("#id_id_appotype1").is(":checked")) {

                if (!$("#id_custom_appoopt1").is(":checked") && !$("#id_custom_appoopt2").is(":checked") && !$("#id_custom_appoopt3").is(":checked")) {
                    alert("Please Select Appointment Custom Option.");
                    $('#id_custom_appoopt1').focus();
                    return false;
                }
            } else {

            }
        }


        if (!$("#id_inprefix1").is(":checked") && !$("#id_inprefix2").is(":checked")) {
            alert("Please Select Patient ID (IPD) Id Prefix.");
            $('#id_inprefix1').focus();
            return false;
        } else {

            if ($("#id_inprefix1").is(":checked")) {

                var in_prefix_num = $("#in_prefix_num").val();
                if (in_prefix_num == "") {
                    alert("Please enter the Patient ID (IPD) Id Prefix.");
                    $('#in_prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_intype1").is(":checked") && !$("#id_id_intype2").is(":checked") && !$("#id_id_intype3").is(":checked")) {
            alert("Please Select Appointment Type.");
            $('#id_id_intype1').focus();
            return false;
        } else {

            if ($("#id_id_intype3").is(":checked")) {

                var ser_innumber = $("#ser_innumber").val();
                if (ser_innumber == "") {
                    alert("Please enter the Patient ID (IPD) serial number.");
                    $('#ser_innumber').focus();
                    return false;
                }
            } else if ($("#id_id_intype1").is(":checked")) {

                if (!$("#year").is(":checked") && !$("#month").is(":checked") && !$("#date").is(":checked")) {
                    alert("Please Select Patient ID (IPD) Custom Option.");
                    $('#year').focus();
                    return false;
                }
            } else {

            }
        }


        $('#modal-danger-id_generater').modal('show');

        var text = "Are you sure you want to submit <b>Id Generator Setting</b> permanently ? <br /> <b>NOTE</b>: Once submitted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);

    });

    $(document).on('click', '#submit_button_opd_id_generater', function () {

        if (!$("#id_prefix1").is(":checked") && !$("#id_prefix2").is(":checked")) {
            alert("Please Select Outpatient Prefix.");
            $('#id_prefix1').focus();
            return false;
        } else {

            if ($("#id_prefix1").is(":checked")) {

                var prefix_num = $("#prefix_num").val();
                if (prefix_num == "") {
                    alert("Please enter the Outpatient Prefix.");
                    $('#prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_type1").is(":checked") && !$("#id_id_type2").is(":checked") && !$("#id_id_type3").is(":checked")) {
            alert("Please Select Outpatient Type.");
            $('#id_id_type1').focus();
            return false;
        } else {

            if ($("#id_id_type3").is(":checked")) {

                var ser_number = $("#ser_number").val();
                if (ser_number == "") {
                    alert("Please enter the Outpatient Starting From.");
                    $('#ser_number').focus();
                    return false;
                }
            } else if ($("#id_id_type1").is(":checked")) {

                if (!$("#id_custom_opt1").is(":checked") && !$("#id_custom_opt2").is(":checked") && !$("#id_custom_opt3").is(":checked")) {
                    alert("Please Select Outpatient Custom Option.");
                    $('#id_custom_opt1').focus();
                    return false;
                }
            } else {

            }
        }

        if (!$("#id_appoprefix1").is(":checked") && !$("#id_appoprefix2").is(":checked")) {
            alert("Please Select Appointment Id Prefix.");
            $('#id_appoprefix1').focus();
            return false;
        } else {

            if ($("#id_appoprefix1").is(":checked")) {

                var appo_prefix_num = $("#appo_prefix_num").val();
                if (appo_prefix_num == "") {
                    alert("Please enter the Appointment Id Prefix.");
                    $('#appo_prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_appotype1").is(":checked") && !$("#id_id_appotype2").is(":checked") && !$("#id_id_appotype3").is(":checked")) {
            alert("Please Select Appointment Type.");
            $('#id_id_appotype1').focus();
            return false;
        } else {

            if ($("#id_id_appotype3").is(":checked")) {

                var ser_apponumber = $("#ser_apponumber").val();
                if (ser_apponumber == "") {
                    alert("Please enter the Appointment Starting From.");
                    $('#ser_apponumber').focus();
                    return false;
                }
            } else if ($("#id_id_appotype1").is(":checked")) {

                if (!$("#id_custom_appoopt1").is(":checked") && !$("#id_custom_appoopt2").is(":checked") && !$("#id_custom_appoopt3").is(":checked")) {
                    alert("Please Select Appointment Custom Option.");
                    $('#id_custom_appoopt1').focus();
                    return false;
                }
            } else {

            }
        }


        $('#modal-danger-id_generater').modal('show');

        var text = "Are you sure you want to submit <b>Id Generator Setting</b> permanently ? <br /> <b>NOTE</b>: Once submitted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);

    });

    $(document).on('click', '#submit_button_id_generater_opd_ipd', function () {

        if (!$("#id_prefix1").is(":checked") && !$("#id_prefix2").is(":checked")) {
            alert("Please Select Outpatient Prefix.");
            $('#id_prefix1').focus();
            return false;
        } else {

            if ($("#id_prefix1").is(":checked")) {

                var prefix_num = $("#prefix_num").val();
                if (prefix_num == "") {
                    alert("Please enter the Outpatient Prefix.");
                    $('#prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_type1").is(":checked") && !$("#id_id_type2").is(":checked") && !$("#id_id_type3").is(":checked")) {
            alert("Please Select Outpatient Type.");
            $('#id_id_type1').focus();
            return false;
        } else {

            if ($("#id_id_type3").is(":checked")) {

                var ser_number = $("#ser_number").val();
                if (ser_number == "") {
                    alert("Please enter the Outpatient Starting From.");
                    $('#ser_number').focus();
                    return false;
                }
            } else if ($("#id_id_type1").is(":checked")) {

                if (!$("#id_custom_opt1").is(":checked") && !$("#id_custom_opt2").is(":checked") && !$("#id_custom_opt3").is(":checked")) {
                    alert("Please Select Outpatient Custom Option.");
                    $('#id_custom_opt1').focus();
                    return false;
                }
            } else {

            }
        }

        if (!$("#id_inprefix1").is(":checked") && !$("#id_inprefix2").is(":checked")) {
            alert("Please Select Inpatient Id Prefix.");
            $('#id_inprefix1').focus();
            return false;
        } else {

            if ($("#id_inprefix1").is(":checked")) {

                var in_prefix_num = $("#in_prefix_num").val();
                if (in_prefix_num == "") {
                    alert("Please enter the Inpatient Id Prefix.");
                    $('#in_prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_intype1").is(":checked") && !$("#id_id_intype2").is(":checked") && !$("#id_id_intype3").is(":checked")) {
            alert("Please Select Inpatient Type.");
            $('#id_id_intype1').focus();
            return false;
        } else {

            if ($("#id_id_intype3").is(":checked")) {

                var ser_innumber = $("#ser_innumber").val();
                if (ser_innumber == "") {
                    alert("Please enter the Inpatient Starting From.");
                    $('#ser_innumber').focus();
                    return false;
                }
            } else if ($("#id_id_intype1").is(":checked")) {

                if (!$("#id_custom_inopt1").is(":checked") && !$("#id_custom_inopt2").is(":checked") && !$("#id_custom_inopt3").is(":checked")) {
                    alert("Please Select Inpatient Custom Option.");
                    $('#id_custom_inopt1').focus();
                    return false;
                }
            } else {

            }
        }

        if (!$("#id_appoprefix1").is(":checked") && !$("#id_appoprefix2").is(":checked")) {
            alert("Please Select Appointment Id Prefix.");
            $('#id_appoprefix1').focus();
            return false;
        } else {

            if ($("#id_appoprefix1").is(":checked")) {

                var in_prefix_num = $("#in_prefix_num").val();
                if (in_prefix_num == "") {
                    alert("Please enter the Appointment Id Prefix.");
                    $('#in_prefix_num').focus();
                    return false;
                }
            }
        }

        if (!$("#id_id_appotype1").is(":checked") && !$("#id_id_appotype2").is(":checked") && !$("#id_id_appotype3").is(":checked")) {
            alert("Please Select Appointment Type.");
            $('#id_id_appotype1').focus();
            return false;
        } else {

            if ($("#id_id_appotype3").is(":checked")) {

                var ser_apponumber = $("#ser_apponumber").val();
                if (ser_apponumber == "") {
                    alert("Please enter the Appointment Starting From.");
                    $('#ser_apponumber').focus();
                    return false;
                }
            } else if ($("#id_id_appotype1").is(":checked")) {

                if (!$("#id_custom_appoopt1").is(":checked") && !$("#id_custom_appoopt2").is(":checked") && !$("#id_custom_appoopt3").is(":checked")) {
                    alert("Please Select Appointment Custom Option.");
                    $('#id_custom_appoopt1').focus();
                    return false;
                }
            } else {

            }
        }


        $('#modal-danger-id_generater').modal('show');

        var text = "Are you sure you want to submit <b>Id Generator Setting</b> permanently ? <br /> <b>NOTE</b>: Once submitted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);

    });

    $("#reset_password").submit(function (e) {

        e.preventDefault();
        proceed = true;


        var new_password = $("#new_password").val();

        var confirm_password = $("#confirm_password").val();

        if (new_password == "") {
            alert("Please enter New Password.");
            $('#new_password').focus();
            return false;
        } else {

        }

        if (confirm_password == "") {
            alert("Please enter Confirm Password.");
            $('#confirm_password').focus();
            return false;
        } else {

        }

        if (confirm_password !== new_password) {
            alert("Your current password is wrong.");
            $('#confirm_password').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_change_password').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $("#myModal").modal("show");
        });

    });

    $(".checkdepartment").on('click', function (e) {
        if ($(this).is(":checked")) {
            $(".user_department").show();
        } else {
            $(".user_department").hide();
        }


    });

    $(".checkadmitdepartment").on('click', function (e) {
        if ($(this).is(":checked")) {
            $(".user_admit_department").show();
        } else {
            $(".user_admit_department").hide();
        }


    });

    $("#user_master_form_add").submit(function (e) {

        e.preventDefault();
        proceed = true;


        var ut_id = $("#ut_id").val();
        var dp_id = $("#dp_id").val();
        var um_name = $("#um_name").val();
        var um_email = $("#um_email").val();
        var um_contact1 = $("#um_contact1").val();

        if (ut_id == "") {
            alert("Please select User type.");
            $('#ut_id').focus();
            return false;
        } else if (dp_id == "") {
            alert("Please select Department.");
            $('#dp_id').focus();
            return false;
        } else if (um_name == "") {
            alert("Please enter the Name.");
            $('#um_name').focus();
            return false;
        } else if (um_email == "") {
            alert("Please enter the Username.");
            $('#um_email').focus();
            return false;
        } else if (um_contact1 == "") {
            alert("Please enter the Contact No 1.");
            $('#um_contact1').focus();
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button').attr('disabled', 'disabled');
        $('.err_register').show();

        $('.hdn-contact-error').hide();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {



            if (result.trim() == 2) {

                $('.hdn-contact-error').show();
                $('#submit_button').removeAttr('disabled');

            } else {

                $('.hdn-contact-error').hide();
                $("#practicemodal").modal("show");
                $('#submit_button').removeAttr('disabled');
            }



        });



    });

    $(document).on("change", ".select_ut_id", function () {

        var id = $(this).val();

        console.log(id);

        if (id == 2) {

            $('.hdn-user-type').show();

        } else {

            $('.hdn-user-type').hide();
        }

    });

    $("#change_user_profile_password").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var current_password = $("#current_password").val();
        var new_password = $("#new_password").val();

        var confirm_password = $("#confirm_password").val();

        if (current_password == "") {
            alert("Please enter Current Password.");
            $('#current_password').focus();
            return false;
        } else {

        }

        if (new_password == "") {
            alert("Please enter New Password.");
            $('#new_password').focus();
            return false;
        } else {

        }

        if (confirm_password == "") {
            alert("Please enter Confirm Password.");
            $('#confirm_password').focus();
            return false;
        } else {

        }

        if (confirm_password !== new_password) {
            alert("Confirm password doesn't match.");
            $('#confirm_password').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_change_user_password').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result.trim() == 1) {
                alert("Password updated");
                window.location.reload();
                //$('#submit_button').removeAttr('disabled');
            } else if (result.trim() == 2) {
                alert("Your current password is wrong.");
                $('#submit_change_user_password').removeAttr('disabled');
            } else {
                alert("Something Went Wrong.");
                $('#submit_change_user_password').removeAttr('disabled');
            }
        });

    });

    $(document).on('change', '#upload_profile_image', function (e) {
        e.preventDefault();
        proceed = true;
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (data) {
            if (data == 4) {
                alert("File too large");
                return false;
            } else if (data == 3) {
                alert("Please upload valid file");
                return false;
            } else {
                $(".thumb-profile-main").attr("src", data.trim());
                $(".change-img-sm-profile").attr("src", data.trim());
                $(".change-img-lg-profile").attr("src", data.trim());
            }
        });
    });

    $(document).on('change', '#signature_file', function (e) {

        e.preventDefault();
        proceed = true;
        var post_url = 'action/action_user_master.php?do=update_signature_image';
        var form_data = new FormData();

        form_data.append("file", document.getElementById('signature_file').files[0]);
        $.ajax({ //ajax form submit
            url: post_url,
            method: "POST",
            data: form_data,
            contentType: false,
            cache: false,
            processData: false
        }).done(function (data) {

            if (data == 4) {
                alert("File too large");
                return false;
            } else if (data == 3) {
                alert("Please upload valid file");
                return false;
            } else {
                $(".mysign").html(data);
            }

        });
    });

    $(document).on('click', '.um_dnd', function (e) {

        if ($(".um_dnd").is(":checked")) {

            $(".um_dnd").val("Yes");

        } else {
            $(".um_dnd").val("No");
        }
    });

    $("#update_profile_data").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var um_name = $("#um_name").val();
        var um_emailid = $("#um_emailid").val();

        if (um_name == "") {
            alert("Please enter name.");
            $('#um_name').focus();
            return false;
        } else {

        }

        if (um_emailid == "") {
            alert("Please enter email.");
            $('#um_emailid').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_edit_profile_data').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result.trim() == 1) {
                window.location.href = "user_profile.php";
            } else {
                alert("Something Went Wrong.");
                $('#submit_edit_profile_data').removeAttr('disabled');
            }
        });

    });

    $(document).on("change", ".select_reception_doctor", function () {

        var id = $(this).val();
        var Link = $(".get_base_url").val();
        var post_url = Link + 'action/select_doctor.php';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            location.reload();


        });


    });

    $(document).on("keyup", "#search_patient_contact_no", function () {

        var contact_no = $(this).val();

        if (contact_no.length == 10) {

            var Link = $(".base_url_practice").val();
            var post_url = Link + 'action/get_patient_from_contact_no.php';
            var datastring = 'contact_no=' + contact_no;
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {

                var splitted1 = result.split("@@@");
                var existing_patient = splitted1[0];
                var time_doc = splitted1[1];
                $('.existing_patient').html(existing_patient);
                $('.add_patient_button').html(time_doc);


            });

        } else {
            $('.existing_patient').html("");
            $('.add_patient_button').html("");
            // alert("Please enter 10 digit mobile number.");
            // $('#search_patient_contact_no').focus();
            return false;
        }

    });

    $("#patient_book_appointment").submit(function (e) {

        e.preventDefault();
        proceed = true;

        // var AbhaEnable = $(".AbhaEnable").val();
        // if (AbhaEnable == "Y") {
        //     if ($("#hip_linked").val() != "" && $("#hip_linked").val() == 0) {
        //         alert("Please Link ABHA No to Hospital");
        //         return false;
        //     } else {

        //     }
        // } else {

        // }


        var app_doc_id = $("#app_doc_id").val();
        var date = $("#date").val();
        var time = $("#time").val();
        var pm_case_type = $("#pm_case_type").val();

        if (app_doc_id == 0) {
            alert("Please select doctor.");
            $('#app_doc_id').focus();
            return false;
        } else if (date == "") {
            alert("Please enter date.");
            $('#date').focus();
            return false;
        } else if (time == "") {
            alert("Please enter time.");
            $('#time').focus();
            return false;
        } else if (pm_case_type == "") {
            alert("Please select case type.");
            $('#time').focus();
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_appointment').attr('disabled', 'disabled');
        $('#submit_appointment').hide();
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_appointment').show();
            $('.err_register').hide();

            $('#bookapp').modal('show', {
                backdrop: 'static',
                keyboard: false
            });
            //$('#bookapp').modal({backdrop: 'static', keyboard: false});
            var splitted1 = result.split("@");
            var name_msg = splitted1[0];
            var time_doc = splitted1[1];
            var date_show = splitted1[2];
            $('.name_with_msg').html(name_msg + ' Appointment Booked Successfully.');
            $('.time_doc').html(time_doc);
            $('.date_show').html(date_show);

        });

    });


    $(document).on("change", "#appointment_date", function () {

        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + month + day;
        var Link = $(".base_url_practice").val();
        window.location.href = Link + 'appointments.php?date=' + last_date;
    });

    $('#search_appointment_patient').keyup(function () {
        // Search Text
        var search = $(this).val();

        // Hide all table tbody rows
        $('.appointment_table tbody tr').hide();

        // Count total search result
        var len = $('.appointment_table tbody tr:not(.notfound) td:contains("' + search + '")').length;

        if (len > 0) {
            // Searching text in columns and show match row
            $('.appointment_table tbody tr:not(.notfound) td:contains("' + search + '")').each(function () {
                $(this).closest('tr').show();
            });
        } else {
            $('.notfound').show();
        }

    });

    $("#add_new_patient").submit(function (e) {

        e.preventDefault();
        proceed = true;


        var AbhaEnable = $(".AbhaEnable").val();

        if (AbhaEnable == "Y") {

            $(".abha_address_error").hide().html("");

            if ($("#pm_abha_address").val() != "" && $("#pm_abha_verify").val() == 0) {

                $("#pm_abha_address").focus();
                alert("Please Verify Abha Address");
                return false;

            } else {

            }

        } else {

        }



        var pm_ref_id = $("#pm_ref_id").val();

        var pm_salutation = $("#pm_salutation").val();

        var pm_first_name = $("#pm_first_name").val();

        var pm_middle_name = $("#pm_middle_name").val();

        var pm_last_name = $("#pm_last_name").val();

        var pm_gender = $(".pm_gender").val();

        var pm_dob = $("#pm_dob").val();

        var pm_contact_no = $("#pm_contact_no").val();

        var pm_email = $("#pm_email").val();

        var pm_dnd = $("#pm_dnd").val();

        var srch_dr_names = $("#srch_dr_names").val();

        var pm_second_name = $("#pm_second_name").val();

        var pm_second_gender = $("#pm_second_gender").val();

        var pm_contact_no2 = $("#pm_contact_no2").val();

        var pm_relation = $("#pm_relation").val();

        var pm_address = $("#pm_address").val();

        var pm_pincode = $("#pm_pincode").val();

        var pm_area = $("#pm_area").val();

        var pm_city = $("#pm_city").val();

        var pm_district = $("#pm_district").val();

        var pm_state = $("#pm_state").val();

        var pm_country = $("#pm_country").val();


        // if (pm_contact_no == "" && pm_contact_no.length != 10) {
        //     alert("Please enter Valid Contact No.");
        //     $('#pm_contact_no').focus();
        //     return false;
        // // } else if (pm_salutation == "") {
        // //     alert("Please select Salutation.");
        // //     $('#pm_salutation').focus();
        // //     return false;
        // } else 

        if (pm_first_name == "") {
            alert("Please enter First Name.");
            $('#pm_first_name').focus();
            return false;
            // } else if (pm_middle_name == "") {
            //     alert("Please enter Middle Name.");
            //     $('#pm_middle_name').focus();
            //     return false;
        } else if (pm_last_name == "") {
            alert("Please enter Last Name.");
            $('#pm_last_name').focus();
            return false;
        } else if ($(".pm_gender:checked").length == 0) {
            alert("Please select Gender.");
            $('.pm_gender').focus();
            return false;
        } else if (pm_dob == "") {
            alert("Please enter Date OF Birth.");
            $('#pm_dob').focus();
            return false;
            // } else if (pm_email == "") {
            //     alert("Please enter Email.");
            //     $('#pm_email').focus();
            //     return false;
        } else if (pm_contact_no == "" && pm_contact_no.length != 10) {
            alert("Please enter Valid Contact No.");
            $('#pm_contact_no').focus();
            return false;
            // } else if (pm_second_name == "") {
            //     alert("Please enter Secondary Name.");
            //     $('#pm_second_name').focus();
            //     return false;
            // } else if (pm_second_gender == "") {
            //     alert("Please select Secondary Gender.");
            //     $('#pm_second_gender').focus();
            //     return false;
            // } else if (pm_contact_no2 == "") {
            //     alert("Please enter Phone Number.");
            //     $('#pm_contact_no2').focus();
            //     return false;
            // } else if (pm_relation == "") {
            //     alert("Please enter Relationship.");
            //     $('#pm_relation').focus();
            //     return false;
            // } else if (pm_address == "") {
            //     alert("Please enter Address.");
            //     $('#pm_address').focus();
            //     return false;
            // } else if (pm_pincode == "") {
            //     alert("Please enter Pincode.");
            //     $('#pm_pincode').focus();
            //     return false;
            // } else if (pm_city == "") {
            //     alert("Please enter City.");
            //     $('#pm_city').focus();
            //     return false;
            // } else if (pm_district == "") {
            //     alert("Please enter District.");
            //     $('#pm_district').focus();
            //     return false;
            // } else if (pm_state == "") {
            //     alert("Please enter State.");
            //     $('#pm_state').focus();
            //     return false;
            // } else if (pm_country == "") {
            //     alert("Please enter Country.");
            //     $('#pm_country').focus();
            //     return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_new_patient').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result) {

                window.location.href = "book_appointment.php?id=" + result + "&type=new";

            } else {
                $('#submit_new_patient').removeAttr('disabled');

            }

        });

    });

    $(document).on('click', '.pm_dnd', function (e) {

        if ($(".pm_dnd").is(":checked")) {

            $(".pm_dnd").val("1");

        } else {
            $(".pm_dnd").val("0");
        }
    });

    $(document).on("change", "#dr_dashboard_date", function () {

        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + month + day;
        var Link = $(".base_url_practice").val();
        window.location.href = Link + 'dr_dashboard.php?date=' + last_date;
    });

    $(document).on("change", ".pr_select", function () {

        var onid = $(this).attr("data-id");
        var status_val = $(this).val();
        //alert(onid);
        //alert(status_val);

        $.ajax({
            type: 'post',
            url: $(".base_url_practice").val() + 'action/change_status.php',
            data: {
                status: status_val,
                app_id: onid,

            },
            success: function (response) {

                if (status_val.trim() == "3") {
                    $("#change_status_div_" + onid).html('<span class="selectpickrcustomtag finished">Finished</span>');
                    $("#edit_appo_" + onid).css("display", "none");
                    // $("#pr_select_" + onid).prop('disabled', true);
                    // $("#pr_select_" + onid +"_chosen .chosen-select-tag").attr('disabled', true)

                } else if (status_val.trim() == "4") {

                    $("#change_status_div_" + onid).html('<span class="selectpickrcustomtag cancelled">Cancelled</span>');
                    $("#edit_appo_" + onid).css("display", "none");
                    // $("#pr_select_" + onid).prop('disabled', true);
                    //$("#reschedule_"+onid).show();

                } else {

                    $("#pr_select_" + onid).prop('disabled', false);

                }

                if (status_val.trim() == "1") {
                    $("#select_" + onid).addClass("arrived");
                    $("#select_" + onid).removeClass("engaged");
                    $("#select_" + onid).removeClass("scheduled");
                } else if (status_val.trim() == "2") {
                    $("#select_" + onid).addClass("engaged");
                    $("#select_" + onid).removeClass("arrived");
                    $("#select_" + onid).removeClass("scheduled");
                } else if (status_val.trim() == "0") {
                    $("#select_" + onid).addClass("scheduled");
                    $("#select_" + onid).removeClass("arrived");
                    $("#select_" + onid).removeClass("engaged");
                }


            }
        });

    });;

    $("#srch_dr_names").autocomplete({

        source: $(".base_url_practice").val() + 'action/get_referance_details_from_name.php',
        minLength: 1,


        focus: function (event, ui) {
            event.preventDefault();
            $("#srch_dr_names").val(ui.item.value);
            return false;

            $('#srch_dr_names').trigger('click');

        },

        change: function (event, ui) {
            if (!ui.item) {
                $('#srch_dr_names').val("");
            }
        },

        select: function (event, ui) {
            event.preventDefault();
            $('#ref_id').val(ui.item.rm_id);
            $("#doc_phone").val(ui.item.doc_phone);
            $("#other_ref").val(ui.item.other_ref);

            $('#srch_dr_names').attr('readonly', true);

            $("#add_referance").hide();
            $("#remove_ref").show();

            return false;
        }

    });

    $(document).on("click", "#remove_ref", function () {

        $('#srch_dr_names').attr('readonly', false);
        $("#srch_dr_names").val("");
        $("#ref_id").val("");
        $("#doc_phone").val("");
        $("#other_ref").val("");

        $("#add_referance").show();
        $("#remove_ref").hide();


    });

    $("#add_new_ref_doctor").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#rm_name").val();
        var rm_email = $("#rm_email").val();
        var rm_phone_no = $("#rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_add_ref_doctor').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            $('#submit_add_ref_doctor').removeAttr('disabled');
            $('#addnewreference').modal('hide');

            $('#srch_dr_names').attr('readonly', true);
            $("#srch_dr_names").val(result['ref_name']);
            $("#ref_id").val(result['ref_id']);
            $("#doc_phone").val(result['ref_phone']);
            $("#other_ref").val("0");

            $("#add_referance").hide();
            $("#remove_ref").show();

            $("#add_new_ref_doctor").trigger("reset");




        });

    });

    $("#edit_patient_book_appointment").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var date = $("#date").val();
        var time = $("#time").val();
        var pm_case_type = $("#pm_case_type").val();

        if (date == "") {
            alert("Please enter date.");
            $('#date').focus();
            return false;
        } else if (time == "") {
            alert("Please enter time.");
            $('#time').focus();
            return false;
        } else if (pm_case_type == "") {
            alert("Please select case type.");
            $('#time').focus();
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_edit_profile_data').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#bookapp').modal('show');
            var splitted1 = result.split("@");
            var name_msg = splitted1[0];
            var time_doc = splitted1[1];
            var date_show = splitted1[2];
            $('.name_with_msg').html(name_msg + ' Appointment Booked Successfully.');
            $('.time_doc').html(time_doc);
            $('.date_show').html(date_show);

        });

    });

    $("#edit_new_patient").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var AbhaEnable = $(".AbhaEnable").val();

        if (AbhaEnable == "Y") {

            $(".abha_address_error").hide().html("");

            if ($("#pm_abha_address").val() != "" && $("#pm_abha_verify").val() == 0) {

                $("#pm_abha_address").focus();
                alert("Please Verify Abha Address");
                return false;

            } else {

            }
        }

        var pm_ref_id = $("#pm_ref_id").val();

        var pm_salutation = $("#pm_salutation").val();

        var pm_first_name = $("#pm_first_name").val();

        var pm_middle_name = $("#pm_middle_name").val();

        var pm_last_name = $("#pm_last_name").val();

        var pm_gender = $(".pm_gender").val();

        var pm_dob = $("#pm_dob").val();

        var pm_contact_no = $("#pm_contact_no").val();

        var pm_email = $("#pm_email").val();

        var pm_dnd = $("#pm_dnd").val();

        var srch_dr_names = $("#srch_dr_names").val();

        var pm_second_name = $("#pm_second_name").val();

        var pm_second_gender = $("#pm_second_gender").val();

        var pm_contact_no2 = $("#pm_contact_no2").val();

        var pm_relation = $("#pm_relation").val();

        var pm_address = $("#pm_address").val();

        var pm_pincode = $("#pm_pincode").val();

        var pm_area = $("#pm_area").val();

        var pm_city = $("#pm_city").val();

        var pm_district = $("#pm_district").val();

        var pm_state = $("#pm_state").val();

        var pm_country = $("#pm_country").val();


        // if (pm_contact_no == "" && pm_contact_no.length != 10) {
        //     alert("Please enter Valid Contact No.");
        //     $('#pm_contact_no').focus();
        //     return false;
        // // } else if (pm_salutation == "") {
        // //     alert("Please select Salutation.");
        // //     $('#pm_salutation').focus();
        // //     return false;
        // } else 

        if (pm_first_name == "") {
            alert("Please enter First Name.");
            $('#pm_first_name').focus();
            return false;
            // } else if (pm_middle_name == "") {
            //     alert("Please enter Middle Name.");
            //     $('#pm_middle_name').focus();
            //     return false;
        } else if (pm_last_name == "") {
            alert("Please enter Last Name.");
            $('#pm_last_name').focus();
            return false;
        } else if ($(".pm_gender:checked").length == 0) {
            alert("Please select Gender.");
            $('.pm_gender').focus();
            return false;
        } else if (pm_dob == "") {
            alert("Please enter Date OF Birth.");
            $('#pm_dob').focus();
            return false;
            // } else if (pm_email == "") {
            //     alert("Please enter Email.");
            //     $('#pm_email').focus();
            //     return false;
        } else if (pm_contact_no == "" && pm_contact_no.length != 10) {
            alert("Please enter Valid Contact No.");
            $('#pm_contact_no').focus();
            return false;
            // } else if (pm_second_name == "") {
            //     alert("Please enter Secondary Name.");
            //     $('#pm_second_name').focus();
            //     return false;
            // } else if (pm_second_gender == "") {
            //     alert("Please select Secondary Gender.");
            //     $('#pm_second_gender').focus();
            //     return false;
            // } else if (pm_contact_no2 == "") {
            //     alert("Please enter Phone Number.");
            //     $('#pm_contact_no2').focus();
            //     return false;
            // } else if (pm_relation == "") {
            //     alert("Please enter Relationship.");
            //     $('#pm_relation').focus();
            //     return false;
            // } else if (pm_address == "") {
            //     alert("Please enter Address.");
            //     $('#pm_address').focus();
            //     return false;
            // } else if (pm_pincode == "") {
            //     alert("Please enter Pincode.");
            //     $('#pm_pincode').focus();
            //     return false;
            // } else if (pm_city == "") {
            //     alert("Please enter City.");
            //     $('#pm_city').focus();
            //     return false;
            // } else if (pm_district == "") {
            //     alert("Please enter District.");
            //     $('#pm_district').focus();
            //     return false;
            // } else if (pm_state == "") {
            //     alert("Please enter State.");
            //     $('#pm_state').focus();
            //     return false;
            // } else if (pm_country == "") {
            //     alert("Please enter Country.");
            //     $('#pm_country').focus();
            //     return false;
        } else {

        }

        var type = $("#type").val();
        var encode_patient_unique_id = $("#encode_patient_unique_id").val();

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_edit_patient').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (type == "book_appointment") {
                window.location.href = "book_appointment.php?id=" + encode_patient_unique_id + "&type=new";
            } else {

                if (result == 1) {
                    window.location.href = "appointments.php";
                } else if (result == 2) {
                    window.location.href = "dr_dashboard.php";
                } else if (result == 3) {
                    window.location.href = "all_patients.php";
                } else if (result == 4) {
                    window.location.href = "mytatva_patients.php";
                } else if (result == 22) {
                    var Link = $(".base_url_practice").val();
                    window.location.href = Link + "dashboard.php";
                } else {
                    $('#submit_edit_patient').removeAttr('disabled');
                }
            }

        });

    });

    $(document).on("change", ".change_calender_status", function () {

        var id = $(this).val();
        var onid = $(this).attr("data-id");
        //alert(id);
        var Link = $(".base_url_practice").val();
        window.location.href = Link + "appointments_calendar.php?doc_id=" + onid + "&s_id=" + id;

    });

    $("#patient_master_keyword_textbox").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".otscheduletbl_table .otscheduletbl_tr_row").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $("#patient_master_keyword_textbox").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".otscheduletbl_table .otscheduletbl_tr_row").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $("#drdashboard_followup_custom_datatble").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".followup_table .followup_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $("#search_appointment_patient123").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".appointment_table .appointment_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $("#search_dr_dashboard_patient").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".dr_dashboard_appointment_table .dr_dashboard_appointment_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $(document).on("click", "#reception_remarks", function () {


        var patient_unique_id = $(this).data("id");

        $.ajax({ //ajax form submit
            type: "POST",
            url: "case_manager/action/get_reception_remarks.php?do=get_remarks",
            data: {
                patient_unique_id: patient_unique_id,
            },
        }).done(function (result) {

            $('#patient_uniq_id').val(patient_unique_id);

            $('#reception_remarks_value').html(result.trim());

        });



    });

    $(document).on("click", "#reception_remarks_consult", function () {


        var patient_unique_id = $(this).data("id");

        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/get_reception_remarks.php?do=get_remarks",
            data: {
                patient_unique_id: patient_unique_id,
            },
        }).done(function (result) {

            $('#patient_uniq_id').val(patient_unique_id);

            $('#reception_remarks_value').html(result.trim());

        });



    });



    $(document).on("click", "#add_custom_template_box", function () {
        ////console.log("Yes");
        var title = $(this).attr('data-title');

        $('#submit_button_popup_custom_box').attr('disabled', false);
        $('.err_register').hide();

        if (title == 'examination_box') {
            $('.historyandexamination_modal_title').html('Examination');
            // $('#case_custom_popup_textarea').summernote('code', "");
            $('.examination_template_textbox').show();
            $('.reset-custom-popup').hide();
        } else {
            $('.historyandexamination_modal_title').html('Current Complaint(s) And Examination');
            $('.examination_template_textbox').hide();
            $('.reset-custom-popup').show();
        }
        $('#case_custom_popup_textarea').summernote('code', "");
        $('.todo-list li.bg-purple').removeClass('bg-purple');
        $("#edit_toem_id").val(0);
        $("#toem_template_name").val('');
        $('#pre_cash_casemanage_second_tag_template').html('');
        $('#pre_cash_casemanage_third_tag_template').html('');

        $("#case_template_name").val(title);
        $('#modal_custom_template_box').modal('show');
    });

    $(document).on("click", ".select_casemanager_first_tag", function () {
        ////console.log("Yes");
        // e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_first_tag_" + id).attr('data-title');
        var dp_id = $("#department_id").val();

        var Bold = $("#li_case_first_tag_" + id).attr('data-bold');
        var Italic = $("#li_case_first_tag_" + id).attr('data-italic');
        var Underline = $("#li_case_first_tag_" + id).attr('data-underline');

        var post_url = 'action/action_case_template_casemanage_first_tag.php?do=template'
        var datastring = 'tctf_id=' + id + "&dp_id=" + dp_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#select_tctf_id").val(id);
            $("#pre_cash_casemanage_second_tag_template").html(result.trim());
            $("#pre_cash_casemanage_third_tag_template").html("");
            $("#select_tcts_id").val(0);
            $("#select_tcts_id").val(0);

            // console.log("Title: "+title);
            // console.log("Bold: "+Bold);
            // console.log("Italic: "+Italic);
            // console.log("Underline: "+Underline);

            if (Bold == 1) {
                var FirstBold = '<b>';
                var LastBold = '</b>';
            } else {
                var FirstBold = '';
                var LastBold = '';
            }

            if (Italic == 1) {
                var FirstItalic = '<i>';
                var LastItalic = '</i>';
            } else {
                var FirstItalic = '';
                var LastItalic = '';
            }

            if (Underline == 1) {
                var FirstUnderline = '<u>';
                var LastUnderline = '</u>';
            } else {
                var FirstUnderline = '';
                var LastUnderline = '';
            }

            $("#pre_cash_casemanage_first_tag_template li").removeClass('bg-purple');
            $("#li_case_first_tag_" + id).addClass('bg-purple');

            var cleanText = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#case_custom_popup_textarea').summernote('code').trim();

            if (cleanText == "") {
                $('#case_custom_popup_textarea').summernote('code', "");
            }


            if (cleanText == "") {

                $('#case_custom_popup_textarea').summernote('code', "" + FirstBold + FirstItalic + FirstUnderline + title.replace(/\</g, '< ').replace(/\>/g, '> ') + LastUnderline + LastItalic + LastBold + "");
            } else {

                $('#case_custom_popup_textarea').summernote('code', old_val_html + "<br/>" + FirstBold + FirstItalic + FirstUnderline + title.replace(/\</g, '< ').replace(/\>/g, '> ') + LastUnderline + LastItalic + LastBold + "");
            }

            $.customtemplatecolor();

        });

    });

    $(document).on("click", "#select_casemanager_only_first_tag", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var dp_id = $("#department_id").val();

        var post_url = 'action/action_case_template_casemanage_first_tag.php?do=template'
        var datastring = 'tctf_id=' + id + "&dp_id=" + dp_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#select_tctf_id").val(id);
            $("#pre_cash_casemanage_second_tag_template").html(result.trim());
            $("#pre_cash_casemanage_third_tag_template").html("");
            $("#select_tcts_id").val(0);
            $("#select_tcts_id").val(0);
            $.customtemplatecolor();

        });

    });

    $(document).on("click", ".select_casemanager_second_tag", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var tctf_id = $("#select_tctf_id").val();
        var title = $("#li_case_second_tag_" + id).attr('data-title');
        var dp_id = $("#department_id").val();
        //console.log(dp_id);

        var post_url = 'action/action_case_template_casemanage_second_tag.php?do=template'
        var datastring = 'tcts_id=' + id + "&tctf_id=" + tctf_id + "&dp_id=" + dp_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $("#select_tcts_id").val(id);
            $("#select_tctt_id").val(0);
            $("#pre_cash_casemanage_third_tag_template").html(result.trim());

            $("#pre_cash_casemanage_second_tag_template li").removeClass('bg-purple');
            $("#li_case_second_tag_" + id).addClass('bg-purple');

            var cleanText = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#case_custom_popup_textarea').summernote('code').trim();

            if (cleanText == "") {
                $('#case_custom_popup_textarea').summernote('code', "");
            }

            if (cleanText == "") {
                $('#case_custom_popup_textarea').summernote('code', "&nbsp;&nbsp;&nbsp;" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + "");
            } else {
                $('#case_custom_popup_textarea').summernote('code', old_val_html + "<br/>&nbsp;&nbsp;&nbsp;" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + "");
            }
            $.customtemplatecolor();
        });

    });

    $(document).on("click", ".select_casemanager_only_second_tag", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var tctf_id = $("#select_tctf_id").val();
        var dp_id = $("#department_id").val();
        //console.log(dp_id);

        var post_url = 'action/action_case_template_casemanage_second_tag.php?do=template'
        var datastring = 'tcts_id=' + id + "&tctf_id=" + tctf_id + "&dp_id=" + dp_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#select_tcts_id").val(id);
            $("#select_tctt_id").val(0);
            $("#pre_cash_casemanage_third_tag_template").html(result.trim());
            $.customtemplatecolor();
        });

    });

    $(document).on("click", ".select_casemanager_third_tag", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var tctf_id = $("#select_tctf_id").val();
        var tcts_id = $("#select_tcts_id").val();
        var title = $("#li_case_third_tag_" + id).attr('data-title');
        var dp_id = $("#department_id").val();

        $("#pre_cash_casemanage_third_tag_template li").removeClass('bg-purple');
        $("#li_case_third_tag_" + id).addClass('bg-purple');

        var cleanText = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var old_val_html1 = $('#case_custom_popup_textarea').summernote('code').trim();

        var lastFour = old_val_html1.substr(old_val_html1.length - 4); // => "Tabs1"   
        if (lastFour == "</p>") {
            var old_val_html = old_val_html1.slice(0, -4) + '';
        } else {
            var old_val_html = old_val_html1;
        }

        $("#select_tctt_id").val(id);

        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', "");
        }

        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', "&nbsp;" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + "&nbsp;");
        } else {
            $('#case_custom_popup_textarea').summernote('code', old_val_html + "&nbsp;" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + "&nbsp;");
        }

        $.customtemplatecolor();


    });

    $(document).on("click", ".select_custom_option_in_textarea", function () {
        ////console.log("Yes");

        var special = $(this).attr('data-special');

        if (special == "2") {
            var title = $(this).attr('data-title');
        } else {
            var title1 = $(this).attr('data-title');
            var title = title1.replace(/\</g, '< ').replace(/\>/g, '> ')
        }

        $.customremoveErrorClass();

        var cleanText = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var old_val_html1 = $('#case_custom_popup_textarea').summernote('code').trim();

        var lastFour = old_val_html1.substr(old_val_html1.length - 4); // => "Tabs1"   
        if (lastFour == "</p>") {
            var old_val_html = old_val_html1.slice(0, -4) + '';
        } else {
            var old_val_html = old_val_html1;
        }

        //var old_val_html = old_val_html1.slice(0, -4) + '';
        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', "");
        }

        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', title);
        } else {

            $('#case_custom_popup_textarea').summernote('code', old_val_html + title + "</p>");

            // if (special == "1") {
            //     $('#case_custom_popup_textarea').summernote('code', old_val_html + title + "</p>");
            // } else {
            //     $('#case_custom_popup_textarea').summernote('code', old_val_html + "&nbsp;" + title + "</p>");
            // }
        }

        // $('#case_custom_popup_textarea').summernote('editor.saveRange');
        // // Editor loses selected range (e.g after blur)
        // $('#case_custom_popup_textarea').summernote('editor.restoreRange');
        // $('#case_custom_popup_textarea').summernote('editor.focus');
        // $('#case_custom_popup_textarea').summernote('editor.insertText'," "+title);

        $("#text_case_first_tag").val("");
        $("#text_case_second_tag").val("");
        $("#text_case_third_tag").val("");

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

    });

    $(document).on("click", "#submit_button_popup_custom_box", function () {
        ////console.log("Yes"); 
        var save_examination = true;

        var template_box = $("#case_template_name").val();
        var new_val_html = $('#case_custom_popup_textarea').summernote('code').trim();
        if (template_box == "history_box") {
            var cleanText = $("#tcm_history_box").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_history_box').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_history_box').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_history_box').summernote('code', new_val_html);
            } else {
                $('#tcm_history_box').summernote('code', old_val_html + new_val_html);
            }
        } else if (template_box == "examination_box") {



            var toem_template_name_textbox = $('#toem_template_name').val();

            if (toem_template_name_textbox == "") {

                var cleanText = $("#tcm_examination_box").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
                var old_val_html = $('#tcm_examination_box').summernote('code').trim();

                if (cleanText == "") {
                    $('#tcm_examination_box').summernote('code', "");
                }

                if (cleanText == "") {
                    $('#tcm_examination_box').summernote('code', new_val_html);
                } else {
                    $('#tcm_examination_box').summernote('code', old_val_html + new_val_html);
                }

            } else {

            }

            var save_examination = $.savecaseExaminationTemplate();


        } else {
            var cleanText = $("#tcm_permanent_history").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_permanent_history').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_permanent_history').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_permanent_history').summernote('code', new_val_html);
            } else {
                $('#tcm_permanent_history').summernote('code', old_val_html + new_val_html);
            }
        }



        $('#modal_custom_template_box').modal('show');
        $("#pre_cash_casemanage_second_tag_template").html("");
        $("#pre_cash_casemanage_third_tag_template").html("");
        $("#form_modal_add_popup_custom_box_box").trigger("reset");


        if (template_box == "examination_box" && save_examination == false) {

        } else {

            $('#case_custom_popup_textarea').summernote('code', "");
            $('#modal_custom_template_box').modal('hide');

        }


        $("#select_tctf_id").val(0);
        $("#select_tcts_id").val(0);
        $("#select_tctt_id").val(0);

        $(".li_casemanager_first_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_second_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_third_tag").css({
            'background-color': '#FFFFFF'
        });

        $("#text_case_first_tag").val("");
        $("#text_case_second_tag").val("");
        $("#text_case_third_tag").val("");

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

        $.customremoveErrorClass();

    });


    $.customtemplatedate = function (date) {
        //var date = new Date(date);
        // alert(date);
        var curr_date = date.getDate();
        var curr_month = date.getMonth() + 1; //Months are zero based
        var curr_year = date.getFullYear();

        var Main_Date = curr_date + "/" + curr_month + "/" + curr_year;

        var cleanText = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var old_val_html1 = $('#case_custom_popup_textarea').summernote('code').trim();

        var lastFour = old_val_html1.substr(old_val_html1.length - 4); // => "Tabs1"   
        if (lastFour == "</p>") {
            var old_val_html = old_val_html1.slice(0, -4) + '';
        } else {
            var old_val_html = old_val_html1;
        }

        //var old_val_html = old_val_html1.slice(0, -4) + '';

        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', "");
        }


        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', '&nbsp;' + Main_Date);
        } else {

            $('#case_custom_popup_textarea').summernote('code', old_val_html + "&nbsp;" + Main_Date + "</p>");

        }

        $.customremoveErrorClass();


        $("#text_case_first_tag").val("");
        $("#text_case_second_tag").val("");
        $("#text_case_third_tag").val("");

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

    }

    $.customtemplateyear = function (date) {

        var curr_date = date.getDate();
        var curr_month = date.getMonth() + 1; //Months are zero based
        var curr_year = date.getFullYear();

        var Main_Date = curr_year;

        var cleanText = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var old_val_html1 = $('#case_custom_popup_textarea').summernote('code').trim();

        var lastFour = old_val_html1.substr(old_val_html1.length - 4); // => "Tabs1"   
        if (lastFour == "</p>") {
            var old_val_html = old_val_html1.slice(0, -4) + '';
        } else {
            var old_val_html = old_val_html1;
        }

        //var old_val_html = old_val_html1.slice(0, -4) + '';

        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', "");
        }


        if (cleanText == "") {
            $('#case_custom_popup_textarea').summernote('code', '&nbsp;' + Main_Date);
        } else {

            $('#case_custom_popup_textarea').summernote('code', old_val_html + "&nbsp;" + Main_Date + "</p>");

        }

        $("#text_case_first_tag").val("");
        $("#text_case_second_tag").val("");
        $("#text_case_third_tag").val("");

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

        $.customremoveErrorClass();

    }

    $.customtemplatecolor = function () {

        var select_tctf_id = $("#select_tctf_id").val();
        var select_tcts_id = $("#select_tcts_id").val();
        var select_tctt_id = $("#select_tctt_id").val();

        $(".li_casemanager_first_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_second_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_third_tag").css({
            'background-color': '#FFFFFF'
        });

        $.customremoveErrorClass();


        if (select_tctf_id > 0) {
            // $("#li_case_first_tag_" + select_tctf_id).css({
            //     'background-color': '#b8b8ef'
            // });
        }

        if (select_tcts_id > 0) {
            // $("#li_case_second_tag_" + select_tcts_id).css({
            //     'background-color': '#b8b8ef'
            // });
        }

        if (select_tctt_id > 0) {
            // $("#li_case_third_tag_" + select_tctt_id).css({
            //     'background-color': '#b8b8ef'
            // });
        }

        $("#text_case_first_tag").val("");
        $("#text_case_second_tag").val("");
        $("#text_case_third_tag").val("");

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

    }

    $(document).on("click", ".btn-danger-popup", function () {

        $('#case_custom_popup_textarea').summernote('code', "");
        $("#pre_cash_casemanage_second_tag_template").html("");
        $("#pre_cash_casemanage_third_tag_template").html("");
        $("#form_modal_add_popup_custom_box_box").trigger("reset");
        $('#modal_custom_template_box').modal('hide');
        $("#select_tctf_id").val(0);
        $("#select_tcts_id").val(0);
        $("#select_tctt_id").val(0);

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

        $(".li_casemanager_first_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_second_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_third_tag").css({
            'background-color': '#FFFFFF'
        });

        $("#form_modal_add_popup_case_report_box").trigger("reset");
        $("#select_tcrt_id").val(0);
        $("#select_tcrr_id").val(0);

        $("#pre_cash_casemanage_report_remarks_template").html("");

        $(".li_case_report_title").css({
            'background-color': '#FFFFFF'
        });
        $(".li_case_report_remarks").css({
            'background-color': '#FFFFFF'
        });

        $.customCaseReportremoveErrorClass();

        $(".select_casemanager_refraction_sphere").removeClass('bg-purple');
        $(".select_casemanager_refraction_cylinder").removeClass('bg-purple');
        $(".select_casemanager_refraction_axis").removeClass('bg-purple');
        $(".select_casemanager_refraction_prism").removeClass('bg-purple');
        $(".select_casemanager_refraction_cv").removeClass('bg-purple');

        $(".select_casemanager_auto_eye_refraction_sphere").removeClass('bg-purple');
        $(".select_casemanager_auto_eye_refraction_cylinder").removeClass('bg-purple');
        $(".select_casemanager_auto_eye_refraction_axis").removeClass('bg-purple');

        $(".select_casemanager_near_refraction_sphere").removeClass('bg-purple');
        $(".select_casemanager_near_refraction_cv").removeClass('bg-purple');

        $(".select_casemanager_com_refraction_sphere").removeClass('bg-purple');
        $(".select_casemanager_com_refraction_cv").removeClass('bg-purple');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);


        });

        $(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);

        });

        $('.refraction_plus').removeClass("btn-success").addClass('btn-primary');;
        $('.refraction_minus').removeClass("btn-primary").addClass('btn-success');

        $('.class_type_right').removeClass("btn-primary").addClass('btn-success');;
        $('.class_type_left').removeClass("btn-success").addClass('btn-primary');

        $(".div_type_refraction_left").hide();
        $(".div_type_refraction_right").show();


        $("#add_new_case_medicine_template").trigger("reset");
        $(".medicine_tem_part").html("");

        $.customremoveErrorClass();


    });

    $(document).on("click", ".reset-custom-popup", function () {

        $('#case_custom_popup_textarea').summernote('code', "");
        $("#pre_cash_casemanage_second_tag_template").html("");
        $("#pre_cash_casemanage_third_tag_template").html("");
        $("#form_modal_add_popup_custom_box_box").trigger("reset");
        $("#select_tctf_id").val(0);
        $("#select_tcts_id").val(0);
        $("#select_tctt_id").val(0);

        $("#edit_text_case_first_tag").val("");
        $("#edit_text_case_second_tag").val("");
        $("#edit_text_case_third_tag").val("");

        $(".li_casemanager_first_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_second_tag").css({
            'background-color': '#FFFFFF'
        });
        $(".li_casemanager_third_tag").css({
            'background-color': '#FFFFFF'
        });

        $.customremoveErrorClass();

    });

    $(document).on("click", ".edit_casemanager_first_tag", function (e) {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_first_tag_" + id).attr('data-title');

        $("#edit_text_case_first_tag").val(id);
        $("#text_case_first_tag").val(title);

    });

    $(document).on("click", ".edit_casemanager_second_tag", function (e) {
        // e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_second_tag_" + id).attr('data-title');

        $("#edit_text_case_second_tag").val(id);
        $("#text_case_second_tag").val(title);

    });

    $(document).on("click", ".edit_casemanager_third_tag", function (e) {
        e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_third_tag_" + id).attr('data-title');

        $("#edit_text_case_third_tag").val(id);
        $("#text_case_third_tag").val(title);

    });

    $(document).on("click", ".delete_casemanager_first_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_first_tag.php?do=delete'
        var datastring = 'tctf_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_first_tag_' + id).remove();


        });

    });

    $(document).on("click", ".delete_casemanager_second_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_second_tag.php?do=delete'
        var datastring = 'tcts_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_second_tag_' + id).remove();


        });

    });

    $(document).on("click", ".delete_casemanager_third_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_third_tag.php?do=delete'
        var datastring = 'tctt_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_third_tag_' + id).remove();


        });

    });

    $(document).on("click", "#submit_case_first_tag", function () {

        var text_case_first_tag = $("#text_case_first_tag").val();
        var edit_text_case_first_tag = $("#edit_text_case_first_tag").val();
        var dp_id = $("#department_id").val();

        if (text_case_first_tag == "") {
            alert('Please enter a heading');
            $("#text_case_first_tag").focus();
            $("#div_case_first_tag").addClass("has-error");
            return false;
        } else {

        }


        if (edit_text_case_first_tag == "") {
            var post_url = 'action/action_case_template_casemanage_first_tag.php?do=add'
        } else {
            var post_url = 'action/action_case_template_casemanage_first_tag.php?do=edit'
        }

        $('#submit_case_first_tag').attr('disabled', 'disabled');
        var datastring = 'tohbm_template_name=' + text_case_first_tag + "&department_id=" + dp_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_first_tag,
                tctf_id: edit_text_case_first_tag,
                department_id: dp_id,
            },
        }).done(function (result) {

            //console.log(result);
           
            $("#text_case_first_tag").val("");

            if ($("#edit_text_case_first_tag").val() == "") {

                if ($('#pre_cash_casemanage_first_tag_template .empty_data').length) {

                    $("#pre_cash_casemanage_first_tag_template").html(result);

                } else {

                    $("#pre_cash_casemanage_first_tag_template").prepend(result);

                }

            } else {

                var frstid = $("#edit_text_case_first_tag").val()
                $("#li_case_first_tag_" + frstid).html(result);
                $("#li_case_first_tag_" + frstid).attr('data-title', text_case_first_tag);
            }

            $("#edit_text_case_first_tag").val("");

            var $rows = $('#text_case_first_tag').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_first_tag').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customremoveErrorClass();
            $('#submit_case_first_tag').removeAttr('disabled');
        });

    });

    $(document).on("click", "#submit_case_second_tag", function () {

        var select_tctf_id = $("#select_tctf_id").val();
        var text_case_second_tag = $("#text_case_second_tag").val();
        var edit_text_case_second_tag = $("#edit_text_case_second_tag").val();
        var dp_id = $("#department_id").val();



        if (select_tctf_id == 0) {
            $("#pre_cash_casemanage_second_tag_template").html('<li style="color: grey; font-weight: bold;" class="todo_notes empty_data">Please select a heading</li>')
            return false;
        }

        if (text_case_second_tag == "") {
            $("#div_case_second_tag").addClass("has-error");
            $("#text_case_second_tag").focus();
            return false;
        } else {

        }

        if (edit_text_case_second_tag == "") {
            var post_url = 'action/action_case_template_casemanage_second_tag.php?do=add'
        } else {
            var post_url = 'action/action_case_template_casemanage_second_tag.php?do=edit'
        }
        $('#submit_case_second_tag').attr('disabled', 'disabled');
        var datastring = 'tohbm_template_name=' + text_case_second_tag + "&department_id=" + dp_id + "&tctf_id=" + select_tctf_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_second_tag,
                department_id: dp_id,
                tctf_id: select_tctf_id,
                tcts_id: edit_text_case_second_tag,
            },
        }).done(function (result) {

            //console.log(result);
            
            $("#text_case_second_tag").val("");

            if ($("#edit_text_case_second_tag").val() == "") {
                if ($('#pre_cash_casemanage_second_tag_template .empty_data').length) {

                    $("#pre_cash_casemanage_second_tag_template").html(result);

                } else {
                    $("#pre_cash_casemanage_second_tag_template").prepend(result);
                }
            } else {

                var scdtid = $("#edit_text_case_second_tag").val()
                $("#li_case_second_tag_" + scdtid).html(result);
                $("#li_case_second_tag_" + scdtid).attr('data-title', text_case_second_tag);
            }

            $("#edit_text_case_second_tag").val("");

            var $rows = $('#text_case_second_tag').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_second_tag').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customremoveErrorClass();
            $('#submit_case_second_tag').removeAttr('disabled');
        });

    });

    $(document).on("click", "#submit_case_third_tag", function () {

        var select_tctf_id = $("#select_tctf_id").val();
        var select_tcts_id = $("#select_tcts_id").val();
        var text_case_third_tag = $("#text_case_third_tag").val();
        var edit_text_case_third_tag = $("#edit_text_case_third_tag").val();
        var dp_id = $("#department_id").val();

        if (select_tcts_id == 0) {
            $("#pre_cash_casemanage_third_tag_template").html('<li style="color: grey; font-weight: bold;" class="todo_notes empty_data">Please select a sub-heading</li>')
            return false;
        }

        if (text_case_third_tag == "") {
            $("#div_case_third_tag").addClass("has-error");
            $("#text_case_third_tag").focus();
            return false;
        } else {

        }

        if (edit_text_case_third_tag == "") {
            var post_url = 'action/action_case_template_casemanage_third_tag.php?do=add'
        } else {
            var post_url = 'action/action_case_template_casemanage_third_tag.php?do=edit'
        }
        $('#submit_case_third_tag').attr('disabled', 'disabled');
        var datastring = 'tohbm_template_name=' + text_case_third_tag + "&department_id=" + dp_id + "&tctf_id=" + select_tctf_id + "&tcts_id=" + select_tcts_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_third_tag,
                department_id: dp_id,
                tctf_id: select_tctf_id,
                tcts_id: select_tcts_id,
                tctt_id: edit_text_case_third_tag,
            },
        }).done(function (result) {

            //console.log(result);

            $("#text_case_third_tag").val("");

            if ($("#edit_text_case_third_tag").val() == "") {

                if ($('#pre_cash_casemanage_third_tag_template .empty_data').length) {

                    $("#pre_cash_casemanage_third_tag_template").html(result);

                } else {
                    $("#pre_cash_casemanage_third_tag_template").prepend(result);
                }
            } else {

                var trdtid = $("#edit_text_case_third_tag").val()
                $("#li_case_third_tag_" + trdtid).html(result);
                $("#li_case_third_tag_" + trdtid).attr('data-title', text_case_third_tag);

            }

            $("#edit_text_case_third_tag").val("");

            var $rows = $('#text_case_third_tag').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_third_tag').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customremoveErrorClass();
            $('#submit_case_third_tag').removeAttr('disabled');
        });

    });

    $.customremoveErrorClass = function () {

        $("#div_case_first_tag").removeClass("has-error");
        $("#div_case_second_tag").removeClass("has-error");
        $("#div_case_third_tag").removeClass("has-error");

    }

    /* Sohil Popup js */

    $(document).on('keyup', function (event) {
        if (event.keyCode == 27) {

            //$('.btn-danger-popup-close, .btn-danger-close').click();
            $('.btn-danger-popup-close').click();

            $('.modal').modal('hide');



        }
    });

    $(document).on("click", ".select_case_report_title", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');
        var dp_id = $("#department_id").val();

        $("#select_case_report_title_text").val(title);

        var post_url = 'action/action_case_template_case_report_title.php?do=template'
        var datastring = 'tcrt_id=' + id + "&dp_id=" + dp_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#select_tcrt_id").val(id);
            $("#pre_cash_casemanage_report_remarks_template").html(result.trim());
            $("#select_tcrr_id").val(0);

            $.customrcasereporttemplatecolor();

        });

    });

    $(document).on("click", ".select_case_report_remarks", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');
        var dp_id = $("#department_id").val();

        $("#select_case_report_remarks_text").val(title);

        $("#select_tcrr_id").val(id);

        $.customrcasereporttemplatecolor();

    });

    $.customrcasereporttemplatecolor = function () {

        var select_tcrt_id = $("#select_tcrt_id").val();
        var select_tcrr_id = $("#select_tcrr_id").val();

        $(".li_case_report_title").css({
            'background-color': '#FFFFFF'
        });
        $(".li_case_report_remarks").css({
            'background-color': '#FFFFFF'
        });


        //$.customremoveErrorClass();


        if (select_tcrt_id > 0) {
            $("#li_case_report_title_" + select_tcrt_id).css({
                'background-color': '#b8b8ef'
            });
        }

        if (select_tcrr_id > 0) {
            $("#li_case_report_remarks_" + select_tcrr_id).css({
                'background-color': '#b8b8ef'
            });
        }

        $.customCaseReportremoveErrorClass();


    }

    $.customCaseReportremoveErrorClass = function () {

        $("#div_case_report_title").removeClass("has-error");
        $("#div_case_report_remarks").removeClass("has-error");
    }


    $(document).on("click", "#add_case_reports", function () {
        ////console.log("Yes");
        $('#modal_case_report_box').modal('show');
    });


    $("#form_modal_add_popup_case_report_box").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var select_case_report_title_text = $("#select_case_report_title_text").val();
        var select_case_report_remarks_text = $("#select_case_report_remarks_text").val();


        if (select_case_report_title_text == "") {
            alert("Please Enter Title.");
            $("#select_case_report_title_text").focus();
            return false;
        } else if (select_case_report_remarks_text == "") {
            alert("Please Enter Remarks.");
            $("#select_case_report_remarks_text").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        //console.log(form_data);
        $('#submit_button_popup_case_reports').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            console.log(result);

            $('#submit_button_popup_case_reports').removeAttr('disabled');
            $('#modal_case_report_box').modal('hide');
            $("#form_modal_add_popup_case_report_box").trigger("reset");

            if ($('#add_table_case_reports .dataTables_empty').length) {

                $("#add_table_case_reports").html(result);

            } else {
                $("#add_table_case_reports").prepend(result);
            }

            $("#select_tcrt_id").val(0);
            $("#select_tcrr_id").val(0);

            $("#pre_cash_casemanage_report_remarks_template").html("");

            $(".li_case_report_title").css({
                'background-color': '#FFFFFF'
            });
            $(".li_case_report_remarks").css({
                'background-color': '#FFFFFF'
            });

            $.customCaseReportremoveErrorClass();

        });

    });

    $("#edit_doctor_remarks").submit(function (e) {

        e.preventDefault();
        proceed = true;


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#edit_doctor_submit').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#editdocremarkspopup').modal('hide');
            $('#edit_doctor_submit').removeAttr('disabled');
            $('.pm_doctor_remark').html(result);
        });
    });
    $(document).on("click", "#submit_case_report_title", function () {

        var text_case_report_title = $("#text_case_report_title").val();
        var edit_text_case_report_title = $("#edit_text_case_report_title").val();
        var dp_id = $("#department_id").val();

        if (text_case_report_title == "") {
            $("#text_case_report_title").focus();
            $("#div_case_report_title").addClass("has-error");
            return false;
        } else {

        }

        if (edit_text_case_report_title == "") {
            var post_url = 'action/action_case_template_case_report_title.php?do=add'
        } else {
            var post_url = 'action/action_case_template_case_report_title.php?do=edit'
        }
        $('#submit_case_report_title').attr('disabled', 'disabled');
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_report_title,
                department_id: dp_id,
                tcrt_id: edit_text_case_report_title,
            },
        }).done(function (result) {

            //console.log(result);

            $("#text_case_report_title").val("");

            if ($("#edit_text_case_report_title").val() == "") {

                if ($('#pre_cash_casemanage_report_title_template .empty_data').length) {

                    $("#pre_cash_casemanage_report_title_template").html(result);

                } else {
                    $("#pre_cash_casemanage_report_title_template").prepend(result);
                }

            } else {

                var frstid = $("#edit_text_case_report_title").val()
                $("#li_case_report_title_" + frstid).html(result);
                $("#li_case_report_title_" + frstid).attr('data-title', text_case_report_title);
            }



            var $rows = $('#text_case_report_title').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_report_title').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customCaseReportremoveErrorClass();
            $('#submit_case_report_title').removeAttr('disabled');
        });

    });

    $(document).on("click", "#doctor_remarks_consult", function () {


        var patient_unique_id = $(this).data("id");

        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/get_reception_remarks.php?do=get_doctor_remarks",
            data: {
                patient_unique_id: patient_unique_id,
            },
        }).done(function (result) {

            $('#patient_uniq_id_doc').val(patient_unique_id);

            $('#doctor_remarks_value').html(result.trim());

        });



    });

    $(document).on("keyup", "#doctor_remarks", function () {


        var remarks = $(this).val();
        var patient_unique_id = $(this).data("id");

        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/action_edit_remarks.php?do=doctor_remarks",
            data: {
                doctor_remarks_value: remarks,
                patient_uniq_id_doc: patient_unique_id,
            },
        }).done(function (result) {


        });



    });

    $(document).on("click", "#edit_document", function () {
        var id = $(this).data("id");
        var document_title = $(this).data("title");
        $('#tcd_id').val(id);
        $('.document_name').html(document_title);

        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/action_document.php?do=get_desc",
            data: {
                id: id,
            },
        }).done(function (result) {

            $('#doc_desc').html(result.trim());
        });
    });
    $(document).on("click", "#submit_case_report_remarks", function () {

        var select_tcrt_id = $("#select_tcrt_id").val();
        var text_case_report_remarks = $("#text_case_report_remarks").val();
        var edit_text_case_report_remarks = $("#edit_text_case_report_remarks").val();
        var dp_id = $("#department_id").val();

        if (select_tcrt_id == 0) {
            $("#pre_cash_casemanage_report_remarks_template").html('<li style="color: grey; font-weight: bold;" class="todo_notes empty_data">Please select a title</li>')
            return false;
        }

        if (text_case_report_remarks == "") {
            $("#text_case_report_remarks").focus();
            $("#div_case_report_remarks").addClass("has-error");
            return false;
        } else {

        }
        if (edit_text_case_report_remarks == "") {
            var post_url = 'action/action_case_template_case_report_remarks.php?do=add'
        } else {
            var post_url = 'action/action_case_template_case_report_remarks.php?do=edit'
        }


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_report_remarks,
                department_id: dp_id,
                select_tcrt_id: select_tcrt_id,
                tcrr_id: edit_text_case_report_remarks,
            },
        }).done(function (result) {

            //console.log(result);

            $("#text_case_report_remarks").val("");

            if ($("#edit_text_case_report_remarks").val() == "") {

                if ($('#pre_cash_casemanage_report_remarks_template .empty_data').length) {

                    $("#pre_cash_casemanage_report_remarks_template").html(result);

                } else {
                    $("#pre_cash_casemanage_report_remarks_template").prepend(result);
                }

            } else {

                var frstid = $("#edit_text_case_report_remarks").val()
                $("#li_case_report_remarks_" + frstid).html(result);
                $("#li_case_report_remarks_" + frstid).attr('data-title', text_case_report_remarks);
            }

            $("#edit_text_case_report_remarks").val("");


            var $rows = $('#text_case_report_remarks').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_report_remarks').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customCaseReportremoveErrorClass();

        });

    });

    $(document).on("click", "#add_allergies", function () {
        ////console.log("Yes");
        $('#modal_add_allergies').modal('show');
    });

    $(document).on("click", "#submit_case_allergies", function () {

        var case_allergy_type = $("#case_allergy_type").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (case_allergy_type == "") {
            alert("Please enter type.");
            return false;
        }

        $('#submit_case_allergies').attr('disabled', 'disabled');


        var post_url = 'action/action_case_allergies.php?do=add'
        var datastring = 'case_allergy_type=' + case_allergy_type + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                case_allergy_type: case_allergy_type,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            $('#submit_case_allergies').removeAttr('disabled');
            $('#modal_add_allergies').modal('hide');

            $("#case_allergy_type").val("");

            if ($('#add_table_allergies .dataTables_empty').length) {

                $("#add_table_allergies").html(result);

            } else {
                //$(this).parent("tr:first").remove()
                $('.click_txt_allergy').parents("tr").remove();
                $("#add_table_allergies").prepend(result);
                // $("#add_table_allergies").prepend('<tr class="tr_text_allergy"><td><input type="text" class="txt-full-refration click_txt_allergy" name="txt_allergy" id="txt_allergy"></td><td>-</td><td>-</td></tr>');
            }
            //location.reload();

        });

    });

    $(document).on("click", "#add_body_com", function () {
        ////console.log("Yes");
        $('#modal_add_body_com').modal('show');
    });

    $(document).on("click", "#submit_case_body_com", function () {

        var height = $("#height").val();
        var weight = $("#weight").val();
        var bmi = $("#bmi").val();
        var bmr = $("#bmr").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = height + weight;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }

        $('#submit_case_body_com').attr('disabled', 'disabled');


        var post_url = 'action/action_case_body_com.php?do=add'
        var datastring = 'height=' + height + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&weight=" + weight;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                height: height,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
                weight: weight,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_add_body_com').modal('hide');
            $('#submit_case_body_com').removeAttr('disabled');

            $("#height").val("");
            $("#weight").val("");
            $("#bmi").val("");
            $("#bmr").val("");

            if ($('#add_table_body_com .dataTables_empty').length) {

                $("#add_table_body_com").html(result);

            } else {

                $('.click_txt_body_com').parents("tr").remove();
                $("#add_table_body_com").prepend(result);
                //$("#add_table_body_com").prepend('<tr class="tr_text_body_com"><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_body_com" name="txt_height" id="txt_height"></td><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_body_com" name="txt_weight" id="txt_weight"></td><td style="width: 15%">-</td><td style="width: 15%">-</td><td style="width: 15%">-</td><td style="width: 15%">-</td><td style="width: 10%">-</td></tr>');


            }

            var bsa = $("#example5").closest('table').find(' tbody tr:eq(1)').find('td:eq(4)').text();
            $("#last_weight").val(weight);
            $("#last_bsa").val(bsa);

        });

    });

    $("#edit_document_form").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#edit_upload_document_submit').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();

        });
    });

    $(document).on("change", "#add_patient_case_document", function (e) {

        e.preventDefault();
        proceed = true;


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_case_document').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#file").val("");
            $('#submit_button_case_document').removeAttr('disabled');
            $('.err_register').hide();
            window.location.reload();
        });
    });
    $(document).on("click", "#add_vitals", function () {
        ////console.log("Yes");
        $('#modal_add_vitals').modal('show');
    });

    $(document).on("click", "#submit_case_vitals", function () {

        var temp = $("#temp").val();
        var resp_rate = $("#resp_rate").val();
        var pres = $("#pres").val();
        var blood_press = $("#blood_press").val();
        var spo2 = $("#spo2").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = temp + resp_rate + pres + blood_press + spo2;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }

        $('#submit_case_vitals').attr('disabled', 'disabled');


        var post_url = 'action/action_case_vitals.php?do=add'
        var datastring = 'temp=' + temp + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&pres=" + pres + "&resp_rate=" + resp_rate + "&blood_press=" + blood_press + "&spo2=" + spo2;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                temp: temp,
                pm_id: pm_id,
                pm_pid: pm_pid,
                pres: pres,
                resp_rate: resp_rate,
                blood_press: blood_press,
                patient_uni_id: patient_uni_id,
                spo2: spo2,
            },
        }).done(function (result) {
            $('#submit_case_vitals').removeAttr('disabled');
            $('#modal_add_vitals').modal('hide');

            $("#temp").val("");
            $("#resp_rate").val("");
            $("#pres").val("");
            $("#blood_press").val("");
            $("#spo2").val("");

            if ($('#add_table_vitals .dataTables_empty').length) {

                $("#add_table_vitals").html(result);

            } else {

                $('.click_txt_vitals').parents("tr").remove();
                $("#add_table_vitals").prepend(result);
                //$("#add_table_vitals").prepend('<tr class="tr_text_vitals"><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_vitals" name="txt_temp" id="txt_temp"></td><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_vitals" name="txt_pulse" id="txt_pulse"></td><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_vitals" name="txt_resp_rate" id="txt_resp_rate"></td><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_vitals" name="txt_blood_press" id="txt_blood_press"></td><td style="width: 15%"><input type="text" class="txt-full-refration click_txt_vitals" name="txt_spo2" id="txt_spo2"></td><td style="width: 15%">-</td><td style="width: 10%">-</td></tr>');

            }
            //location.reload();

        });

    });

    $(document).on("click", "#add_advice", function () {
        ////console.log("Yes");
        $('#modal_add_advice').modal('show');
    });

    // $(document).on("click", "#submit_button_advice", function () {

    //     var toam_template_name = $("#toam_template_name").val();
    //     var toam_template_content = $("#toam_template_content").val();

    //     if (toam_template_name == "") {
    //         alert("Please enter Title.");
    //         return false;
    //     }

    //     var post_url = 'action/action_case_template_advice.php?do=add'
    //     var datastring = 'toam_template_name=' + toam_template_name + "&toam_template_content=" + toam_template_content;
    //     $('#submit_button_advice').attr('disabled', 'disabled');


    //     $.ajax({ //ajax form submit
    //         type: "POST",
    //         url: post_url,
    //         data: {
    //             toam_template_name: toam_template_name,
    //             toam_template_content: toam_template_content,
    //         },
    //     }).done(function (result) {
    //         $('#submit_button_advice').removeAttr('disabled');
    //         $('#modal_add_advice').modal('hide');
    //         $("#pre_cash_advice_template").append(result);

    //         var old_val = $("#tcm_advice").val();
    //         var new_val = $("#toam_template_content").val();
    //         if (old_val == "") {
    //             $("#tcm_advice").val(old_val + new_val);
    //         } else {
    //             $("#tcm_advice").val(old_val + "\n\n" + new_val);
    //         }

    //         $("#form_modal_add_advice").trigger("reset");

    //     });

    // });

    $(document).on("click", "#submit_case_allergies_single", function () {

        var case_allergy_type = $("#case_allergy_type_single").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (case_allergy_type == "") {
            alert("Please enter type.");
            return false;
        }

        var post_url = 'action/action_case_allergies.php?do=add_single'
        var datastring = 'case_allergy_type=' + case_allergy_type + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid;
        $('#submit_case_allergies_single').attr('disabled', 'disabled');
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                case_allergy_type: case_allergy_type,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            $('#submit_case_allergies_single').removeAttr('disabled');
            $('#addallergy').modal('hide');

            $("#case_allergy_type_single").val("");

            if ($('#add_table_allergies .dataTables_wrapper').length) {

                $("#add_table_allergies").html(result);

            } else {
                $("#add_table_allergies").prepend(result);
            }
            window.location.reload();
        });
    });

    $(document).on("click", ".select_template_advice", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_advice.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tcm_advice").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tcm_advice").val(old_val + new_val);
                $("#case_toam_id").val(id);
            } else {
                $("#tcm_advice").val(old_val + "\n" + new_val);
                var old_adv_val = $("#case_toam_id").val();
                $("#case_toam_id").val(old_adv_val + "," + id);
            }

            $(".auto_tcm_advice").animate({
                scrollTop: $('.auto_tcm_advice').prop("scrollHeight")
            }, 800);

        });

    });

    $(document).on("click", ".clear_advice", function () {

        $("#tcm_advice").val("");
        $("#case_toam_id").val("");

    });

    $(document).on("click", "#add_treatment", function () {
        ////console.log("Yes");
        $('#modal_add_treatment').modal('show');
    });

    $(document).on("click", "#submit_button_treatment", function () {

        var totm_template_name = $("#totm_template_name").val();
        var totm_template_content = $("#totm_template_content").val();

        if (totm_template_name == "") {
            alert("Please enter Title.");
            return false;
        }

        var post_url = 'action/action_case_template_treatment.php?do=add'
        var datastring = 'totm_template_name=' + totm_template_name + "&totm_template_content=" + totm_template_content;
        $('#submit_button_treatment').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                totm_template_name: totm_template_name,
                totm_template_content: totm_template_content,
            },
        }).done(function (result) {
            $('#submit_button_treatment').removeAttr('disabled');
            $('#modal_add_treatment').modal('hide');
            $("#pre_cash_treatment_template").prepend(result);

            var old_val = $("#tcm_treatment").val();
            var new_val = $("#totm_template_content").val();
            if (old_val == "") {
                $("#tcm_treatment").val(old_val + new_val);
            } else {
                $("#tcm_treatment").val(old_val + "\n" + new_val);
            }

            $("#add_modal_add_treatment").trigger("reset");

        });

    });

    $(document).on("click", "#delete_popup_allergies", function () {
        $('#modal_delete_allergies_single').modal('show');
        var tca_id = $(this).attr('data-tca_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>allergies</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);
        $('#delete_tca_id').val(tca_id);
    });

    $(document).on("click", "#delete_case_allergies", function () {
        var delete_tca_id = $("#delete_tca_id").val();
        var post_url = 'action/action_case_allergies.php?do=delete'
        var datastring = 'delete_tca_id=' + delete_tca_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tca_id: delete_tca_id,
            },
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_allergies_single').modal('hide');
            // $('#tr_case_allergies_' + delete_tca_id).remove();
            location.reload();
        });
    });
    $(document).on("click", ".select_template_treatment", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_treatment.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tcm_treatment").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tcm_treatment").val(old_val + new_val);

                $("#case_totm_id").val(id);

            } else {
                $("#tcm_treatment").val(old_val + "\n" + new_val);
                var old_adv_val = $("#case_totm_id").val();
                $("#case_totm_id").val(old_adv_val + "," + id);

            }
        });

    });

    $(document).on("click", "#submit_case_vitals_single", function () {

        var temp = $("#temp_single").val();
        var resp_rate = $("#resp_rate_single").val();
        var pres = $("#pres_single").val();
        var blood_press = $("#blood_press_single").val();
        var spo2 = $("#spo2_single").val();
        var pm_pid = $("#pm_pid_single").val();
        var pm_id = $("#pm_id_single").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = temp + resp_rate + pres + blood_press + spo2;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }

        var post_url = 'action/action_case_vitals.php?do=add_single'
        $('#submit_case_vitals_single').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                temp: temp,
                pm_id: pm_id,
                pm_pid: pm_pid,
                pres: pres,
                resp_rate: resp_rate,
                blood_press: blood_press,
                spo2: spo2,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            $('#submit_case_vitals_single').removeAttr('disabled');
            $('#addvitals').modal('hide');

            $("#temp_single").val("");
            $("#resp_rate_single").val("");
            $("#pres_single").val("");
            $("#blood_press_single").val("");
            $("#spo2_single").val("");

            if ($('#add_table_vitals .dataTables_empty').length) {

                $("#add_table_vitals").html(result);

            } else {
                $("#add_table_vitals").prepend(result);
            }
        });
    });
    //location.reload();
    $(document).on("click", ".clear_treatment", function () {

        $("#tcm_treatment").val("");
        $("#case_totm_id").val("");

    });

    $(document).on("click", "#add_case_lab_heading", function () {
        ////console.log("Yes");
        var PmPId = $(this).attr('data-id');
        $("#lab_pm_pid").val(PmPId);

        // var newLabValIdHtml = "";
        // $(".click_txt_default_labreport_id").each(function () {
        //     newLabValIdHtml += '<input type="hidden" name="select_case_lab_parameter[]" value="' + $(this).val() + '">';
        // });

        // //console.log(newLabValIdHtml);

        // $(".defualt_value").html(newLabValIdHtml);

        $('#modal_lab_parameter_template_box').modal('show');
    });

    $(document).on("click", ".select_casemanager_lab_title", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_casemanage_lab_title.php?do=template'
        var datastring = 'tclt_id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#select_tclt_id").val(id);
            $("#pre_cash_casemanage_lab_parameter_template").html(result.trim());
            $("#select_tclp_id").val(0);

            $("#text_case_lab_heading").val("");
            $("#edit_text_case_lab_title").val("");
            $("#text_case_lab_parametre").val("");
            $("#edit_text_case_lab_parametre").val("");

            $("#pre_cash_casemanage_lab_title_template li").removeClass('bg-purple');
            $("#li_case_lab_title_" + id).addClass('bg-purple');

            $.customlabremoveErrorClass();
        });

    });

    $(document).on("click", ".select_casemanager_lab_parameter", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');

        var Array_Old_lab_Para = [];

        $("input.select_case_lab_parameter").each(function () {
            Array_Old_lab_Para.push($(this).val());
        });

        console.log(Array_Old_lab_Para);

        //return false;

        var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=template'
        var datastring = 'tclp_id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            if ($('#pre_cash_casemanage_lab_parameter_selected .empty_data').length) {

                $("#pre_cash_casemanage_lab_parameter_selected").html(result.trim());

            } else {
                $("#pre_cash_casemanage_lab_parameter_selected").append(result.trim());
            }

            $("#text_case_lab_heading").val("");
            $("#edit_text_case_lab_title").val("");
            $("#text_case_lab_parametre").val("");
            $("#edit_text_case_lab_parametre").val("");

            $(".casemanager_lab_parameter_name").animate({
                scrollTop: $('.casemanager_lab_parameter_name').prop("scrollHeight")
            }, 1000);

            $("#pre_cash_casemanage_lab_parameter_template li").removeClass('bg-purple');
            $("#li_case_lab_parameter_" + id).addClass('bg-purple');

            $.customlabremoveErrorClass();

        });

    });

    $(document).on("click", "#delete_popup_vitals", function () {
        $('#modal_delete_vitals_single').modal('show');
        var tcv_id = $(this).attr('data-tcv_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>vitals</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_vitals_text').html(text);
        $('#delete_tcv_id').val(tcv_id);
    });

    $(document).on("click", "#delete_case_vitals", function () {

        var delete_tcv_id = $("#delete_tcv_id").val();
        var post_url = 'action/action_case_vitals.php?do=delete'
        var datastring = 'delete_tcv_id=' + delete_tcv_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_vitals_single').modal('hide');
            // $('#tr_case_vitals_' + delete_tcv_id).remove();
            location.reload();
        });

    });

    $(document).on("click", "#submit_case_body_com_single", function () {

        var height = $("#height_single").val();
        var weight = $("#weight_single").val();
        // var bmi = $("#bmi").val();
        // var bmr = $("#bmr").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = height + weight;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }

        var post_url = 'action/action_case_body_com.php?do=add_single'
        //var datastring= 'height='+height+"&pm_id="+pm_id+"&pm_pid="+pm_pid+"&weight="+weight+"&bmi="+bmi+"&bmr="+bmr;
        var datastring = 'height=' + height + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&weight=" + weight;
        $('#submit_case_body_com_single').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                height: height,
                pm_id: pm_id,
                pm_pid: pm_pid,
                weight: weight,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            $('#submit_case_body_com_single').removeAttr('disabled');
            $('#addbodycomposition').modal('hide');

            $("#height_single").val("");
            $("#weight_single").val("");
            $("#bmi").val("");
            $("#bmr").val("");

            if ($('#add_table_body_com .dataTables_empty').length) {

                $("#add_table_body_com").html(result);

            } else {
                $("#add_table_body_com").prepend(result);
            }
        });
    });
    //location.reload();


    $(document).on("click", "#delete_casemanager_selected_lab_parameter", function () {
        var id = $(this).attr('data-tclpid');
        $("#pre_cash_casemanage_lab_parameter_selected #li_case_selected_lab_parameter_" + id).remove();
        $.customlabremoveErrorClass();

    });

    $(document).on("click", ".edit_casemanager_lab_title_tag", function () {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_lab_title_" + id).attr('data-title');

        console.log("id:" + id);
        console.log("title:" + title);

        $("#edit_text_case_lab_title").val(id);
        $("#text_case_lab_heading").val(title);

    });

    $(document).on("click", ".edit_casemanager_lab_parameter_tag", function () {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_lab_parameter_" + id).attr('data-title');

        console.log("id:" + id);
        console.log("title:" + title);

        $("#edit_text_case_lab_parametre").val(id);
        $("#text_case_lab_parametre").val(title);

    });

    $(document).on("click", ".delete_casemanager_lab_title_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_lab_title.php?do=delete'
        var datastring = 'tclt_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_lab_title_' + id).remove();


        });

    });

    $(document).on("click", "#delete_popup_body_com", function () {
        $('#modal_delete_body_com_single').modal('show');
        var tcbc_id = $(this).attr('data-tcbc_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>Body Composition</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_body_com_text').html(text);
        $('#delete_tcbc_id').val(tcbc_id);
    });

    $(document).on("click", "#delete_case_body_com", function () {
        var delete_tcbc_id = $("#delete_tcbc_id").val();
        var post_url = 'action/action_case_body_com.php?do=delete'
        var datastring = 'delete_tcbc_id=' + delete_tcbc_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_delete_body_com_single').modal('hide');
            $('#tr_case_body_com_' + delete_tcbc_id).remove();
            location.reload();
        });
    });


    $(document).on("click", ".delete_casemanager_lab_parameter_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=delete'
        var datastring = 'tclp_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_lab_parameter_' + id).remove();


        });

    });
    $(document).on("click", "#submit_case_visual_acuity_single", function () {

        var right_eye = $("#right_eye_single").val();
        var left_eye = $("#left_eye_single").val();
        var tcva_date = $("#tcva_date_single").val();
        var tcva_time = $("#tcva_time_single").val();
        var remarks = $("#remarks_single").val();
        var pm_pid = $("#pm_pid_single").val();
        var pm_id = $("#pm_id_single").val();
        var patient_uni_id = $("#patient_uni_id_single").val();

        var all = right_eye + left_eye + tcva_date + tcva_time + remarks;
        var all_variable = all.trim();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#right_eye_single").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#left_eye_single").focus();
            return false;
        }

        if (tcva_date == "") {
            alert("Please enter Date.");
            $("#tcva_date_single").focus();
            return false;
        }

        if (tcva_time == "") {
            alert("Please enter Date Eye.");
            $("#tcva_time_single").focus();
            return false;
        }

        $('#submit_case_visual_acuity_single').attr('disabled', 'disabled');


        var post_url = 'action/action_case_visual_acuity.php?do=add_single'
        var datastring = 'right_eye=' + right_eye + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tcva_date=" + tcva_date + "&left_eye=" + left_eye + "&tcva_time=" + tcva_time + "&remarks=" + remarks + "&patient_uni_id=" + patient_uni_id;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {

                right_eye: right_eye,
                pm_id: pm_id,
                pm_pid: pm_pid,
                left_eye: left_eye,
                tcva_date: tcva_date,
                tcva_time: tcva_time,
                remarks: remarks,
                patient_uni_id: patient_uni_id,
            },

        }).done(function (result) {
            // $('#submit_case_visual_acuity_single').removeAttr('disabled');
            // $('#addvisualacuilty').modal('hide');

            // $("#right_eye_single").val("");
            // $("#left_eye_single").val("");
            // $("#tcva_date_single").val("");
            // $("#tcva_time_single").val("");
            // $("#remarks_single").val("");

            // if ($('#add_table_visual_acuity .dataTables_empty').length) {

            //     $("#add_table_visual_acuity").html(result);

            // } else {
            //     $("#add_table_visual_acuity").prepend(result);
            // }
            location.reload();

        });

    });

    $.customlabremoveErrorClass = function () {

        $("#div_case_lab_heading").removeClass("has-error");
        $("#div_case_lab_parametre").removeClass("has-error");
    }

    $(document).on("click", "#submit_case_lab_heading", function () {

        var text_case_lab_heading = $("#text_case_lab_heading").val();
        var edit_text_case_lab_title = $("#edit_text_case_lab_title").val();

        if (text_case_lab_heading == "") {
            $("#text_case_lab_heading").focus();
            $("#div_case_lab_heading").addClass("has-error");
            return false;
        } else {

        }

        if (edit_text_case_lab_title == "") {
            var post_url = 'action/action_case_template_casemanage_lab_title.php?do=add'
        } else {
            var post_url = 'action/action_case_template_casemanage_lab_title.php?do=edit'
        }

        $('#submit_case_lab_heading').attr('disabled', 'disabled');

        var datastring = 'tohbm_template_name=' + text_case_lab_heading;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_lab_heading,
                tclt_id: edit_text_case_lab_title,
            },
        }).done(function (result) {

            //console.log(result);
            $('#submit_case_lab_heading').removeAttr('disabled');

            $("#text_case_lab_heading").val("");

            if ($("#edit_text_case_lab_title").val() == "") {

                if ($('#pre_cash_casemanage_lab_title_template .empty_data').length) {

                    $("#pre_cash_casemanage_lab_title_template").html(result);

                } else {
                    $("#pre_cash_casemanage_lab_title_template").prepend(result);
                }

            } else {

                var labtitleid = $("#edit_text_case_lab_title").val()
                $("#li_case_lab_title_" + labtitleid).html(result);
                $("#li_case_lab_title_" + labtitleid).attr('data-title', text_case_lab_heading);
            }


            $("#edit_text_case_lab_title").val("");


            var $rows = $('#text_case_lab_heading').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_lab_heading').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customlabremoveErrorClass();


        });

    });

    $(document).on("click", "#delete_popup_visual_acuity", function () {
        $('#modal-danger-case-visual-acuity').modal('show');
        var tcva_id = $(this).attr('data-tcva_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>Visual Acuity</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_visual_acuity_text').html(text);
        $('#delete_tcva_id').val(tcva_id);
    });
    $(document).on("click", "#delete_case_visual_acuity", function () {

        var delete_tcva_id = $("#delete_tcva_id").val();
        var post_url = 'action/action_case_visual_acuity.php?do=delete'
        var datastring = 'delete_tcva_id=' + delete_tcva_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-visual-acuity').modal('hide');
            $('#tr_case_visual_acuity_' + delete_tcva_id).remove();
            location.reload();

        });

    });
    $(document).on("click", "#submit_case_eye_iop_single", function () {

        var right_eye = $("#right_eye_single").val();
        var left_eye = $("#left_eye_single").val();
        var tcei_date = $("#tcei_date_single").val();
        var tcei_time = $("#tcei_time_single").val();
        var remarks = $("#remarks_single").val();
        var pm_pid = $("#pm_pid_single").val();
        var pm_id = $("#pm_id_single").val();
        var patient_uni_id = $("#patient_uni_id_single").val();

        var all = right_eye + left_eye + tcei_date + tcei_time + remarks;
        var all_variable = all.trim();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#right_eye_single").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#left_eye_single").focus();
            return false;
        }

        if (tcei_date == "") {
            alert("Please enter Date.");
            $("#tcei_date_single").focus();
            return false;
        }

        if (tcei_time == "") {
            alert("Please enter Date Eye.");
            $("#tcei_time_single").focus();
            return false;
        }

        $('#submit_case_eye_iop_single').attr('disabled', 'disabled');


        var post_url = 'action/action_case_eye_iop.php?do=add_single'
        var datastring = 'tcei_right_eye=' + right_eye + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tcei_date=" + tcei_date + "&tcei_left_eye=" + left_eye + "&tcei_time=" + tcei_time + "&tcei_remarks=" + remarks + "&patient_uni_id=" + patient_uni_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tcei_right_eye: right_eye,
                pm_id: pm_id,
                pm_pid: pm_pid,
                tcei_left_eye: left_eye,
                tcei_date: tcei_date,
                tcei_time: tcei_time,
                tcei_remarks: remarks,
                patient_uni_id: patient_uni_id,
            },

        }).done(function (result) {
            $('#submit_case_eye_iop_single').removeAttr('disabled');
            $('#addiop').modal('hide');

            $("#right_eye_single").val("");
            $("#left_eye_single").val("");
            $("#tcei_date_single").val("");
            $("#tcei_time_single").val("");
            $("#remarks_single").val("");

            if ($('#add_table_eye_iop .dataTables_empty').length) {

                $("#add_table_eye_iop").html(result);

            } else {
                $("#add_table_eye_iop").prepend(result);
            }
            //location.reload();

        });

    });

    $(document).on("click", "#submit_case_lab_parametre", function () {

        var select_tclt_id = $("#select_tclt_id").val();
        var text_case_lab_parametre = $("#text_case_lab_parametre").val();
        var edit_text_case_lab_parametre = $("#edit_text_case_lab_parametre").val();

        if (select_tclt_id == 0) {
            $("#pre_cash_casemanage_lab_parameter_template").html('<li style="color: grey; font-weight: bold;" class="todo_notes empty_data">Please select a heading</li>')
            return false;
        }

        if (text_case_lab_parametre == "") {
            $("#div_case_lab_parametre").addClass("has-error");
            $("#text_case_lab_parametre").focus();
            return false;
        } else {

        }

        if (edit_text_case_lab_parametre == "") {
            var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=add'
        } else {
            var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=edit'
        }

        $('#submit_case_lab_parametre').attr('disabled', 'disabled');
        var datastring = 'tohbm_template_name=' + text_case_lab_parametre + "&tclt_id=" + select_tclt_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_lab_parametre,
                tclt_id: select_tclt_id,
                tclp_id: edit_text_case_lab_parametre,
            },
        }).done(function (result) {
            $('#submit_case_lab_parametre').removeAttr('disabled');
            //console.log(result);

            $("#text_case_lab_parametre").val("");

            if ($("#edit_text_case_lab_parametre").val() == "") {

                if ($('#pre_cash_casemanage_lab_parameter_template .empty_data').length) {

                    $("#pre_cash_casemanage_lab_parameter_template").html(result);

                } else {
                    $("#pre_cash_casemanage_lab_parameter_template").prepend(result);
                }



            } else {

                var labparaid = $("#edit_text_case_lab_parametre").val()
                $("#li_case_lab_parameter_" + labparaid).html(result);
                $("#li_case_lab_parameter_" + labparaid).attr('data-title', text_case_lab_parametre);
            }


            var $rows = $('#text_case_lab_parametre').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_lab_parametre').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.customlabremoveErrorClass();

        });

    });

    $(document).on("click", "#add_lab_value_historical", function () {
        //var value = $(this).attr("data-value");
        $('#modal_add_lab_value_historical').modal('show');
        ////console.log(value);
        // if (value > 0) {
        //     $('#modal_add_lab_value_historical').modal('show');
        // } else {
        //     $('#modal_para_lab').modal('show');
        // }
        var id = $('#pm_pid').val();
        var patient_uni_id = $('#patient_uni_id').val();

        var post_url = 'action/action_single_case_lab_para.php?do=add_value_popup'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                pm_pid: id,
                patient_uni_id: patient_uni_id,

            },
        }).done(function (result) {

            $("#added_value_lab_case").html(result);

        });
    });

    $(document).on("click", "#edit_lab_value_historical_cm", function () {
        //var value = $(this).attr("data-value");
        $('#modal_edit_lab_value_historical').modal('show');
        ////console.log(value);
        // if (value > 0) {
        //     $('#modal_add_lab_value_historical').modal('show');
        // } else {
        //     $('#modal_para_lab').modal('show');
        // }
        var id = $('#pm_pid').val();
        var patient_uni_id = $('#patient_uni_id').val();
        var main_id = $(this).attr("data-id");

        var post_url = 'action/action_single_case_lab_para.php?do=edit_value_popup_cm'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                pm_pid: id,
                patient_uni_id: patient_uni_id,
                main_id: main_id,
            },
        }).done(function (result) {

            $(".added_value_lab_case_edit").html(result);

        });
    });

    $(document).on("click", "#delete_popup_eye_iop", function () {
        $('#modal-danger-case-eye-iop').modal('show');
        var tcei_id = $(this).attr('data-tcei_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>IOP</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_eye_iop_text').html(text);
        $('#delete_tcei_id').val(tcei_id);
    });

    $(document).on("click", "#delete_case_eye_iop", function () {

        var delete_tcei_id = $("#delete_tcei_id").val();
        var post_url = 'action/action_case_eye_iop.php?do=delete'
        var datastring = 'delete_tcei_id=' + delete_tcei_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-eye-iop').modal('hide');
            $('#tr_case_eye_iop_' + delete_tcei_id).remove();
            location.reload();
        });

    });

    $("#new_lab_para_historical_values_case").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });

        var arr = [];

        var arrayvalues = [];

        $("input.all_lab_para_value_req").each(function () {

            if ($(this).val() == 0) {

                arrayvalues.push('false');

            } else {

                arrayvalues.push('true');
            }
        });

        if (arrayvalues.indexOf("true") === -1) {
            alert('Please enter anyone lab value');
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_new_lab_para_historical_values_case').attr('disabled', 'disabled');
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_new_lab_para_historical_values_case').removeAttr('disabled');

            $('#modal_add_lab_value_historical').modal('hide');
            $('.err_register').hide();

            var pm_pid = $('#pm_pid').val();
            var patient_uni_id = $('#patient_uni_id').val();

            checkedlabid.push(parseInt(result.trim()));

            $.myAllLabParatable(pm_pid, patient_uni_id, checkedlabid);

        });
    });

    $.customnewlabtable = function (pm_pid, patient_uni_id) {

        var pm_pid = pm_pid;
        var patient_uni_id = patient_uni_id;
        var post_url = 'action/add_lab_table.php?do=add_table'
        var datastring = 'pm_pid=' + pm_pid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {

            $(".labreport_table").html(result.trim());

            // $('#labreport_table_case_manager').DataTable({
            //     "paging": false,
            //     "lengthChange": false,
            //     "searching": true,
            //     "ordering": false,
            //     "info": false,
            //     "autoWidth": true,
            //     "responsive": true,
            //    "scrollY":        '10vh', // "scrollX": true,

            //     "bDestroy": true,
            //     "language": {
            //         "emptyTable": "No Lab Reports Added",
            //         searchPlaceholder: "Search",
            //         "sSearch": '<div class="box-tools"> <div class="input-group input-group-sm" style="width: 150px;"> <input type="text" name="table_search" class="form-control pull-right"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button> </div> </div></div>'

            //     },

            // });

        });
    }


    $(document).on("click", "#delete_popup_growth_chart", function () {
        $('#modal-danger-case-growth_chart').modal('show');
        var tcgc_id = $(this).attr('data-tcgc_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>Growth Chart Parameter</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_growth_chart_text').html(text);
        $('#delete_tcgc_id').val(tcgc_id);

    });

    $(document).on("click", "#delete_case_growth_chart", function () {
        var delete_tcgc_id = $("#delete_tcgc_id").val();
        var post_url = 'action/action_case_growth_chart.php?do=delete'
        var datastring = 'delete_tcgc_id=' + delete_tcgc_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-growth_chart').modal('hide');
            $('#tr_case_growth_chart_' + delete_tcgc_id).remove();
            location.reload();
        });
    });

    $(document).on("click", "#submit_filters_all_patient", function () {

        var Link = $(".base_url_practice").val();

        var site_url = Link + "all_patients.php?type=1";

        var Array_hospital_id = [];

        var Array_pc_id = [];

        $.each($(".hopitals_id option:selected"), function () {
            Array_hospital_id.push($(this).val());
        });

        hopitals_idString = Array_hospital_id.join(",");

        if (hopitals_idString != "") {
            hopitals_idString = hopitals_idString;
            var hopitals_idlink = '&hopitals_id=' + hopitals_idString;
        } else {
            hopitals_idString = "";
            var hopitals_idlink = '';
        }

        if ($('#popup_pc_id :selected').length > 0) {

            var selectednumbers = "";
            $('#popup_pc_id :selected').each(function (i, selected) {
                var selecteddia = $(selected).val();
                var replaced = selecteddia.split(' ').join('_');
                selectednumbers += replaced + ",";
            });

            var pc_id = selectednumbers.replace(/,\s*$/, "");
            var pc_idlink = "&pc_id=" + pc_id;
        } else {
            var pc_idlink = '';
        }

        var popup_search_gender = $("input[name='popup_search_gender']:checked").val();
        if (popup_search_gender) {
            popup_search_gender = popup_search_gender;
            var genderlink = '&gender=' + popup_search_gender;
        } else {
            popup_search_gender = "";
            var genderlink = '';
        }

        var popup_search_pincode = $("#popup_search_pincode").val();
        if (popup_search_pincode) {
            popup_search_pincode = popup_search_pincode;
            var pincodelink = '&pincode=' + popup_search_pincode;
        } else {
            popup_search_pincode = "";
            var pincodelink = '';
        }

        // var popup_search_occupation = $("#popup_search_occupation").val();
        // if (popup_search_occupation) {
        //     popup_search_occupation = popup_search_occupation;
        //     var replaced_occupation = popup_search_occupation.split(' ').join('_');
        //     var occupationlink = '&occupation=' + replaced_occupation;
        // } else {
        //     popup_search_occupation = "";
        //     var occupationlink = '';
        // }


        var min_price = $("#min_price").val();
        if (min_price) {
            min_price = min_price;
            var minlink = '&minage=' + min_price;
        } else {
            min_price = "";
            var minlink = '';
        }

        var max_price = $("#max_price").val();
        if (max_price) {
            max_price = max_price;
            var maxlink = '&maxage=' + max_price;
        } else {
            max_price = "";
            var maxlink = '';
        }

        var popup_search_area = $("#popup_search_area").val();
        if (popup_search_area) {
            popup_search_area = popup_search_area;
            var arealink = '&area=' + popup_search_area;
        } else {
            popup_search_area = "";
            var arealink = '';
        }

        var popup_start_date = $("#popup_start_date").val();
        if (popup_start_date) {
            popup_start_date = popup_start_date;
            var startDatelink = '&startdate=' + popup_start_date;
        } else {
            popup_start_date = "";
            var startDatelink = '';
        }

        var popup_end_date = $("#popup_end_date").val();
        if (popup_end_date) {
            popup_end_date = popup_end_date;
            var endDatelink = '&enddate=' + popup_end_date;
        } else {
            popup_end_date = "";
            var endDatelink = '';
        }

        if ($('#popup_search_diagnosis :selected').length > 0) {

            var selectednumbers = "";
            $('#popup_search_diagnosis :selected').each(function (i, selected) {
                var selecteddia = $(selected).val();
                var replaced = selecteddia.split(' ').join('_');
                selectednumbers += replaced + ",";
            });

            var diagnosis = selectednumbers.replace(/,\s*$/, "");
            var diagnosislink = "&diagnosis=" + diagnosis;
        } else {
            var diagnosislink = '';
        }

        // var Main_Link = site_url + hopitals_idlink + genderlink + arealink + minlink + maxlink + startDatelink + endDatelink + occupationlink + pincodelink + diagnosislink + pc_idlink; 

        var Main_Link = site_url + hopitals_idlink + genderlink + arealink + minlink + maxlink + startDatelink + endDatelink + pincodelink + pincodelink + diagnosislink + pc_idlink;

        window.location.href = Main_Link;
    });



    /* patient portal start */

    $("#patient_login_send_otp").submit(function (e) {

        //$.getpatientlist(btoa("9898128608"));
        //$("#verifymodal").modal("show");
        //return false;

        e.preventDefault();
        proceed = true;

        var contact_no = $("#contact_no").val();
        if (contact_no == "") {
            alert("Please enter mobile number.");
            $('#contact_no').focus();
            return false;
        } else if ($.isNumeric(contact_no) == false) {
            alert("Please enter valid mobile number.");
            $('#contact_no').focus();
            return false;
        } else if (contact_no.length < 10 || contact_no.length > 10) {
            alert("Please enter 10 digit valid mobile number.");
            $('#contact_no').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#patient_login_btn').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var filter_result = $.trim(result);
            var split_result = filter_result.split("@@@");
            var flag = split_result[0];

            if (flag == 1) {

                var patient_unique_id = split_result[1];
                window.location.href = "otp_verification.php?q=" + patient_unique_id;

            } else if (flag == 2) {
                alert("mobile number not exists.");
                $('#patient_login_btn').removeAttr('disabled');
                return false;
            } else if (flag == 9) {
                alert("Please enter mobile number.");
                $('#patient_login_btn').removeAttr('disabled');
                return false;
            } else if (flag == 5) {
                alert("something went wrong.");
                $('#patient_login_btn').removeAttr('disabled');
                return false;
            } else {

            }
        });
    });

    $(document).on("click", "#resend_otp_patient", function () {

        $("#first").val('');
        $("#second").val('');
        $("#third").val('');
        $("#fourth").val('');

        $("#resend_otp_patient").addClass("disable");
        var contact_no = $("#contact_no").val();
        var post_url = 'login_cs.php?do=resend_otp'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                contact_no: contact_no
            },
        }).done(function (result) {
            var flag = $.trim(result);
            if (flag == 1) {
                alert("otp resend successfully");
            } else if (flag == 2) {
                alert("something went wrong.");
                return false;
            }
        });

        var i = 60; //second
        (function timer() {
            if (--i < 0) {
                $("#countdown").html('');
                $("#resend_otp_patient").removeClass("disable").addClass("enable");
                return;
            }
            setTimeout(function () {
                $("#countdown").html('New OTP?, try after ' + i + ' secs');
                timer();
            }, 1000);
        })();

    });

    $("#patient_otp_verification").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var first = $("#first").val();
        var second = $("#second").val();
        var third = $("#third").val();
        var fourth = $("#fourth").val();
        var contact_no = $("#contact_no").val();

        var puid = $("#puid").val();


        if (first == "" || second == "" || third == "" || fourth == "") {
            alert("Please enter valid otp.");
            $('#otp_verifi').focus();
            return false;
        } else if ($.isNumeric(first) == false) {
            alert("Please enter valid numeric otp.");
            $('#first').focus();
            return false;
        } else if ($.isNumeric(second) == false) {
            alert("Please enter valid numeric otp.");
            $('#second').focus();
            return false;
        } else if ($.isNumeric(third) == false) {
            alert("Please enter valid numeric otp.");
            $('#third').focus();
            return false;
        } else if ($.isNumeric(fourth) == false) {
            alert("Please enter valid numeric otp.");
            $('#fourth').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#patient_login_btn').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var flag = $.trim(result);
            if (flag == 1) {

                $("#first").val('');
                $("#second").val('');
                $("#third").val('');
                $("#fourth").val('');

                var patient_unique_id = puid;

                if (atob(patient_unique_id) != '0') {

                    var post_url = 'redirect_to_dash.php'
                    var datastring = 'patient_unique_id=' + patient_unique_id;

                    $.ajax({ //ajax form submit
                        type: "POST",
                        url: post_url,
                        data: datastring
                    }).done(function (result) {
                        window.location.href = "patient_dashboard.php";
                    });

                } else {

                    $.getpatientlist(contact_no);
                    $("#verifymodal").modal("show");


                }


            } else if (flag == 2) {
                alert("Wrong Otp.");
                $(".otp_verifi").addClass("focus");
                return false;
            } else {

            }
        });
    });

    $.getpatientlist = function (contact_no) {

        var post_url = 'action/action_get_patient_list.php'
        var datastring = 'contact_no=' + contact_no;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $(".update_patient_list").html(result);
        });

    }



    $(document).on("click", ".redirect-to-dash", function () {

        var patient_unique_id = $(this).val();

        var post_url = 'redirect_to_dash.php'
        var datastring = 'patient_unique_id=' + patient_unique_id;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            window.location.href = "patient_dashboard.php";
        });
    });

    /* patient portal end */

    $("#edit_reception_remarks").submit(function (e) {

        e.preventDefault();
        proceed = true;


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#edit_reception_submit').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#editrecremarkspopup').modal('hide');
            $('#edit_reception_submit').removeAttr('disabled');
            $('.pm_reception_remark').html(result);
        });
    });

    $(document).on("keyup", "#reception_remarks", function () {


        var remarks = $(this).val();
        var patient_unique_id = $(this).data("id");

        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/action_edit_remarks.php?do=reception_remarks",
            data: {
                reception_remarks_value: remarks,
                patient_uniq_id: patient_unique_id,
            },
        }).done(function (result) {


        });



    });

    //     $("#form_modal_add_growth_chart").submit(function (e) {

    //         alert("Hello");
    //         var tcgc_date = $("#tcgc_date").val();

    //         if (tcgc_date == "") {
    //             alert("Please enter Date.");
    //             return false;
    //         }

    //         $('#submit_case_growth_chart_single').attr('disabled', 'disabled');
    //         $('.err_register_add').show();
    //         $.ajax({ //ajax form submit
    //             url: post_url,
    //             type: request_method,
    //             data: form_data,
    //             dataType: "text",
    //             contentType: false,
    //             cache: false,
    //             processData: false
    //         }).done(function (result) {

    // alert(result);
    //             // $('#modal_add_growth_chart_single').modal('hide');

    //             // $('#submit_case_growth_chart_single').removeAttr('disabled');

    //             // $('.err_register_add').hide();

    //             // $("#form_modal_add_growth_chart").trigger("reset");

    //             // if ($('#add_table_growth_chart .dataTables_empty').length) {

    //             //     $("#add_table_growth_chart").html(result);

    //             // } else {
    //             //     $("#add_table_growth_chart").prepend(result);
    //             // }
    //             location.reload();
    //         });
    //     });

    $(document).on("click", "#add_diagnosis_box", function () {
        ////console.log("Yes");
        var dp_id = $("#department_id").val();
        var um_id = $("#um_id").val();

        var post_url = 'action/action_case_diagnosis.php?do=pop_up_data'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                dp_id: dp_id,
                um_id: um_id,
            },
        }).done(function (result) {
            $("#modal_custom_diagnosis_box").modal('show');
            $(".main_diagnosis_html").html(result.trim());
            $("#select_dia_popup").val("");
            $("#select_medicine_template_popup").val(0);
            $("#select_advice_popup").val(0);
            $("#select_investigation_popup").val(0);
            $("#select_dia_popup_id").val(0);

        });

    });

    $(document).on("click", ".select_popup_diagnosis_value", function () {
        var diagnosis_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        var icd_code = $(this).attr('data-icd');
        $("#select_diagnosis_text").val(diagnosis_name);
        $("#select_diagnosis_icd").val(icd_code);
        $("#select_dia_popup").val(diagnosis_name);
        $("#select_dia_popup_id").val(diagnosis_id);
        $.customtdiagnosisemplatecolor();

    });

    $(document).on("click", ".btn-popup-white-medicine", function () {
        var medicine_id = $(this).attr('data-id');
        $("#pre_cash_casemanage_medicine_template_title #li_select_popup_medicine_value_" + medicine_id).addClass('bg-purple');
        $("#pre_cash_casemanage_medicine_template_title .select_popup_medicine_value_" + medicine_id).addClass('btn-popup-purple-medicine');
        $("#pre_cash_casemanage_medicine_template_title .select_popup_medicine_value_" + medicine_id).removeClass('btn-popup-white-medicine');
        $.customtdiagnosisemplatecolor();

    });

    $(document).on("click", ".btn-popup-purple-medicine", function () {
        var medicine_id = $(this).attr('data-id');
        $("#pre_cash_casemanage_medicine_template_title #li_select_popup_medicine_value_" + medicine_id).removeClass('bg-purple');
        $("#pre_cash_casemanage_medicine_template_title .select_popup_medicine_value_" + medicine_id).addClass('btn-popup-white-medicine');
        $("#pre_cash_casemanage_medicine_template_title .select_popup_medicine_value_" + medicine_id).removeClass('btn-popup-purple-medicine');
        $.customtdiagnosisemplatecolor();

    });

    $(document).on("click", ".btn-popup-white-advice", function () {
        var advice_id = $(this).attr('data-id');
        $("#pre_cash_casemanage_advice_title #li_select_popup_advice_value_" + advice_id).addClass('bg-purple');
        $("#pre_cash_casemanage_advice_title .select_popup_advice_value_" + advice_id).addClass('btn-popup-purple-advice');
        $("#pre_cash_casemanage_advice_title .select_popup_advice_value_" + advice_id).removeClass('btn-popup-white-advice');
        $.customtdiagnosisemplatecolor();

    });

    $(document).on("click", ".btn-popup-purple-advice", function () {
        var advice_id = $(this).attr('data-id');
        $("#pre_cash_casemanage_advice_title #li_select_popup_advice_value_" + advice_id).removeClass('bg-purple');
        $("#pre_cash_casemanage_advice_title .select_popup_advice_value_" + advice_id).addClass('btn-popup-white-advice');
        $("#pre_cash_casemanage_advice_title .select_popup_advice_value_" + advice_id).removeClass('btn-popup-purple-advice');
        $.customtdiagnosisemplatecolor();

    });

    $.customtdiagnosisemplatecolor = function () {
        //console.log("Yes");
        var select_dia_popup_id = $("#select_dia_popup_id").val();
        // var select_medicine_template_popup = $("#select_medicine_template_popup").val();
        var select_advice_popup = $("#select_advice_popup").val();
        var select_investigation_popup = $("#select_investigation_popup").val();
        var chkMediArray = [];
        var chkAdviceArray = [];

        $(".select_popup_diagnosis_value_all").removeClass('bg-purple');
        // $(".select_popup_medicine_value").removeClass('bg-purple');
        // $(".select_popup_advice_value").removeClass('bg-purple');
        $(".select_popup_investigation_value").removeClass('bg-purple');

        if (select_dia_popup_id > 0) {
            $("#pre_cash_casemanage_diagnosis_title").find("#li_select_popup_diagnosis_value_" + select_dia_popup_id).addClass('bg-purple');
        }

        $(".btn-popup-purple-medicine").each(function () {
            chkMediArray.push($(this).attr('data-id'));
        });

        var select_medicine_template_popup = chkMediArray.join(',');

        $("#select_medicine_template_popup").val(select_medicine_template_popup);

        $(".btn-popup-purple-advice").each(function () {
            chkAdviceArray.push($(this).attr('data-id'));
        });

        var select_advice_template_popup = chkAdviceArray.join(',');

        $("#select_advice_popup").val(select_advice_template_popup);

        // if (select_medicine_template_popup > 0) {
        //     $("#li_select_popup_medicine_value_" + select_medicine_template_popup + " .select_popup_medicine_value").addClass('bg-purple');
        // }

        // if (select_advice_popup > 0) {
        //     $("#li_select_popup_advice_value_" + select_advice_popup + " .select_popup_advice_value").addClass('bg-purple');
        // }

        if (select_investigation_popup > 0) {
            $("#li_select_popup_investigation_value_" + select_investigation_popup + " .select_popup_investigation_value").addClass('bg-purple');
        }

    }

    $("#form_modal_add_popup_diagnosis_box").submit(function (e) {

        e.preventDefault();

        //  proceed = true;
        var select_diagnosis_text = $("#select_diagnosis_text").val();
        var select_todm_type = $("#select_todm_type").val();


        if (select_diagnosis_text == "") {
            alert("Please Enter Diagnosis Name.");
            $("#select_diagnosis_text").focus();
            return false;
        } else if (select_todm_type == "") {
            alert("Please Enter Diagnosis Type.");
            $("#select_todm_type").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        //console.log(form_data);
        $('#submit_popup_diagnosis_box').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_popup_diagnosis_box').removeAttr('disabled');
            $('#modal_custom_diagnosis_box').modal('hide');
            $("#form_modal_add_popup_diagnosis_box").trigger("reset");

            $.getloadDiagonosis(result['dia_id']);
            if (result['medi_temp_id'] !== "" && result['medi_temp_id'] > "0") {
                $.getloadMultipleMedicinetemplate(result['medi_temp_id']);
            }

            if (result['advice_id'] !== "" && result['advice_id'] > "0") {
                $.getloadMultipleAdvicetemplate(result['advice_id']);
            }
            if (result['investigation_id'] !== "" && result['investigation_id'] > "0") {
                $.getloadInvestigationtemplate(result['investigation_id']);
            }


        });

    });

    $.getloadDiagonosis = function (Id) {

        var id = Id;
        var post_url = 'action/action_case_diagnosis.php?do=get_diagonosis'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'text'
        }).done(function (result) {
            ////console.log(result);

            if ($('#add_table_diagnosis .dataTables_empty').length) {

                $("#add_table_diagnosis").html(result);

            } else {
                $("#add_table_diagnosis").prepend(result);
            }

            $.CustomCashsheetPredictiveJs();

        });
    }

    $.getloadMultipleMedicinetemplate = function (Id) {

        var decode_pm_pid = $("#decode_pm_pid").val();

        var id = Id;
        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();

        var post_url = '../action/action_case_add_multiple_medicine_template.php?do=template&last_weight=' + last_weight + '&last_bsa=' + last_bsa + "&decode_pm_pid=" + decode_pm_pid;
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $(".select_tmm_id").each(function () {
                if ($(this).val() == 0) {
                    var trclass = $(this).closest('tr').attr('id');
                    $('#tr_' + trclass).remove();
                    // alert(trclass);

                }
            });

            $('#medicinetemplatepopup').modal('hide');
            $('#medicine_table_rows').append(result.trim());

            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });

            $('[data-bs-toggle="tooltip"]').on('click', function () {
                $(this).tooltip('hide')
            });

        });
    }

    $.getloadAdvicetemplate = function (Id) {

        var id = Id;

        var post_url = 'action/action_case_template_advice.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tcm_advice").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tcm_advice").val(old_val + new_val);
            } else {
                $("#tcm_advice").val(old_val + "\n" + new_val);
            }
        });
    }

    $.getloadMultipleAdvicetemplate = function (Id) {

        var id = Id;

        var post_url = 'action/action_case_template_advice.php?do=multiple_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var rg = /@@@/g;
            var old_val = $("#tcm_advice").val();
            var new_val1 = result.trim();
            var new_val = new_val1.replace(rg, "\n");
            if (old_val == "") {
                $("#tcm_advice").val(old_val + new_val);
            } else {
                $("#tcm_advice").val(old_val + "\n" + new_val);
            }
        });
    }

    $(document).on("click", "#add_lab_investigation", function () {
        ////console.log("Yes");
        $('#modal_lab_parameter_inves_template_box').modal('show');
        $('.inv_title').html('Add New Investigation');
        $('#edit_toim_id').val(0);
        $('#case_investigation_popup_textarea').summernote('code', "");
        $('#form_modal_add_investigation').attr('action', 'action/action_case_template_investigation.php?do=add');
    });

    $(document).on("click", ".select_casemanager_lab_inves_title", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');

        var post_url = 'action/action_case_template_casemanage_lab_title.php?do=inv_template'
        var datastring = 'tclt_id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#select_tclt_id").val(id);
            $("#pre_cash_casemanage_lab_invs_parameter_template").html(result.trim());

            $("#text_case_inv_lab_heading").val("");
            $("#edit_text_case_inv_lab_title").val("");
            $("#text_case_inv_lab_parametre").val("");
            $("#edit_text_case_inv_lab_parametre").val("");

            $("#pre_cash_casemanage_lab_invs_title_template li").removeClass('bg-purple');
            $("#li_case_lab_inv_title_" + id).addClass('bg-purple');

            var cleanText = $("#case_investigation_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#case_investigation_popup_textarea').summernote('code').trim();

            if (cleanText == "") {
                $('#case_investigation_popup_textarea').summernote('code', "");
            }

            if (cleanText == "") {
                //console.log("cleanText: No");
                //console.log("Title: "+title.replace(/\</g, '< '));
                $('#case_investigation_popup_textarea').summernote('code', "<b>" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + " - </b>");
            } else {

                //console.log("cleanText:Yes");
                //console.log("Title: "+title.replace(/\</g, '< '));
                $('#case_investigation_popup_textarea').summernote('code', old_val_html + "<br/><b>" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + " - </b>");
            }

        });

    });

    $(document).on("click", ".select_casemanager_lab_inves_parameter", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');

        $("#text_case_inv_lab_heading").val("");
        $("#edit_text_case_inv_lab_title").val("");
        $("#text_case_inv_lab_parametre").val("");
        $("#edit_text_case_inv_lab_parametre").val("");

        $("#pre_cash_casemanage_lab_invs_parameter_template li").removeClass('bg-purple');
        $("#li_case_lab_inv_parameter_" + id).addClass('bg-purple');

        $(".casemanager_inv_lab_parameter_name").animate({
            scrollTop: $('.casemanager_inv_lab_parameter_name').prop("scrollHeight")
        }, 1000);

        var cleanText = $("#case_investigation_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var old_val_html = $('#case_investigation_popup_textarea').summernote('code').trim();

        if (cleanText == "") {
            $('#case_investigation_popup_textarea').summernote('code', "");
        }

        if (cleanText == "") {
            $('#case_investigation_popup_textarea').summernote('code', "" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + ",&nbsp;");
        } else {
            $('#case_investigation_popup_textarea').summernote('code', old_val_html + "" + title.replace(/\</g, '< ').replace(/\>/g, '> ') + ",&nbsp;");
        }

    });

    $(document).on("click", "#delete_casemanager_selected_lab_invs_parameter", function () {
        var id = $(this).attr('data-tclpid');
        $("#pre_cash_casemanage_lab_invs_parameter_selected #li_case_selected_lab_parameter_" + id).remove();

    });

    $(document).on("click", "#submit_case_inv_lab_heading", function () {

        var text_case_inv_lab_heading = $("#text_case_inv_lab_heading").val();
        var edit_text_case_inv_lab_title = $("#edit_text_case_inv_lab_title").val();


        if (text_case_inv_lab_heading == "") {
            $("#text_case_inv_lab_heading").focus();
            $("#div_case_inv_lab_heading").addClass("has-error");
            return false;
        } else {

        }

        if (edit_text_case_inv_lab_title == "") {
            var post_url = 'action/action_case_template_casemanage_lab_title.php?do=add_inv'
        } else {
            var post_url = 'action/action_case_template_casemanage_lab_title.php?do=edit_inv'
        }


        var datastring = 'tohbm_template_name=' + text_case_inv_lab_heading;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_inv_lab_heading,
                tclt_id: edit_text_case_inv_lab_title,
            },
        }).done(function (result) {

            //console.log(result);

            $("#text_case_inv_lab_heading").val("");

            if ($("#edit_text_case_inv_lab_title").val() == "") {

                if ($('#pre_cash_casemanage_lab_invs_title_template .empty_data').length) {

                    $("#pre_cash_casemanage_lab_invs_title_template").html(result);

                } else {
                    $("#pre_cash_casemanage_lab_invs_title_template").prepend(result);
                }

            } else {

                var labtitleid = $("#edit_text_case_inv_lab_title").val()
                $("#li_case_lab_inv_title_" + labtitleid).html(result);
                $("#li_case_lab_inv_title_" + labtitleid).attr('data-title', text_case_inv_lab_heading);
            }


            $("#edit_text_case_inv_lab_title").val("");

            var $rows = $('#text_case_inv_lab_heading').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_inv_lab_heading').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.custominvlabremoveErrorClass();

        });

    });

    $(document).on("click", "#submit_case_inv_lab_parametre", function () {

        var select_tclt_id = $("#select_tclt_id").val();
        var edit_text_case_inv_lab_parametre = $("#edit_text_case_inv_lab_parametre").val();
        var text_case_inv_lab_parametre = $("#text_case_inv_lab_parametre").val();

        if (select_tclt_id == 0) {
            $("#pre_cash_casemanage_lab_invs_parameter_template").html('<li style="color: grey; font-weight: bold;" class="todo_notes empty_data">Please select a heading</li>')
            return false;
        }

        if (text_case_inv_lab_parametre == "") {
            $("#div_case_inv_lab_parametre").addClass("has-error");
            $("#text_case_inv_lab_parametre").focus();
            return false;
        } else {

        }

        if (edit_text_case_inv_lab_parametre == "") {
            var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=add_inv'
        } else {
            var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=edit_inv'
        }

        var datastring = 'tohbm_template_name=' + text_case_inv_lab_parametre + "&tclt_id=" + select_tclt_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: text_case_inv_lab_parametre,
                tclt_id: select_tclt_id,
                tclp_id: edit_text_case_inv_lab_parametre,
            },
        }).done(function (result) {

            //console.log(result);

            $("#text_case_inv_lab_parametre").val("");

            if ($("#edit_text_case_inv_lab_parametre").val() == "") {

                if ($('#pre_cash_casemanage_lab_invs_parameter_template .empty_data').length) {

                    $("#pre_cash_casemanage_lab_invs_parameter_template").html(result);

                } else {
                    $("#pre_cash_casemanage_lab_invs_parameter_template").prepend(result);
                }



            } else {

                var labparaid = $("#edit_text_case_inv_lab_parametre").val()
                $("#li_case_lab_inv_parameter_" + labparaid).html(result);
                $("#li_case_lab_inv_parameter_" + labparaid).attr('data-title', text_case_inv_lab_parametre);
            }


            $("#edit_text_case_inv_lab_parametre").val("");

            var $rows = $('#text_case_inv_lab_parametre').closest('.casesheet_template_dual_list').find('.todo-list li');
            var val = $.trim($('#text_case_inv_lab_parametre').val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();

            $.custominvlabremoveErrorClass();

        });

    });

    $.custominvlabremoveErrorClass = function () {

        $("#div_case_inv_lab_heading").removeClass("has-error");
        $("#div_case_inv_lab_parametre").removeClass("has-error");

    }

    $(document).on("click", ".edit_casemanager_lab_inv_title_tag", function () {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_lab_inv_title_" + id).attr('data-title');

        console.log("id:" + id);
        console.log("title:" + title);

        $("#edit_text_case_inv_lab_title").val(id);
        $("#text_case_inv_lab_heading").val(title);

    });

    $(document).on("click", ".edit_casemanager_lab_inv_parameter_tag", function () {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_lab_inv_parameter_" + id).attr('data-title');

        console.log("id:" + id);
        console.log("title:" + title);

        $("#edit_text_case_inv_lab_parametre").val(id);
        $("#text_case_inv_lab_parametre").val(title);

    });

    $(document).on("click", ".delete_casemanager_lab_inv_title_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_lab_title.php?do=delete'
        var datastring = 'tclt_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_lab_inv_title_' + id).remove();


        });

    });

    $(document).on("click", ".delete_casemanager_lab_inv_parameter_tag", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_casemanage_lab_parameter.php?do=delete'
        var datastring = 'tclp_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_lab_inv_parameter_' + id).remove();


        });

    });

    $(document).on("click", "#submit_button_popup_lab_invs_parameter_box", function () {

        var arr = [];

        $(".casemanager_inv_lab_parameter_name").find('.bg-tr').each(function () {

            var MyText = $(this).attr('data-tclpid').trim();
            arr.push(MyText);

        });

        new_val = arr.join();

        if (new_val == "") {
            alert("Please Select Lab Parameter");
            return false;
        } else {

        }

        var post_url = 'action/action_case_investigation.php?do=show_grp'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                new_val: new_val
            },
        }).done(function (result) {

            //console.log(result);

            var old_val = $("#tcm_investigation").val();
            if (old_val == "") {
                $("#tcm_investigation").val(old_val + result.trim());
            } else {
                $("#tcm_investigation").val(old_val + "\n" + result.trim());
            }

            $('#modal_lab_parameter_inves_template_box').modal('hide');
            $("#pre_cash_casemanage_lab_invs_parameter_template").html("");
            $("#pre_cash_casemanage_lab_invs_parameter_selected").html("");
            $("#select_tclt_id").val(0);
            $("#edit_text_case_inv_lab_title").val("");
            $("#edit_text_case_inv_lab_parametre").val("");



        });



    });

    $(document).on("click", "#add_new_folloup_casemanager_template", function () {
        ////console.log("Yes");
        $('#modal_add_new_folloup_casemanager_template').modal('show');
    });

    $(document).on("click", "#add_new_flcare_temp", function () {
        $('#add_new_fl_template').slideToggle('fast');
    });

    $(document).on("change", "#sel_temp", function () {
        var opval = $("#sel_temp").val();
        var temp = $(this).val();
        var con = $(this).find(':selected').attr('data-id')

        if (opval == temp) {
            if (con == '') {
                //alert("dd");
                $('#temp_desc').append(con);
            } else {
                //alert("nn");
                $('#temp_desc').empty();
                $('#temp_desc').append(con);
            }
        }
    });

    $("#add_fllowup_template").submit(function (e) {

        e.preventDefault();
        proceed = true;
        var temp_desc = $("#temp_desc").val();

        if (temp_desc.trim() == "") {
            alert("Please Enter Notes");
            $("#temp_desc").focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();
        $('#submit_button_add_followup_temp_case_manger').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            ////console.log(result);   
            $('#submit_button_add_followup_temp_case_manger').removeAttr('disabled');
            $('#modal_add_new_folloup_casemanager_template').modal('hide');
            $(".dataTables_empty").css("display", "none");
            $("#followup").append(result);
            $("#sel_temp").val("");
            $("#select2-sel_temp-container").html("--Select Template--");
            $("#temp_desc").val("");

            var today = new Date(); //Today's Date
            var requiredDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            //console.log(requiredDate);
            var dd = requiredDate.getDate();
            var mm = requiredDate.getMonth() + 1;
            var y = requiredDate.getFullYear();

            var CurruntDate = dd + '/' + mm + '/' + y;

            $('#sdate').datepicker('update', CurruntDate);
        });
    });

    $(document).on("keyup", ".case_search_medicine", function () {
        var searchString1 = $(this).val();
        var department_id = $("#department_id").val();

        $.ajax({
            type: 'post',
            url: 'action/get_search_medicine_name.php',
            data: {
                p_d_data1: searchString1.trim(),
                department_id: department_id,

            },
            dataType: "text",
            success: function (response) {
                $("#medicine_tenplate").html(response);
            }
        });

    });

    $(document).on("click", "#add_new_medicine_123", function () {
        // //console.log("Yes");
        $('#modal_add_medicine').modal('show');

        var post_url = 'action/action_new_medicine.php?do=all_template'
        //var datastring = 'post=data';
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                post: "data",
            },
        }).done(function (result) {
            $('#select_tmm_tmi_id').html(result.trim());
        });

    });

    $(document).on("change", "#select_tmm_tmi_id", function (e) {

        var id = $(this).val();
        var post_url = 'action/action_new_medicine.php?do=template_title'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#tmm_tmi_english_title").val(result.trim());

        });

    });

    $("#new_case_medicine_form_add_123").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tmm_medicine_name = $("#tmm_medicine_name").val();

        if (tmm_medicine_name == "") {
            alert("Please Enter Medicine Name.");
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_button_add_medicine').attr('disabled', 'disabled');



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_add_medicine').removeAttr('disabled');

            $("#new_case_medicine_form_add").trigger("reset");

            $("#tmm_day_dose").val("");



            $('.err_register').hide();

            $("#tmm_medicine_name").val("");
            $("#tmm_generic").val("");
            $("#tmm_company").val("");

            $('#modal_add_medicine').modal('hide');
            $("#medicine_tenplate").append(result);
            //$("#pre_medicine_template").prepend(result)


        });

    });

    $(document).on("click", "#add_new_medicine_template", function () {
        // //console.log("Yes");
        $('#modal_add_medicine_template').modal('show');
    });

    $(document).on("click", ".casetabid", function () {
        var set_id = $(".nav-pills .active").attr('id');
        console.log(set_id);

        if (set_id == "template-tab") {
            var drId = $("#department_id").val();
            $.myTemplateMedicine(drId);
        }
    });

    $.myTemplateMedicine = function (drId) {

        var post_url = 'action/action_template_add_medicine.php?do=template_medicine'
        var datastring = 'dr_id=' + drId;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $("#pre_medicine_template").html(result);

        });

    }

    $(document).on("click", ".select_single_medicine_in_template", function () {
        var id = $(this).attr('data-id');
        //console.log(id); 
        var post_url = 'action/action_case_add_single_medicine_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $(".medicine_tem_part").append(result);
            $(".medicine_tem_part").animate({
                scrollTop: $('.medicine_tem_part').prop("scrollHeight")
            }, 1000);
        });

    });

    $(document).on("change", ".class_tmm_tmi_id", function (e) {

        var id = $(this).val();
        var mainId = $(this).attr('data-mainid');
        var post_url = 'action/action_new_medicine.php?do=template_title'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#tmm_tmi_english_title_" + mainId).val(result.trim());

        });

    });

    $(document).on('click', '.remove_medicine_name', function () {
        var button_id = $(this).attr("id");
        $('#medicine_name_' + button_id).remove();
        $.CustomCashsheetPredictiveJs();
    });

    $(document).on('click', '.remove_medicine_template', function () {
        var button_id = $(this).attr("id");
        $('#medicine_template_' + button_id).remove();
    });

    $("#add_new_case_medicine_template").submit(function (e) {

        e.preventDefault();

        //  proceed = true;
        var medicine_template_name = $("#medicine_template_name").val();

        if (($(".medicine_temp").length == 0)) {
            alert("Please Select atleast one Medicine.");
            return false;
        } else if (medicine_template_name == "") {
            alert("Please Enter Template Name.");
            $("#medicine_template_name").focus();
            return false;
        } else {

        }

        //return false;
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        ////console.log(form_data);
        $('#submit_button_add_medicine_template').attr('disabled', 'disabled');
        $('.help-block').html('Please wait...');

        $('#submit_button_add_medicine_template').attr('disabled', 'disabled');
        $('#submit_button_add_medicine_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);

            $('#submit_button_add_medicine_template').removeAttr('disabled');
            $('.help-block').html('');

            $('#modal_add_medicine_template').modal('hide');
            $("#disease_template").append(result);

            $("#add_new_case_medicine_template").trigger("reset");
            $(".medicine_tem_part").html("");

            $('#submit_button_add_medicine_template').attr('disabled', false);
            $('#submit_button_add_medicine_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });



    $(document).on("change", "#all_duration_type", function () {

        var all_duration_type = $("#all_duration_type").val();
        $(".all_tmm_duration_type").val(all_duration_type);

        var val = $("#all_days").val();
        var treat_days = $("#treat_days").val();

        if (all_duration_type == "day(s)") {

            var daysval = val;

        } else if (all_duration_type == "week(s)") {

            var daysval = val * 7;

        } else if (all_duration_type == "month(s)") {

            var daysval = val * 28;

        } else if (all_duration_type == "year(s)") {

            var daysval = val * 365;

        } else {
            var daysval = val;
        }

        var days = parseInt(daysval) + parseInt(treat_days);
        ////console.log(days);
        var n = days; //number of days to add. 
        var today = new Date(); //Today's Date
        var requiredDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + n);
        //console.log(requiredDate);
        var dd = requiredDate.getDate();
        var mm = requiredDate.getMonth() + 1;
        var y = requiredDate.getFullYear();

        var someFormattedDate = dd + '/' + mm + '/' + y;
        var date_formate = dd + '-' + mm + '-' + y;
        // var fdate =  $('#fdate').val(someFormattedDate);

        console.log(date_formate);
        $('#fdate').val(date_formate);

    });

    $(document).on("change", "#all_days", function () {
        var val = $("#all_days").val();
        var treat_days = $("#treat_days").val();
        var all_duration_type = $("#all_duration_type").val();

        $(".tcm_tmm_days").val(val);


        if (all_duration_type == "day(s)") {

            var daysval = val;

        } else if (all_duration_type == "week(s)") {

            var daysval = val * 7;

        } else if (all_duration_type == "month(s)") {

            var daysval = val * 28;

        } else if (all_duration_type == "year(s)") {

            var daysval = val * 365;

        } else {
            var daysval = val;
        }

        var days = parseInt(daysval) + parseInt(treat_days);
        ////console.log(days);
        var n = days; //number of days to add. 
        var today = new Date(); //Today's Date
        var requiredDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + n);
        //console.log(requiredDate);
        var dd = requiredDate.getDate();
        var mm = (requiredDate.getMonth() + 1).toString().padStart(2, "0");
        var y = requiredDate.getFullYear();




        var someFormattedDate = dd + '/' + mm + '/' + y;
        var date_formate = dd + '-' + mm + '-' + y;
        // var fdate =  $('#fdate').val(someFormattedDate);
        console.log(date_formate);

        $('#fdate').val(date_formate);


        // var post_url = 'action/action_check_followup_date_availablity.php'
        // var datastring = 'fdate=' + someFormattedDate + '&treat_days=' + val;
        // $.ajax({ //ajax form submit
        //     type: "POST",
        //     url: post_url,
        //     data: datastring
        // }).done(function(result) {
        //     console.log(result);
        //     $('#fdate').val(result); 
        // });

        /**/

    });

    $(document).on("click", "#clear_case_treatment", function () {

        $(".medicine_case_name").html('<div class="inner_medicine_case_name" style="text-align: center;">Select medicine or template</div>');

        $.CustomCashsheetPredictiveJs();

    });

    $(document).on("click", ".select_case_template_name", function () {
        var id = $(this).attr('data-id');

        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();
        var decode_pm_pid = $("#decode_pm_pid").val();

        var post_url = 'action/action_case_add_medicine_template.php?do=template&last_weight=' + last_weight + '&last_bsa=' + last_bsa + "&decode_pm_pid=" + decode_pm_pid;
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            if ($('.medicine_case_name .inner_medicine_case_name').length) {
                $(".medicine_case_name").html(result);
            } else {
                $(".medicine_case_name").append(result);
            }
            $(".medicine_case_name").animate({
                scrollTop: $('.medicine_case_name').prop("scrollHeight")
            }, 1000);
            $(".medicine_case_name").sortable();
            $.CustomCashsheetPredictiveJs();
        });
    });

    $(document).on("click", "#load_previous_prescription", function () {

        var pm_pid = $("#pm_pid").val();
        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();

        var post_url = '../action/action_previous_prescription.php?do=add&last_weight=' + last_weight + '&last_bsa=' + last_bsa;
        var datastring = 'pm_pid=' + pm_pid;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#medicine_table_rows').append(result.trim());

            $(".select_tmm_id").each(function () {
                if ($(this).val() == 0) {
                    var trclass = $(this).closest('tr').attr('id');
                    $('#tr_' + trclass).remove();
                    // alert(trclass);

                }
            });

            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });

            $('[data-bs-toggle="tooltip"]').on('click', function () {
                $(this).tooltip('hide')
            });

            //$.CustomCashsheetPredictiveJs();

        });

    });

    $("#new_patient_case_manager_form_add").submit(function (e) {

        e.preventDefault();
        proceed = true;

        // var case_consultation_type_opt_add = $("#case_consultation_type_opt_add").val();

        // if (case_consultation_type_opt_add == "0") {
        //     alert("Please select Consultation Type");
        //     $("#case_consultation_type_opt_add").focus();
        //     return false;
        // }

        var tcm_history_box = $("#tcm_history_box").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var tcm_examination_box = $("#tcm_examination_box").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var tcm_permanent_history = $("#tcm_permanent_history").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var tcm_treatment = $("#tcm_treatment").val();
        var tcm_investigation = $("#tcm_investigation").val();
        var tcm_advice = $("#tcm_advice").val();
        var fdate = $("#fdate").val();
        var fadvice = $("#fadvice").val();
        //var tcm_profile_date = $("#tcm_profile_date").val();
        var tcm_profile_date = " ";
        var tccr_id = $('input[name="tccr_id[]"]:checked').length;
        var tclvp_id = $('input[name="tclvp_id[]"]:checked').length;
        var tcv_id = $('input[name="tcv_id[]"]:checked').length;
        var tcbc_id = $('input[name="tcbc_id[]"]:checked').length;
        var tcd_id = $('input[name="tcd_id[]"]:checked').length;

        var prescription_box_id = $('#prescription_box_id').length;

        if ($('#pre_cash_ob_history_template').length > 0) {

            var ob_history_values = $('#pre_cash_ob_history_template .empty_data').length;

        } else {

            var ob_history_values = 1;

        }

        var tcva_id = $('input[name="tcva_id[]"]:checked').length;
        var tcei_id = $('input[name="tcei_id[]"]:checked').length;

        var vaccine_id = $('input[name="vaccine_id[]"]:checked').length;
        var tfe = "";

        $("input.txt-fundus-examination").each(function () {

            if ($(this).val() !== "") {

                tfe = "Yes";

            }
        });

        var tse = "";

        $("input.txt-slit-examination").each(function () {

            if ($(this).val() !== "") {

                tse = "Yes";

            }
        });

        var taer = "";

        $("input.txt-auto-eye-refraction").each(function () {

            if ($(this).val() !== "") {

                taer = "Yes";

            }
        });

        if ($('#tcm_tocm_pd').length > 0) {

            var tcm_tocm_pd = $("#tcm_tocm_pd").val();

        } else {

            var tcm_tocm_pd = "";

        }

        if ($('#tcm_tocm_remark').length > 0) {

            var tcm_tocm_remark = $("#tcm_tocm_remark").val();

        } else {

            var tcm_tocm_remark = "";

        }

        if ($('#tcm_auto_eye_referaction_remarks').length > 0) {

            var tcm_auto_eye_referaction_remarks = $("#tcm_auto_eye_referaction_remarks").val();

        } else {

            var tcm_auto_eye_referaction_remarks = "";

        }

        // var rv = "true";

        // if(prescription_box_id > 0) {

        //     var medicine_values = $('#medicine_table_rows tr').length;

        //     if(medicine_values == 0) { 

        //         alert('Please Select medicine.');
        //         return false;
        //     }

        //     $(".select_tmm_id").each(function () {
        //         if ($(this).val() == 0) {
        //             alert('Please Select medicine.');
        //             $(this).focus();
        //             rv = "false";
        //             return false;
        //         }
        //     });

        //     if (rv == "false") {
        //       return false;
        //     }
        // }

        // console.log("tcm_history_box:"+tcm_history_box);
        // console.log("tcm_examination_box:"+tcm_examination_box);
        // console.log("tcm_permanent_history:"+tcm_permanent_history);
        // console.log("tcm_treatment:"+tcm_treatment);
        // console.log("tcm_investigation:"+tcm_investigation);
        // console.log("tcm_advice:"+tcm_advice);
        // console.log("fdate:"+fdate);
        // console.log("fadvice:"+fadvice);
        // console.log("tcm_profile_date:"+tcm_profile_date);
        // console.log("tccr_id:"+tccr_id);
        // console.log("tclvp_id:"+tclvp_id);
        // console.log("tcv_id:"+tcv_id);
        // console.log("tcbc_id:"+tcbc_id);
        // console.log("tcd_id:"+tcd_id);

        // console.log("medicine_values:"+medicine_values);
        // console.log("ob_history_values:"+ob_history_values);
        // console.log("tcva_id:"+tcva_id);
        // console.log("tcei_id:"+tcei_id);
        // console.log("tfe:"+tfe);
        // console.log("vaccine_id:"+vaccine_id);

        // console.log("tse:"+tse);
        // console.log("taer:"+taer);
        // console.log("tcm_tocm_pd:"+tcm_tocm_pd);
        // console.log("tcm_tocm_remark:"+tcm_tocm_remark);
        // console.log("tcm_auto_eye_referaction_remarks:"+tcm_auto_eye_referaction_remarks);

        // if (tcm_history_box == "" && tcm_examination_box == "" && tcm_permanent_history == "" && tcm_treatment == "" && tcm_investigation == "" && tcm_advice == "" && fdate == "" && fadvice == "" && tccr_id == 0 && tclvp_id == 0 && tcv_id == 0 && tcbc_id == 0 && tcd_id == 0 && ob_history_values > 0 && tcva_id == 0 && tcei_id == 0 && tfe == "" && tse == "" && taer == "" && tcm_tocm_pd == "" && tcm_tocm_remark == "" && tcm_auto_eye_referaction_remarks == "" && vaccine_id == 0) {

        //     alert("Please enter something.");
        //     return false;


        // }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_case_manager').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            ////console.log(result);

            var patient_uni_id = $('#patient_uni_id').val();

            var rtn_val = result;
            var Exvalue = rtn_val.split('@');
            var result_one = Exvalue[0];
            var result_two = Exvalue[1];

            if (result_one == 1) {
                // if (typeof case_camp_id == 'undefined' || case_camp_id == 0) {
                //     window.location.href = "casemanager_consultationssummery.php?random_id=" + patient_uni_id;
                // } else {
                //     window.location.href = $(".get_base_url").val() + "camp/camp_case_summary.php?camp_id=" + case_camp_id;
                // }

                var consultation_crmsg = document.getElementById('consultation_crmsg')
                var toast_consultation_crmsg = new bootstrap.Toast(consultation_crmsg)
                toast_consultation_crmsg.show();

                window.location.href = "casemanager_consultationssummery.php?random_id=" + patient_uni_id;
                //$('#submit_button_case_manager').removeAttr('disabled');
            } else if (result_one == 2) {
                $('#submit_button_case_manager').removeAttr('disabled');
                $('.err_register').hide();
                $('.email_validation').addClass('has-error');
                $('#hm_email').focus();
                $('.help-block').html("Email already exist.");
            } else {

            }

        });

    });


    $('.change_clinic_your_doctors').on('change', function () {
        var clinic_id = this.value;
        window.location.href = "patient_dashboard.php?cl=" + clinic_id;
    });

    $('#switch_patient_profile').on('click', function () {
        var contact_no = $(this).attr('data-contact_no');
        $.getpatientlist(contact_no);
        $("#verifymodal").modal("show");
    });


    $(document).on("click", ".click_case_manager_print_box", function () {
        var caseid = $(this).attr("data-caseid");
        var patientid = $(this).attr("data-patientid");
        var language = $('#select_print_language_' + atob(caseid)).val();
        var post_url = 'action/action_case_manager_print_box.php?do=box';
        console.log(caseid);
        console.log(patientid);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                caseid: caseid,
                patientid: patientid,
                language : language
            },
        }).done(function (result) {
            $('#modal_print_casemanager_print').modal('show');
            $(".casemanager_consultationssummery_print_box").html(result);
        });
    });

    $(document).on("click", ".checkallprintoption", function () {

        if ($(this).is(":checked")) {

            $('.print_casesheet_checked_single').attr('checked', true);
        } else {

            $('.print_casesheet_checked_single').attr('checked', false);

        }

    });

    $("#checkallprintoption").click(function () {
        $('input:checkbox').not(this).prop('checked', this.checked);
    });

    $(document).on("submit", "#printoptionsubmit_print", function () {

        //$("#printoptionsubmit_print").submit(function (e) {

        // e.preventDefault();
        // proceed = true;

        if ($('input[type=checkbox][name="printoption[]"]:checked').length == 0) {
            alert("Please select at least one checkbox");
            return false;
        } else {
            $("#modal_print_casemanager_print").modal('hide');
            $("#printoptionsubmit_print").submit();

            //document.getElementById('printpopupclose').click();
            //return true;
        }
    });

    $("#new_patient_case_manager_form_edit").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var case_camp_id = $("#case_camp_id").val();

        var prescription_box_id = $('#prescription_box_id').length;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_case_manager').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            //console.log(result);

            var patient_uni_id = $('#patient_uni_id').val();
            var CaseId = $('#case_id').val();

            if (result.trim() == 1) {
                // if (typeof case_camp_id == 'undefined' || case_camp_id == 0) {
                //     window.location.href = "casemanager_consultationssummery.php?random_id=" + patient_uni_id;
                // } else {
                //     window.location.href = $(".get_base_url").val() + "camp/camp_case_summary.php?camp_id=" + case_camp_id;
                // }

                var consultation_crmsg = document.getElementById('consultation_crmsg')
                var toast_consultation_crmsg = new bootstrap.Toast(consultation_crmsg)
                toast_consultation_crmsg.show();

                window.location.href = "casemanager_consultationssummery.php?random_id=" + patient_uni_id;
                //$('#submit_button_case_manager').removeAttr('disabled');
            } else {
                $('#submit_button_case_manager').removeAttr('disabled');
                $('.err_register').hide();
                $('.email_validation').addClass('has-error');
                $('#hm_email').focus();
                $('.help-block').html("Email already exist.");
            }

        });



    });

    $(document).on("change", "#follow_up_appointment_date", function () {

        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + month + day;
        var Link = $(".base_url_practice").val();
        window.location.href = Link + 'followup_appointments.php?date=' + last_date;
    });

    $(document).on("change", "#dr_dashboard_all_date", function () {

        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + month + day;
        var Link = $(".base_url_practice").val();
        window.location.href = Link + 'dr_all_appointment.php?date=' + last_date;
    });

    $(document).on("change", ".select_calender_doctor", function () {

        var doc_id = $(this).val();
        var Link = $(".base_url_practice").val();
        if (doc_id == 0) {
            window.location.href = Link + 'appointments_calendar.php';
        } else {
            window.location.href = Link + 'appointments_calendar.php?doc_id=' + doc_id;
        }
    });

    $(document).on("click", ".reset-lab-parameter-popup", function () {

        $("#pre_cash_casemanage_lab_parameter_template").html("");
        $("#pre_cash_casemanage_lab_parameter_selected").html("");
        $("#select_tclt_id").val(0);

        $("#edit_text_case_lab_title").val("");
        $("#edit_text_case_lab_parametre").val("");

    });

    $(document).on("click", ".reset-investigation-parameter-popup", function () {

        $("#pre_cash_casemanage_lab_invs_parameter_template").html("");
        $("#pre_cash_casemanage_lab_invs_parameter_selected").html("");
        $("#select_tclt_id").val(0);

        $("#edit_text_case_inv_lab_title").val("");
        $("#edit_text_case_inv_lab_parametre").val("");

    });


    //$(document).on("submit", "#form_modal_add_popup_lab_parameter_box_box123", function (e) {

    $("#form_modal_add_popup_lab_parameter_box_box").submit(function (e) {


        e.preventDefault();
        proceed = true;

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });

        var arr = [];

        $("#pre_cash_casemanage_lab_parameter_selected").find('li').each(function () {

            var MyText = $(this).text().trim();
            arr.push(MyText);

        });

        new_val = arr.join();

        if (new_val == "") {
            alert("Please Select Lab Parameter");
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_button_popup_lab_parameter_box').attr('disabled', 'disabled');



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_popup_lab_parameter_box').removeAttr('disabled');
            $('#modal_lab_parameter_template_box').modal('hide');
            $("#pre_cash_casemanage_lab_parameter_template").html("");
            $("#pre_cash_casemanage_lab_parameter_selected").html("");
            $("#select_tclt_id").val(0);
            $("#edit_text_case_lab_title").val("");
            $("#edit_text_case_lab_parametre").val("");
            $('.err_register').hide();

            // var splitted = result.split("@@@");
            // var added_value = splitted[0];
            // var count_para = splitted[1];
            // var count_new_para = splitted[2];
            // $("#add_lab_value_cm").attr('data-value', count_para.trim());

            // var emails = added_value,
            //     regex = /@/igm,
            //     count = emails.match(regex),
            //     count = (count) ? count.length : 0;

            // if (count == 3) {
            //     var splitted1 = result.split("@@@");
            //     $('#mtable tr').append($("<td>"));
            //     $("tr>td:first").append(splitted1[0]);
            // } else {
            //     var newArray = result.split('@@@');
            //     $("#lab_col").html(result);
            // }

            // $('#tr_lab_reports tr').each(function(i, row) {

            //     //console.log("log");
            //     // $(this).append('<td>-</td>');
            //     // $('#mtable tr:last').before("<td>-</td>");
            //     for (i = 0; i < count_new_para; i++) {
            //         $(this).find('td:last').before('<td>-</td>');
            //     }


            // });




            //$.myLabAllParatable(pm_pid);

            //$(".tr_text_labreport").remove();

            var pm_pid = $("#decode_pm_pid").val();
            var patient_uni_id = $("#patient_uni_id").val();
            $.myAllLabParatable(pm_pid, patient_uni_id, checkedlabid);






            //$(".tr_text_labreport").remove();

        });

        // console.log("Done");
        // return false;

    });

    $.myAllLabParatable = function (pm_pid, patient_uni_id, checkedlabid) {

        var post_url = 'action/add_lab_table.php?do=new_table_all_para_value'
        var datastring = 'pm_pid=' + pm_pid + '&checkedlabid=' + checkedlabid;
        //console.log("checkedlabid:"+checkedlabid);

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                pm_pid: pm_pid,
                checkedlabid: checkedlabid,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {

            $(".labreport_table").html(result.trim());

            $('#mtable1').DataTable({
                "scrollY": 250,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": true,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No lab reports added",
                }
            });

            $('.calender').datepicker({
                autoclose: true
            });

            // $('input[id$="txt_lab_time"]').inputmask(
            //     "hh:mm", {
            //     placeholder: "HH:MM", 
            //     insertMode: false, 
            //     showMaskOnHover: false,
            //     hourFormat: 12
            //   }
            // );


        });

    }

    $("#form_modal_add_growth_chart_new").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tcgc_date = $("#tcgc_date").val();

        if (tcgc_date == "") {
            alert("Please enter Date.");
            return false;
        }

        var tcgc_mid_arm_left = $("#tcgc_mid_arm_left").val();
        if (tcgc_mid_arm_left == "") {
            alert("Please enter Mid Arm (Left).");
            $('#tcgc_mid_arm_left').focus();
            return false;
        }

        var tcgc_mid_arm_right = $("#tcgc_mid_arm_right").val();
        if (tcgc_mid_arm_right == "") {
            alert("Please enter Mid Arm (Right).");
            $('#tcgc_mid_arm_right').focus();
            return false;
        }

        var tcgc_chest = $("#tcgc_chest").val();
        if (tcgc_chest == "") {
            alert("Please enter Chest.");
            $('#tcgc_chest').focus();
            return false;
        }

        var tcgc_head = $("#tcgc_head").val();
        if (tcgc_head == "") {
            alert("Please enter Head.");
            $('#tcgc_head').focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_growth_chart_single').attr('disabled', 'disabled');
        $('.err_register_add').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            // $('#modal_add_growth_chart_single').modal('hide');

            // $('#submit_case_growth_chart_single').removeAttr('disabled');

            // $('.err_register_add').hide();

            // $("#form_modal_add_growth_chart").trigger("reset");

            // if ($('#add_table_growth_chart .dataTables_empty').length) {

            //     $("#add_table_growth_chart").html(result);

            // } else {
            //     $("#add_table_growth_chart").prepend(result);
            // }
            location.reload();
        });

    });

    $("#user_master_form_add_pm").submit(function (e) {

        e.preventDefault();
        proceed = true;


        var ut_id = $("#ut_id").val();
        var dp_id = $("#dp_id").val();
        var um_name = $("#um_name").val();
        var um_email = $("#um_emailid").val();
        var um_contact1 = $("#um_contact1").val();

        if (ut_id == "") {
            alert("Please select User type.");
            $('#ut_id').focus();
            return false;
        } else if (dp_id == "0") {
            alert("Please select Department.");
            $('#dp_id').focus();
            return false;
        } else if (um_name == "") {
            alert("Please enter the Name.");
            $('#um_name').focus();
            return false;
        } else if (um_email == "") {
            alert("Please enter the email id.");
            $('#um_email').focus();
            return false;
        } else if (um_contact1 == "") {
            alert("Please enter the Contact No 1.");
            $('#um_contact1').focus();
            return false;
        } else {

        }

        if (um_contact1.length == 10) {

        } else {
            alert("Please enter 10 digit mobile number.");
            $('#um_contact1').focus();
            return false;

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);


        $('#pm_submit_button').attr('style', 'display: none !important');
        $('.err_register').attr('style', 'display: block !important');

        $('.hdn-contact-error').hide();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result.trim() == 2) {
                alert("Mobile number already exist.");
                //$('.hdn-contact-error').show();
                $('#pm_submit_button').attr('style', 'display: block !important');
                $('.err_register').attr('style', 'display: none !important');


            } else {

                $('.hdn-contact-error').hide();
                $("#practicemodal").modal("show");

                $('#pm_submit_button').attr('style', 'display: block !important');
                $('.err_register').attr('style', 'display: none !important');

            }



        });



    });

    $(document).on("click", ".select_edit_popup_diagnosis", function () {

        var id = $(this).attr('data-tcd_id');
        $('#modal_edit_diagnosis_single').modal('show');

        var post_url = 'action/action_case_diagnosis.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //console.log(result);

            //$('#modal_add_clinic_notes').modal('hide');

            $("#select_tcd_id").val(result['tcd_id']);
            $("#select_tcd_diagnosis_id").val(result['diagnosis']);
            // $( "#select_tcd_diagnosis_id option:selected" ).text(result['diagnosis']);

            $("#select_tcd_diagnosis").val(result['diagnosis']);
            $("#select_icd_code").val(result['icd_code']);
            $("#select_tcd_type").val(result['type']);
            $("#select_tcd_created_by").val(result['created_by']);
            $("#select_tcd_created_date").val(result['tcd_created_date']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_diagnosis", function () {
        $('#modal-danger-case-diagnosis').modal('show');
        var tcd_id = $(this).attr('data-tcd_id');

        var text = "Are you sure you want to delete <b>diagnosis</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);
        $('#delete_tcd_id').val(tcd_id);
    });

    $(document).on("click", "#delete_case_diagnosis", function () {
        var delete_tcd_id = $("#delete_tcd_id").val();
        var post_url = 'action/action_case_diagnosis.php?do=delete'
        var datastring = 'delete_tcd_id=' + delete_tcd_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-diagnosis').modal('hide');
            $('#tr_case_diagnosis_' + delete_tcd_id).remove();
            location.reload();
        });

    });

    $(document).on("click", "#submit_edit_single_diagnosis", function () {

        var tcd_id = $("#select_tcd_id").val();
        var tcd_created_by = $("#select_tcd_created_by").val();
        var tcd_created_date = $("#select_tcd_created_date").val();

        var type = $("#select_tcd_type").val();
        var diagnosis = $("#select_tcd_diagnosis_id").val();
        var icd_code = $("#select_icd_code").val();

        if (type == "") {
            alert("Please enter Type.");
            return false;
        } else if (diagnosis == "") {
            alert("Please enter Diagnosis.");
            return false;
        } else {

        }

        var post_url = 'action/action_case_diagnosis.php?do=edit'
        var datastring = 'type=' + type + "&tcd_id=" + tcd_id + "&diagnosis=" + diagnosis + "&icd_code=" + icd_code + "&tcd_created_date=" + tcd_created_date;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                type: type,
                tcd_id: tcd_id,
                diagnosis: diagnosis,
                icd_code: icd_code,
                tcd_created_date: tcd_created_date,
            },
        }).done(function (result) {
            ////console.log(result);
            var tcd_id = $("#select_tcd_id").val();
            //console.log(tcd_id);
            $('#modal_edit_diagnosis_single').modal('hide');

            $("#tr_case_diagnosis_" + tcd_id).html(result.trim());


            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_single_case_report", function () {
        $('#modal-danger-case-single_report').modal('show');
        var tccr_id = $(this).attr('data-tccr_id');
        var casereportremarks = $(this).attr('data-casereport');

        var text = "Are you sure you want to delete <b>" + casereportremarks + "</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_single_report_text').html(text);
        $('#delete_tccr_id').val(tccr_id);
    });

    $(document).on("click", "#delete_case_single_report", function () {

        var delete_tccr_id = $("#delete_tccr_id").val();
        var post_url = 'action/action_case_report_submit_popup.php?do=delete'
        var datastring = 'delete_tccr_id=' + delete_tccr_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-single_report').modal('hide');
            $('#tr_case_CaseReports_' + delete_tccr_id).remove();
            location.reload();
        });

    });

    $("#patient_portal_patient_book_appointment").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var date = $("#date").val();
        var time = $("#time").val();
        var pm_case_type = $("#pm_case_type").val();
        var time_selected = $('input[name=time]:checked').length;

        var hm_id = $("#hm_id").val();
        var app_doc_id = $("#app_doc_id").val();

        if (hm_id == "0") {
            alert("Please select clinic.");
            $('#hm_id').focus();
            return false;
        } else if (app_doc_id == "0") {
            alert("Please select doctor.");
            $('#app_doc_id').focus();
            return false;
        } else if (date == "") {
            alert("Please enter date.");
            $('#date').focus();
            return false;
        } else if (time_selected == "0") {
            alert("Please select time.");
            $('#time').focus();
            return false;
        } else if (pm_case_type == "") {
            alert("Please select case type.");
            $('#time').focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_appointment').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {


            $('#submit_appointment').attr('disabled', false);
            var trim_result = result.trim();
            if (trim_result == 2) {
                alert("something wrong");
            } else {
                $('#appointmentboookedpopup').modal('show');
                $('#ap_details_show').html(trim_result);
            }

        });

    });

    $(document).on("click", ".cancel_patient_ap", function () {
        $('#cancel_patient_ap_btn').attr('disabled', false);
        var app_id = $(this).attr("data-app_id");
        var patient_unique_id = $(this).attr("data-patient_unique_id");
        $("#cancel_app_id").val(app_id);
        $("#patient_unique_id_app").val(patient_unique_id);
    });

    $("#cancel_patient_ap_form").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#cancel_patient_ap_btn').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            alert("Appointment Cancel Successfully");
            location.reload();

        });
    });

    $("#cancel_patient_ap_form_popup").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#cancel_patient_ap_btn').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            alert("Appointment Cancel Successfully");
            window.location.href = "my_appointments.php";

        });
    });

    $(document).on("submit", "#form_modal_add_single_popup_case_report_box", function (e) {

        e.preventDefault();

        //  proceed = true;
        var select_case_report_title_text = $("#select_case_report_title_text").val();
        var select_case_report_remarks_text = $("#select_case_report_remarks_text").val();


        if (select_case_report_title_text == "") {
            alert("Please Enter Title.");
            $("#select_case_report_title_text").focus();
            return false;
        } else if (select_case_report_remarks_text == "") {
            alert("Please Enter Remarks.");
            $("#select_case_report_remarks_text").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        //console.log(form_data);
        $('#submit_button_popup_single_case_reports').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_popup_single_case_reports').removeAttr('disabled');
            $('#modal_case_report_box').modal('hide');
            $("#form_modal_add_single_popup_case_report_box").trigger("reset");

            if ($('#add_table_case_reports .dataTables_empty').length) {

                $("#add_table_case_reports").html(result);

            } else {
                $("#add_table_case_reports").prepend(result);
            }

            $("#form_modal_add_single_popup_case_report_box").trigger("reset");
            $("#select_tcrt_id").val(0);
            $("#select_tcrr_id").val(0);
            $("#pre_cash_casemanage_report_remarks_template").html("");

            $(".li_case_report_title").css({
                'background-color': '#FFFFFF'
            });
            $(".li_case_report_remarks").css({
                'background-color': '#FFFFFF'
            });

            $.customCaseReportremoveErrorClass();


        });

    });

    $(document).on("submit", "#form_modal_add_popup_lab_parameter_box_box_single", function (e) {

        e.preventDefault();
        proceed = true;

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });

        var arr = [];

        $("#pre_cash_casemanage_lab_parameter_selected").find('li').each(function () {

            var MyText = $(this).text().trim();
            arr.push(MyText);

        });

        new_val = arr.join();

        if (new_val == "") {
            alert("Please Select Lab Parameter");
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_button_popup_lab_parameter_box').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_popup_lab_parameter_box').removeAttr('disabled');
            $('#modal_lab_parameter_template_box').modal('hide');
            $("#pre_cash_casemanage_lab_parameter_template").html("");
            $("#pre_cash_casemanage_lab_parameter_selected").html("");
            $("#select_tclt_id").val(0);
            $("#edit_text_case_lab_title").val("");
            $("#edit_text_case_lab_parametre").val("");
            $('.err_register').hide();

            $("#add_lab_value").attr('data-value', '2');
            $("#add_lab_value_historical").attr('data-value', '2');

            var pm_pid = $("#pm_pid").val();
            var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');
            $.customnewlabtable(pm_pid, patient_uni_id);

        });

    });

    $(document).on("click", "#edit_lab_datetime_case", function () {
        $('#modal_edit_lab_value_date_case').modal('show');
        var id = $(this).attr('data-id');
        var post_url = 'action/action_single_case_lab_para.php?do=edit_value_datetime'
        var datastring = 'id=' + id;
        //alert(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#edit_added_value_datetime_case").html(result);
            // $('.calender').datepicker({
            //     autoclose: true
            // });
            $('.flatpickr').flatpickr({
                disableMobile: "true",
                //maxDate: "today"
              },
            
            );
            $('.flatpickrdate').flatpickr({
                disableMobile: "true",
                enableTime: true,
                noCalendar: true,
                dateFormat: "H:i",
              }
            
            );
        });
    });

    $("#edit_lab_datetime_submit_case").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_button_edit_lab_datetime_case').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#modal_edit_lab_value_date_case').modal('hide');
            $('#submit_button_edit_lab_datetime_case').removeAttr('disabled');
            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');
            $.customnewlabtable(pm_pid, patient_uni_id);
        });
    });

    $(document).on("click", "#submit_button_delete_lab_case_popup", function () {

        var id = $("#delete_lab_id").val();
        var post_url = 'action/action_single_case_lab_para.php?do=delete_lab_para'
        var datastring = 'id=' + id;
        //console.log(post_url);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            ////console.log(result);
            $('#modal_edit_lab_value_date_case').modal('hide');
            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');
            $.customnewlabtable(pm_pid, patient_uni_id);
        });

    });

    $(document).on("click", "#edit_lab_value_historical", function () {
        $('#modal_edit_lab_value_historical').modal('show');
        var id = $(this).attr('data-id');
        var post_url = 'action/action_single_case_lab_para.php?do=edit_value_popup'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#edit_added_value").html(result);
        });
    });

    $("#edit_lab_value_submit_historical").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);            
            $('#modal_edit_lab_value_historical').modal('hide');
            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');
            $.customnewlabtable(pm_pid, patient_uni_id);
        });
    });

    $(document).on("click", "#add_visual_acuity", function () {
        ////console.log("Yes");
        $('#modal_add_visual_acuity').modal('show');
    });

    $(document).on("click", "#submit_btn_visual_acuity", function (event) {

        var right_eye = $("#txt_va_right_eye").val();
        var left_eye = $("#txt_va_left_eye").val();
        var remarks = $("#txt_va_remarks").val();

        var tcva_date = $("#tcva_date").val();
        var tcva_time = $("#tcva_time").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = right_eye + left_eye + pres + remarks;
        var all_variable = all.trim();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#txt_va_right_eye").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#txt_va_left_eye").focus();
            return false;
        }

        if (tcva_date == "") {
            alert("Please enter date.");
            $("#tcva_date").focus();
            return false;
        }

        if (tcva_time == "") {
            alert("Please enter time.");
            $("#tcva_time").focus();
            return false;
        }
        $('#submit_btn_visual_acuity').attr('disabled', 'disabled');
        var post_url = 'action/action_case_visual_acuity.php?do=add_text'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                right_eye: right_eye,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
                left_eye: left_eye,
                tcva_date: tcva_date,
                tcva_time: tcva_time,
                remarks: remarks,
            },
        }).done(function (result) {

            $('#modal_add_visual_acuity').modal('hide');
            $('#submit_btn_visual_acuity').removeAttr('disabled');
            $("#add_new_custom_visual_acuity").trigger("reset");

            if ($('#add_table_visual_acuity .dataTables_empty').length) {

                //$(".tr_text_visual_acuity").remove();
                $("#add_table_visual_acuity").html(result);

            } else {
                //$(".tr_text_visual_acuity").remove();
                $("#add_table_visual_acuity").prepend(result);
            }

        });


    });

    $(document).on("click", "#add_eye_iop", function () {
        ////console.log("Yes");
        $('#modal_add_eye_iop').modal('show');
    });

    $(document).on("click", "#submit_case_eye_iop", function () {

        var tcei_right_eye = $("#tcei_right_eye").val();
        var tcei_left_eye = $("#tcei_left_eye").val();
        var tcei_date = $("#tcei_date").val();
        var tcei_time = $("#tcei_time").val();
        var tcei_remarks = $("#tcei_remarks").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = tcei_right_eye + tcei_left_eye + pres + tcei_remarks;
        var all_variable = all.trim();

        if (tcei_right_eye == "") {
            alert("Please enter Right Eye.");
            $("#tcei_right_eye").focus();
            return false;
        }

        if (tcei_left_eye == "") {
            alert("Please enter Left Eye.");
            $("#tcei_left_eye").focus();
            return false;
        }

        if (tcei_date == "") {
            alert("Please enter Date.");
            $("#tcei_date").focus();
            return false;
        }

        if (tcei_time == "") {
            alert("Please enter Date Eye.");
            $("#tcei_time").focus();
            return false;
        }

        $('#submit_case_eye_iop').attr('disabled', 'disabled');


        var post_url = 'action/action_case_eye_iop.php?do=add'
        var datastring = 'tcei_right_eye=' + tcei_right_eye + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tcei_left_eye=" + tcei_left_eye + "&tcei_date=" + tcei_date + "&tcei_time=" + tcei_time + "&tcei_remarks=" + tcei_remarks;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tcei_right_eye: tcei_right_eye,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
                tcei_left_eye: tcei_left_eye,
                tcei_date: tcei_date,
                tcei_time: tcei_time,
                tcei_remarks: tcei_remarks,
            },
        }).done(function (result) {
            $('#submit_case_eye_iop').removeAttr('disabled');
            $('#modal_add_eye_iop').modal('hide');

            $("#tcei_right_eye").val("");
            $("#tcei_left_eye").val("");
            $("#tcei_remarks").val("");

            if ($('#add_table_eye_iop .dataTables_empty').length) {

                $("#add_table_eye_iop").html(result);

            } else {
                $("#add_table_eye_iop").prepend(result);
            }
            //location.reload();

        });

    });

    $(document).on("click", ".reset-refraction-popup", function () {

        $(".select_casemanager_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_cylinder").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_axis").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_prism").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_cv").removeClass('bg-theme color-white');

        $(".select_casemanager_auto_eye_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_auto_eye_refraction_cylinder").removeClass('bg-theme color-white');
        $(".select_casemanager_auto_eye_refraction_axis").removeClass('bg-theme color-white');

        $(".select_casemanager_near_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_near_refraction_cv").removeClass('bg-theme color-white');

        $(".select_casemanager_com_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_com_refraction_cv").removeClass('bg-theme color-white');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);


        });

        $(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);

        });

        $('.refraction_plus').removeClass("btn-theme").addClass('btn-theme-outline');;
        $('.refraction_minus').removeClass("btn-theme-outline").addClass('btn-theme');

        // $(".div_type_refraction_left").hide();
        // $(".div_type_refraction_right").show();

        $(".class_type_right").addClass('active');
        $(".class_type_left").removeClass('active');
        $(".div_type_refraction_left").removeClass('show active');
        $(".div_type_refraction_right").addClass('show active');;

    });

    $(document).on('change', '.patient_change_ap_hospital', function () {

        var hm_id = $(this).val();
        var post_url = 'action/action_patient_appointment.php?do=change_ap_hospital'
        var datastring = 'hm_id=' + hm_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var trim_result = result.trim();
            $(".patient_ap_update_doc_lsit").html(trim_result);

        });

    });

    $(document).on('click', '#submit_filter_patient_my_appointments', function () {

        var Link = $(".get_base_url").val();
        var site_url = Link + "phase_b/patient_portal/my_appointments.php?af=1";

        var from_date = $("#ap_form_date").val();
        var to_date = $("#ap_to_date").val();

        var hm_id = $("input[name='ap_hm_id']:checked").val();
        var um_id = $("input[name='ap_doc']:checked").val();


        if (from_date) {
            var from_date_link = '&from_date=' + from_date;
        } else {
            var from_date_link = '';
        }

        if (to_date) {
            var to_date_link = '&to_date=' + to_date;
        } else {
            var to_date_link = '';
        }

        if (um_id) {
            var um_id_link = '&um_id=' + um_id;
        } else {
            var um_id_link = '';
        }

        if (hm_id) {
            var hm_id_link = '&hm_id=' + hm_id;
        } else {
            var hm_id_link = '';
        }

        var Main_Link = site_url + from_date_link + to_date_link + hm_id_link + um_id_link;

        window.location.href = Main_Link;
    });

    $("#edit_portal_patient").submit(function (e) {

        e.preventDefault();
        proceed = true;

        //var pm_ref_id = $("#pm_ref_id").val();
        //var pm_salutation = $("#pm_salutation").val();
        //var pm_first_name = $("#pm_first_name").val();
        //var pm_middle_name = $("#pm_middle_name").val();
        //var pm_last_name = $("#pm_last_name").val();
        //var pm_gender = $(".pm_gender").val();
        //var pm_dob = $("#pm_dob").val();
        //var pm_contact_no = $("#pm_contact_no").val();
        //var pm_email = $("#pm_email").val();
        //var pm_dnd = $("#pm_dnd").val();
        //var srch_dr_names = $("#srch_dr_names").val();
        //var pm_second_name = $("#pm_second_name").val();
        //var pm_second_gender = $("#pm_second_gender").val();
        //var pm_contact_no2 = $("#pm_contact_no2").val();
        //var pm_relation = $("#pm_relation").val();
        //var pm_address = $("#pm_address").val();
        //var pm_pincode = $("#pm_pincode").val();
        //var pm_area = $("#pm_area").val();
        //var pm_city = $("#pm_city").val();
        //var pm_district = $("#pm_district").val();
        //var pm_state = $("#pm_state").val();
        //var pm_country = $("#pm_country").val();

        // if (pm_contact_no == "" && pm_contact_no.length != 10) {
        //     alert("Please enter Valid Contact No.");
        //     $('#pm_contact_no').focus();
        //     return false;
        // // } else if (pm_salutation == "") {
        // //     alert("Please select Salutation.");
        // //     $('#pm_salutation').focus();
        // //     return false;
        // } else 

        // if (pm_first_name == "") {
        //     alert("Please enter First Name.");
        //     $('#pm_first_name').focus();
        //     return false;
        // } else if (pm_middle_name == "") {
        //         alert("Please enter Middle Name.");
        //         $('#pm_middle_name').focus();
        //         return false;
        // } else if (pm_last_name == "") {
        //     alert("Please enter Last Name.");
        //     $('#pm_last_name').focus();
        //     return false;
        // } else if ($(".pm_gender:checked").length == 0) {
        //     alert("Please select Gender.");
        //     $('.pm_gender').focus();
        //     return false;
        // } else if (pm_dob == "") {
        //     alert("Please enter Date OF Birth.");
        //     $('#pm_dob').focus();
        //     return false;
        // } else if (pm_email == "") {
        //     alert("Please enter Email.");
        //     $('#pm_email').focus();
        //     return false;
        // } else if (pm_contact_no == "" && pm_contact_no.length != 10) {
        //     alert("Please enter Valid Contact No.");
        //     $('#pm_contact_no').focus();
        //     return false;
        // } else if (pm_second_name == "") {
        //     alert("Please enter Secondary Name.");
        //     $('#pm_second_name').focus();
        //     return false;
        // } else if (pm_second_gender == "") {
        //     alert("Please select Secondary Gender.");
        //     $('#pm_second_gender').focus();
        //     return false;
        // } else if (pm_contact_no2 == "") {
        //     alert("Please enter Phone Number.");
        //     $('#pm_contact_no2').focus();
        //     return false;
        // } else if (pm_relation == "") {
        //     alert("Please enter Relationship.");
        //     $('#pm_relation').focus();
        //     return false;
        // } else if (pm_address == "") {
        //     alert("Please enter Address.");
        //     $('#pm_address').focus();
        //     return false;
        // } else if (pm_pincode == "") {
        //     alert("Please enter Pincode.");
        //     $('#pm_pincode').focus();
        //     return false;
        // } else if (pm_city == "") {
        //     alert("Please enter City.");
        //     $('#pm_city').focus();
        //     return false;
        // } else if (pm_district == "") {
        //     alert("Please enter District.");
        //     $('#pm_district').focus();
        //     return false;
        // } else if (pm_state == "") {
        //     alert("Please enter State.");
        //     $('#pm_state').focus();
        //     return false;
        // } else if (pm_country == "") {
        //     alert("Please enter Country.");
        //     $('#pm_country').focus();
        //     return false;
        // } else {

        // }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_portal_patient_edit').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_portal_patient_edit').removeAttr('disabled');
            if (result == 1) {
                alert("Profile edit successfully")
                window.location.href = "patient_profile.php";
            } else if (result == 3) {
                $("#ImageUploadPhoto").focus();
                alert("Only .jpg, .jpeg, and .png are supported.")
                return false;
            } else {
                alert("something wrong");
                return false;
            }
        });

    });

    $("#search_followup_patient").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".followup_table .followup_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $(document).on("click", "#deletefolowup_data", function () {
        $('#modal_delete_followup_appointment').modal('show');
        var tpf_id = $(this).attr('data-id');

        var text = "<img src='assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>followup appointment</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);
        $('#delete_tpf_id').val(tpf_id);
    });

    $(document).on("click", "#delete_followup_appointment", function () {
        var delete_tpf_id = $("#delete_tpf_id").val();
        var post_url = 'action/action_followup_appointment.php?do=delete'
        var datastring = 'delete_tpf_id=' + delete_tpf_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tpf_id: delete_tpf_id,
            },
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_allergies_single').modal('hide');
            // $('#tr_case_allergies_' + delete_tca_id).remove();
            location.reload();
        });
    });

    $(document).on("change", ".department_filter_id", function () {

        var dp_id = $(this).val();
        var random_id = $(this).attr("data-random_id");
        var app_id = $(this).attr("data-app_id");
        if (app_id == 0) {
            var app_id_link = "";
        } else {
            var app_id_link = "&app_id=" + app_id;
        }

        if (dp_id == 0) {
            var dp_id_link = "";
        } else {
            var dp_id_link = "&dp_id=" + dp_id;
        }

        //alert(id);
        var Link = $(".base_url_practice").val();
        window.location.href = Link + "case_manager/casemanager_consultationssummery.php?random_id=" + random_id + app_id_link + dp_id_link;

    });


    $(document).on("change", "#patient_po_add_patient_case_document", function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_case_document').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#file_pdoc").val("");
            $('#submit_button_case_document').removeAttr('disabled');
            $('.err_register').hide();
            window.location.reload();
        });
    });

    $("#patient_sign_up").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var pm_ref_id = $("#pm_ref_id").val();
        var pm_salutation = $("#pm_salutation").val();
        var pm_first_name = $("#pm_first_name").val();
        var pm_middle_name = $("#pm_middle_name").val();
        var pm_last_name = $("#pm_last_name").val();
        var pm_gender = $(".pm_gender").val();
        var pm_dob = $("#pm_dob").val();
        var pm_contact_no = $("#pm_contact_no").val();
        var pm_email = $("#pm_email").val();
        var pm_dnd = $("#pm_dnd").val();
        var srch_dr_names = $("#srch_dr_names").val();
        var pm_second_name = $("#pm_second_name").val();
        var pm_second_gender = $("#pm_second_gender").val();
        var pm_contact_no2 = $("#pm_contact_no2").val();
        var pm_relation = $("#pm_relation").val();
        var pm_address = $("#pm_address").val();
        var pm_pincode = $("#pm_pincode").val();
        var pm_area = $("#pm_area").val();
        var pm_city = $("#pm_city").val();
        var pm_district = $("#pm_district").val();
        var pm_state = $("#pm_state").val();
        var pm_country = $("#pm_country").val();

        if (pm_first_name == "") {
            alert("Please enter First Name.");
            $('#pm_first_name').focus();
            return false;
        } else if (pm_middle_name == "") {
            alert("Please enter Middle Name.");
            $('#pm_middle_name').focus();
            return false;
        } else if (pm_last_name == "") {
            alert("Please enter Last Name.");
            $('#pm_last_name').focus();
            return false;
        } else if ($(".pm_gender:checked").length == 0) {
            alert("Please select Gender.");
            $('.pm_gender').focus();
            return false;
        } else if (pm_dob == "") {
            alert("Please enter Date OF Birth.");
            $('#pm_dob').focus();
            return false;
            // } else if (pm_email == "") {
            //     alert("Please enter Email.");
            //     $('#pm_email').focus();
            //     return false;
        } else if (pm_contact_no == "" && pm_contact_no.length != 10) {
            alert("Please enter Valid Contact No.");
            $('#pm_contact_no').focus();
            return false;
        } else if (pm_contact_no != "" && (pm_contact_no.length < 10 || pm_contact_no.length > 10)) {
            alert("Please enter Valid 10 Digit Contact No");
            $('#pm_contact_no').focus();
            return false;
        }
        // } else if (pm_second_name == "") {
        //     alert("Please enter Secondary Name.");
        //     $('#pm_second_name').focus();
        //     return false;
        // } else if (pm_second_gender == "") {
        //     alert("Please select Secondary Gender.");
        //     $('#pm_second_gender').focus();
        //     return false;
        // } else if (pm_contact_no2 == "") {
        //     alert("Please enter Phone Number.");
        //     $('#pm_contact_no2').focus();
        //     return false;
        // } else if (pm_relation == "") {
        //     alert("Please enter Relationship.");
        //     $('#pm_relation').focus();
        //     return false;
        // } else if (pm_address == "") {
        //     alert("Please enter Address.");
        //     $('#pm_address').focus();
        //     return false;
        // } else if (pm_pincode == "") {
        //     alert("Please enter Pincode.");
        //     $('#pm_pincode').focus();
        //     return false;
        // } else if (pm_city == "") {
        //     alert("Please enter City.");
        //     $('#pm_city').focus();
        //     return false;
        // } else if (pm_district == "") {
        //     alert("Please enter District.");
        //     $('#pm_district').focus();
        //     return false;
        // } else if (pm_state == "") {
        //     alert("Please enter State.");
        //     $('#pm_state').focus();
        //     return false;
        // } else if (pm_country == "") {
        //     alert("Please enter Country.");
        //     $('#pm_country').focus();
        //     return false;
        else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#patient_sign_up_btn').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var trim_result_psignup = result.trim();
            if (trim_result_psignup == '5') {
                alert("Contact No Exist.");
                $('#pm_contact_no').focus();
                $('#patient_sign_up_btn').removeAttr('disabled');
                return false;
            } else if (trim_result_psignup) {
                alert("Register successfully.");
                window.location.href = "index.php";
            } else {
                $('#patient_sign_up_btn').removeAttr('disabled');
            }
        });
    });

    $(".ps_pmdob").change(function () {

        var newdate = $('.ps_pmdob').val();
        var datearray = newdate.split("/");
        var MyBdate = datearray[1] + '/' + datearray[0] + '/' + datearray[2];

        var now = new Date();
        var today = new Date(now.getYear(), now.getMonth(), now.getDate());

        var yearNow = now.getYear();
        var monthNow = now.getMonth();
        var dateNow = now.getDate();

        var dob = new Date(MyBdate.substring(6, 10),
            MyBdate.substring(0, 2) - 1,
            MyBdate.substring(3, 5)
        );
        var yearDob = dob.getYear();
        var monthDob = dob.getMonth();
        var dateDob = dob.getDate();
        var age = {};
        var ageString = "";
        var yearString = "";
        var monthString = "";
        var dayString = "";

        yearAge = yearNow - yearDob;

        if (monthNow >= monthDob)
            var monthAge = monthNow - monthDob;
        else {
            yearAge--;
            var monthAge = 12 + monthNow - monthDob;
        }

        if (dateNow >= dateDob)
            var dateAge = dateNow - dateDob;
        else {
            monthAge--;
            var dateAge = 31 + dateNow - dateDob;

            if (monthAge < 0) {
                monthAge = 11;
                yearAge--;
            }
        }

        age = {
            years: yearAge,
            months: monthAge,
            days: dateAge
        };
        ////console.log(age);
        if (age.years > 1) yearString = " Years";
        else yearString = " Year";
        if (age.months > 1) monthString = " Months";
        else monthString = " Month";
        if (age.days > 0) dayString = " Days";
        else dayString = " Day";

        if ((age.years > 0) && (age.months > 0) && (age.days >= 0))
            ageString = age.years + yearString;
        else if ((age.years == 0) && (age.months == 0) && (age.days >= 0))
            ageString = age.days + dayString;
        else if ((age.years > 0) && (age.months == 0) && (age.days == 0))
            ageString = age.years + yearString;
        else if ((age.years > 0) && (age.months > 0) && (age.days == 0))
            ageString = age.years + yearString;
        else if ((age.years == 0) && (age.months > 0) && (age.days > 0))
            ageString = age.months + monthString;
        else if ((age.years > 0) && (age.months == 0) && (age.days >= 0))
            ageString = age.years + yearString;
        else if ((age.years == 0) && (age.months > 0) && (age.days == 0))
            ageString = age.months + monthString;
        else ageString = "";

        var only_new_age = ageString.substr(0, ageString.indexOf(' '));
        var only_new_string = ageString.substr(ageString.indexOf(' ') + 1);

        if (only_new_age != "") {
            $('.age_ps_pmdob').attr('readonly', true).val(only_new_age + " " + only_new_string);
        } else {
            alert("Please enter valid date");
            $(".ps_pmdob").focus();
            $(".ps_pmdob").val("");
            $(".age_ps_pmdob").val("");
        }

    });

    $(document).on("submit", "#submit_patient_refer_code_hm", function (e) {

        e.preventDefault();
        proceed = true;

        var refer_code_hm = $("#refer_code_hm").val();

        if (refer_code_hm == "") {
            alert("Please Enter Your Code");
            $('#refer_code_hm').focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_patient_refer_code_hm_btn').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var trim_hm_code_result = result.trim();
            if (trim_hm_code_result == '2') {
                alert("Invalid Code");
                $("#refer_code_hm").focus();
                $('#submit_patient_refer_code_hm_btn').attr('disabled', false);
                return false;
            } else if (trim_hm_code_result == '3') {
                alert("Already In Hospital");
                $("#refer_code_hm").focus();
                $('#submit_patient_refer_code_hm_btn').attr('disabled', false);
                return false;
            } else {
                alert("Submitted Successfully");
                window.location.href = "patient_dashboard.php";
            }

        });
    });

    $(document).on("click", "#patient_add_clinic_doc_popup", function (e) {
        $("#refer_code_hm").val('');
    });

    $(document).on("click", "#btn_add_auto_referaction_plus", function () {
        ////console.log("Yes");
        var title = $(this).val();
        var html_title = $(this).attr('data-htmltitle');
        $("#auto_eye_refraction_template_name").val(title);
        $("#auto_referation_box_title").html(html_title);
        $('#modal_auto_eye_refraction_template_box').modal('show');

    });


    $(document).on("click", ".popup_refraction_box_type", function () {
        console.log("Yes");
        var typeid = $(this).attr('data-typeid');
        console.log(typeid);

        // $(this).removeClass("btn-primary").siblings('.btn').addClass('btn-primary');;
        // $(this).addClass('btn-success').siblings().removeClass('btn-success');
        // $(this).css("background-color", "");
        // $(this).css("border-color", "");

        if (typeid == "type_right") {
            $(".class_type_right").addClass('active');
            $(".class_type_left").removeClass('active');
            $(".div_type_refraction_left").removeClass('show active');
            $(".div_type_refraction_right").addClass('show active');;
            $("#referation_box_title").html("Distant Vision");
        } else {

            $(".class_type_right").removeClass('active');
            $(".class_type_left").addClass('active');
            $(".class_type_right").removeClass('active');
            $(".div_type_refraction_right").removeClass('show active');
            $(".div_type_refraction_left").addClass('show active');;
            $("#referation_box_title").html("Distant Vision");
        }

    });

    $(document).on("click", ".tcm_modal_auto_ref_type_sphere", function () {

        var values = $(this).val();
        var type_ref = $(".tcm_modal_auto_ref_type_plus_minus .active").attr('data-typeid');



        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $(this).removeClass("btn-theme-outline").siblings('.btn').addClass('btn-theme-outline');;
        $(this).addClass('btn-theme').siblings().removeClass('btn-theme');
        $(this).css("background-color", "");
        $(this).css("border-color", "");

        $('.' + main_div).find(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);


            if (values == "minus") {
                var AddSign = "- " + NewText;
                $(this).text(AddSign);
            } else {
                var AddSign = "+ " + NewText;
                $(this).text(AddSign);
            }

        });

    });

    $(document).on("click", ".tcm_modal_auto_ref_type_cylinder", function () {

        var values = $(this).val();
        var type_ref = $(".tcm_modal_auto_ref_type_plus_minus .active").attr('data-typeid');



        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $(this).removeClass("btn-theme-outline").siblings('.btn').addClass('btn-theme-outline');;
        $(this).addClass('btn-theme').siblings().removeClass('btn-theme');
        $(this).css("background-color", "");
        $(this).css("border-color", "");

        $('.' + main_div).find(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);


            if (values == "minus") {
                var AddSign = "- " + NewText;
                $(this).text(AddSign);
            } else {
                var AddSign = "+ " + NewText;
                $(this).text(AddSign);
            }

        });

    });

    $(document).on("click", ".tcm_modal_auto_ref_type_cylinder", function () {

        var values = $(this).val();
        var type_ref = $(".tcm_modal_auto_ref_type_plus_minus .active").attr('data-typeid');



        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $(this).removeClass("btn-theme-outline").siblings('.btn').addClass('btn-theme-outline');;
        $(this).addClass('btn-theme').siblings().removeClass('btn-theme');
        $(this).css("background-color", "");
        $(this).css("border-color", "");

        $('.' + main_div).find(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);


            if (values == "minus") {
                var AddSign = "- " + NewText;
                $(this).text(AddSign);
            } else {
                var AddSign = "+ " + NewText;
                $(this).text(AddSign);
            }

        });

    });

    $(document).on("click", ".select_casemanager_auto_eye_refraction_sphere", function () {
        var sphere_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        // $("#select_dia_popup").val(diagnosis_name);

        var type_ref = $(".tcm_modal_auto_ref_type_plus_minus .active").attr('data-typeid');
        // $("#select_dia_popup").val(diagnosis_name);

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_auto_eye_refraction_sphere").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_auto_eye_refraction_sphere_" + sphere_id).addClass('bg-theme color-white');


    });

    $(document).on("click", ".select_casemanager_auto_eye_refraction_cylinder", function () {
        var cylinder_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        // $("#select_dia_popup").val(diagnosis_name);

        var type_ref = $(".tcm_modal_auto_ref_type_plus_minus .active").attr('data-typeid');
        // $("#select_dia_popup").val(diagnosis_name);

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_auto_eye_refraction_cylinder").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_auto_eye_refraction_cylinder_" + cylinder_id).addClass('bg-theme color-white');


    });

    $(document).on("click", ".select_casemanager_auto_eye_refraction_axis", function () {
        var axis_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        // $("#select_dia_popup").val(diagnosis_name);

        var type_ref = $(".tcm_modal_auto_ref_type_plus_minus .active").attr('data-typeid');

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_auto_eye_refraction_axis").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_auto_eye_refraction_axis_" + axis_id).addClass('bg-theme color-white');


    });

    $(document).on("click", "#submit_button_popup_auto_eye_refraction_box", function () {

        var sphere_text_right = $('.div_type_refraction_right').find('#pre_cash_auto_eye_refraction_sphere_template .bg-theme').attr('data-title');
        var cylinder_text_right = $('.div_type_refraction_right').find('#pre_cash_auto_eye_refraction_cylinder_template .bg-theme').attr('data-title');
        var axis_text_right = $('.div_type_refraction_right').find('#pre_cash_auto_eye_refraction_axis_template .bg-theme').attr('data-title');

        var plus_minus_sphere_right = $('.div_type_refraction_right').find('.tcm_modal_auto_eye_ref_type_plus_minus_sphere .btn-theme').val();
        var plus_minus_cylinder_right = $('.div_type_refraction_right').find('.tcm_modal_auto_eye_ref_type_plus_minus_cylinder .btn-theme').val();


        var sphere_text_left = $('.div_type_refraction_left').find('#pre_cash_auto_eye_refraction_sphere_template .bg-theme').attr('data-title');
        var cylinder_text_left = $('.div_type_refraction_left').find('#pre_cash_auto_eye_refraction_cylinder_template .bg-theme').attr('data-title');
        var axis_text_left = $('.div_type_refraction_left').find('#pre_cash_auto_eye_refraction_axis_template .bg-theme').attr('data-title');

        var plus_minus_sphere_left = $('.div_type_refraction_left').find('.tcm_modal_auto_eye_ref_type_plus_minus_sphere .btn-theme').val();
        var plus_minus_cylinder_left = $('.div_type_refraction_left').find('.tcm_modal_auto_eye_ref_type_plus_minus_cylinder .btn-theme').val();

        if (plus_minus_sphere_right == "plus") {
            if (sphere_text_right != "" && sphere_text_right != undefined) {

                sphere_text_right = "+" + sphere_text_right;
            } else {
                sphere_text_right = $('#tcm_auto_eye_right_sph').val();
            }

        } else {

            if (sphere_text_right != "" && sphere_text_right != undefined) {
                sphere_text_right = "-" + sphere_text_right;
            } else {
                sphere_text_right = $('#tcm_auto_eye_right_sph').val();
            }

        }

        if (plus_minus_cylinder_right == "plus") {

            if (cylinder_text_right != "" && cylinder_text_right != undefined) {
                cylinder_text_right = "+" + cylinder_text_right;
            } else {
                cylinder_text_right = $('#tcm_auto_eye_right_cyl').val();
            }

        } else {

            if (cylinder_text_right != "" && cylinder_text_right != undefined) {
                cylinder_text_right = "-" + cylinder_text_right;
            } else {
                cylinder_text_right = $('#tcm_auto_eye_right_cyl').val();
            }

        }

        if (axis_text_right != "" && axis_text_right != undefined) {
            axis_text_right = axis_text_right;
        } else {
            axis_text_right = $('#tcm_auto_eye_right_axis').val();
        }

        $('#tcm_auto_eye_right_sph').val(sphere_text_right);
        $('#tcm_auto_eye_right_cyl').val(cylinder_text_right);
        $('#tcm_auto_eye_right_axis').val(axis_text_right);

        if (plus_minus_sphere_left == "plus") {
            if (sphere_text_left != "" && sphere_text_left != undefined) {

                sphere_text_left = "+" + sphere_text_left;
            } else {
                sphere_text_left = $('#tcm_auto_eye_left_sph').val();
            }

        } else {

            if (sphere_text_left != "" && sphere_text_left != undefined) {
                sphere_text_left = "-" + sphere_text_left;
            } else {
                sphere_text_left = $('#tcm_auto_eye_left_sph').val();
            }

        }

        if (plus_minus_cylinder_left == "plus") {

            if (cylinder_text_left != "" && cylinder_text_left != undefined) {
                cylinder_text_left = "+" + cylinder_text_left;
            } else {
                cylinder_text_left = $('#tcm_auto_eye_left_cyl').val();
            }

        } else {

            if (cylinder_text_left != "" && cylinder_text_left != undefined) {
                cylinder_text_left = "-" + cylinder_text_left;
            } else {
                cylinder_text_left = $('#tcm_auto_eye_left_cyl').val();
            }

        }

        if (axis_text_left != "" && axis_text_left != undefined) {
            axis_text_left = axis_text_left;
        } else {
            axis_text_left = $('#tcm_auto_eye_left_axis').val();
        }


        $('#tcm_auto_eye_left_sph').val(sphere_text_left);
        $('#tcm_auto_eye_left_cyl').val(cylinder_text_left);
        $('#tcm_auto_eye_left_axis').val(axis_text_left);

        $('#modal_auto_eye_refraction_template_box').modal('hide');

        $(".select_casemanager_auto_eye_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_auto_eye_refraction_cylinder").removeClass('bg-theme color-white');
        $(".select_casemanager_auto_eye_refraction_axis").removeClass('bg-theme color-white');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);


        });

        $(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);

        });

        $('.refraction_plus').removeClass("btn-theme").addClass('btn-theme-outline');;
        $('.refraction_minus').removeClass("btn-theme-outline").addClass('btn-theme');

        // $(".div_type_refraction_left").hide();
        // $(".div_type_refraction_right").show();

        $(".class_type_right").addClass('active');
        $(".class_type_left").removeClass('active');
        $(".div_type_refraction_left").removeClass('show active');
        $(".div_type_refraction_right").addClass('show active');;

    });


    $(document).on("click", ".ap_upload_docs", function () {
        $('#modal_ap_upload_docs').modal('show');
        var pm_pid = $(this).attr("data-pm_pid");
        var pm_id = $(this).attr("data-pm_id");
        $("#up_pm_pid").val(pm_pid);
        $("#up_pm_id").val(pm_id);

    });

    $(document).on("change", "#add_patient_case_document_appoitment", function (e) {

        e.preventDefault();
        proceed = true;


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        //$('#submit_button_case_document').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            $("#file").val("");
            //$('#submit_button_case_document').removeAttr('disabled');
            $('.err_register').hide();
            $('#modal_ap_upload_docs').modal('hide');

        });

    });

    $(document).on("change", ".doctor_filter_id", function () {

        var doc_id = $(this).val();
        var random_id = $(this).attr("data-random_id");
        var app_id = $(this).attr("data-app_id");
        var dp_id = $(this).attr("data-dp_id");
        if (app_id == 0) {
            var app_id_link = "";
        } else {
            var app_id_link = "&app_id=" + app_id;
        }

        if (dp_id == 0) {
            var dp_id_link = "";
            var doc_id_link = "";
        } else {
            var dp_id_link = "&dp_id=" + dp_id;
        }

        if (doc_id == 0) {
            var doc_id_link = "";
        } else {
            var doc_id_link = "&doc_id=" + doc_id;
        }

        //alert(id);
        var Link = $(".base_url_practice").val();
        window.location.href = Link + "case_manager/casemanager_consultationssummery.php?random_id=" + random_id + app_id_link + dp_id_link + doc_id_link;

    });

    $(document).on("click", "#add_refraction_template_box", function () {
        ////console.log("Yes");
        var title = $(this).attr('data-title');
        var html_title = $(this).attr('data-htmltitle');
        $("#refraction_template_name").val(title);
        $("#referation_box_title").html('Distant Vision');

        $('#modal_refraction_template_box').modal('show');

    });

    $(document).on("click", ".tcm_modal_ref_type_sphere", function () {

        var values = $(this).val();
        var type_ref = $(".tcm_modal_ref_type_plus_minus .active").attr('data-typeid');



        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $(this).removeClass("btn-theme-outline").siblings('.btn').addClass('btn-theme-outline');;
        $(this).addClass('btn-theme').siblings().removeClass('btn-theme');
        // $(this).css("background-color", "");
        // $(this).css("border-color", "");

        $('.' + main_div).find(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);


            if (values == "minus") {
                var AddSign = "- " + NewText;
                $(this).text(AddSign);
            } else {
                var AddSign = "+ " + NewText;
                $(this).text(AddSign);
            }

        });

    });

    $(document).on("click", ".tcm_modal_ref_type_cylinder", function () {
        var values = $(this).val();
        var type_ref = $(".tcm_modal_ref_type_plus_minus .active").attr('data-typeid');

        $(this).removeClass("btn-theme-outline").siblings('.btn').addClass('btn-theme-outline');;
        $(this).addClass('btn-theme').siblings().removeClass('btn-theme');
        //$(this).css("background-color", "");
        //$(this).css("border-color", "");

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);


            if (values == "minus") {
                var AddSign = "- " + NewText;
                $(this).text(AddSign);
            } else {
                var AddSign = "+ " + NewText;
                $(this).text(AddSign);
            }

        });

    });

    $(document).on("click", ".select_casemanager_refraction_sphere", function () {
        var sphere_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        var type_ref = $(".tcm_modal_ref_type_plus_minus .active").attr('data-typeid');
        // $("#select_dia_popup").val(diagnosis_name);

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_refraction_sphere").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_refraction_sphere_" + sphere_id).addClass('bg-theme color-white');


    });

    $(document).on("click", ".select_casemanager_refraction_cylinder", function () {
        var cylinder_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        // $("#select_dia_popup").val(diagnosis_name);

        var type_ref = $(".tcm_modal_ref_type_plus_minus .active").attr('data-typeid');

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_refraction_cylinder").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_refraction_cylinder_" + cylinder_id).addClass('bg-theme color-white');


    });

    $(document).on("click", ".select_casemanager_refraction_axis", function () {
        var axis_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        // $("#select_dia_popup").val(diagnosis_name);

        var type_ref = $(".tcm_modal_ref_type_plus_minus .active").attr('data-typeid');

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_refraction_axis").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_refraction_axis_" + axis_id).addClass('bg-theme color-white');


    });

    $(document).on("click", ".select_casemanager_refraction_cv", function () {
        var cv_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        // $("#select_dia_popup").val(diagnosis_name);

        var type_ref = $(".tcm_modal_ref_type_plus_minus .active").attr('data-typeid');

        if (type_ref == "type_right") {
            var main_div = 'div_type_refraction_right';
        } else {
            var main_div = 'div_type_refraction_left';
        }

        $('.' + main_div).find(".select_casemanager_refraction_cv").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_refraction_cv_" + cv_id).addClass('bg-theme color-white');


    });

    $(document).on("click", "#submit_button_popup_refraction_box", function () {

        var td_div = $('#refraction_template_name').val();

        var sphere_text_right = $('.div_type_refraction_right').find('#pre_cash_refraction_sphere_template .bg-theme').attr('data-title');
        var cylinder_text_right = $('.div_type_refraction_right').find('#pre_cash_refraction_cylinder_template .bg-theme').attr('data-title');
        var axis_text_right = $('.div_type_refraction_right').find('#pre_cash_refraction_axis_template .bg-theme').attr('data-title');
        var cv_text_right = $('.div_type_refraction_right').find('#pre_cash_refraction_cv_template .bg-theme').attr('data-title');
        var plus_minus_sphere_right = $('.div_type_refraction_right').find('.tcm_modal_ref_type_plus_minus_sphere .btn-theme').val();
        var plus_minus_cylinder_right = $('.div_type_refraction_right').find('.tcm_modal_ref_type_plus_minus_cylinder .btn-theme').val();

        console.log("sphere_text_right:" + sphere_text_right);
        console.log("cylinder_text_right:" + cylinder_text_right);
        console.log("axis_text_right:" + axis_text_right);
        console.log("cv_text_right:" + cv_text_right);

        console.log("plus_minus_sphere_right:" + plus_minus_sphere_right);
        console.log("plus_minus_cylinder_right:" + plus_minus_cylinder_right);

        var sphere_text_left = $('.div_type_refraction_left').find('#pre_cash_refraction_sphere_template .bg-theme').attr('data-title');
        var cylinder_text_left = $('.div_type_refraction_left').find('#pre_cash_refraction_cylinder_template .bg-theme').attr('data-title');
        var axis_text_left = $('.div_type_refraction_left').find('#pre_cash_refraction_axis_template .bg-theme').attr('data-title');
        var cv_text_left = $('.div_type_refraction_left').find('#pre_cash_refraction_cv_template .bg-theme').attr('data-title');
        var plus_minus_sphere_left = $('.div_type_refraction_left').find('.tcm_modal_ref_type_plus_minus_sphere .btn-theme').val();
        var plus_minus_cylinder_left = $('.div_type_refraction_left').find('.tcm_modal_ref_type_plus_minus_cylinder .btn-theme').val();

        console.log("sphere_text_left:" + sphere_text_left);
        console.log("cylinder_text_left:" + cylinder_text_left);
        console.log("axis_text_left:" + axis_text_left);
        console.log("cv_text_left:" + cv_text_left);

        console.log("plus_minus_sphere_left:" + plus_minus_sphere_left);
        console.log("plus_minus_cylinder_left:" + plus_minus_cylinder_left);

        if (plus_minus_sphere_right == "plus") {
            if (sphere_text_right != "" && sphere_text_right != undefined) {

                sphere_text_right = "+" + sphere_text_right;
            } else {
                sphere_text_right = $('#tcm_sph_re_dis_value').val();
            }

        } else {

            if (sphere_text_right != "" && sphere_text_right != undefined) {
                sphere_text_right = "-" + sphere_text_right;
            } else {
                sphere_text_right = $('#tcm_sph_re_dis_value').val();
            }

        }

        if (plus_minus_cylinder_right == "plus") {
            if (cylinder_text_right != "" && cylinder_text_right != undefined) {
                cylinder_text_right = "+" + cylinder_text_right;
            } else {
                cylinder_text_right = $('#tcm_cyl_re_dis_value').val();
            }

        } else {

            if (cylinder_text_right != "" && cylinder_text_right != undefined) {
                cylinder_text_right = "-" + cylinder_text_right;
            } else {
                cylinder_text_right = $('#tcm_cyl_re_dis_value').val();
            }

        }

        if (axis_text_right != "" && axis_text_right != undefined) {
            axis_text_right = axis_text_right;
        } else {
            axis_text_right = $('#tcm_axi_re_dis').val();
        }

        if (cv_text_right != "" && cv_text_right != undefined) {
            cv_text_right = cv_text_right;
        } else {
            cv_text_right = $('#tcm_cv_re_dis').val();
        }

        $('#tcm_sph_re_dis_value').val(sphere_text_right);
        $('#tcm_cyl_re_dis_value').val(cylinder_text_right);
        $('#tcm_axi_re_dis').val(axis_text_right);
        $('#tcm_cv_re_dis').val(cv_text_right);



        if (plus_minus_sphere_left == "plus") {
            if (sphere_text_left != "" && sphere_text_left != undefined) {

                sphere_text_left = "+" + sphere_text_left;
            } else {
                sphere_text_left = $('#tcm_sph_le_dis_value').val();
            }

        } else {

            if (sphere_text_left != "" && sphere_text_left != undefined) {
                sphere_text_left = "-" + sphere_text_left;
            } else {
                sphere_text_left = $('#tcm_sph_le_dis_value').val();
            }

        }

        if (plus_minus_cylinder_left == "plus") {
            if (cylinder_text_left != "" && cylinder_text_left != undefined) {
                cylinder_text_left = "+" + cylinder_text_left;
            } else {
                cylinder_text_left = $('#tcm_cyl_le_dis_value').val();
            }

        } else {

            if (cylinder_text_left != "" && cylinder_text_left != undefined) {
                cylinder_text_left = "-" + cylinder_text_left;
            } else {
                cylinder_text_left = $('#tcm_cyl_le_dis_value').val();
            }

        }

        if (axis_text_left != "" && axis_text_left != undefined) {
            axis_text_left = axis_text_left;
        } else {
            axis_text_left = $('#tcm_axi_le_dis').val();
        }

        if (cv_text_left != "" && cv_text_left != undefined) {
            cv_text_left = cv_text_left;
        } else {
            cv_text_left = $('#tcm_cv_le_dis').val();
        }

        $('#tcm_sph_le_dis_value').val(sphere_text_left);
        $('#tcm_cyl_le_dis_value').val(cylinder_text_left);
        $('#tcm_axi_le_dis').val(axis_text_left);
        $('#tcm_cv_le_dis').val(cv_text_left);


        $('#modal_refraction_template_box').modal('hide');

        $(".select_casemanager_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_cylinder").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_axis").removeClass('bg-theme color-white');
        //$(".select_casemanager_refraction_prism").removeClass('bg-theme color-white');
        $(".select_casemanager_refraction_cv").removeClass('bg-theme color-white');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);


        });

        $(".refraction_cylinder_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);

        });

        $('.refraction_plus').removeClass("btn-theme").addClass('btn-theme-outline');;
        $('.refraction_minus').removeClass("btn-theme-outline").addClass('btn-theme');

        $(".class_type_right").addClass('active');
        $(".class_type_left").removeClass('active');
        $(".div_type_refraction_left").removeClass('show active');
        $(".div_type_refraction_right").addClass('show active');;

    });

    $(document).on("click", "#click_paritysm_box_open", function () {

        $('#modal_parity_ob_history').modal('show');

    });

    $(document).on("click", ".submit_popup_p_obstetrics_history", function (event) {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var rowId = $(this).attr('data-tcoh_id');

        var pa_tcoh_id = $("#pa_tcoh_id").val();

        var tcoh_p_term = $("#tcoh_p_term").val();
        var tcoh_p_weeks = $("#tcoh_p_weeks").val();
        var tcoh_p_delivery = $("#tcoh_p_delivery").val();
        var tcoh_p_status = $("#tcoh_p_status").val();

        var tcoh_p_status_number = $("#tcoh_p_status_number").val();
        var tcoh_p_location = $("#tcoh_p_location").val();
        var tcoh_p_mo_year = $("#tcoh_p_mo_year").val();
        var tcoh_p_gender = $("#tcoh_p_gender").val();
        var tcoh_p_birth_weight = $("#tcoh_p_birth_weight").val();
        var tcoh_p_remarks = $("#tcoh_p_remarks").val();

        $('.submit_popup_p_obstetrics_history').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        var post_url = 'action/action_casemanager_ob_his.php?do=add_oh_p'
        //var datastring = 'pm_pid=' + pm_pid + "&pc_id=" + pc_id + "&pm_case_type=" + pm_case_type + "&pm_appo_time=" + pm_appo_time + "&date_wise=" + date_wise;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                rowId: rowId,
                pa_tcoh_id: pa_tcoh_id,
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                tcoh_p_term: tcoh_p_term,
                tcoh_p_weeks: tcoh_p_weeks,
                tcoh_p_delivery: tcoh_p_delivery,
                tcoh_p_status: tcoh_p_status,
                tcoh_p_status_number: tcoh_p_status_number,
                tcoh_p_location: tcoh_p_location,
                tcoh_p_mo_year: tcoh_p_mo_year,
                tcoh_p_gender: tcoh_p_gender,
                tcoh_p_birth_weight: tcoh_p_birth_weight,
                tcoh_p_remarks: tcoh_p_remarks,
            },
        }).done(function (result) {

            $('#modal_parity_ob_history').modal('hide');

            $('.submit_popup_p_obstetrics_history').removeAttr('disabled');

            $("#form_modal_p_obstetrics_history").trigger("reset");

            //console.log("rowId: "+rowId);

            if ($('#pre_cash_ob_history_template .empty_data').length) {

                $("#pre_cash_ob_history_template").html(result.trim());

            } else {
                $("#pre_cash_ob_history_template").append(result.trim());
            }

            var patient_uni_id = $("#patient_uni_id").val();
            $(".success-message").show().delay(5000).fadeOut();
            $.myAllObHistory(patient_uni_id);
        });


    });

    $.myAllObHistory = function (patient_uni_id) {

        var post_url = 'action/action_casemanager_ob_his.php?do=total_calc'
        var datastring = 'patient_uni_id=' + patient_uni_id;
        //console.log("checkedlabid:"+checkedlabid);

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            $("#tcoh_g_all_numbers_div").html("Gravidity - " + result['tcoh_g_all_numbers']);
            $("#tcoh_p_all_numbers_div").html(result['tcoh_p_all_numbers']);
            $("#tcoh_a_all_numbers_div").html(result['tcoh_a_all_numbers']);
            $("#tcoh_e_all_numbers_div").html(result['tcoh_e_all_numbers']);
            $("#tcoh_l_all_numbers_div").html("Live Birth - " + result['tcoh_l_all_numbers']);


        });

    }

    $(document).on("click", "#click_abortionssm_box_open", function () {

        $('#modal_abortion_ob_history').modal('show');

    });

    $(document).on("click", ".submit_popup_a_obstetrics_history", function (event) {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var ab_tcoh_id = $("#ab_tcoh_id").val();

        var tcoh_a_weeks = $("#tcoh_a_weeks").val();
        var tcoh_a_heart_act = $("#tcoh_a_heart_act").val();
        var tcoh_a_treatment = $("#tcoh_a_treatment").val();
        var tcoh_a_location = $("#tcoh_a_location").val();

        var tcoh_a_remarks = $("#tcoh_a_remarks").val();

        $('.submit_popup_a_obstetrics_history').attr('disabled', 'disabled');
        //$('.overlay-popup-full').show();

        var post_url = 'action/action_casemanager_ob_his.php?do=add_oh_a'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                ab_tcoh_id: ab_tcoh_id,
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                tcoh_a_weeks: tcoh_a_weeks,
                tcoh_a_heart_act: tcoh_a_heart_act,
                tcoh_a_treatment: tcoh_a_treatment,
                tcoh_a_location: tcoh_a_location,
                tcoh_a_remarks: tcoh_a_remarks,
            },
        }).done(function (result) {

            $('#modal_abortion_ob_history').modal('hide');

            $('.submit_popup_a_obstetrics_history').removeAttr('disabled');

            $("#form_modal_a_obstetrics_history").trigger("reset");

            if ($('#pre_cash_ob_history_template .empty_data').length) {

                $("#pre_cash_ob_history_template").html(result.trim());

            } else {
                $("#pre_cash_ob_history_template").append(result.trim());
            }

            var patient_uni_id = $("#patient_uni_id").val();
            $(".success-message").show().delay(5000).fadeOut();
            $.myAllObHistory(patient_uni_id);
        });


    });

    $(document).on("click", "#click_electivesm_box_open", function () {

        $('#modal_electivesm_ob_history').modal('show');

    });

    $(document).on("click", ".submit_popup_e_obstetrics_history", function (event) {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var el_tcoh_id = $("#el_tcoh_id").val();

        var tcoh_e_weeks = $("#tcoh_e_weeks").val();
        var tcoh_e_location = $("#tcoh_e_location").val();
        var tcoh_e_treatment = $("#tcoh_e_treatment").val();
        var tcoh_e_remarks = $("#tcoh_e_remarks").val();

        $('.submit_popup_e_obstetrics_history').attr('disabled', 'disabled');
        //$('.overlay-popup-full').show();

        var post_url = 'action/action_casemanager_ob_his.php?do=add_oh_e'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                el_tcoh_id: el_tcoh_id,
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                tcoh_e_weeks: tcoh_e_weeks,
                tcoh_e_location: tcoh_e_location,
                tcoh_e_treatment: tcoh_e_treatment,
                tcoh_e_remarks: tcoh_e_remarks,
            },
        }).done(function (result) {

            $('#modal_electivesm_ob_history').modal('hide');

            $('.submit_popup_e_obstetrics_history').removeAttr('disabled');

            $("#form_modal_e_obstetrics_history").trigger("reset");

            if ($('#pre_cash_ob_history_template .empty_data').length) {

                $("#pre_cash_ob_history_template").html(result.trim());

            } else {
                $("#pre_cash_ob_history_template").append(result.trim());
            }

            var patient_uni_id = $("#patient_uni_id").val();
            $(".success-message").show().delay(5000).fadeOut();
            $.myAllObHistory(patient_uni_id);
        });


    });

    $(document).on("click", ".delete_popup_obstetrics_history", function (event) {

        var pm_pid = $(this).attr('data-pmpid');
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var rowId = $(this).attr('data-tcoh_id');
        var tcoh_id = $("#tcoh_id_" + rowId).val();

        $('#deletepopup_obs').modal('show');
        var tcgc_id = $(this).attr('data-tcgc_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>Obstetrics History </b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_ob_history_text').html(text);
        $('#row_tcoh_id').val(rowId);
        $('#delete_tcoh_id').val(tcoh_id);
        $('.pm_pid').val(pm_pid);

    });

    $(document).on("click", ".add_vitals_reception", function () {
        //console.log("Yes");
        $('#modal_add_vitals').modal('show');
        var pm_pid = $(this).attr("data-pm_pid");
        var pm_id = $(this).attr("data-pm_id");
        var pm_uniq_id = $(this).attr("data-pm_uniq_id");

        $("#pm_pid_vitals").val(pm_pid);
        $("#pm_id_vitals").val(pm_id);
        $("#patient_uni_id_vitals").val(pm_uniq_id);


    });

    $(document).on("click", ".add_body_com_reception", function () {
        ////console.log("Yes");
        $('#modal_add_body_com').modal('show');
        var pm_pid = $(this).attr("data-pm_pid");
        var pm_id = $(this).attr("data-pm_id");
        var pm_uniq_id = $(this).attr("data-pm_uniq_id");

        $("#pm_pid_b_com").val(pm_pid);
        $("#pm_id_b_com").val(pm_id);
        $("#patient_uni_id_b_com").val(pm_uniq_id);

    });

    $(document).on("click", "#submit_case_vitals_reception", function () {


        var temp = $("#temp").val();
        var resp_rate = $("#resp_rate").val();
        var pres = $("#pres").val();
        var blood_press = $("#blood_press").val();
        var spo2 = $("#spo2").val();
        var pm_pid = $("#pm_pid_vitals").val();
        var pm_id = $("#pm_id_vitals").val();
        var patient_uni_id = $("#patient_uni_id_vitals").val();

        var all = temp + resp_rate + pres + blood_press + spo2;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }
        $('#submit_case_vitals_reception').attr('disabled', 'disabled');
        var post_url = 'action/action_case_vitals.php?do=add_single'
        var datastring = 'temp=' + temp + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&pres=" + pres + "&resp_rate=" + resp_rate + "&blood_press=" + blood_press + "&spo2=" + spo2;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                temp: temp,
                pm_id: pm_id,
                pm_pid: pm_pid,
                pres: pres,
                resp_rate: resp_rate,
                blood_press: blood_press,
                spo2: spo2,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#submit_case_vitals_reception').removeAttr('disabled');
            $('#modal_add_vitals').modal('hide');

            $("#temp").val("");
            $("#resp_rate").val("");
            $("#pres").val("");
            $("#blood_press").val("");
            $("#spo2").val("");


            //location.reload();

        });

    });

    $(document).on("click", "#submit_case_body_com_reception", function () {

        var height = $("#height").val();
        var weight = $("#weight").val();
        var bmi = $("#bmi").val();
        var bmr = $("#bmr").val();
        var pm_pid = $("#pm_pid_b_com").val();
        var pm_id = $("#pm_id_b_com").val();
        var patient_uni_id = $("#patient_uni_id_b_com").val();

        var all = height + weight;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }
        $('#submit_case_body_com_reception').attr('disabled', 'disabled');
        var post_url = 'action/action_case_body_com.php?do=add_single'
        var datastring = 'height=' + height + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&weight=" + weight + "&bmi=" + bmi + "&bmr=" + bmr;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                height: height,
                pm_id: pm_id,
                pm_pid: pm_pid,
                weight: weight,
                bmi: bmi,
                bmr: bmi,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#submit_case_body_com_reception').removeAttr('disabled');
            $('#modal_add_body_com').modal('hide');

            $("#height").val("");
            $("#weight").val("");
            $("#bmi").val("");
            $("#bmr").val("");



            //location.reload();

        });

    });

    $(document).on("click", ".add_eye_iop_reception", function () {
        ////console.log("Yes");
        $('#modal_add_eye_iop').modal('show');
        var pm_pid = $(this).attr("data-pm_pid");
        var pm_id = $(this).attr("data-pm_id");
        var pm_uniq_id = $(this).attr("data-pm_uniq_id");

        $("#pm_pid_eye_iop").val(pm_pid);
        $("#pm_id_eye_iop").val(pm_id);
        $("#patient_uni_id_eye_iop").val(pm_uniq_id);

    });

    $(document).on("click", "#submit_case_eye_iop_reception", function () {


        var right_eye = $("#tcei_right_eye_single").val();
        var left_eye = $("#tcei_left_eye_single").val();
        var tcei_date = $("#tcei_date_single").val();
        var tcei_time = $("#tcei_time_single").val();
        var remarks = $("#tcei_remarks_single").val();
        var pm_pid = $("#pm_pid_eye_iop").val();
        var pm_id = $("#pm_id_eye_iop").val();
        var patient_uni_id = $("#patient_uni_id_eye_iop").val();

        var all = right_eye + left_eye + tcei_date + tcei_time + remarks;
        var all_variable = all.trim();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#tcei_right_eye_single").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#tcei_left_eye_single").focus();
            return false;
        }

        if (tcei_date == "") {
            alert("Please enter Date.");
            $("#tcei_date_single").focus();
            return false;
        }

        if (tcei_time == "") {
            alert("Please enter Date Eye.");
            $("#tcei_time_single").focus();
            return false;
        }

        $('#submit_case_eye_iop_reception').attr('disabled', 'disabled');


        var post_url = 'action/action_case_eye_iop.php?do=add_single'
        var datastring = 'tcei_right_eye=' + right_eye + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tcei_date=" + tcei_date + "&tcei_left_eye=" + left_eye + "&tcei_time=" + tcei_time + "&tcei_remarks=" + remarks;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tcei_right_eye: right_eye,
                pm_id: pm_id,
                pm_pid: pm_pid,
                tcei_left_eye: left_eye,
                tcei_date: tcei_date,
                tcei_time: tcei_time,
                tcei_remarks: remarks,
                patient_uni_id: patient_uni_id,
            },

        }).done(function (result) {
            $('#submit_case_eye_iop_reception').removeAttr('disabled');
            ////console.log(result);
            $('#modal_add_eye_iop').modal('hide');

            $("#tcei_right_eye_single").val("");
            $("#tcei_left_eye_single").val("");
            $("#tcei_date_single").val("");
            $("#tcei_time_single").val("");
            $("#tcei_remarks_single").val("");



        });

    });

    $(document).on("click", ".add_visual_acuity_reception", function () {
        ////console.log("Yes");
        $('#modal_add_visual_acuity').modal('show');
        var pm_pid = $(this).attr("data-pm_pid");
        var pm_id = $(this).attr("data-pm_id");
        var pm_uniq_id = $(this).attr("data-pm_uniq_id");

        $("#pm_pid_visual_acuity").val(pm_pid);
        $("#pm_id_visual_acuity").val(pm_id);
        $("#patient_uni_id_visual_acuity").val(pm_uniq_id);



    });

    $(document).on("click", "#submit_case_visual_acuity_reception", function () {


        var right_eye = $("#right_eye_single").val();
        var left_eye = $("#left_eye_single").val();
        var tcva_date = $("#tcva_date_single").val();
        var tcva_time = $("#tcva_time_single").val();
        var remarks = $("#remarks_single").val();
        var pm_pid = $("#pm_pid_visual_acuity").val();
        var pm_id = $("#pm_id_visual_acuity").val();
        var patient_uni_id = $("#patient_uni_id_visual_acuity").val();

        var all = right_eye + left_eye + tcva_date + tcva_time + remarks;
        var all_variable = all.trim();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#right_eye_single").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#left_eye_single").focus();
            return false;
        }

        if (tcva_date == "") {
            alert("Please enter Date.");
            $("#tcva_date_single").focus();
            return false;
        }

        if (tcva_time == "") {
            alert("Please enter Date Eye.");
            $("#tcva_time_single").focus();
            return false;
        }

        $('#submit_case_visual_acuity_reception').attr('disabled', 'disabled');


        var post_url = 'action/action_case_visual_acuity.php?do=add_single'
        var datastring = 'right_eye=' + right_eye + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tcva_date=" + tcva_date + "&left_eye=" + left_eye + "&tcva_time=" + tcva_time + "&remarks=" + remarks;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                right_eye: right_eye,
                pm_id: pm_id,
                pm_pid: pm_pid,
                left_eye: left_eye,
                tcva_date: tcva_date,
                tcva_time: tcva_time,
                remarks: remarks,
                patient_uni_id: patient_uni_id,
            },

        }).done(function (result) {

            $('#submit_case_visual_acuity_reception').removeAttr('disabled');
            $('#modal_add_visual_acuity').modal('hide');

            $("#right_eye_single").val("");
            $("#left_eye_single").val("");
            $("#tcva_date_single").val("");
            $("#tcva_time_single").val("");
            $("#remarks_single").val("");



        });

    });

    $(".add_myt_patient").on('click', function (e) {

        if ($(this).is(":checked")) {

            var patient_id = $(this).val();
            var post_url = 'action/action_get_myt_data.php';
            var datastring = 'patient_id=' + patient_id;
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {

                var splitted1 = result.split("@@@");
                var Indication = splitted1[0];
                var Severity = splitted1[1];
                $('#Indication_div').html(Indication);
                $('#Severity_div').html(Severity);

            });

        } else {
            $('#Indication_div').html('<select class="form-select form-control"><option disabled="" selected="">Choose Indication</option></select>');
            $('#Severity_div').html('<select class="form-select form-control"><option disabled="" selected="">Choose Severity</option></select>');
        }

    });

    $("#addindicationbtn").on('click', function (e) {

        var patient_id = $('#addpatientto').val();

        if ($('.add_myt_patient').prop('checked') == false) {
            alert("Please Check checkbox.");
            return false;
        }

        var myt_indication = $('#myt_indication').val();
        if (myt_indication == "") {
            $('#myt_indication').focus();
            alert("Please select indication.");
            return false;
        }

        var split_indication = myt_indication.split("@");
        var Indication_id = split_indication[0];
        var Indication_value = split_indication[1];

        var myt_severity = $('#myt_severity').val();
        if (myt_severity == "") {
            $('#myt_severity').focus();
            alert("Please select severity.");
            return false;
        }

        var split_severity = myt_severity.split("@");
        var severity_id = split_severity[0];
        var severity_value = split_severity[1];
        // var patient_mobile1 = $('#patient_mobile').val();
        // if (patient_mobile1 == "") {
        //     var patient_mobile = "";
        // } else {
        //     var patient_mobile = '"&patient_mobile="' + patient_mobile1;
        // }


        var post_url = 'action/action_post_myt_data.php';
        var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value;
        //alert(datastring);

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {
            if (result == 1) {
                window.location.reload();
            } else {
                alert("Mobile number already exist please enter alternative mobile number");
                $('#add_alter_mobile_modal').modal('show');
                $('.add_mobile_button').show();

            }
        });

    });

    $("#submit_alter_mobile").on('click', function (e) {

        var patient_id = $('#addpatientto').val();

        var myt_indication = $('#myt_indication').val();
        var split_indication = myt_indication.split("@");
        var Indication_id = split_indication[0];
        var Indication_value = split_indication[1];

        var myt_severity = $('#myt_severity').val();
        if (myt_severity) {
            var split_severity = myt_severity.split("@");
            var severity_id = split_severity[0];
            var severity_value = split_severity[1];
        } else {
            var severity_id = "";
            var severity_value = "";
        }


        var patient_mobile1 = $('#patient_mobile').val();
        if (patient_mobile1.length == 10) {


            var post_url = 'action/action_post_myt_data.php';
            if (patient_mobile1 == "") {
                var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value;
            } else {
                var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value + "&patient_mobile=" + patient_mobile1;
            }
            //alert(datastring);

            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {
                if (result == 1) {
                    window.location.reload();
                } else {
                    alert("Mobile number already exist please enter alternative mobile number");
                    $('#add_alter_mobile_modal').modal('show');
                }
            });
        } else {
            alert("Please enter 10 digit mobile number.");
            return false;
        }


    });

    $("#add_alter_mobile").on('click', function (e) {
        $('#add_alter_mobile_modal').modal('show');
    });

    $("#addindicationbtn_consult").on('click', function (e) {

        var patient_id = $('#addpatientto').val();

        if ($('.add_myt_patient').prop('checked') == false) {
            alert("Please Check checkbox.");
            return false;
        }

        var myt_indication = $('#myt_indication').val();
        if (myt_indication == "") {
            $('#myt_indication').focus();
            alert("Please select indication.");
            return false;
        }

        var split_indication = myt_indication.split("@");
        var Indication_id = split_indication[0];
        var Indication_value = split_indication[1];

        var myt_severity = $('#myt_severity').val();
        if (myt_severity == "") {
            $('#myt_severity').focus();
            alert("Please select severity.");
            return false;
        }

        var split_severity = myt_severity.split("@");
        var severity_id = split_severity[0];
        var severity_value = split_severity[1];

        // var patient_mobile1 = $('#patient_mobile').val();
        // if (patient_mobile1 == "") {
        //     var patient_mobile = "";
        // } else {
        //     var patient_mobile = '"&patient_mobile="' + patient_mobile1;
        // }

        var post_url = 'action/action_post_myt_data.php';
        var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value;
        //alert(datastring);

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {
            if (result == 1) {
                //window.location.reload();
                $('#addpatientto').attr('disabled', 'disabled');
                $('#myt_indication').attr('disabled', 'disabled');
                $('#myt_severity').attr('disabled', 'disabled');
                $('#addindicationbtn_consult').hide();

            } else if (result == 2) {
                $('#addpatientto').removeAttr('disabled');
                $('#myt_indication').removeAttr('disabled');
                $('#myt_severity').removeAttr('disabled');

                alert("Mobile number already exist please enter alternative mobile number");
                $('#add_alter_mobile_modal').modal('show');
                $('.add_mobile_button').show();
                $('#addindicationbtn_consult').show();
            } else {
                $('#addpatientto').removeAttr('disabled');
                $('#myt_indication').removeAttr('disabled');
                $('#myt_severity').removeAttr('disabled');

                alert("Something went wrong");
                // $('#add_alter_mobile_modal').modal('show');
                // $('.add_mobile_button').show();
                $('#addindicationbtn_consult').show();

            }
        });

    });

    $("#submit_alter_mobile_consult").on('click', function (e) {

        var patient_id = $('#addpatientto').val();

        var myt_indication = $('#myt_indication').val();
        var split_indication = myt_indication.split("@");
        var Indication_id = split_indication[0];
        var Indication_value = split_indication[1];

        var myt_severity = $('#myt_severity').val();
        var split_severity = myt_severity.split("@");
        var severity_id = split_severity[0];
        var severity_value = split_severity[1];

        var patient_mobile1 = $('#patient_mobile').val();
        if (patient_mobile1.length == 10) {


            var post_url = 'action/action_post_myt_data.php';
            if (patient_mobile1 == "") {
                var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value;
            } else {
                var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value + "&patient_mobile=" + patient_mobile1;
            }
            //alert(datastring);
            $('#submit_alter_mobile_consult').attr('disabled', 'disabled');
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {
                if (result == 1) {
                    //window.location.reload();
                    $('#addpatientto').attr('disabled', 'disabled');
                    $('#myt_indication').attr('disabled', 'disabled');
                    $('#myt_severity').attr('disabled', 'disabled');
                    $('#addindicationbtn_consult').hide();
                    $('#submit_alter_mobile_consult').removeAttr('disabled');
                    $('#add_alter_mobile_modal').modal('hide');
                    $('.add_mobile_button').hide();

                } else if (result == 2) {
                    $('#addpatientto').removeAttr('disabled');
                    $('#myt_indication').removeAttr('disabled');
                    $('#myt_severity').removeAttr('disabled');
                    $('#submit_alter_mobile_consult').removeAttr('disabled');
                    $('#add_alter_mobile_modal').modal('show');

                    alert("Mobile number already exist please enter alternative mobile number");
                    $('#add_alter_mobile_modal').modal('show');
                    $('.add_mobile_button').show();
                    $('#addindicationbtn_consult').show();
                } else {
                    $('#addpatientto').removeAttr('disabled');
                    $('#myt_indication').removeAttr('disabled');
                    $('#myt_severity').removeAttr('disabled');
                    $('#submit_alter_mobile_consult').removeAttr('disabled');
                    $('#add_alter_mobile_modal').modal('hide');
                    $('.add_mobile_button').hide();

                    alert("Something went wrong");
                    // $('#add_alter_mobile_modal').modal('show');
                    // $('.add_mobile_button').show();
                    $('#addindicationbtn_consult').show();

                }
            });
        } else {
            alert("Please enter 10 digit mobile number.");
            return false;
        }


    });

    //$(".add_to_myt").on('click', function (e) {

    $(document).on("click", ".add_to_myt", function () {

        var onid = $(this).attr("data-id");
        //alert(onid);
        $('#addpatientto').val(onid);
        $('#add_myt_modal').modal('show');

        var post_url = 'action/action_get_myt_data.php';
        var datastring = 'patient_id=' + onid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            var splitted1 = result.split("@@@");
            var Indication = splitted1[0];
            var Severity = splitted1[1];
            $('#Indication_div').html(Indication);
            $('#Severity_div').html(Severity);

        });

    });

    $("#addindicationbtn_dd").on('click', function (e) {

        var patient_id = $('#addpatientto').val();

        var myt_indication = $('#myt_indication').val();
        if (myt_indication == "") {
            $('#myt_indication').focus();
            alert("Please select indication.");
            return false;
        }

        var split_indication = myt_indication.split("@");
        var Indication_id = split_indication[0];
        var Indication_value = split_indication[1];

        var myt_severity = $('#myt_severity').val();
        if (myt_severity == "") {
            $('#myt_severity').focus();
            alert("Please select severity.");
            return false;
        }

        var split_severity = myt_severity.split("@");
        var severity_id = split_severity[0];
        var severity_value = split_severity[1];

        var patient_mobile1 = $('#patient_mobile').val();
        // if (patient_mobile1 == "") {
        //     var patient_mobile = "";
        // } else {
        //     var patient_mobile = '"&patient_mobile="' + patient_mobile1;
        // }

        var post_url = 'action/action_post_myt_data.php';
        if (patient_mobile1 == "") {
            var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value;
        } else {
            var datastring = 'patient_id=' + patient_id + "&indication_id=" + Indication_id + "&indication_value=" + Indication_value + "&severity_id=" + severity_id + "&severity_value=" + severity_value + "&patient_mobile=" + patient_mobile1;
        }
        //alert(datastring);
        $('#addindicationbtn_dd').attr('disabled', 'disabled');
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {
            if (result == 1) {
                window.location.reload();
                //$('#add_myt_modal').modal('hide');
                // $('#addindicationbtn_dd').removeAttr('disabled');
            } else {
                alert("Mobile number already exist please enter alternative mobile number");
                $('.alter_mobile_number').show();
                $('#addindicationbtn_dd').removeAttr('disabled');
            }
        });

    });

    $(document).on("click", "#visit_history", function () {
        $('#modal_visit_history_popup').modal('show');
        var id = $(this).attr("data-id");
        var post_url = 'action/action_visit_history.php?do=popup_data'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#visit_history_data").html(result);
        });
    });

    $(document).on("click", ".reset-custom-popup-case-report", function () {

        $("#form_modal_add_popup_case_report_box").trigger("reset");
        $("#select_tcrt_id").val(0);
        $("#select_tcrr_id").val(0);

        $("#pre_cash_casemanage_report_remarks_template").html("");

        $(".li_case_report_title").css({
            'background-color': '#FFFFFF'
        });
        $(".li_case_report_remarks").css({
            'background-color': '#FFFFFF'
        });

        $.customCaseReportremoveErrorClass();

    });

    $("#add_lab_value_submit_historical").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var arrayvalues = [];

        $("input.all_lab_para_value_req").each(function () {

            if ($(this).val() == 0) {

                arrayvalues.push('false');

            } else {

                arrayvalues.push('true');
            }
        });

        if (arrayvalues.indexOf("true") === -1) {
            alert('Please enter anyone lab value');
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_button_add_lab_value').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_button_add_lab_value').removeAttr('disabled');

            $('#modal_add_lab_value_historical').modal('hide');
            $('.err_register').hide();

            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');
            $.customnewlabtable(pm_pid, patient_uni_id);


        });
    });

    $(document).on("change", "#myt_indication", function () {

        var pid = $(this).attr("data-id");
        var indiid = $(this).val();
        var splitted1 = indiid.split("@");
        var indication_id = splitted1[0];
        //var Severity = splitted1[1];
        //alert(id);
        //var Link = $(".get_base_url").val();
        var post_url = 'action/action_get_myt_data_severity_data.php';
        var datastring = 'indiid=' + indication_id + "&pid=" + pid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            //window.location.href = Link + "phase_b/dashboard_nondoc.php";

            //location.reload();
            $('#Severity_div').html(result);


        });

    });

    $(document).on("change", "#dr_followup_date", function () {

        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + '-' + month + '-' + day;
        var Link = $(".base_url_practice").val();
        window.location.href = Link + 'dr_followup_appointment.php?date=' + last_date;
    });

    $(document).on("keydown", "#bookapp", function (e) {
        var charCode = e.charCode || e.keyCode || e.which;
        if (charCode == 27) {
            alert("Please click view appointment button.");
            return false;
        }
    });

    $(document).on("change", ".change_days_incident", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=incident_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-feed').scroll(function () {

        if ($('.load-more-feed').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            if (row <= allcount) {
                $("#row").val(row);
                $.ajax({
                    type: 'post',
                    url: 'action/action_get_priscription_myt_data.php',
                    data: {
                        patient_id: patient_id,
                        row: row,

                    },
                    dataType: "text",
                    success: function (response) {
                        if (response.trim() !== "") {
                            setTimeout(function () {
                                $('.priscription_pagination_data').append(response);
                                $('.priscription_pagination_data').scrollTop(260);
                            }, 1000);
                        }
                    }
                });
            } else {

            }
        }
    });

    $('.load-more-incident').scroll(function () {

        if ($('.load-more-incident').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_incident_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.incident_pagination_data').append(response);
                            $('.incident_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("change", ".change_days_step", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=step_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-steps').scroll(function () {

        if ($('.load-more-steps').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_step_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.steps_pagination_data').append(response);
                            $('.steps_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("click", "#submit_button_add_ward", function () {

        var ward_name = $("#ward_name").val();

        if (ward_name.trim() == "") {
            alert("Please enter ward name.");
            return false;
        }

        var post_url = 'action/action_new_ward.php?do=add'
        var datastring = 'ward_name=' + ward_name;
        //console.log(datastring);
        $('#submit_button_add_ward').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                ward_name: ward_name,
            },
        }).done(function (result) {
            if (result) {
                window.location.href = "ward_details.php?id=" + result.trim();
            } else {
                window.location.reload();
            }

            //alert(result);
            // window.location.reload();
            // $('#modal_add_word').modal('hide');

            // $("#ward_name").val("");

            // $("#new_ward").append(result);

            // $('#submit_button_add_ward').removeAttr('disabled');

        });

    });

    $(document).on("click", ".select_edit_ward_name", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_word').modal('show');

        var post_url = 'action/action_new_ward.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_twm_id").val(result['twm_id']);
            $("#edit_ward_name").val(result['ward_name']);

        });

    });

    $('#submit_button_edit_ward').click(function () {
        var twm_id = $("#edit_twm_id").val();
        var ward_name = $("#edit_ward_name").val();


        if (ward_name.trim() == "") {
            alert("Please enter Ward Name.");
            return false;
        } else {

        }

        var post_url = 'action/action_new_ward.php?do=edit'
        var datastring = 'twm_id=' + twm_id + "&ward_name=" + ward_name;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                twm_id: twm_id,
                ward_name: ward_name,
            },
        }).done(function (result) {

            //console.log(result);  
            location.reload();

        });

    });

    // $("#search_ward_room").on("keyup", function () {
    //     var value = $(this).val().toLowerCase();
    //     $(".tr_ward_room").filter(function () {
    //         $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    //     });
    // });

    $(document).on("keydown", "#form_modal_add_bed", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_add_bed').click();
            return false;
        }
    });


    $(document).on("click", "#submit_button_add_bed", function () {

        var bed_name = $("#bed_name").val();
        var type = $('input[name=type]:checked').val();
        var ward_id = $("#ward_id").val();

        if ($('input[name=type]:checked').length == 0) {
            alert("Please checked one value.");
            return false;
        }

        if (bed_name == "") {
            alert("Please enter name.");
            return false;
        }

        var post_url = 'action/action_new_bed.php?do=add'
        var datastring = 'bed_name=' + bed_name + "&type=" + type + "&ward_id=" + ward_id;
        $('#submit_button_add_bed').attr('disabled', 'disabled');

        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                bed_name: bed_name,
                type: type,
                ward_id: ward_id,
            },
        }).done(function (result) {
            //alert(result);
            // $('#modal_add_bed').modal('hide');

            // $("#bed_name").val("");
            // $(".dataTables_empty").css("display", "none");

            // $("#form_modal_add_bed").trigger("reset");

            // $("#new_bed_tr").append(result);

            // $('#submit_button_add_bed').removeAttr('disabled');

            window.location.reload();


        });

    });

    $(document).on("click", "#edit_bed", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        // $('#modal_edit_bed').modal('show');

        $.ajax({
            type: 'post',
            url: "action/edit_bed.php",
            data: {
                dataId: id,

            },
            cache: false,
            success: function (result) {

                var splitted = result.split("@@@");

                //$("#edit_ward_id").val(splitted[0]);
                var edit_ward_id1 = result.split('@@@')[0];

                var edit_ward_id = edit_ward_id1.trim();
                $("#edit_ward_id").val(edit_ward_id);
                //$("#edit_ward_bed").val(splitted[1]);
                var room_type1 = result.split('@@@')[1];
                var room_type = room_type1.trim();

                $("#edit_ward_bed_name").val(splitted[2]);

                if (room_type == 'bed') {
                    $("#edit_inlineRadio1").prop('checked', true);
                    $("#edit_inlineRadio2").prop('checked', false);
                } else {
                    $("#edit_inlineRadio2").prop('checked', true);
                    $("#edit_inlineRadio1").prop("checked", false);
                }



            }
        });

    });

    $(document).on("keydown", "#form_modal_edit_bed", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_edit_bed').click();
            return false;
        }
    });

    $(document).on("click", "#submit_button_edit_bed", function () {

        var edit_ward_bed = $("#edit_ward_bed_name").val();
        var type = $('.bed_type:checked').val();
        var edit_ward_id = $("#edit_ward_id").val();
        //alert(edit_ward_bed);
        if (edit_ward_bed.trim() == "") {
            alert("Please enter name.");
            return false;
        } else if (!$("#edit_inlineRadio1").is(":checked") && !$("#edit_inlineRadio2").is(":checked")) {
            alert("Please Select Type.");
            $('#pm_gender').focus();
            return false;
        }

        var post_url = 'action/action_new_bed.php?do=edit'
        var datastring = 'edit_ward_bed=' + edit_ward_bed + '&type=' + type + '&edit_ward_id=' + edit_ward_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_ward_bed: edit_ward_bed,
                type: type,
                edit_ward_id: edit_ward_id,
            },
        }).done(function (result) {

            window.location.reload();
            // $('#modal_edit_bed').modal('hide');
            // $('#tr_ward_bed_' + edit_ward_id).html(result);


        });

    });

    $(document).on("click", "#delete_bed", function () {
        var id = $(this).attr('data-id');
        $("#delete_room_id").val(id);

        var room_name = $(this).attr('data-rname');
        $("#delete_room_name_text").html(room_name + " Room/Bed");

    });

    $('#submit_button_delete_bed').click(function () {
        var id = $("#delete_room_id").val();
        var post_url = 'action/action_new_bed.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_bed').modal('hide');
            // $('#tr_ward_bed_' + id).remove();
            window.location.reload();

        });

    });

    $(document).on("click", "#block_bed", function () {
        var id = $(this).attr('data-id');
        //$('#modal_block_bed').modal('show');

        var delete_name = $(this).attr('data-rname');
        $("#block_text").html(delete_name + " Room/Bed");


        $('#submit_button_block_bed').click(function () {

            var post_url = 'action/action_new_bed.php?do=block'
            var datastring = 'id=' + id;
            ////console.log(datastring);
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                data: datastring
            }).done(function (result) {
                // ////console.log(result);
                // $('#modal_block_bed').modal('hide');
                // $('#tr_ward_bed_' + id).html(result);

                window.location.reload();

            });

        });

    });

    $(document).on("click", "#unblock_bed", function () {
        var id = $(this).attr('data-id');
        // $('#modal_unblock_bed').modal('show');

        var delete_name = $(this).attr('data-rname');
        $("#unblock_text").html(delete_name + " Room/Bed");


        $('#submit_button_unblock_bed').click(function () {

            var post_url = 'action/action_new_bed.php?do=unblock'
            var datastring = 'id=' + id;
            ////console.log(datastring);
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                data: datastring
            }).done(function (result) {
                ////console.log(result);
                // $('#modal_unblock_bed').modal('hide');
                // $('#tr_ward_bed_' + id).html(result);

                window.location.reload();

            });

        });

    });

    $(document).on("change", ".change_days_reading_table", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=reading_table_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $(document).on("click", ".select-hospiatl-to-admin", function () {

        var Link = $(".base_url_practice").val();
        console.log("Done");
        var post_url = Link + 'action/select_hospital_admin.php';
        var datastring = 'id=1';
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            if (result.trim() == 1) {

                MainLinkAdmin = Link + "admin/";

                window.open(MainLinkAdmin, '_blank'); //export csv end 

            } else {

                alert('You can not open admin panel.')
            }
            //location.reload();


        });

    });

    $(document).on("keydown", "#practicemodal", function (e) {
        var charCode = e.charCode || e.keyCode || e.which;
        if (charCode == 27) {
            alert("Please click Launch My Practice.");
            return false;
        }
    });

    $(document).on("click", "#submit_filters_appointment", function () {
        var Link = $(".base_url_practice").val();
        var action_page = $("#action_page").val();
        //console.log(action_page);
        // return false;
        var dr_dashboard_date = $("#dr_dashboard_date_hidden").val();
        console.log(action_page);
        var searchDatelink = '&date=' + dr_dashboard_date;
        var site_url = Link + action_page + ".php?type=1";
        var popup_search_category = $("input[name='patient_category']:checked").val();
        if (popup_search_category) {
            popup_search_category = popup_search_category;
            var categorylink = '&category=' + popup_search_category;
        } else {
            popup_search_category = "";
            var categorylink = '';
        }
        var popup_search_casetype = $("input[name='casetype']:checked").val();
        if (popup_search_casetype) {
            popup_search_casetype = popup_search_casetype;
            var casetypelink = '&casetype=' + popup_search_casetype;
        } else {
            popup_search_casetype = "";
            var casetypelink = '';
        }
        var popup_search_status = $("input[name='status']:checked").val();
        if (popup_search_status && popup_search_status !== "all") {
            popup_search_status = popup_search_status;
            var statuslink = '&status=' + popup_search_status;
        } else {
            popup_search_status = "";
            var statuslink = '';
        }
        var popup_search_apptype = $("input[name='apptype']:checked").val();
        if (popup_search_apptype) {
            popup_search_apptype = popup_search_apptype;
            var apptypelink = '&apptype=' + popup_search_apptype;
        } else {
            popup_search_apptype = "";
            var apptypelink = '';
        }
        var from_age_date = $("#from_age_date").val();
        if (from_age_date) {
            from_age_date = from_age_date;
            var from_age_datelink = '&from_age_date=' + from_age_date;
        } else {
            from_age_date = "";
            var from_age_datelink = '';
        }
        var to_age_date = $("#to_age_date").val();
        if (to_age_date) {
            to_age_date = to_age_date;
            var to_age_datelink = '&to_age_date=' + to_age_date;
        } else {
            to_age_date = "";
            var to_age_datelink = '';
        }
        var popup_search_gender = $("input[name='gender']:checked").val();
        if (popup_search_gender) {
            popup_search_gender = popup_search_gender;
            var genderlink = '&gender=' + popup_search_gender;
        } else {
            popup_search_gender = "";
            var genderlink = '';
        }
        var Main_Link = site_url + searchDatelink + categorylink + casetypelink + statuslink + apptypelink + from_age_datelink + to_age_datelink + genderlink;
        window.location.href = Main_Link;
    });

    $(document).on("click", ".click_read_notification_status", function () {
        var noti_id = $(this).attr('data-noti_id');
        var user_id = $(this).attr('data-user_id');
        var href = $(this).attr('href');
        var Link = $(".get_base_url").val();
        var post_url = Link + 'action/action_get_all_notofication.php?do=read'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                noti_id: noti_id,
                user_id: user_id
            },
        }).done(function (result) {

            if (result.trim() != 2) {
                window.open(result.trim(), '_blank');
            }
        });

    });

    $('.load-more-reading-table').on('scroll', function () {

        if ($('.load-more-reading-table').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            var day_count = Number($('#day_count').val());
            row = row + 10;
            if (row <= allcount) {
                $("#row").val(row);
                $.ajax({
                    type: 'post',
                    url: 'action/action_get_reading_table_myt_data.php',
                    data: {
                        patient_id: patient_id,
                        row: row,
                        day_count: day_count,

                    },
                    dataType: "text",
                    success: function (response) {
                        if (response.trim() !== "") {
                            setTimeout(function () {
                                $('.reading_pagination_data').append(response);
                                $('.reading_pagination_data').scrollTop(240);
                            }, 1000);
                        }
                    }
                });
            } else {

            }
        }
    });

    $(".atd_selbox_inner").change(function () {
        var atd_id = this.value;
        if (atd_id == 0) {
            window.location.href = "admission_transfer_discharge.php";
        } else {
            window.location.href = "admission_transfer_discharge.php?atd_id=" + atd_id;
        }

    });

    $("#search_atd_patient").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".atd_table_search .room_bed_tboday").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $(document).on("keyup", "#search_atd_patient_contact_no", function () {

        var contact_no = $(this).val();

        if (contact_no.length == 10) {

            var Link = $(".get_base_url").val();
            var post_url = 'action/get_patient_from_contact_no.php';
            var datastring = 'contact_no=' + contact_no;
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {

                var splitted1 = result.split("@@@");
                var existing_patient = splitted1[0];
                var time_doc = splitted1[1];
                $('.existing_atd_patient').html(existing_patient);
                $('.add_atd_patient_button').html(time_doc);


            });

        } else {
            $('.existing_atd_patient').html("");
            $('.add_atd_patient_button').html("");
            // alert("Please enter 10 digit mobile number.");
            // $('#search_patient_contact_no').focus();
            return false;
        }

    });

    $("#defaultCheck1").click(function () {
        if ($("#defaultCheck1").is(':checked')) {
            $('.single_patient').prop('disabled', true).trigger("chosen:updated");
            $('.single_patient').val('').trigger('chosen:updated');
            $("#defaultCheck1").val('1');

        } else {
            // $('.single_patient').removeAttr('disabled');
            $('.single_patient').prop('disabled', false).trigger("chosen:updated");
            $("#defaultCheck1").val('');

        }
    });

    $("#send_refer_code").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var all_patient = $("#defaultCheck1").val();
        var single_patient = $(".single_patient").val();

        if (all_patient == "" && single_patient == "") {
            alert("Please select patient.");
            return false;
        } else if ($("#shareviasms").prop('checked') == false && $("#shareviaemail").prop('checked') == false) {
            alert("Please select share via.");
            return false;
        } else if ($("#shareviaemail").prop('checked') == false && $("#shareviasms").prop('checked') == false) {
            alert("Please select share via.");
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#send_refer_code_btn').attr('disabled', 'disabled');
        $('#send_refer_code_btn').hide();
        $('.err_registerloader_sendrefcode').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            //if (result == 1) {

            $("#sharepracticecodepopup").modal("hide");
            $('#send_refer_code_btn').attr('disabled', false);
            $('#send_refer_code_btn').show();
            $('.err_registerloader_sendrefcode').hide();

            // } else {

            //     $('#send_refer_code_btn').attr('disabled', 'disabled');
            //     $('#send_refer_code_btn').hide();
            //     $('.err_registerloader_sendrefcode').show();
            //     return false;

            // }

        });

    });

    $("#shareviasms").click(function () {
        if ($("#shareviasms").is(':checked')) {
            $("#shareviasms").val('1');

        } else {
            $("#shareviasms").val('');
        }
    });

    $("#shareviaemail").click(function () {
        if ($("#shareviaemail").is(':checked')) {
            $("#shareviaemail").val('1');

        } else {
            $("#shareviaemail").val('');
        }
    });

    $("#atd_add_new_patient").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var AbhaEnable = $(".AbhaEnable").val();

        if (AbhaEnable == "Y") {


            $(".abha_address_error").hide().html("");

            if ($("#pm_abha_address").val() != "" && $("#pm_abha_verify").val() == 0) {

                $("#pm_abha_address").focus();
                alert("Please Verify Abha Address");
                return false;

            } else {

            }

        } else {

        }

        var pm_first_name = $("#pm_first_name").val();

        var pm_last_name = $("#pm_last_name").val();

        var pm_dob = $("#pm_dob").val();

        var pm_contact_no = $("#pm_contact_no").val();


        if (pm_first_name == "") {
            alert("Please enter First Name.");
            $('#pm_first_name').focus();
            return false;
        } else if (pm_last_name == "") {
            alert("Please enter Last Name.");
            $('#pm_last_name').focus();
            return false;
        } else if ($(".pm_gender:checked").length == 0) {
            alert("Please select Gender.");
            $('.pm_gender').focus();
            return false;
        } else if (pm_dob == "") {
            alert("Please enter Date OF Birth.");
            $('#pm_dob').focus();
        } else if (pm_contact_no == "" && pm_contact_no.length != 10) {
            alert("Please enter Valid Contact No.");
            $('#pm_contact_no').focus();
            return false;

        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_new_patient_atd').hide();
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result) {

                window.location.href = "add_admission_details.php?id=" + result + "&type=new";

            } else {
                $('#submit_new_patient_atd').show();
                $('.err_register').hide();
            }

        });

    });

    $(document).on('change', '#old_atd_department', function () {
        var id = this.value;

        var post_url = 'action/action_department_doctor.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#old_atd_admitting_doctor").html(result);
        });

    });

    $(document).on('change', '#atd_department', function () {
        var id = this.value;

        var post_url = 'action/action_department_doctor.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#atd_admitting_doctor").html(result);
        });

    });

    $(document).on('change', '#old_atd_ward', function () {
        var id = this.value;

        var post_url = 'action/action_ward_room.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#old_atd_room").html(result);
        });

    });

    $("#srch_dr_names_old_inp").autocomplete({

        source: 'action/get_inp_referance_details_from_name.php',
        minLength: 1,


        focus: function (event, ui) {
            event.preventDefault();
            $("#srch_dr_names_old_inp").val(ui.item.value);
            return false;

            $('#srch_dr_names_old_inp').trigger('click');

        },

        change: function (event, ui) {
            if (!ui.item) {
                $('#srch_dr_names_old_inp').val("");
            }
        },

        select: function (event, ui) {
            event.preventDefault();
            $('#inp_old_ref_id').val(ui.item.rm_id);
            $("#inp_old_doc_phone").val(ui.item.doc_phone);
            $("#inp_old_other_ref").val(ui.item.other_ref);

            $('#srch_dr_names_old_inp').attr('readonly', true);

            $("#add_referance").hide();
            $("#old_remove_ref_inp").show();

            return false;
        }

    });

    $("#add_new_ref_doctor_inp").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#rm_name").val();
        var rm_email = $("#rm_email").val();
        var rm_phone_no = $("#rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_add_ref_doctor_inp').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            $('#submit_add_ref_doctor').removeAttr('disabled');
            $('#addnewreference').modal('hide');

            $('#srch_dr_names').attr('readonly', true);
            $("#srch_dr_names").val(result['ref_name']);
            $("#ref_id").val(result['ref_id']);
            $("#doc_phone").val(result['ref_phone']);
            $("#other_ref").val("0");

            $("#add_referance").hide();
            $("#remove_ref").show();

            $("#add_new_ref_doctor_inp").trigger("reset");




        });

    });


    $("#add_inp_new_ref_doctor").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#rm_name").val();
        var rm_email = $("#rm_email").val();
        var rm_phone_no = $("#rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_add_inp_ref_doctor').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            //alert("hello");
            $('#submit_add_inp_ref_doctor').removeAttr('disabled');
            $('#addnewatdreference').modal('hide');

            $('#srch_dr_names_old_inp').attr('readonly', true);
            $("#srch_dr_names_old_inp").val(result['ref_name']);
            $("#inp_old_ref_id").val(result['ref_id']);
            $("#inp_old_doc_phone").val(result['ref_phone']);
            $("#inp_old_other_ref").val("0");

            $("#add_referance").hide();
            $("#old_remove_ref_inp").show();

            $("#add_new_ref_doctor").trigger("reset");




        });

    });

    $(document).on("click", "#old_remove_ref_inp", function () {

        $('#srch_dr_names_old_inp').attr('readonly', false);
        $("#srch_dr_names_old_inp").val("");

        $('#srch_dr_names_popup').attr('readonly', false);
        $("#srch_dr_names_popup").val("");

        $("#inp_old_ref_id").val("");
        $("#inp_old_doc_phone").val("");
        $("#inp_old_other_ref").val("");

        $("#add_referance").show();
        $("#old_remove_ref_inp").hide();


    });

    $(document).on('submit', '#patient_add_atd', function (e) {
        e.preventDefault();
        proceed = true;


        var atd_department = $("#old_atd_department").val();
        var atd_ward = $("#old_atd_ward").val();
        var atd_room = $("#old_atd_room").val();
        var atd_admitting_doctor = $("#old_atd_admitting_doctor").val();
        var atd_attending_doctor = $("#old_atd_attending_doctor").val();
        var atd_admitting_date = $("#old_atd_admitting_date").val();
        var atd_admitting_time = $("#old_atd_admitting_time").val();

        if (atd_department == "0" || atd_department == "") {
            alert("Please select the department.");
            $('#atd_department').focus();
            return false;
        } else if (atd_ward == "0" || atd_ward == "") {
            alert("Please select the ward.");
            $('#atd_ward').focus();
            return false;
        } else if (atd_room == "0" || atd_room == "") {
            alert("Please select available room ward.");
            $('#atd_room').focus();
            return false;
        } else if (atd_admitting_doctor == "0" || atd_admitting_doctor == "") {
            alert("Please select the admitting doctor.");
            $('#atd_admitting_doctor').focus();
            return false;
            // } else if (atd_attending_doctor == "0" || atd_attending_doctor == "") {
            //     alert("Please select the attending doctor.");
            //     $('#atd_attending_doctor').focus();
            //     return false;
        } else if (atd_admitting_date == "") {
            alert("Please select the admitting date.");
            $('#atd_admitting_date').focus();
            return false;
        } else if (atd_admitting_time == "") {
            alert("Please select the admitting time.");
            $('#atd_admitting_time').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register_validation').hide();
        $('#submit_new_patient_add_atd').hide();
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);  
            var splitted = result.split("@@@");
            var res = splitted[0]
            var ward_id = splitted[1];
            if (res == 1) {
                // window.location.replace= "<?php echo $Atd_Site_Url;?>admission_transfer_discharge.php?atd_id="+ward_id;              
                var url = "admission_transfer_discharge.php?atd_id=" + ward_id;
                $(location).attr('href', url);
                $.send_sms_to_admitting_doctor_new(pm_first_name, atd_admitting_doctor, atd_admitting_date, atd_admitting_time);
                $.send_sms_to_ref_admitting_doctor_new(pm_first_name, inp_new_doc_phone, atd_admitting_date, atd_admitting_time);
            } else if (res == 2) {
                $('.err_register_validation').show();
                $('#submit_new_patient_add_atd').show();
                $('.err_register').hide();
            } else {

            }

        });

    });

    $(document).on("click", "#manage_bill_section_reception", function () {
        var pm_pid = $(this).attr('data-pm_id');
        var pu_id = $(this).attr('data-pu_id');

        $('#modal_bill_section_reception').modal('show');

        var post_url = 'action/action_bill_section_reception.php?do=load_history';
        var datastring = 'pm_pid=' + pm_pid + '&pu_id=' + pu_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            console.log(result.trim());
            $("#billing_section_reception").html(result.trim());

        });
    });

    $(document).on("click", ".transfer_patient", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');

        $.ajax({
            type: 'post',
            url: "action/action_transfer.php?do=transfer_data",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {

                // $('#modal_discharged_readmitted').modal('hide');
                var splitted1 = result.split("@@@");
                $("#pname").html(splitted1[2]);
                $("#pid").html(splitted1[0]);
                $("#ip_no").html(splitted1[1]);
                var ward = splitted1[3];
                $('#admit_ward option[value=' + ward + ']').attr("selected", true);

                var room = splitted1[5];
                $("#admit_room").val(room);

                var department = splitted1[7];
                $('#admit_department option[value=' + department + ']').attr("selected", true);
                var doctor = splitted1[8];
                $("#admit_doctor").val(doctor);
                //$('#transfer_doctor option[value=' + doctor + ']').attr("selected", true);

                $("#patient_uniq_id").val(splitted1[9]);
                $("#atd_id").val(id);
            }
        });
    });

    $(document).on('change', '.atd_option_discharge_type', function () {
        if (this.value == "ward") { //check value if it is domicilio
            $('#ward').stop(true, true).show(1000); //than show
            $('#department').stop(true, true).hide(1000); //than show
        } else {
            $('#ward').stop(true, true).hide(1000); //than show
            $('#department').stop(true, true).show(1000); //than showv            
        }
    });

    $(document).on('change', '#transfer_ward', function () {
        var id = this.value;

        var post_url = 'action/action_ward_room.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#transfer_room").html(result);
        });
    });

    $(document).on('change', '#transfer_department', function () {
        var id = this.value;
        var post_url = 'action/action_department_doctor.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#transfer_doctor").html(result);
        });
    });

    $("#transfer_br").submit(function (e) {
        e.preventDefault();
        proceed = true;

        //if ($('#department').show()) {
        if ($("#department").is(":visible")) {

            var transfer_department = $("#transfer_department").val();
            var transfer_doctor = $("#transfer_doctor").val();

            if (transfer_department == "") {
                alert("Please select department.");
                return false;
            }

            if (transfer_doctor == "") {
                alert("Please select doctor.");
                return false;
            }

        } else {



            var transfer_ward = $("#transfer_ward").val();
            var transfer_room = $("#transfer_room").val();

            if (transfer_ward == "") {
                alert("Please select ward.");
                return false;
            }

            if (transfer_room == "") {
                alert("Please select room/bed.");
                return false;
            }
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.submit_transfer_ward').attr('style', 'display: none !important');
        $('.err_register').attr('style', 'display: block !important');
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            // //console.log(result); 
            // var atd_id = result.trim();    
            // $("#tr_atdward_bed_"+atd_id).remove();       
            // $('#modal_transfer').modal('hide');
            $('.submit_transfer_ward').attr('style', 'display: block !important');
            $('.err_register').attr('style', 'display: none !important');
            location.reload();


        });
    });


    $(document).on("change", ".change_ward_id", function () {

        var id = $(this).val();
        if (id == 0) {
            var url = 'action/action_check_availability_room.php?do=ward_room';
        } else {
            var url = 'action/action_check_availability_room.php?do=only_room';
        }
        var post_url = url;
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {
            $("#avaibility_data").html(result);

        });

    });

    $(document).on("keypress", "#dr_password", function (e) {
        if (e.keyCode == 13) {
            e.preventDefault();
            $('#submit_imp_dis_patient').trigger('click');
        }
    });

    $(document).on("click", "#submit_imp_dis_patient", function () {

        var dis_type = $("#dis_type").val();
        var dr_password = $("#dr_password").val();
        var pm_id = $("#pm_id").val();
        var pm_pid = $("#pm_pid").val();
        var in_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();
        var dis_remarks = $("#dis_remarks").val();

        if (dis_type == "" || dis_type == null) {
            alert("Please Select Type of Discharge.");
            $('#dis_type').focus();
            return false;
        }
        // else if (dr_password == "") {
        //     alert("Please enter the Password.");
        //     $('#dr_password').focus();
        //     return false;
        // } 
        else {}
        var datastring = 'dis_type=' + dis_type + '&dr_password=' + dr_password + '&pm_id=' + pm_id + '&pm_pid=' + pm_pid + '&in_id=' + in_id + '&dis_remarks=' + dis_remarks;
        //alert(datastring);
        $('#submit_imp_dis_patient').attr('disabled', 'disabled');
        $('#submit_imp_dis_patient').hide();
        $('.err_registerloader').show();
        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/action_discharge.php?do=in_patient_discharge",
            data: {
                dis_type: dis_type,
                dr_password: dr_password,
                pm_id: pm_id,
                pm_pid: pm_pid,
                in_id: in_id,
                patient_uni_id: patient_uni_id,
                dis_remarks: dis_remarks,
            },
        }).done(function (result) {
            //console.log(result);            
            if (result == 1) {
                $('.dis_text').show();
                $('.dis_form').hide();
            } else {
                // alert("Please Enter Correct Password !");
                $('#submit_imp_dis_patient').attr('disabled', false);
                $('#submit_imp_dis_patient').show();
                $('.err_registerloader').hide();
            }
        });

    });

    $(document).on("click", "#submit_discharge_btn", function () {

        $('#submit_discharge_confirmation_btn').attr('disabled', false);
        $('#submit_discharge_confirmation_btn').show();
        $('.err_registerloader').hide();

        var discharge_date = $("#datepicker_discharge_date").val();
        var discharge_time = $("#tapm_modify_time").val();
        if (discharge_date == '' || discharge_date == null) {
            $("#datepicker_discharge_date").focus();
            alert("Please Select Discharge Date");
            return false;
        } else if (discharge_time == '' || discharge_time == null) {
            $("#tapm_modify_time").focus();
            alert("Please Select Discharge Time");
            return false;
        } else {
            $('#model_submit_discharge').modal('show');
        }
    });

    $(document).on("click", "#submit_discharge_confirmation_btn", function (e) {
        $('#discharge').submit();
    });

    $("#discharge").submit(function (e) {
        e.preventDefault();
        proceed = true;
        var id = $(this).attr('data-id');
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_discharge_confirmation_btn').attr('disabled', 'disabled');
        $('#submit_discharge_confirmation_btn').hide();
        $('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);            
            if (result.trim() == 1) {
                $('#model_submit_discharge').modal('hide');
                $("#dis_error").hide();
                location.reload();
                //location.href = "admission_transfer_discharge.php";

            } else {

                $('#model_submit_discharge').modal('hide');
                $("#dis_error").show();
                $('#submit_discharge_confirmation_btn').attr('disabled', false);

                $('#submit_discharge_confirmation_btn').show();
                $('.err_registerloader').hide();

            }
        });
    });

    $(document).on("keydown", "#model_submit_discharge", function (e) {
        var charCode = e.charCode || e.keyCode || e.which;
        if (charCode == 27) {
            alert("Please select any one option");
            return false;
        }
    });

    $(".inpatient_selbox").change(function () {
        var ward_id = this.value;
        window.location.href = "inpatient.php?wid=" + ward_id;
    });

    $(document).on("click", ".manage_bill_section_atd", function () {
        var pm_pid = $(this).attr('data-pm_id');
        var ip_id = $(this).attr('data-ip_id');
        var pu_id = $(this).attr('data-pu_id');
        $('#modal_bill_section_atd').modal('show');

        var post_url = 'action/action_bill_section_atd.php?do=load_history';
        var datastring = 'pm_pid=' + pm_pid + '&ip_id=' + ip_id + '&pu_id=' + pu_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            console.log(result.trim());
            $("#billing_section_atd").html(result.trim());


        });

    });

    $(document).on("change", ".change_graph_marker", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=reading_graph_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $("#edit_new_patient_atd").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var AbhaEnable = $(".AbhaEnable").val();

        if (AbhaEnable == "Y") {

            $(".abha_address_error").hide().html("");

            if ($("#pm_abha_address").val() != "" && $("#pm_abha_verify").val() == 0) {

                $("#pm_abha_address").focus();
                alert("Please Verify Abha Address");
                return false;

            } else {

            }

        }

        var pm_ref_id = $("#pm_ref_id").val();

        var pm_salutation = $("#pm_salutation").val();

        var pm_first_name = $("#pm_first_name").val();

        var pm_middle_name = $("#pm_middle_name").val();

        var pm_last_name = $("#pm_last_name").val();

        var pm_gender = $(".pm_gender").val();

        var pm_dob = $("#pm_dob").val();

        var pm_contact_no = $("#pm_contact_no").val();

        var pm_email = $("#pm_email").val();

        var pm_dnd = $("#pm_dnd").val();

        var srch_dr_names = $("#srch_dr_names").val();

        var pm_second_name = $("#pm_second_name").val();

        var pm_second_gender = $("#pm_second_gender").val();

        var pm_contact_no2 = $("#pm_contact_no2").val();

        var pm_relation = $("#pm_relation").val();

        var pm_address = $("#pm_address").val();

        var pm_pincode = $("#pm_pincode").val();

        var pm_area = $("#pm_area").val();

        var pm_city = $("#pm_city").val();

        var pm_district = $("#pm_district").val();

        var pm_state = $("#pm_state").val();

        var pm_country = $("#pm_country").val();


        // if (pm_contact_no == "" && pm_contact_no.length != 10) {
        //     alert("Please enter Valid Contact No.");
        //     $('#pm_contact_no').focus();
        //     return false;
        // // } else if (pm_salutation == "") {
        // //     alert("Please select Salutation.");
        // //     $('#pm_salutation').focus();
        // //     return false;
        // } else 

        if (pm_first_name == "") {
            alert("Please enter First Name.");
            $('#pm_first_name').focus();
            return false;
            // } else if (pm_middle_name == "") {
            //     alert("Please enter Middle Name.");
            //     $('#pm_middle_name').focus();
            //     return false;
        } else if (pm_last_name == "") {
            alert("Please enter Last Name.");
            $('#pm_last_name').focus();
            return false;
        } else if ($(".pm_gender:checked").length == 0) {
            alert("Please select Gender.");
            $('.pm_gender').focus();
            return false;
        } else if (pm_dob == "") {
            alert("Please enter Date OF Birth.");
            $('#pm_dob').focus();
            return false;
            // } else if (pm_email == "") {
            //     alert("Please enter Email.");
            //     $('#pm_email').focus();
            //     return false;
        } else if (pm_contact_no == "" && pm_contact_no.length != 10) {
            alert("Please enter Valid Contact No.");
            $('#pm_contact_no').focus();
            return false;
            // } else if (pm_second_name == "") {
            //     alert("Please enter Secondary Name.");
            //     $('#pm_second_name').focus();
            //     return false;
            // } else if (pm_second_gender == "") {
            //     alert("Please select Secondary Gender.");
            //     $('#pm_second_gender').focus();
            //     return false;
            // } else if (pm_contact_no2 == "") {
            //     alert("Please enter Phone Number.");
            //     $('#pm_contact_no2').focus();
            //     return false;
            // } else if (pm_relation == "") {
            //     alert("Please enter Relationship.");
            //     $('#pm_relation').focus();
            //     return false;
            // } else if (pm_address == "") {
            //     alert("Please enter Address.");
            //     $('#pm_address').focus();
            //     return false;
            // } else if (pm_pincode == "") {
            //     alert("Please enter Pincode.");
            //     $('#pm_pincode').focus();
            //     return false;
            // } else if (pm_city == "") {
            //     alert("Please enter City.");
            //     $('#pm_city').focus();
            //     return false;
            // } else if (pm_district == "") {
            //     alert("Please enter District.");
            //     $('#pm_district').focus();
            //     return false;
            // } else if (pm_state == "") {
            //     alert("Please enter State.");
            //     $('#pm_state').focus();
            //     return false;
            // } else if (pm_country == "") {
            //     alert("Please enter Country.");
            //     $('#pm_country').focus();
            //     return false;
        } else {

        }

        var type = $("#type").val();
        var encode_patient_unique_id = $("#encode_patient_unique_id").val();

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_edit_patient').attr('disabled', 'disabled');

        $('#submit_edit_patient').hide();
        $('.err_registerloader').show();


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                window.location.href = "admission_transfer_discharge.php";
            } else {
                $('#submit_edit_patient').removeAttr('disabled');

                $('#submit_edit_patient').show();
                $('.err_registerloader').hide();
            }

        });

    });

    $(document).on("change", ".change_graph_marker", function () {
        var d_type = $(this).val();
        var post_url = 'action/create_myt_table_session.php?do=reading_graph_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {
            window.location.reload();
        });
    });


    $(document).on("submit", "#new_medicine_form_add", function (e) {

        e.preventDefault();
        proceed = true;

        var tmm_medicine_name = $("#tmm_medicine_name").val();
        var tmm_strength = $("#tmm_strength").val();
        var tmm_unit = $("#tmm_unit").val();

        if (tmm_medicine_name == "") {
            alert("Please Enter Medicine Name.");
            $("#tmm_medicine_name").focus();
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_add_medicine').hide();
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            // //console.log(result);

            $('.err_register').hide();
            $('#submit_button_add_medicine').show();


            // $("#new_medicine_form_add").trigger("reset");

            // $("#tmm_day_dose").val("");

            // $("#tmm_day_dose_1").removeClass("btn btn-success")
            // $("#tmm_day_dose_1").addClass("btn btn-primary");

            // $("#tmm_day_dose_2").removeClass("btn btn-success")
            // $("#tmm_day_dose_2").addClass("btn btn-primary");



            // $('#modal_add_medicine').modal('hide');



            // if ($('#medicine .dataTables_empty').length) {

            //     $("#medicine").html(result);

            // } else {
            //     $("#medicine").prepend(result);
            // }

            location.reload();

        });

    });

    $(document).on("click", "#edit_medicine", function () {

        var id = $(this).attr('data-id');

        // $('#model_edit_medicine').modal('show');
        $.ajax({
            type: 'post',
            url: "action/edit_medicine.php",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                //alert("dd "+result);
                var splitted1 = result.split("@@@");
                //$("#edit_tmm_type").val(splitted1[0]);
                $("#edit_tmm_medicine_name").val(splitted1[0]);
                $("#edit_tmm_generic").val(splitted1[1]);
                $("#edit_tmm_company").val(splitted1[2]);

                $("#edit_tmm_dose").val(splitted1[4]);
                $("#edit_tmm_dose_unit").val(splitted1[5]);
                $("#edit_tmm_frequency").val(splitted1[7]);
                $("#edit_tmm_concentration").val(splitted1[8]);
                $("#edit_tmm_con_unit").val(splitted1[9]);
                $("#edit_tmm_tmi_english_title").val(splitted1[11]);

                $("#edit_tmm_days").val(splitted1[13]);
                $("#edit_tmm_duration_type").val(splitted1[14]);
                $("#edit_tmr_tmm_dose").val(splitted1[15]);


                if (splitted1[12] == "After Food") {
                    $("#food21").prop('checked', true);
                    $("#food31").prop('checked', false);
                    $("#food11").prop('checked', false);
                } else if (splitted1[12] == "Before Food") {
                    $("#food11").prop('checked', true);
                    $("#food21").prop('checked', false);
                    $("#food31").prop('checked', false);
                } else if (splitted1[12] == "None") {
                    $("#food31").prop('checked', true);
                    $("#food21").prop('checked', false);
                    $("#food11").prop('checked', false);
                } else {
                    $("#food11").prop('checked', false);
                    $("#food21").prop('checked', false);
                    $("#food31").prop('checked', false);
                }

                var tmi_id = splitted1[10].trim();

                $("#m_id").val(splitted1[3]);


                if (splitted1[6] == "day") {
                    // $("#edit_tmm_day_dose_1").removeClass("btn btn-primary");
                    // // $("#edit_tmm_day_dose_1").css("background-color", "");
                    // // $("#edit_tmm_day_dose_1").css("border-color", "");
                    // $("#edit_tmm_day_dose_1").addClass("btn btn-success");

                    // $("#edit_tmm_day_dose_2").removeClass("btn btn-success");
                    // $("#edit_tmm_day_dose_2").addClass("btn btn-primary");

                    $("#edit_tmm_day_dose_1").prop('checked', true);

                } else if (splitted1[6] == "dose") {

                    // $("#edit_tmm_day_dose_2").removeClass("btn btn-primary");
                    // // $("#edit_tmm_day_dose_2").css("background-color", "");
                    // // $("#edit_tmm_day_dose_2").css("border-color", "");
                    // $("#edit_tmm_day_dose_2").addClass("btn btn-success");

                    // $("#edit_tmm_day_dose_1").removeClass("btn btn-success");
                    // $("#edit_tmm_day_dose_1").addClass("btn btn-primary");

                    $("#edit_tmm_day_dose_2").prop('checked', true);

                }

                // $.myInstructionTemplate(tmi_id);
                $("#edit_tcm_tmm_freq_morning").val(splitted1[16]);
                $("#edit_tcm_tmm_freq_afternoon").val(splitted1[17]);
                $("#edit_tcm_tmm_freq_evening").val(splitted1[18]);
                $("#edit_tcm_tmm_freq_night").val(splitted1[19]);

            }
        })

    });

    $.myInstructionTemplate = function (tmi_id) {
        var post_url = 'action/action_new_medicine.php?do=edit_all_template'
        var datastring = 'tmi_id=' + tmi_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#edit_select_tmm_tmi_id').html(result.trim());
        });
    }

    $(document).on("submit", "#edit_medicine_master", function (e) {

        e.preventDefault();
        var edit_tmm_medicine_name = $("#edit_tmm_medicine_name").val();
        var edit_tmm_generic = $("#edit_tmm_generic").val();
        var edit_tmm_company = $("#edit_tmm_company").val();
        var m_id = $("#m_id").val();
        //alert(edit_ward_bed);
        if (edit_tmm_medicine_name == "") {
            alert("Please Enter Medicine name.");
            return false;
        } else {

        }

        proceed = true;
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_edit_medicine').attr('disabled', 'disabled');
        $('.err_register').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            // $('#model_edit_medicine').modal('hide');
            // $('#submit_button_edit_medicine').removeAttr('disabled');
            // $('.err_register').hide();
            // $('#tr_' + m_id).html(result);

            location.reload();
        });
    });

    $(document).on("change", "#edit_select_tmm_tmi_id", function (e) {

        var id = $(this).val();
        var post_url = 'action/action_new_medicine.php?do=template_title'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#edit_tmm_tmi_english_title").val(result.trim());

        });

    });

    $(document).on("click", "#delete_medicine", function () {

        // $('#modal_delete_medicine').modal('show');
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');

        var text = "Are you sure you want to delete <b>" + templatename + "</b> permanently ?";
        $('.delete_medicine_template_text').html(text);
        $('#delete_tmm_id').val(id);


    });

    $(document).on("click", "#submit_button_delete_medicine", function () {
        var id = $('#delete_tmm_id').val();
        var post_url = 'action/action_new_medicine.php?do=delete'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            $('#modal_delete_medicine').modal('hide');
            $('#tr_' + id).remove();
            location.reload();
        });
    });

    $("#add_new_case_medicine_template_setting").submit(function (e) {

        e.preventDefault();

        //  proceed = true;
        var medicine_template_name = $("#medicine_template_name").val();

        if ($(".medicine_tem_part .inner_medicine_tem_part").length == 0) {
            alert("Please Select atleast one Medicine.");
            return false;
        } else if (medicine_template_name == "") {
            alert("Please Enter Template Name.");
            $("#medicine_template_name").focus();
            return false;
        } else {

        }

        //return false;
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_button_add_medicine_template').hide();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            location.reload();
            // $('#submit_button_add_medicine_template').removeAttr('disabled');
            // $('.help-block').html('');
            // $(".medicine_tem_part").html("");
            // $("#medicine_template_name").val("");

            // $('#modal_add_medicine_template').modal('hide');
            // $("#disease_template").append(result);


        });

    });

    $(document).on("click", "#edit_medicine_template", function () {
        var id = $(this).attr('data-id');
        var name = $(this).attr('data-name');
        $('#modal_edit_medicine_template').modal('show');


        $.ajax({
            type: 'post',
            url: "action/edit_medicine_template.php",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {

                $("#edit_tmtd_id").val(id);
                $(".edit_medicine_tem_part").html("");
                $(".edit_medicine_tem_part").prepend(result.trim());
                $("#edit_template_name").val(name);

            }

        });

    });

    $("#edit_medicine_template_form").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var medicine_template_name = $("#edit_template_name").val();

        if (($(".medicine_temp").length == 0)) {
            alert("Please Select atleast one Medicine.");
            return false;
        } else if (medicine_template_name == "") {
            alert("Please Enter Template Name.");
            $("#edit_template_name").focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_button_edit_medicine_template').hide();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            location.reload();
            // var Id = $("#edit_tmtd_id").val();
            // $('#modal_edit_medicine_template').modal('hide');
            // $(".edit_medicine_tem_part").html("");
            // $("#edit_template_name").val("");
            // $("#trTemplate_" + Id).html(result);



        });

    });

    $(document).on("click", "#delete_medicine_template", function () {
        //$('#modal_delete_medicine_template').modal('show');
        var id = $(this).attr('data-id');
        var delete_tmtd_name = $(this).attr('data-name');
        $("#delete_tmtd_id").val(id);
        $(".delete_template_text").html("Are you sure you want to delete <b>" + delete_tmtd_name + "</b> permanently ?")

    });

    $(document).on("click", "#delete_medicine_template_btn", function () {

        var id = $("#delete_tmtd_id").val();
        var post_url = 'action/action_add_medicine_template.php?do=delete'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            location.reload();
            // $('#modal_delete_medicine_template').modal('hide');
            // $('#trTemplate_' + id).remove();
        });
    });

    $("#search_medicine_templete").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".medicine_templete_table .medicine_templete_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $(document).on("change", "#case_consultation_type_opt", function () {

        var id = this.value;

        var post_url = 'action/action_new_user_casesheet_option.php?do=consultaion_opt'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $(".consultion_opt").html(result.trim());

            // $('input[type="checkbox"].minimal-purple, input[type="radio"].minimal-purple').iCheck({
            //     checkboxClass: 'icheckbox_minimal-purple',
            //     radioClass: 'iradio_minimal-purple'
            // });

            $(".checkAllUsertypeView").on('ifChecked', function (e) {
                $(e.target).trigger('change');
                var checkedMainId = $(this).attr("data-id");

                $(".checkSingleUsertypeView_" + checkedMainId).prop('checked', true).iCheck('update');;

            });

            $(".checkAllUsertypeView").on('ifUnchecked', function (e) {
                $(e.target).trigger('change');
                var checkedMainId = $(this).attr("data-id");
                $(".checkSingleUsertypeView_" + checkedMainId).prop('checked', false).iCheck('update');;


            });




        });

    });

    $('.checkAllUsertypeView').click(function () {
        var checkedMainId = $(this).attr("data-id");
        if ($(this).is(":checked")) {
            $(".checkSingleUsertypeView_" + checkedMainId).prop('checked', true);
        } else {
            $(".checkSingleUsertypeView_" + checkedMainId).prop('checked', false);
        }

    });


    $(document).on("submit", "#new_user_casesheet_option_form_add_view", function (e) {

        e.preventDefault();
        proceed = true;
        var id = $(this).attr('data-id');
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_user_group_view').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            // $('.err_register_user_group_view').hide();
            //$('#model_submit_discharge').modal('hide');
            location.reload();
        });
    });

    $('.checkAllUsertype').click(function () {
        var checkedMainId = $(this).attr("data-id");
        if ($(this).is(":checked")) {
            $(".checkSingleUsertype_" + checkedMainId).prop('checked', true);
        } else {
            $(".checkSingleUsertype_" + checkedMainId).prop('checked', false);
        }

    });

    $(document).on("submit", "#new_user_casesheet_option_form_add", function (e) {

        e.preventDefault();
        proceed = true;
        var id = $(this).attr('data-id');
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_user_group').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            // //console.log(result);
            // $('.err_register_user_group').hide();
            // $('#model_submit_discharge').modal('hide');
            location.reload();
        });
    });

    $('.checkAllUsertype1').click(function () {
        var checkedMainId = $(this).attr("data-id");
        if ($(this).is(":checked")) {
            $(".checkSingleUsertype1_" + checkedMainId).prop('checked', true);
        } else {
            $(".checkSingleUsertype1_" + checkedMainId).prop('checked', false);
        }

    });


    $(document).on("submit", "#new_doctor_setting_form_add", function (e) {

        e.preventDefault();
        proceed = true;
        var id = $(this).attr('data-id');
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_user_group1').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            $('.err_register_user_group1').hide();
            location.reload();
        });
    });

    $(document).on("click", "#submit_button_diagnosis_setting", function () {

        var department_id = $("#department_id").val();
        var temp_diagnosis_setting_title = $("#temp_diagnosis_setting_title").val();
        var temp_diagnosis_setting_icd_code = $("#temp_diagnosis_setting_icd_code").val();
        if (temp_diagnosis_setting_title == "") {
            alert("Please enter Title.");
            return false;
        }
        $('#submit_button_diagnosis_setting').hide();
        $('.err_register').show();

        var post_url = 'action/action_case_template_diagnosis_setting.php?do=add'
        //var datastring= 'tohbm_template_name='+temp_diagnosis_setting_title+'&temp_diagnosis_setting_icd_code='+temp_diagnosis_setting_icd_code+"&department_id="+department_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tohbm_template_name: temp_diagnosis_setting_title,
                temp_diagnosis_setting_icd_code: temp_diagnosis_setting_icd_code,
                department_id: department_id,
            },
        }).done(function (result) {

            if (result.trim() == 2) {

                $('#submit_button_diagnosis_setting').show();
                $('.err_register').hide();
                $('#temp_diagnosis_setting_title').addClass('has-error');
                $('#temp_diagnosis_setting_title').focus();
                $('.string_register_dia').html("Diagnosis already exist.");
            } else {
                location.reload();
            }

        });

    });

    $(document).on("click", ".select_edit_diagnosis_setting", function () {

        var id = $(this).attr('data-id');
        //$('#modal_diagnosis_setting_edit').modal('show');

        var post_url = 'action/action_case_template_diagnosis_setting.php?do=edit_pop'
        var datastring = 'id=' + id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tds_id").val(result['tds_id']);
            $("#edit_tds_name").val(result['tds_name']);
            $("#edit_tds_icd_code").val(result['tds_icd_code']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("click", "#submit_edit_button_diagnosis_setting", function () {

        var tds_id = $("#edit_tds_id").val();
        var tds_name = $("#edit_tds_name").val();
        var tds_icd_code = $("#edit_tds_icd_code").val();


        // var all = tds_id + tds_name;
        // var all_variable = all.trim();

        // if (all_variable == "") {
        //     alert("Please enter Something.");
        //     return false;
        // }

        if (tds_name == "") {
            alert("Please enter Title.");
            $('#edit_tds_name').focus();
            return false;
        }else{

        }

        var post_url = 'action/action_case_template_diagnosis_setting.php?do=edit'
        var datastring = 'tds_id=' + tds_id + "&tds_name=" + tds_name + "&tds_icd_code=" + tds_icd_code;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            // var tds_id = $("#edit_tds_id").val();
            // $('#modal_diagnosis_setting_edit').modal('hide');

            // $("#li_case_first_tag_"+tds_id).html(result.trim());


            location.reload();

        });

    });

    $(document).on("click", "#delete_diagnosis_setting", function () {
        // $('#modal-danger-diagnosis_setting').modal('show');
        var casefirst = $(this).attr('data-casefirst');
        var tdsid = $(this).attr('data-tdsid');

        var text = "Are you sure you want to delete <b>" + casefirst + "</b> permanently ? ";
        $('.delete_diagnosis_setting_text').html(text);
        $('#delete_tdsid').val(tdsid);
    });

    $(document).on("click", "#submit_delete_button_diagnosis_setting", function () {

        var tds_id = $("#delete_tdsid").val();

        var post_url = 'action/action_case_template_diagnosis_setting.php?do=delete'
        var datastring = 'tds_id=' + tds_id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            location.reload();

        });

    });

    $(document).on('click', '.reset_inp_ref_form', function () {
        $("#add_inp_new_ref_doctor").trigger('reset');
    });

    $(document).on("submit", "#patient_form_edit_atd", function (e) {

        e.preventDefault();
        proceed = true;
        var edit_atd_id = $("#edit_atd_id").val();
        var edit_atd_admitting_date = $("#edit_atd_admitting_date").val();
        var edit_atd_admitting_time = $("#edit_atd_admitting_time").val();

        var old_atd_department = $("#old_atd_department").val();
        var old_atd_ward = $("#old_atd_ward").val();
        var old_atd_room = $("#old_atd_room").val();
        var old_atd_admitting_doctor = $("#old_atd_admitting_doctor").val();
        var old_atd_admitting_date = $("#old_atd_admitting_date").val();
        var old_atd_admitting_time = $("#old_atd_admitting_time").val();

        if (old_atd_department == "0" || old_atd_department == "") {
            alert("Please select the department.");
            $('#old_atd_department').focus();
            return false;
        } else if (old_atd_ward == "0" || old_atd_ward == "") {
            alert("Please select the ward.");
            $('#old_atd_ward').focus();
            return false;
        } else if (old_atd_room == "0" || old_atd_room == "") {
            alert("Please select available room ward.");
            $('#old_atd_room').focus();
            return false;
        } else if (old_atd_admitting_doctor == "0" || old_atd_admitting_doctor == "") {
            alert("Please select the admitting doctor.");
            $('#old_atd_admitting_doctor').focus();
            return false;
        } else if (old_atd_admitting_date == "") {
            alert("Please select the admitting date.");
            $('#old_atd_admitting_date').focus();
            return false;
        } else if (old_atd_admitting_time == "") {
            alert("Please select the admitting time.");
            $('#old_atd_admitting_time').focus();
            return false;
        } else if (edit_atd_admitting_date == "") {
            alert("Please enter the date.");
            $('#edit_atd_admitting_date').focus();
            return false;
        } else if (edit_atd_admitting_time == "") {
            alert("Please enter the time.");
            $('#edit_atd_admitting_time').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_new_patient_add_edit_atd').attr('disabled', 'disabled');
        $('#submit_new_patient_add_edit_atd').hide();
        $('.err_registerloader').show();



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            //console.log(result);

            // var splitted = result.split("@@@");
            // var res = splitted[0]
            // var ward_id = splitted[1];
            if (result == 1) {
                var url = "admission_transfer_discharge.php?atd_id=" + edit_atd_id;
                $(location).attr('href', url);
            } else if (result == 2) {
                $('#submit_new_patient_add_edit_atd').removeAttr('disabled');
                $('#submit_new_patient_add_edit_atd').show();
                $('.err_registerloader').hide();
            } else {

            }
        });

    });

    $(document).on('click', '#readmit', function () {
        $('#submit_button_readmit').attr('disabled', false);
        $('#submit_button_readmit').show();
        $('.err_readmit_registerloader').hide();

        $('#model_readmit').modal('show');
        var id = $(this).attr('data-id');
        $("#readmit_id").val(id);
    });

    $("#trasnfer_readmit").submit(function (e) {
        e.preventDefault();
        proceed = true;
        var id = $(this).attr('data-id');
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_readmit').attr('disabled', 'disabled');
        $('#submit_button_readmit').hide();
        $('.err_readmit_registerloader').show();

        $('.err_register_new').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            var id = $("#readmit_id").val();
            $('#model_readmit').modal('hide');
            //$("#tr_atdward_bed_" + id).html(result);

            $('#submit_button_readmit').attr('disabled', false);
            $('#submit_button_readmit').show();
            $('.err_readmit_registerloader').hide();

            location.reload();

        });
    });

    $('#submit_button_add_tm').click(function () {
        var add_temp_title_tm = $("#add_temp_title_tm").val();
        var add_temp_content_tm = $("#add_temp_content_tm").val();

        if (add_temp_title_tm == "") {
            alert("Please enter Title.");
            return false;
        }

        if (add_temp_content_tm == "") {
            alert("Please enter content.");
            return false;
        }

        var post_url = 'action/action_new_out_treatment_master.php?do=add'
        var datastring = 'add_temp_title_tm=' + add_temp_title_tm + "&add_temp_content_tm=" + add_temp_content_tm;
        //console.log(datastring);
        $('#submit_button_add_tm').attr('disabled', 'disabled');
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                add_temp_title_tm: add_temp_title_tm,
                add_temp_content_tm: add_temp_content_tm
            },
        }).done(function (result) {
            $('#submit_button_add_tm').attr('disabled', false);
            ////console.log(result);
            // $('#modal_add_tm_template').modal('hide');

            // $("#add_temp_title_tm").val("");
            // $("#add_temp_content_tm").val("");

            // if ($('#out_tm .dataTables_empty').length) {
            //     $("#out_tm").html(result.trim());
            // } else {
            //     $("#out_tm").prepend(result.trim());
            // }

            location.reload();

        });

    });

    $(document).on("click", "#edit_tm", function () {

        var id = $(this).attr('data-id');

        //$('#modal_edit_tm').modal('show');
        $.ajax({
            type: 'post',
            url: "action/edit_out_treatment_master.php",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {

                var splitted1 = result.split("@@@");

                $("#edit_temp_title_tm").val(splitted1[0]);
                $("#edit_temp_content_tm").val(splitted1[1]);

                $("#tm_id").val(splitted1[2]);
            }
        });

    });

    $(document).on("click", "#submit_button_tm", function () {

        var tm_id = $("#tm_id").val();
        var edit_temp_title_tm = $("#edit_temp_title_tm").val();
        var edit_temp_content_tm = $("#edit_temp_content_tm").val();
        //alert(edit_ward_bed);
        if (edit_temp_title_tm == "") {
            alert("Please add title.");
            return false;
        }
        if (edit_temp_content_tm == "") {
            alert("Please add content.");
            return false;
        }

        var post_url = 'action/action_new_out_treatment_master.php?do=edit'
        var datastring = 'tm_id=' + tm_id + '&edit_temp_title_tm=' + edit_temp_title_tm + '&edit_temp_content_tm=' + edit_temp_content_tm;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_title_tm: edit_temp_title_tm,
                edit_temp_content_tm: edit_temp_content_tm,
                tm_id: tm_id,
            },
        }).done(function (result) {

            // $('#modal_edit_tm').modal('hide');
            // $('#tr_' + tm_id).html(result);
            location.reload();

        });

    });

    $(document).on("click", "#delete_tm", function () {
        //$('#modal_delete_tm').modal('show');
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');

        var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ?";
        $('.delete_out_tm_template_text').html(text);
        $('#delete_totm_id').val(id);



    });

    $(document).on("click", "#submit_button_delete_treatment", function () {
        var id = $('#delete_totm_id').val();
        var post_url = 'action/action_new_out_treatment_master.php?do=delete'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            // $('#modal_delete_tm').modal('hide');
            // $('#tr_' + id).remove();
            location.reload();
        });
    });

    $("#search_treatment_setting").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".treatment_setting_table .treatment_setting_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $('#submit_button_add_advice').click(function () {
        var add_temp_title_advice = $("#add_temp_title_advice").val();
        var add_temp_content_advice = $("#add_temp_content_advice").val();

        if (add_temp_title_advice == "") {
            alert("Please enter Title.");
            return false;
        }

        if (add_temp_content_advice == "") {
            alert("Please enter content.");
            return false;
        }
        $('#submit_button_add_advice').attr('disabled', 'disabled');
        var post_url = 'action/action_new_out_advice.php?do=add'
        var datastring = 'add_temp_title_advice=' + add_temp_title_advice + "&add_temp_content_advice=" + add_temp_content_advice;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                add_temp_title_advice: add_temp_title_advice,
                add_temp_content_advice: add_temp_content_advice,
            },
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_add_advice_template').modal('hide');

            // $("#add_temp_title_advice").val("");
            // $("#add_temp_content_advice").val("");

            // if ($('#out_advice .dataTables_empty').length) {
            //     $("#out_advice").html(result.trim());
            // } else {
            //     $("#out_advice").prepend(result.trim());
            // }

            location.reload();

        });

    });

    $(document).on("click", "#edit_advice", function () {

        var id = $(this).attr('data-id');

        $('#modal_edit_advice').modal('show');
        $.ajax({
            type: 'post',
            url: "action/edit_out_advice.php",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {

                var splitted1 = result.split("@@@");

                $("#edit_temp_title_advice").val(splitted1[0]);
                $("#edit_temp_content_advice").val(splitted1[1]);

                $("#advice_id").val(splitted1[2]);
            }
        });

    });

    $(document).on("click", "#delete_advice", function () {
        $('#modal_delete_advice').modal('show');
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');

        var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ?";
        $('.delete_out_advice_template_text').html(text);
        $('#delete_toam_id').val(id);



    });

    $(document).on("click", "#submit_button_delete_advice", function () {
        var id = $('#delete_toam_id').val();
        var post_url = 'action/action_new_out_advice.php?do=delete'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            // $('#modal_delete_advice').modal('hide');
            // $('#tr_' + id).remove();
            location.reload();
        });
    });

    $(document).on("click", "#edit_submit_button_advice", function () {
        var id = $('#advice_id').val();
        var edit_temp_title_advice = $('#edit_temp_title_advice').val();
        var edit_temp_content_advice = $('#edit_temp_content_advice').val();

        if (edit_temp_title_advice == "") {
            alert("Please enter Title.");
            return false;
        }

        if (edit_temp_content_advice == "") {
            alert("Please enter content.");
            return false;
        }

        var post_url = 'action/action_new_out_advice.php?do=edit'
        //var datastring = 'id=' + id + '&edit_temp_title_advice=' + edit_temp_title_advice + '&edit_temp_content_advice=' + edit_temp_content_advice;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
                edit_temp_title_advice: edit_temp_title_advice,
                edit_temp_content_advice: edit_temp_content_advice,
            },
            cache: false,
        }).done(function (result) {
            // //console.log(result);
            // $('#modal_edit_advice').modal('hide');
            // $('#tr_' + id).html(result);
            location.reload();
        });

    });

    $(document).on("change", "#case_consultation_type_opt_add", function () {
        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=view_boxs'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            $('#oneclick_consultation').val('');
            if (jQuery.inArray('1', result) != '-1') {
                $(".history_box_class").css('display', 'block');;
            } else {
                $(".history_box_class").css('display', 'none');;
                $('#tcm_history_box').summernote('code', "");
            }
            if (jQuery.inArray('6', result) != '-1') {
                $(".permanent_history_box_class").css('display', 'block');;
            } else {
                $(".permanent_history_box_class").css('display', 'none');;
                $.myoldPermanetHistory();
            }
            if (jQuery.inArray('2', result) != '-1') {
                $(".examination_box_class").css('display', 'block');;
            } else {
                $(".examination_box_class").css('display', 'none');;
                $('#tcm_examination_box').summernote('code', "");
            }
            if (jQuery.inArray('8', result) != '-1') {
                $(".lab_report_box_class").css('display', 'block');;
            } else {
                $(".lab_report_box_class").css('display', 'none');;
                $("#mtable1").closest('table').find('tbody tr').find('td:last-child').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('9', result) != '-1') {
                $(".allergies_box_class").css('display', 'block');;
                $.myAllergiesHtml();
            } else {
                $(".allergies_box_class").css('display', 'none');;
            }
            if (jQuery.inArray('10', result) != '-1') {
                $(".vitals_box_class").css('display', 'block');;
                $.myVitalsHtml();
            } else {
                $(".vitals_box_class").css('display', 'none');;
                $("#example4").closest('table').find('tbody tr').find('td:eq(6)').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('11', result) != '-1') {
                $(".body_composition_box_class").css('display', 'block');;
                $.myBodyCompositionHtml();
            } else {
                $(".body_composition_box_class").css('display', 'none');;
                $("#example5").closest('table').find('tbody tr').find('td:eq(6)').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('12', result) != '-1') {
                $(".diagnosis_box_class").css('display', 'block');;
                $(".diagnosis_box_btn_id").css('display', 'block');;
                $.myDiagnosisHtml();
            } else {
                $(".diagnosis_box_class").css('display', 'none');;
                $(".diagnosis_box_btn_id").css('display', 'none');;
                $("#example6").closest('table').find('tbody tr').find('td:eq(4)').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('13', result) != '-1') {
                $(".prescription_box_class").css('display', 'block');;
                $(".prescription_box_btn_id").css('display', 'block');;
            } else {
                $(".prescription_box_class").css('display', 'none');;
                $(".prescription_box_btn_id").css('display', 'none');;
                $(".medicine_case_name").html('<div class="inner_medicine_case_name" style="text-align: center;">Select medicine or template</div>');
                $("#all_days").val("");
            }
            if (jQuery.inArray('14', result) != '-1') {
                $(".investigation_box_class").css('display', 'block');;
            } else {
                $(".investigation_box_class").css('display', 'none');;
                $('#tcm_investigation').summernote('code', "");
            }
            if (jQuery.inArray('24', result) != '-1') {
                $(".treatment_box_class").css('display', 'block');;
            } else {
                $(".treatment_box_class").css('display', 'none');;
                $("#tcm_treatment").val("");
            }
            if (jQuery.inArray('15', result) != '-1') {
                $(".advice_box_class").css('display', 'block');;
                $(".advice_box_btn_id").css('display', 'block');;
            } else {
                $(".advice_box_class").css('display', 'none');;
                $(".advice_box_btn_id").css('display', 'none');;
                $("#tcm_advice").val("");
            }
            if (jQuery.inArray('16', result) != '-1') {
                $(".followup_advice_box_class").css('display', 'block');;
            } else {
                $(".followup_advice_box_class").css('display', 'none');;
                $("#tcm_advice").val("");
                $("#fdate").val("");
                $("#fadvice").val("");
            }
            if (jQuery.inArray('17', result) != '-1') {
                $(".visual_acuity_box_class").css('display', 'block');;
                $.myVisualAcuityHtml();
            } else {
                $(".visual_acuity_box_class").css('display', 'none');;
                $("#example4_17").closest('table').find('tbody tr').find('td:eq(4)').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('18', result) != '-1') {
                $(".iop_box_class").css('display', 'block');;
                $.myIopHtml();
            } else {
                $(".iop_box_class").css('display', 'none');;
                $("#example5_17").closest('table').find('tbody tr').find('td:eq(4)').find('[type=checkbox]').prop('checked', false)
            }
            // if (jQuery.inArray('19', result)!='-1') {
            //   $(".fundus_examination_box_class").css('display', 'block');;
            //   $.myFundusExamHtml();
            // }
            // else {
            //   $(".fundus_examination_box_class").css('display', 'none');;
            //   $("#example6_17").closest('table').find('tbody tr').find('td:eq(4)').find('[type=checkbox]').prop('checked', false)
            // }
            if (jQuery.inArray('19', result) != '-1') {
                $(".fundus_examination_box_class").css('display', 'block');;
            } else {
                $(".fundus_examination_box_class").css('display', 'none');;
                $(".txt-fundus-examination").val("");
            }
            if (jQuery.inArray('20', result) != '-1') {
                $(".lmp_edd_class").css('display', 'block');;
            } else {
                $(".lmp_edd_class").css('display', 'none');;
            }
            if (jQuery.inArray('21', result) != '-1') {
                $(".refraction_box_class").css('display', 'block');;
            } else {
                $(".refraction_box_class").css('display', 'none');;
                $(".txt-refration").val("");
                $(".txt-full-refration").val("");
                $("#tcm_tocm_pd").val("");
                $("#tcm_tocm_remark").val("");
                $(".select-refraction").val("");
                $(".tcm_ref_type").removeClass('btn-success');
                $(".tcm_ref_type").addClass('btn-primary');;
                $(".tcm_ref_type").css("background-color", "");
                $(".tcm_ref_type").css("border-color", "");
            }
            if (jQuery.inArray('22', result) != '-1') {
                $(".slit_lamp_examination_box_class").css('display', 'block');;
            } else {
                $(".slit_lamp_examination_box_class").css('display', 'none');;
                $(".txt-slit-examination").val("");
            }
            if (jQuery.inArray('28', result) != '-1') {
                $(".auto_refraction_box_class").css('display', 'block');;
            } else {
                $(".auto_refraction_box_class").css('display', 'none');;
                $(".txt-auto-eye-refraction").val("");
            }
            if (jQuery.inArray('23', result) != '-1') {
                $(".growth_chart_box_class").css('display', 'block');;
                //$.myGrowthChartHtml();
            } else {
                $(".growth_chart_box_class").css('display', 'none');;
                $("#exampleGrowthchart").closest('table').find('tbody tr').find('td:eq(7)').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('25', result) != '-1') {
                $(".reports_box_class").css('display', 'block');;
                $.myCaseReportsHtml();
            } else {
                $(".reports_box_class").css('display', 'none');;
                $("#example_case_reports").closest('table').find('tbody tr').find('td:eq(4)').find('[type=checkbox]').prop('checked', false)
            }
            if (jQuery.inArray('26', result) != '-1') {
                $(".vaccination_box_class").css('display', 'block');;
                $('#vaccination_table_case_manager').DataTable({
                    "paging": false,
                    "lengthChange": false,
                    "searching": true,
                    "ordering": false,
                    "info": false,
                    "autoWidth": true,
                    "responsive": true,
                    "scrollY": '350px', // "scrollX": true,

                    "bDestroy": true,
                    "language": {
                        "emptyTable": "No Vaccination Reports Added",
                        searchPlaceholder: "Search",
                        "sSearch": '<div class="box-tools"> <div class="input-group input-group-sm" style="width: 150px;"> <input type="text" name="table_search" class="form-control pull-right"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button> </div> </div></div>'

                    },

                });
            } else {
                $(".vaccination_box_class").css('display', 'none');;
                $("#mvaccine").closest('table').find('tbody tr').find('.vaccine_id').prop('checked', false);
            }
            if (jQuery.inArray('27', result) != '-1') {
                $(".obs_history_box_class").css('display', 'block');;
                //$.myObHistoryHtml();
            } else {
                $(".obs_history_box_class").css('display', 'none');;
            }

            if (jQuery.inArray('12', result) != '-1' || jQuery.inArray('13', result) != '-1' || jQuery.inArray('14', result) != '-1' || jQuery.inArray('24', result) != '-1' || jQuery.inArray('15', result) != '-1') {

                $('#on_click_save_template').attr( "style", "" );

            } else {
                $('#on_click_save_template').attr( "style", "display: none !important;" );
            }

            // $.myCaseLabviewTable();
        });
    });

    $.myoldPermanetHistory = function () {
        var patient_uni_id = $("#patient_uni_id").val();
        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=view_old_history'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#tcm_permanent_history').summernote('code', result.trim());
        })
    }

    $.myAllergiesHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=allergies'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#allergies_table').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No allergies added",
                }
            });

            if (result.trim() != "") {
                $('#add_table_allergies').html(result.trim());
            }
        })

    }

    $.myVitalsHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=vitals'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#vital_table').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No vital added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_vitals').html(result.trim());
            }

        })

    }

    $.myBodyCompositionHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=body_composition'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#body_com_table').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No body composition added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_body_com').html(result.trim());
            }
        })

    }

    $.myDiagnosisHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=diagnosis'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#diagnosis_table').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No diagnosis added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_diagnosis').html(result.trim());
            }
        })

    }

    $.myVisualAcuityHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=visual_acuity'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#example4_17').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No Visual Acuity added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_visual_acuity').html(result.trim());
            }
        })

    }

    $.myIopHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=iop'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#example5_17').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No IOP added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_eye_iop').html(result.trim());
            }
        })

    }

    $.myFundusExamHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=fundus_exam'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#example6_17').DataTable({
                "scrollY": 120,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No Fundus Examination added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_fundus_examination').html(result.trim());
            }
        })

    }

    $.myCaseReportsHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=casereports'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#example_case_reports').DataTable({
                "scrollY": 140,
                "scrollX": true,
                "paging": false,
                "searching": false,
                "autoWidth": false,
                "info": false,
                "bSort": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No reports added",
                }
            });
            if (result.trim() != "") {
                $('#add_table_case_reports').html(result.trim());
            }

        })

    }

    $.myObHistoryHtml = function () {

        var patient_uni_id = $("#patient_uni_id").val();

        var id = this.value;
        var post_url = 'action/action_casemanager_box.php?do=ob_history'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#example_Obs_History').DataTable({
                "scrollY": 150,
                "scrollX": true,
                "paging": false,
                "lengthChange": false,
                "searching": false,
                "ordering": false,
                "info": false,
                "autoWidth": false,
                "responsive": false,
                "bDestroy": true,
                "language": {
                    "emptyTable": "No History Added",
                }
                //"overflow-x":false
            });

            if (result.trim() != "") {
                $('#add_table_obstetrics_history').html(result.trim());
            }
        })

    }

    $(document).on("click", "#add_refraction_near_template_box", function () {
        console.log("Yes");
        var title = $(this).attr('data-title');
        var html_title = $(this).attr('data-htmltitle');
        $("#refraction_near_template_name").val(title);
        $("#referation_near_box_title").html(html_title);
        $('#modal_refraction_near_template_box').modal('show');

    });

    $(document).on("click", ".tcm_modal_ref_type", function () {
        var values = $(this).val();

        $(this).removeClass("btn-theme-outline").siblings('.btn').addClass('btn-theme-outline');;
        $(this).addClass('btn-theme').siblings().removeClass('btn-theme');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);


            if (values == "minus") {
                var AddSign = "- " + NewText;
                $(this).text(AddSign);
            } else {
                var AddSign = "+ " + NewText;
                $(this).text(AddSign);
            }

        });

        //$(this).siblings('.txt-ref-re-dis').val(values);

    });

    $(document).on("click", ".select_casemanager_near_refraction_sphere", function () {
        var sphere_id = $(this).attr('data-id');

        var main_div = 'div_type_near_refraction_right';

        $('.' + main_div).find(".select_casemanager_near_refraction_sphere").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_near_refraction_sphere_" + sphere_id).addClass('bg-theme color-white');

    });

    $(document).on("click", ".select_casemanager_near_refraction_cv", function () {
        var cylinder_id = $(this).attr('data-id');

        var main_div = 'div_type_near_cv_right';

        $('.' + main_div).find(".select_casemanager_near_refraction_cv").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_near_refraction_cylinder_" + cylinder_id).addClass('bg-theme color-white');


    });

    $(document).on("click", "#submit_button_popup_near_refraction_box", function () {

        var plus_minus = $('.div_type_refraction_plus_minus').find('.tcm_modal_ref_type_near_plus_minus .btn-theme').val();
        //var prism_text =  $('#pre_cash_refraction_prism_template .bg-purple').attr('data-title');

        var add_sphere_text = $('.div_type_near_refraction_right').find('#pre_cash_refraction_sphere_template .bg-theme').attr('data-title');
        var newCvAddtext = $('.div_type_near_cv_right').find('#pre_cash_refraction_cv_template .bg-theme').attr('data-title');

        console.log(plus_minus);
        console.log(add_sphere_text);
        console.log(newCvAddtext);

        var td_div = $('#refraction_near_template_name').val();

        console.log(td_div);

        if (td_div == "td_case_refraction_re_near") {

            var newCylAddtext = $('#tcm_cyl_re_dis_value').val();
            var newAxisAddtext = $('#tcm_axi_re_dis').val();

            var re_sphere_text = $('#tcm_sph_re_dis_value').val();

            if (plus_minus != "" && plus_minus == "plus") {
                add_sphere_text_val = "+" + add_sphere_text;
            } else {
                add_sphere_text_val = "-" + add_sphere_text;
            }

            if (newCvAddtext != "" && newCvAddtext != undefined) {

                newCvAddtext = newCvAddtext;
            } else {
                newCvAddtext = $('#' + td_div + ' #tcm_cv_re_near').val();
            }

            console.log("add_sphere_text: " + add_sphere_text);

            if (add_sphere_text != "" && add_sphere_text != undefined && re_sphere_text != "") {

                var newsphere = parseFloat(re_sphere_text) + parseFloat(add_sphere_text_val);

                if (newsphere > 0) {
                    var newSphereAddtext = "+" + addZeroes(String(newsphere));
                } else {
                    var newSphereAddtext = addZeroes(String(newsphere));
                }
                console.log("1");
            } else {
                console.log("2");
                var newSphereAddtext = $('#' + td_div + ' #tcm_sph_re_near_value').val();
            }

            $('#' + td_div + ' #tcm_sph_re_near_value').val(newSphereAddtext);
            $('#' + td_div + ' #tcm_cyl_re_near_value').val(newCylAddtext);
            $('#' + td_div + ' #tcm_axi_re_near').val(newAxisAddtext);
            $('#' + td_div + ' #tcm_cv_re_near').val(newCvAddtext);


        } else {

            var le_sphere_text = $('#tcm_sph_le_dis_value').val();

            var newCylAddtext = $('#tcm_cyl_le_dis_value').val();
            var newAxisAddtext = $('#tcm_axi_le_dis').val();

            if (plus_minus == "plus") {
                add_sphere_text_val = "+" + add_sphere_text;
            } else {
                add_sphere_text_val = "-" + add_sphere_text;
            }

            if (newCvAddtext != "" && newCvAddtext != undefined) {

                newCvAddtext = newCvAddtext;
            } else {
                newCvAddtext = $('#' + td_div + ' #tcm_cv_re_near').val();
            }


            if (add_sphere_text != "" && add_sphere_text != undefined && le_sphere_text != "") {

                var newsphere = parseFloat(le_sphere_text) + parseFloat(add_sphere_text_val);

                if (newsphere > 0) {
                    var newSphereAddtext = "+" + addZeroes(String(newsphere));
                } else {
                    var newSphereAddtext = addZeroes(String(newsphere));
                }
            } else {

                var newSphereAddtext = $('#' + td_div + ' #tcm_sph_le_near_value').val();
            }

            console.log("newSphereAddtext: " + newSphereAddtext);
            console.log("newCylAddtext: " + newCylAddtext);
            console.log("newAxisAddtext: " + newAxisAddtext);
            console.log("newCvAddtext: " + newCvAddtext);

            $('#' + td_div + ' #tcm_sph_le_near_value').val(newSphereAddtext);
            $('#' + td_div + ' #tcm_cyl_le_near_value').val(newCylAddtext);
            $('#' + td_div + ' #tcm_axi_le_near').val(newAxisAddtext);
            $('#' + td_div + ' #tcm_cv_le_near').val(newCvAddtext);

        }

        $('#modal_refraction_near_template_box').modal('hide');

        $('.refraction_plus').removeClass("btn-theme").addClass('btn-theme-outline');;
        $('.refraction_minus').removeClass("btn-theme-outline").addClass('btn-theme');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);


        });

        $(".select_casemanager_near_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_near_refraction_cv").removeClass('bg-theme color-white');

        return false;

    });

    function addZeroes(num) {
        // Convert input string to a number and store as a variable.
        var value = Number(num);
        // Split the input string into two arrays containing integers/decimals
        var res = num.split(".");
        // If there is no decimal point or only one decimal place found.
        if (res.length == 1 || res[1].length < 3) {
            // Set the number to two decimal places
            value = value.toFixed(2);
        }
        // Return updated or original number.
        return value;
    }

    $(document).on("click", "#add_refraction_computer_template_box", function () {
        ////console.log("Yes");
        var title = $(this).attr('data-title');
        var html_title = $(this).attr('data-htmltitle');
        $("#refraction_com_template_name").val(title);
        $("#referation_com_box_title").html(html_title);
        $('#modal_refraction_com_template_box').modal('show');

    });

    $(document).on("click", ".select_casemanager_com_refraction_sphere", function () {
        var sphere_id = $(this).attr('data-id');

        var main_div = 'div_type_com_refraction_right';

        $('.' + main_div).find(".select_casemanager_com_refraction_sphere").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_com_refraction_sphere_" + sphere_id).addClass('bg-theme color-white');

    });

    $(document).on("click", ".select_casemanager_com_refraction_cv", function () {
        var cylinder_id = $(this).attr('data-id');

        var main_div = 'div_type_com_cv_right';

        $('.' + main_div).find(".select_casemanager_com_refraction_cv").removeClass('bg-theme color-white');
        $('.' + main_div).find("#li_case_com_refraction_cylinder_" + cylinder_id).addClass('bg-theme color-white');


    });

    $(document).on("click", "#submit_button_popup_com_refraction_box", function () {

        var plus_minus = $('.div_type_refraction_plus_minus').find('.tcm_modal_ref_type_com_plus_minus .btn-theme').val();
        //var prism_text =  $('#pre_cash_refraction_prism_template .bg-purple').attr('data-title');

        var add_sphere_text = $('.div_type_com_refraction_right').find('#pre_cash_com_refraction_sphere_template .bg-theme').attr('data-title');
        var newCvAddtext = $('.div_type_com_cv_right').find('#pre_cash_com_refraction_cv_template .bg-theme').attr('data-title');

        console.log(plus_minus);
        console.log(add_sphere_text);
        console.log(newCvAddtext);

        var td_div = $('#refraction_com_template_name').val();

        console.log(td_div);

        if (td_div == "td_case_refraction_re_com") {

            var newCylAddtext = $('#tcm_cyl_re_dis_value').val();
            var newAxisAddtext = $('#tcm_axi_re_dis').val();

            var re_sphere_text = $('#tcm_sph_re_dis_value').val();

            if (plus_minus != "" && plus_minus == "plus") {
                add_sphere_text_val = "+" + add_sphere_text;
            } else {
                add_sphere_text_val = "-" + add_sphere_text;
            }

            if (newCvAddtext != "" && newCvAddtext != undefined) {

                newCvAddtext = newCvAddtext;
            } else {
                newCvAddtext = $('#' + td_div + ' #tcm_cv_re_com').val();
            }

            console.log("add_sphere_text: " + add_sphere_text);

            if (add_sphere_text != "" && add_sphere_text != undefined && re_sphere_text != "") {

                var newsphere = parseFloat(re_sphere_text) + parseFloat(add_sphere_text_val);

                if (newsphere > 0) {
                    var newSphereAddtext = "+" + addZeroes(String(newsphere));
                } else {
                    var newSphereAddtext = addZeroes(String(newsphere));
                }
                console.log("1");
            } else {
                console.log("2");
                var newSphereAddtext = $('#' + td_div + ' #tcm_sph_re_com_value').val();
            }

            $('#' + td_div + ' #tcm_sph_re_com_value').val(newSphereAddtext);
            $('#' + td_div + ' #tcm_cyl_re_com_value').val(newCylAddtext);
            $('#' + td_div + ' #tcm_axi_re_com').val(newAxisAddtext);
            $('#' + td_div + ' #tcm_cv_re_com').val(newCvAddtext);


        } else {

            var le_sphere_text = $('#tcm_sph_le_dis_value').val();

            var newCylAddtext = $('#tcm_cyl_le_dis_value').val();
            var newAxisAddtext = $('#tcm_axi_le_dis').val();

            if (plus_minus == "plus") {
                add_sphere_text_val = "+" + add_sphere_text;
            } else {
                add_sphere_text_val = "-" + add_sphere_text;
            }

            if (newCvAddtext != "" && newCvAddtext != undefined) {

                newCvAddtext = newCvAddtext;
            } else {
                newCvAddtext = $('#' + td_div + ' #tcm_cv_re_com').val();
            }


            if (add_sphere_text != "" && add_sphere_text != undefined && le_sphere_text != "") {

                var newsphere = parseFloat(le_sphere_text) + parseFloat(add_sphere_text_val);

                if (newsphere > 0) {
                    var newSphereAddtext = "+" + addZeroes(String(newsphere));
                } else {
                    var newSphereAddtext = addZeroes(String(newsphere));
                }
            } else {

                var newSphereAddtext = $('#' + td_div + ' #tcm_sph_le_com_value').val();
            }

            console.log("newSphereAddtext: " + newSphereAddtext);
            console.log("newCylAddtext: " + newCylAddtext);
            console.log("newAxisAddtext: " + newAxisAddtext);
            console.log("newCvAddtext: " + newCvAddtext);

            $('#' + td_div + ' #tcm_sph_le_com_value').val(newSphereAddtext);
            $('#' + td_div + ' #tcm_cyl_le_com_value').val(newCylAddtext);
            $('#' + td_div + ' #tcm_axi_le_com').val(newAxisAddtext);
            $('#' + td_div + ' #tcm_cv_le_com').val(newCvAddtext);

        }

        $('#modal_refraction_com_template_box').modal('hide');

        $('.refraction_plus').removeClass("btn-theme").addClass('btn-theme-outline');;
        $('.refraction_minus').removeClass("btn-theme-outline").addClass('btn-theme');

        $(".refraction_sphere_type").each(function () {
            var MainText = $(this).text();
            var NewText = MainText.substr(1);
            var AddSign = "- " + NewText;
            $(this).text(AddSign);


        });

        $(".select_casemanager_com_refraction_sphere").removeClass('bg-theme color-white');
        $(".select_casemanager_com_refraction_cv").removeClass('bg-theme color-white');

        return false;

    });

    $(document).on("keydown", "#add_inp_new_ref_doctor", function (e) {
        var charCode = e.charCode || e.keyCode || e.which;
        if (charCode == 27) {
            // alert("Please click view appointment button.");
            // return false;
            $("#add_inp_new_ref_doctor").trigger("reset");
        }
    });


    $(document).on("click", ".close_add_inp_ref_doctor", function () {
        $("#add_inp_new_ref_doctor").trigger("reset");
    });

    $(document).on("click", "#delete_casemanager_selected_lab_inva_parameter", function () {
        var id = $(this).attr('data-tclpid');
        $("#pre_cash_casemanage_lab_invs_parameter_selected #li_case_lab_inv_parameter_" + id).remove();
        $.custominvlabremoveErrorClass();

    });

    $(document).on("click", ".save_medicine_frequancy", function (e) {

        var id = $(this).attr('data-id');
        var save_templete_morning = $('.save_templete_morning_' + id).val();
        var save_templete_afternoon = $('.save_templete_afternoon_' + id).val();
        var save_templete_evening = $('.save_templete_evening_' + id).val();
        var save_templete_night = $('.save_templete_night_' + id).val();

        var post_url = 'action/action_case_add_medicine.php?do=edit_medicine_freq'
        var datastring = 'tmm_id=' + id + "&save_templete_morning=" + save_templete_morning + "&save_templete_afternoon=" + save_templete_afternoon + "&save_templete_evening=" + save_templete_evening + "&save_templete_night=" + save_templete_night;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            // $('#li_case_lab_inv_title_' + id).remove();

        });

    });

    $(document).on("click", ".select_template_in_history", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_in_history.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var new_val = result.trim();

            var cleanText = $("#tcm_in_history").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

            if (cleanText == "") {
                $('#tcm_in_history').summernote('code', "");
            }

            var old_val_html = $('#tcm_in_history').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_in_history').summernote('code', new_val);
            } else {

                $('#tcm_in_history').summernote('code', old_val_html + "<p>" + new_val + "</p>");
            }

        });

    });

    $(document).on("click", ".clear_in_hostory", function () {

        $('#tcm_in_history').summernote('code', "");

    });

    $(document).on("click", ".load_last_op_history", function () {

        var pm_pid = $("#pm_pid").val();
        var admit_doc_id = $("#admit_doc_id").val();

        var post_url = 'action/action_load_prev_admit_notes.php?do=load_history';
        var datastring = 'pm_pid=' + pm_pid + '&um_id=' + admit_doc_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            //console.log(result.trim());
            var new_val_html = result.trim();
            var cleanText = $("#tcm_in_history").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_in_history').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_in_history').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_in_history').summernote('code', new_val_html);
            } else {
                $('#tcm_in_history').summernote('code', old_val_html + new_val_html);
            }


        });

    });

    $(document).on("click", "#add_hostory", function () {
        ////console.log("Yes");
        $('#modal_add_hostory').modal('show');
    });

    $(document).on("click", "#submit_button_in_history", function (e) {
        var tihm_template_name = $.trim($("#tihm_template_name").val());
        var tihm_template_content = $.trim($("#tihm_template_content").val());
        if (tihm_template_name == "") {
            $("#tihm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tihm_template_content == "") {
            alert("Please enter history.");
            $('#tihm_template_content').focus();
            return false;
        } else {}
        var post_url = 'action/action_case_template_in_history.php?do=add'
        var datastring = 'tihm_template_name=' + tihm_template_name + "&tihm_template_content=" + tihm_template_content;
        $('#submit_button_in_history').attr('disabled', 'disabled');
        $('#submit_button_in_history').hide();
        //$('.err_inpregisterloader').show();
        $(".err_inpregisterloader_history_inp").attr("style", "display:block");
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tihm_template_name: tihm_template_name,
                tihm_template_content: tihm_template_content,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_add_hostory').modal('hide');
            $("#tihm_template_name").val("");
            $("#tihm_template_content").val("");
            $("#pre_in_history_template").prepend(result);
            //location.reload();
            $('#submit_button_in_history').attr('disabled', false);
            $('#submit_button_in_history').show();
            //$('.err_inpregisterloader').hide();
            $(".err_inpregisterloader_history_inp").attr("style", "display:none");
            // var new_val = tihm_template_content.trim();
            // var cleanText = $("#tcm_in_history").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            // if (cleanText == "") {
            //     $('#tcm_in_history').summernote('code', "");
            // }
            // var old_val_html = $('#tcm_in_history').summernote('code').trim();
            // if (cleanText == "") {
            //     $('#tcm_in_history').summernote('code', new_val);
            // } else {
            //     $('#tcm_in_history').summernote('code', old_val_html + "<br/>" + new_val + "");
            // }
        });
    });

    $(document).on("click", ".load_last_op_examination", function () {

        var pm_pid = $("#pm_pid").val();
        var admit_doc_id = $("#admit_doc_id").val();

        var post_url = 'action/action_load_prev_admit_notes.php?do=load_examination';
        var datastring = 'pm_pid=' + pm_pid + '&um_id=' + admit_doc_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            //console.log(result.trim());
            var new_val_html = result.trim();
            var cleanText = $("#tcm_in_mse").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_in_mse').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_in_mse').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_in_mse').summernote('code', new_val_html);
            } else {
                $('#tcm_in_mse').summernote('code', old_val_html + new_val_html);
            }


        });

    });

    $(document).on("click", ".clear_in_examination", function () {

        $('#tcm_in_mse').summernote('code', "");

    });

    $(document).on("click", ".select_template_in_men_status_exam", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_in_men_status_exam.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var new_val = result.trim();

            var cleanText = $("#tcm_in_mse").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

            if (cleanText == "") {
                $('#tcm_in_mse').summernote('code', "");
            }

            var old_val_html = $('#tcm_in_mse').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_in_mse').summernote('code', new_val);
            } else {

                $('#tcm_in_mse').summernote('code', old_val_html + "</br>" + new_val + "");
            }

        });

    });

    $(document).on("click", "#add_examination", function () {
        ////console.log("Yes");
        $('#modal_add_examination').modal('show');
    });

    $(document).on("click", "#submit_button_in_men_status_exam", function (e) {

        var tiem_template_name = $.trim($("#tiem_template_name").val());
        var tiem_template_content = $.trim($("#tiem_template_content").val());

        if (tiem_template_name == "") {
            $("#tiem_template_name").focus();
            alert("Please Enter Title.");
            return false;
        }

        var post_url = 'action/action_case_template_in_men_status_exam.php?do=add'
        var datastring = 'tiem_template_name=' + tiem_template_name + "&tiem_template_content=" + tiem_template_content;



        $('#submit_button_in_men_status_exam').attr('disabled', 'disabled');
        $('#submit_button_in_men_status_exam').hide();
        //$('.err_inpregisterloader').show();
        $(".err_inpregisterloader_examination").attr("style", "display:block");



        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiem_template_name: tiem_template_name,
                tiem_template_content: tiem_template_content,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_add_examination').modal('hide');

            $("#tiem_template_name").val("");
            $("#tiem_template_content").val("");

            $("#pre_in_men_status_exam_template").prepend(result);
            //location.reload();


            $('#submit_button_in_men_status_exam').attr('disabled', false);
            $('#submit_button_in_men_status_exam').show();
            //$('.err_inpregisterloader').hide();
            $(".err_inpregisterloader_examination").attr("style", "display:none");

            // var new_val = tiem_template_content.trim();

            // var cleanText = $("#tcm_in_mse").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

            // if (cleanText == "") {
            //     $('#tcm_in_mse').summernote('code', "");
            // }

            // var old_val_html = $('#tcm_in_mse').summernote('code').trim();

            // if (cleanText == "") {
            //     $('#tcm_in_mse').summernote('code', new_val);
            // } else {

            //     $('#tcm_in_mse').summernote('code', old_val_html + "<p>" + new_val + "</p>");
            // }

        });

    });

    $(document).on("click", "#add_allergies", function () {
        ////console.log("Yes");
        $('#modal_add_allergies').modal('show');
    });

    $(document).on("keydown", "#form_modal_case_allergies", function (e) {
        if (e.keyCode == 13) {
            $('#submit_case_allergies').click();
            return false;
        }
    });

    $(document).on("click", "#submit_case_allergies_inpatient", function () {

        var case_allergy_type = $("#case_allergy_type").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (case_allergy_type == "") {
            $("#case_allergy_type").focus();
            alert("Please Enter Type.");
            return false;
        }

        $('#submit_case_allergies_inpatient').attr('disabled', 'disabled');
        $('#submit_case_allergies_inpatient').hide();
        //$('.err_inpregisterloader').show();
        $(".err_inpregisterloader").attr("style", "display:block");

        var post_url = 'action/action_case_allergies.php?do=add'
        var datastring = 'case_allergy_type=' + case_allergy_type + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                case_allergy_type: case_allergy_type,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            $('#submit_case_allergies_inpatient').removeAttr('disabled');
            $('#modal_add_allergies').modal('hide');

            $('#submit_case_allergies_inpatient').show();
            //$('.err_inpregisterloader').hide();
            $(".err_inpregisterloader").attr("style", "display:none");

            $("#case_allergy_type").val("");

            if ($('#add_table_allergies .dataTables_empty').length) {

                $("#add_table_allergies").html(result);

            } else {
                //$(this).parent("tr:first").remove()
                $('.click_txt_allergy').parents("tr").remove();
                $("#add_table_allergies").prepend(result);
                // $("#add_table_allergies").prepend('<tr class="tr_text_allergy"><td><input type="text" class="txt-full-refration click_txt_allergy" name="txt_allergy" id="txt_allergy"></td><td>-</td><td>-</td></tr>');
            }
            //location.reload();

        });

    });

    $(document).on("keyup", ".case_search_diagnosis", function () {
        var searchString1 = $(this).val();
        var department_id = $("#department_id").val();

        console.log("department_id: " + department_id);

        $.ajax({
            type: 'post',
            url: 'action/get_search_diagnosis_name.php',
            data: {
                p_d_data1: searchString1.trim(),
                department_id: department_id,

            },
            dataType: "text",
            success: function (response) {
                $("#pre_cash_casemanage_diagnosis_title").html(response);
            }
        });

    });

    $(document).on("click", "#reset_popup_diagnosis_box", function () {
        ////console.log("Yes");
        var dp_id = $("#dp_dia_id").val();
        var um_id = $("#um_id").val();

        var post_url = 'action/action_case_diagnosis.php?do=pop_up_data'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                dp_id: dp_id,
                um_id: um_id,
            },
        }).done(function (result) {
            //$("#modal_custom_diagnosis_box").modal('show');
            $(".main_diagnosis_html").html(result.trim());
            $("#select_dia_popup").val("");
            $("#select_medicine_template_popup").val(0);
            $("#select_advice_popup").val(0);
            $("#select_investigation_popup").val(0);
            $("#select_dia_popup_id").val(0);

        });

    });

    $(document).on("click", "#reset_popup_diagnosis_box_setting", function () {
        ////console.log("Yes");
       
            $("#select_diagnosis_text").val("");
            $("#select_diagnosis_icd").val("");
            $("#select_todm_type").val("");
            
    });

    $(document).on("click", ".change_consult_date", function () {
        var id = $(this).attr("id");
        $(".change_consult_date").removeClass("active");
        $(".date_id_" + id).addClass("active");
    });

    $(document).on("click", ".clear_in_imp_remark", function () {

        $("#tcm_in_remark").val("");

    });

    $(document).on("click", "#add_imp_remark", function () {

        $('#modal_add_impremark').modal('show');

    });

    $(document).on("click", "#submit_button_in_remark", function (e) {

        var tirm_template_name = $.trim($("#tirm_template_name").val());
        var tirm_template_content = $.trim($("#tirm_template_content").val());

        if (tirm_template_name == "") {
            $("#tirm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tirm_template_content == "") {
            alert("Please enter remark.");
            $('#tirm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_in_remark.php?do=add'
        var datastring = 'tirm_template_name=' + tirm_template_name + "&tirm_template_content=" + tirm_template_content;
        ////console.log(datastring);

        $('#submit_button_in_remark').attr('disabled', 'disabled');
        $('#submit_button_in_remark').hide();
        //$('.err_inpregisterloader').show();
        $(".err_inpregisterloader_remarks").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tirm_template_name: tirm_template_name,
                tirm_template_content: tirm_template_content,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_add_impremark').modal('hide');

            $("#tirm_template_name").val("");
            $("#tirm_template_content").val("");

            $('#submit_button_in_remark').attr('disabled', false);
            $('#submit_button_in_remark').show();
            //$('.err_inpregisterloader').hide();
            $(".err_inpregisterloader_remarks").attr("style", "display:none");

            $("#pre_in_remarks_template").prepend(result);
            //location.reload();

            // var old_val = $("#tcm_in_remark").val();
            // var new_val = tirm_template_content.trim();
            // if (old_val == "") {
            //     $("#tcm_in_remark").val(old_val + new_val);
            // } else {
            //     $("#tcm_in_remark").val(old_val + "\n\n" + new_val);
            // }

        });

    });

    $(document).on("click", ".select_template_in_remark", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_in_remark.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tcm_in_remark").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tcm_in_remark").val(old_val + new_val);
            } else {
                $("#tcm_in_remark").val(old_val + "\n" + new_val);
            }
        });

    });

    $(document).on("click", "#submit_button_inpatient_admit_notes", function () {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();
        var tian_id = $("#tian_id").val();
        var tcm_in_chief_com = $("#tcm_in_chief_com").val();
        var tcm_in_assessment_notes = $("#tcm_in_assessment_notes").val();
        var tcm_in_permanent_history = $("#tcm_permanent_history").val();
        var tcm_in_history = $("#tcm_in_history").val();
        var tcm_in_mse = $("#tcm_in_mse").val();
        var tcm_in_remark = $("#tcm_in_remark").val();


        $('#submit_button_inpatient_admit_notes').attr('disabled', 'disabled');
        $('#submit_button_inpatient_admit_notes').hide();
        $('.err_inpregisterloader').show();



        // if (tcm_in_chief_com == "") {
        //     alert("Please enter the Chief Complaints.");
        //     $('#tcm_in_chief_com').focus();
        //     return false;
        // } else if (tcm_in_assessment_notes == "") {
        //     alert("Please enter the Clinical Notes.");
        //     $('#tcm_in_assessment_notes').focus();
        //     return false;
        // } else if (tcm_in_history == "") {
        //     alert("Please Enter History.");
        //     $('#tcm_in_history').focus();
        //     return false;
        // } else if (tcm_in_mse == "") {
        //     alert("Please Enter Examinations.");
        //     $('#tcm_in_mse').focus();
        //     return false;
        // }else if (tcm_in_remark == "") {
        //     alert("Please Enter Remark.");
        //     $('#tcm_in_remark').focus();
        //     return false;
        // }else {

        // }


        $.ajax({
            type: 'post',
            dataType: 'JSON',
            url: 'action/action_admit_notes.php?do=add',
            data: {
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                ip_id: ip_id,
                tian_id: tian_id,
                tcm_in_chief_com: tcm_in_chief_com,
                tcm_in_assessment_notes: tcm_in_assessment_notes,
                tcm_in_history: tcm_in_history,
                tcm_in_permanent_history: tcm_in_permanent_history,
                tcm_in_mse: tcm_in_mse,
                tcm_in_remark: tcm_in_remark,

            },
            success: function (result) {

                $('#submit_button_inpatient_admit_notes').attr('disabled', false);
                $('#submit_button_inpatient_admit_notes').show();
                $('.err_inpregisterloader').hide();

                $(".overlay-popup").hide();

                $(".overlay-popup").hide();
                $("#tian_id").val(result['tian_id']);
                var status = result['tian_status'];
                $("#status_message").show();
            }
        });

    });

    $(document).on("click", "#add_inpatient_onadmit_dia", function () {
        ////console.log("Yes");
        var dp_id = $("#department_id").val();
        var um_id = $("#um_id").val();

        var post_url = 'action/action_case_diagnosis_oad.php?do=pop_up_data'
        var datastring = 'dp_id=' + dp_id + "&um_id=" + um_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#modal_custom_diagnosis_box_oad").modal('show');
            $(".main_diagnosis_html_oad").html(result.trim());
            $("#select_dia_popup").val("");
            $("#select_medicine_template_popup").val(0);
            $("#select_advice_popup").val(0);
            $("#select_investigation_popup").val(0);
            $("#select_dia_popup_id").val(0);

        });

    });

    $(document).on("click", ".select_popup_diagnosis_value_oad", function () {
        //alert("hi");
        var diagnosis_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        var icd_code = $(this).attr('data-icd');
        $("#select_diagnosis_text_oad").val(diagnosis_name);
        $("#select_icd_code_oad").val(icd_code);
        $("#select_dia_popup").val(diagnosis_name);
        $("#select_dia_popup_id").val(diagnosis_id);
        $.customtdiagnosisemplatecolor();

    });

    $(document).on("keydown", "#form_modal_inpatient_onadmit_dia", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_onadmit_dia').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_onadmit_dia", function () {

        var tiod_type = $("#select_todm_type_oad").val();
        var tiod_diagnosis = $("#select_diagnosis_text_oad").val();
        var tiod_icd_code = $("#select_icd_code_oad").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (tiod_type == "") {
            $("#select_todm_type_oad").focus();
            alert("Please Select Type.");
            return false;
        } else if (tiod_diagnosis == "") {
            $("#select_diagnosis_text_oad").focus();
            alert("Please Enter Diagnosis.");
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_onadmit_diagnosis.php?do=add'
        var datastring = 'tiod_type=' + tiod_type + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tiod_icd_code=" + tiod_icd_code + "&tiod_diagnosis=" + tiod_diagnosis + "&ip_id=" + ip_id;

        $('#submit_inpatient_onadmit_dia').attr('disabled', 'disabled');
        $('#submit_inpatient_onadmit_dia').hide();
        $('.err_inpregisterloader').show();

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiod_type: tiod_type,
                pm_id: pm_id,
                pm_pid: pm_pid,
                tiod_icd_code: tiod_icd_code,
                tiod_diagnosis: tiod_diagnosis,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_custom_diagnosis_box_oad').modal('hide');

            $("#select_diagnosis_text_oad").val("");
            $("#select_icd_code_oad").val("");
            // $('#select_todm_type_oad option[value=Provisional]').attr("selected", true);
            // $("#select_todm_type_oad option").html('Provisional');
            //$("#tiod_diagnosis").val("");

            if ($('#add_table_inp_onadmit_dia .dataTables_empty').length) {

                $("#add_table_inp_onadmit_dia").html(result);

            } else {
                $("#add_table_inp_onadmit_dia").prepend(result);
            }

            $('#submit_inpatient_onadmit_dia').attr('disabled', false);
            $('#submit_inpatient_onadmit_dia').show();
            $('.err_inpregisterloader').hide();

            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inp_onadmit_dia", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_onadmit_dia').modal('show');

        var post_url = 'action/action_inpatient_onadmit_diagnosis.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tiod_id").val(result['tiod_id']);
            $("#edit_tiod_type").val(result['tiod_type']);
            $("#edit_tiod_diagnosis").val(result['tiod_diagnosis']);
            $("#edit_tiod_icd_code").val(result['tiod_icd_code']);
            $("#edit_tiod_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_onadmit_dia", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_onadmit_dia').click();
            return false;
        }
    });

    $('#submit_edit_inpatient_onadmit_dia').click(function () {
        var tiod_id = $("#edit_tiod_id").val();
        var edit_tiod_um_id = $("#edit_tiod_um_id").val();

        var tiod_type = $("#edit_tiod_type").val();
        var tiod_diagnosis = $("#edit_tiod_diagnosis").val();
        var tiod_icd_code = $("#edit_tiod_icd_code").val();

        if (tiod_type == "") {
            $("#edit_tiod_type").focus();
            alert("Please Select Type.");
            return false;
        } else if (tiod_diagnosis == "") {
            $("#edit_tiod_diagnosis").focus();
            alert("Please Enter Diagnosis.");
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_onadmit_diagnosis.php?do=edit'
        var datastring = 'tiod_type=' + tiod_type + "&tiod_id=" + tiod_id + "&tiod_diagnosis=" + tiod_diagnosis + "&tiod_icd_code=" + tiod_icd_code + "&edit_tiod_um_id=" + edit_tiod_um_id;

        $('#submit_edit_inpatient_onadmit_dia').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_onadmit_dia').hide();
        $('.err_inpregisterloader').show();

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiod_type: tiod_type,
                tiod_id: tiod_id,
                tiod_diagnosis: tiod_diagnosis,
                tiod_icd_code: tiod_icd_code,
                edit_tiod_um_id: edit_tiod_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tiod_id = $("#edit_tiod_id").val();
            ////console.log(tiod_id);
            $('#modal_edit_inpatient_onadmit_dia').modal('hide');

            $("#table_tr_inp_onadmit_dia_" + tiod_id).html(result.trim());

            $('#submit_edit_inpatient_onadmit_dia').attr('disabled', false);
            $('#submit_edit_inpatient_onadmit_dia').show();
            $('.err_inpregisterloader').hide();


            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_inpatient_admit_dia", function () {
        $('#modal_danger_inpatient_admit_dia').modal('show');
        var id = $(this).attr('data-id');

        $('#delete_tiod_id').val(id);

    });

    $('#delete_inpatient_admit_dia').click(function () {
        var delete_tiod_id = $("#delete_tiod_id").val();
        var post_url = 'action/action_inpatient_onadmit_diagnosis.php?do=delete'
        var datastring = 'delete_tiod_id=' + delete_tiod_id;

        $('#delete_inpatient_admit_dia').attr('disabled', 'disabled');
        $('#delete_inpatient_admit_dia').hide();
        $('.err_inpregisterloader').show();

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_admit_dia').modal('hide');
            $('#table_tr_inp_onadmit_dia_' + delete_tiod_id).remove();

            $('#delete_inpatient_admit_dia').attr('disabled', false);
            $('#delete_inpatient_admit_dia').show();
            $('.err_inpregisterloader').hide();

            //location.reload();
        });

    });

    $(document).on("click", "#add_inpatient_discharge_dia", function () {
        ////console.log("Yes");
        var dp_id = $("#department_id").val();
        var um_id = $("#um_id").val();

        var post_url = 'action/action_case_diagnosis_dd.php?do=pop_up_data'
        var datastring = 'dp_id=' + dp_id + "&um_id=" + um_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#modal_custom_diagnosis_box_dd").modal('show');
            $(".main_diagnosis_html_dd").html(result.trim());
            $("#select_dia_popup").val("");
            $("#select_medicine_template_popup").val(0);
            $("#select_advice_popup").val(0);
            $("#select_investigation_popup").val(0);
            $("#select_dia_popup_id").val(0);

        });

    });

    $(document).on("keydown", "#form_modal_inpatient_discharge_dia", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_discharge_dia').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_discharge_dia", function () {


        var tidd_type = $("#select_todm_type_dd").val();
        var tidd_diagnosis = $("#select_diagnosis_text_dd").val();
        var tidd_icd_code = $("#select_icd_code_dd").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (tidd_type == "") {
            $("#select_todm_type_dd").focus();
            alert("Please select Type.");
            return false;
        } else if (tidd_diagnosis == "") {
            $("#select_diagnosis_text_dd").focus();
            alert("Please Enter Diagnosis.");
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_discharge_diagnosis.php?do=add'
        var datastring = 'tidd_type=' + tidd_type + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&tidd_diagnosis=" + tidd_diagnosis + "&ip_id=" + ip_id + "&tidd_icd_code=" + tidd_icd_code;
        ////console.log(datastring);

        $('#submit_inpatient_discharge_dia').attr('disabled', 'disabled');
        $('#submit_inpatient_discharge_dia').hide();
        $('.err_inpregisterloader').show();


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tidd_type: tidd_type,
                pm_id: pm_id,
                pm_pid: pm_pid,
                tidd_diagnosis: tidd_diagnosis,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
                tidd_icd_code: tidd_icd_code,
            },
        }).done(function (result) {
            ////console.log(result);

            $('#submit_inpatient_discharge_dia').attr('disabled', false);
            $('#submit_inpatient_discharge_dia').show();
            $('.err_inpregisterloader').hide();

            $('#modal_custom_diagnosis_box_dd').modal('hide');

            //$("#tidd_type").val("");
            $("#select_diagnosis_text_dd").val("");

            if ($('#add_table_inp_discharge_dia .dataTables_empty').length) {

                $("#add_table_inp_discharge_dia").html(result);

            } else {
                $("#add_table_inp_discharge_dia").prepend(result);
            }



            //location.reload();

        });

    });

    $(document).on("click", ".select_popup_diagnosis_value_dd", function () {
        //alert("hi");
        var diagnosis_id = $(this).attr('data-id');
        var diagnosis_name = $(this).attr('data-text');
        var icd_code = $(this).attr('data-icd');
        $("#select_diagnosis_text_dd").val(diagnosis_name);
        $("#select_icd_code_dd").val(icd_code);
        $("#select_dia_popup").val(diagnosis_name);
        $("#select_dia_popup_id").val(diagnosis_id);
        $.customtdiagnosisemplatecolor();

    });

    $(document).on("click", ".select_edit_inp_discharge_dia", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_discharge_dia').modal('show');

        var post_url = 'action/action_inpatient_discharge_diagnosis.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tidd_id").val(result['tidd_id']);
            $("#edit_tidd_type").val(result['tidd_type']);
            $("#edit_tidd_diagnosis").val(result['tidd_diagnosis']);
            $("#edit_tidd_icd_code").val(result['tidd_icd_code']);
            $("#edit_tidd_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_discharge_dia", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_discharge_dia').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_discharge_dia", function () {
        var tidd_id = $("#edit_tidd_id").val();
        var edit_tidd_um_id = $("#edit_tidd_um_id").val();

        var tidd_type = $("#edit_tidd_type").val();
        var tidd_diagnosis = $("#edit_tidd_diagnosis").val();
        var tidd_icd_code = $("#edit_tidd_icd_code").val();

        if (tidd_type == "") {
            $("#edit_tidd_type").focus();
            alert("Please Select Type.");
            return false;
        } else if (tidd_diagnosis == "") {
            $("#edit_tidd_diagnosis").focus();
            alert("Please Enter Discharge Diagnosis.");
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_discharge_diagnosis.php?do=edit'
        var datastring = 'tidd_type=' + tidd_type + "&tidd_id=" + tidd_id + "&tidd_diagnosis=" + tidd_diagnosis + "&tidd_icd_code=" + tidd_icd_code + "&edit_tidd_um_id=" + edit_tidd_um_id;
        ////console.log(datastring);

        $('#submit_edit_inpatient_discharge_dia').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_discharge_dia').hide();
        $('.err_inpregisterloader').show();

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tidd_type: tidd_type,
                tidd_id: tidd_id,
                tidd_diagnosis: tidd_diagnosis,
                tidd_icd_code: tidd_icd_code,
                edit_tidd_um_id: edit_tidd_um_id,
            },
        }).done(function (result) {
            ////console.log(result);

            $('#submit_edit_inpatient_discharge_dia').attr('disabled', false);
            $('#submit_edit_inpatient_discharge_dia').show();
            $('.err_inpregisterloader').hide();


            var tidd_id = $("#edit_tidd_id").val();
            ////console.log(tidd_id);
            $('#modal_edit_inpatient_discharge_dia').modal('hide');

            $("#table_tr_inp_discharge_dia_" + tidd_id).html(result.trim());


            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_inpatient_discharge_dia", function () {
        $('#modal_danger_inpatient_discharge_dia').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_tidd_id').val(id);

    });

    $(document).on("click", "#delete_inpatient_discharge_dia", function () {
        var delete_tidd_id = $("#delete_tidd_id").val();
        var post_url = 'action/action_inpatient_discharge_diagnosis.php?do=delete'
        var datastring = 'delete_tidd_id=' + delete_tidd_id;

        $('#delete_inpatient_discharge_dia').attr('disabled', 'disabled');
        $('#delete_inpatient_discharge_dia').hide();
        $('.err_inpregisterloader').show();


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);

            $('#delete_inpatient_discharge_dia').attr('disabled', false);
            $('#delete_inpatient_discharge_dia').show();
            $('.err_inpregisterloader').hide();


            $('#modal_danger_inpatient_discharge_dia').modal('hide');
            $('#table_tr_inp_discharge_dia_' + delete_tidd_id).remove();
            //location.reload();
        });

    });

    $(document).on("keydown", "#form_modal_men_status_exam", function (e) {
        if (e.keyCode == 13) {
            $('#submit_button_in_men_status_exam').click(e);
            return false;
        }
    });

    $(document).on("keydown", "#form_modal_in_remark", function (e) {
        if (e.keyCode == 13) {
            $('#submit_button_in_remark').click(e);
            return false;
        }
    });

    $(document).on("keydown", "#form_inp_history", function (e) {
        if (e.keyCode == 13) {
            $('#submit_button_in_history').click(e);
            return false;
        }
    });

    $(document).on("click", "#imp_show_past_diagnosis", function () {

        var id = $("#pm_pid").val();
        $('#modle_imp_show_past_diagnosis').modal('show');
        var post_url = 'action/action_inpatient_discharge_diagnosis.php?do=past_dia'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $("#case_show_past_diagnosis").html(result.trim());

        });

    });

    $(document).on("click", "#add_inpatient_vitals", function () {
        $('#modal_inpatient_vitals').modal('show');
        var dt = new Date();
        // var time = dt.toLocaleTimeString().replace(/:\d+ /, ' ');
        // var time = dt.getHours() + ":" + dt.getMinutes();

        var time = dt.getHours() + ":" + dt.getMinutes();
        // console.log(time);
        $('#tiv_time').val(time);
    });

    $(document).on("keydown", "#form_modal_inpatient_vitals", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_vitals').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_vitals", function () {
        var tiv_time = $("#tiv_time").val();
        var tiv_temp = $("#tiv_temp").val();
        var tiv_pres = $("#tiv_pres").val();
        var tiv_resp_rate = $("#tiv_resp_rate").val();
        var tiv_blood_press = $("#tiv_blood_press").val();
        var tiv_spo2 = $("#tiv_spo2").val();

        var admit_days = $("#admit_days").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = tiv_temp + tiv_pres + tiv_resp_rate + tiv_blood_press + tiv_spo2;
        var all_variable = all.trim();


        if (tiv_time == "") {
            alert("Please Enter Time.");
            $("#tiv_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        }
        $('#submit_inpatient_vitals').attr('disabled', 'disabled');
        var post_url = 'action/action_inpatient_vitals.php?do=add'
        var datastring = 'tiv_time=' + tiv_time + "&tiv_temp=" + tiv_temp + "&tiv_pres=" + tiv_pres + "&tiv_resp_rate=" + tiv_resp_rate + "&tiv_blood_press=" + tiv_blood_press + "&tiv_spo2=" + tiv_spo2 + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;
        ////console.log(datastring);

        $('#submit_inpatient_vitals').attr('disabled', 'disabled');
        $('#submit_inpatient_vitals').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiv_time: tiv_time,
                tiv_temp: tiv_temp,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                admit_days: admit_days,
                tiv_pres: tiv_pres,
                tiv_resp_rate: tiv_resp_rate,
                tiv_blood_press: tiv_blood_press,
                tiv_spo2: tiv_spo2,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_vitals').modal('hide');
            $('#submit_inpatient_vitals').removeAttr('disabled');
            $("#tiv_type").val("");
            $("#tiv_time").val("");
            $("#tiv_temp").val("");
            $("#tiv_pres").val("");
            $("#tiv_resp_rate").val("");
            $("#tiv_blood_press").val("");
            $("#tiv_spo2").val("");

            if ($('#add_table_inp_vitals .dataTables_empty').length) {

                $("#add_table_inp_vitals").html(result);

            } else {
                $("#add_table_inp_vitals").prepend(result);
            }

            $('#submit_inpatient_vitals').attr('disabled', false);
            $('#submit_inpatient_vitals').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_vitals", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_vitals').modal('show');

        var post_url = 'action/action_inpatient_vitals.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tiv_id").val(result['tiv_id']);
            $("#edit_tiv_time").val(result['tiv_time']);
            $("#edit_tiv_temp").val(result['tiv_temp']);
            $("#edit_tiv_pres").val(result['tiv_pres']);
            $("#edit_tiv_resp_rate").val(result['tiv_resp_rate']);
            $("#edit_tiv_blood_press").val(result['tiv_blood_press']);
            $("#edit_tiv_spo2").val(result['tiv_spo2']);
            $("#edit_tiv_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_vitals", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_vitals').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_vitals", function () {
        var tiv_id = $("#edit_tiv_id").val();
        var tiv_time = $("#edit_tiv_time").val();
        var tiv_temp = $("#edit_tiv_temp").val();
        var tiv_pres = $("#edit_tiv_pres").val();
        var tiv_resp_rate = $("#edit_tiv_resp_rate").val();
        var tiv_blood_press = $("#edit_tiv_blood_press").val();
        var tiv_spo2 = $("#edit_tiv_spo2").val();

        var edit_tiv_um_id = $("#edit_tiv_um_id").val();


        var all = tiv_temp + tiv_pres + tiv_resp_rate + tiv_blood_press + tiv_spo2;
        var all_variable = all.trim();

        if (tiv_time == "") {
            alert("Please Enter Time.");
            $("#edit_tiv_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        }

        var post_url = 'action/action_inpatient_vitals.php?do=edit'
        var datastring = 'tiv_time=' + tiv_time + "&tiv_temp=" + tiv_temp + "&tiv_pres=" + tiv_pres + "&tiv_resp_rate=" + tiv_resp_rate + "&tiv_blood_press=" + tiv_blood_press + "&tiv_spo2=" + tiv_spo2 + "&tiv_id=" + tiv_id + "&edit_tiv_um_id=" + edit_tiv_um_id;
        ////console.log(datastring);

        $('#submit_edit_inpatient_vitals').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_vitals').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiv_id: tiv_id,
                tiv_time: tiv_time,
                tiv_temp: tiv_temp,
                edit_tiv_um_id: edit_tiv_um_id,
                tiv_pres: tiv_pres,
                tiv_resp_rate: tiv_resp_rate,
                tiv_blood_press: tiv_blood_press,
                tiv_spo2: tiv_spo2,
            },
        }).done(function (result) {
            ////console.log(result);

            var tiv_id = $("#edit_tiv_id").val();
            ////console.log(tiv_id);
            $('#modal_edit_inpatient_vitals').modal('hide');

            $("#table_tr_inp_vitals_" + tiv_id).html(result.trim());

            $('#submit_edit_inpatient_vitals').attr('disabled', false);
            $('#submit_edit_inpatient_vitals').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("click", "#add_inpatient_examination", function () {
        $('#modal_inpatient_examinations').modal('show');
    });


    $(document).on("keydown", "#form_modal_inpatient_examinations", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_examinations').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_examinations", function () {
        var tie_time = $("#tie_time").val();
        var tie_cns = $("#tie_cns").val();
        var tie_cvs = $("#tie_cvs").val();
        var tie_rs = $("#tie_rs").val();
        var tie_pa = $("#tie_pa").val();

        var admit_days = $("#admit_days").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = tie_cns + tie_cvs + tie_rs + tie_pa;
        var all_variable = all.trim();


        if (tie_time == "") {
            alert("Please Enter time.");
            $("#tie_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        }
        $('#submit_inpatient_examinations').attr('disabled', 'disabled');
        var post_url = 'action/action_inpatient_examinations.php?do=add'
        var datastring = 'tie_time=' + tie_time + "&tie_cns=" + tie_cns + "&tie_cvs=" + tie_cvs + "&tie_rs=" + tie_rs + "&tie_pa=" + tie_pa + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;
        ////console.log(datastring);

        $('#submit_inpatient_examinations').attr('disabled', 'disabled');
        $('#submit_inpatient_examinations').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tie_time: tie_time,
                tie_cns: tie_cns,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
                admit_days: admit_days,
                tie_cvs: tie_cvs,
                tie_rs: tie_rs,
                tie_pa: tie_pa,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_examinations').modal('hide');
            $('#submit_inpatient_examinations').removeAttr('disabled');
            $("#tie_type").val("");
            $("#tie_time").val("");
            $("#tie_cns").val("");
            $("#tie_cvs").val("");
            $("#tie_rs").val("");
            $("#tie_pa").val("");

            if ($('#add_table_inp_examinations .dataTables_empty').length) {

                $("#add_table_inp_examinations").html(result);

            } else {
                $("#add_table_inp_examinations").prepend(result);
            }

            $('#submit_inpatient_examinations').attr('disabled', false);
            $('#submit_inpatient_examinations').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_examinations", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_examinations').modal('show');

        var post_url = 'action/action_inpatient_examinations.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tie_id").val(result['tie_id']);
            $("#edit_tie_time").val(result['tie_time']);
            $("#edit_tie_cns").val(result['tie_cns']);
            $("#edit_tie_cvs").val(result['tie_cvs']);
            $("#edit_tie_rs").val(result['tie_rs']);
            $("#edit_tie_pa").val(result['tie_pa']);
            $("#edit_tie_um_id").val(result['created_by']);

            // $("#ticnm_cnslate_name").val("");
            // $("#ticnm_cnslate_content").val("");

            // $("#pre_in_asses_notes_cnslate").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#modal_edit_inpatient_examinations", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_examinations').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_examinations", function () {

        var tie_id = $("#edit_tie_id").val();
        var tie_time = $("#edit_tie_time").val();
        var tie_cns = $("#edit_tie_cns").val();
        var tie_cvs = $("#edit_tie_cvs").val();
        var tie_rs = $("#edit_tie_rs").val();
        var tie_pa = $("#edit_tie_pa").val();

        var edit_tie_um_id = $("#edit_tie_um_id").val();


        var all = tie_cns + tie_cvs + tie_rs + tie_pa;
        var all_variable = all.trim();

        if (tie_time == "") {
            alert("Please Enter time.");
            $("#edit_tie_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        }

        var post_url = 'action/action_inpatient_examinations.php?do=edit'
        var datastring = 'tie_time=' + tie_time + "&tie_cns=" + tie_cns + "&tie_cvs=" + tie_cvs + "&tie_rs=" + tie_rs + "&tie_pa=" + tie_pa + "&tie_id=" + tie_id + "&edit_tie_um_id=" + edit_tie_um_id;
        ////console.log(datastring);

        $('#submit_edit_inpatient_examinations').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_examinations').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tie_id: tie_id,
                tie_time: tie_time,
                tie_cns: tie_cns,
                edit_tie_um_id: edit_tie_um_id,
                tie_cvs: tie_cvs,
                tie_rs: tie_rs,
                tie_pa: tie_pa,
            },
        }).done(function (result) {
            ////console.log(result);
            var tie_id = $("#edit_tie_id").val();
            ////console.log(tie_id);
            $('#modal_edit_inpatient_examinations').modal('hide');

            $("#table_tr_inp_examinations_" + tie_id).html(result.trim());

            $('#submit_edit_inpatient_examinations').attr('disabled', false);
            $('#submit_edit_inpatient_examinations').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", "#add_inpatient_daily_well", function () {
        $('#modal_inpatient_daily_well').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_daily_well", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_daily_well').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_daily_well", function () {

        var tidw_time = $("#tidw_time").val();
        var tidw_sleep = $("#tidw_sleep").val();
        var tidw_bowel = $("#tidw_bowel").val();
        var tidw_bladder = $("#tidw_bladder").val();
        var tidw_appetite = $("#tidw_appetite").val();
        var tidw_ambulation = $("#tidw_ambulation").val();
        var tidw_eting = $("#tidw_eting").val();

        var admit_days = $("#admit_days").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = tidw_sleep + tidw_bowel + tidw_bladder + tidw_appetite + tidw_ambulation + tidw_eting;
        var all_variable = all.trim();

        if (tidw_time == "") {
            alert("Please Enter Time.");
            $("#tidw_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        } else {

        }

        $('#submit_inpatient_daily_well').attr('disabled', 'disabled');


        var post_url = 'action/action_inpatient_daily_well.php?do=add'
        var datastring = 'tidw_time=' + tidw_time + "&tidw_sleep=" + tidw_sleep + "&tidw_bowel=" + tidw_bowel + "&tidw_bladder=" + tidw_bladder + "&tidw_appetite=" + tidw_appetite + "&tidw_ambulation=" + tidw_ambulation + "&tidw_eting=" + tidw_eting + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;
        ////console.log(datastring);

        $('#submit_inpatient_daily_well').attr('disabled', 'disabled');
        $('#submit_inpatient_daily_well').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tidw_time: tidw_time,
                tidw_sleep: tidw_sleep,
                tidw_bowel: tidw_bowel,
                tidw_bladder: tidw_bladder,
                tidw_appetite: tidw_appetite,
                tidw_ambulation: tidw_ambulation,
                tidw_eting: tidw_eting,
                pm_id: pm_id,
                pm_pid: pm_pid,
                patient_uni_id: patient_uni_id,
                ip_id: ip_id,
                admit_days: admit_days,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_daily_well').modal('hide');
            $('#submit_inpatient_daily_well').removeAttr('disabled');
            $("#tidw_time").val("");
            $("#tidw_sleep").val("");
            $("#tidw_bowel").val("");
            $("#tidw_bladder").val("");
            $("#tidw_appetite").val("");
            $("#tidw_ambulation").val("");
            $("#tidw_eting").val("");


            if ($('#add_table_inp_daily_well .dataTables_empty').length) {

                $("#add_table_inp_daily_well").html(result);

            } else {
                $("#add_table_inp_daily_well").prepend(result);
            }

            $('#submit_inpatient_daily_well').attr('disabled', false);
            $('#submit_inpatient_daily_well').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_daily_well", function () {
        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_daily_well').modal('show');

        var post_url = 'action/action_inpatient_daily_well.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tidw_id").val(result['tidw_id']);
            $("#edit_tidw_time").val(result['tidw_time']);
            $("#edit_tidw_sleep").val(result['tidw_sleep']);
            $("#edit_tidw_bowel").val(result['tidw_bowel']);
            $("#edit_tidw_bladder").val(result['tidw_bladder']);
            $("#edit_tidw_appetite").val(result['tidw_appetite']);
            $("#edit_tidw_ambulation").val(result['tidw_ambulation']);
            $("#edit_tidw_eting").val(result['tidw_eting']);
            $("#edit_tidw_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });


    $(document).on("keydown", "#form_modal_edit_inpatient_daily_well", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_daily_well').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_daily_well", function () {

        var tidw_id = $("#edit_tidw_id").val();
        var tidw_time = $("#edit_tidw_time").val();
        var tidw_sleep = $("#edit_tidw_sleep").val();
        var tidw_bowel = $("#edit_tidw_bowel").val();
        var tidw_bladder = $("#edit_tidw_bladder").val();
        var tidw_appetite = $("#edit_tidw_appetite").val();
        var tidw_ambulation = $("#edit_tidw_ambulation").val();
        var tidw_eting = $("#edit_tidw_eting").val();

        var edit_tidw_um_id = $("#edit_tidw_um_id").val();


        var all = tidw_sleep + tidw_bowel + tidw_bladder + tidw_appetite + tidw_ambulation + tidw_eting;
        var all_variable = all.trim();

        if (tidw_time == "") {
            alert("Please Enter Time.");
            $("#edit_tidw_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_daily_well.php?do=edit'
        var datastring = 'tidw_time=' + tidw_time + "&tidw_sleep=" + tidw_sleep + "&tidw_bowel=" + tidw_bowel + "&tidw_bladder=" + tidw_bladder + "&tidw_appetite=" + tidw_appetite + "&tidw_ambulation=" + tidw_ambulation + "&tidw_eting=" + tidw_eting + "&tidw_id=" + tidw_id + "&edit_tidw_um_id=" + edit_tidw_um_id;
        ////console.log(datastring);

        $('#submit_edit_inpatient_daily_well').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_daily_well').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tidw_time: tidw_time,
                tidw_sleep: tidw_sleep,
                tidw_bowel: tidw_bowel,
                tidw_bladder: tidw_bladder,
                tidw_appetite: tidw_appetite,
                tidw_ambulation: tidw_ambulation,
                tidw_eting: tidw_eting,
                tidw_id: tidw_id,
                edit_tidw_um_id: edit_tidw_um_id
            },
        }).done(function (result) {
            ////console.log(result);
            var tidw_id = $("#edit_tidw_id").val();
            ////console.log(tidw_id);
            $('#modal_edit_inpatient_daily_well').modal('hide');

            $("#table_tr_inp_daily_well_" + tidw_id).html(result.trim());

            $('#submit_edit_inpatient_daily_well').attr('disabled', false);
            $('#submit_edit_inpatient_daily_well').show();
            $(".err_inpregisterloader").attr("style", "display:none");



            //location.reload();

        });

    });

    $(document).on('click', '.followup_value', function () {

        var followup_value = $(this).val();
        if (followup_value == 0) {
            $('.add_followup_days').show();

        } else {
            $('.add_followup_days').hide();

        }

    });

    $(document).on("submit", "#schedule_msg", function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
            $("#txt").show();
        });
    });

    $(document).on("click", "#add_inpatient_body_com", function () {
        $('#modal_inpatient_body_com').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_body_com", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_body_com').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_body_com", function () {
        var tibc_height = $("#tibc_height").val();
        var tibc_weight = $("#tibc_weight").val();
        var tibc_bmi = $("#tibc_bmi").val();
        var tibc_bmr = $("#tibc_bmr").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var all = tibc_height + tibc_weight;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please Enter Height or Weight");
            $("#tibc_height").focus();
            return false;
        } else {

        }
        $('#submit_inpatient_body_com').attr('disabled', 'disabled');


        var post_url = 'action/action_inpatient_body_com.php?do=add'
        //var datastring= 'tibc_height='+tibc_height+"&tibc_weight="+tibc_weight+"&tibc_bmi="+tibc_bmi+"&tibc_bmr="+tibc_bmr+"&pm_id="+pm_id+"&pm_pid="+pm_pid+"&ip_id="+ip_id;
        var datastring = 'tibc_height=' + tibc_height + "&tibc_weight=" + tibc_weight + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id;
        ////console.log(datastring);

        $('#submit_inpatient_body_com').attr('disabled', 'disabled');
        $('#submit_inpatient_body_com').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tibc_height: tibc_height,
                tibc_weight: tibc_weight,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_body_com').modal('hide');
            $('#submit_inpatient_body_com').removeAttr('disabled');
            $("#tibc_height").val("");
            $("#tibc_weight").val("");
            $("#tibc_bmi").val("");
            $("#tibc_bmr").val("");

            if ($('#add_table_inp_body_com .dataTables_empty').length) {

                $("#add_table_inp_body_com").html(result);

            } else {
                $("#add_table_inp_body_com").prepend(result);
            }

            $('#submit_inpatient_body_com').attr('disabled', false);
            $('#submit_inpatient_body_com').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_body_com", function () {
        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_body_com').modal('show');

        var post_url = 'action/action_inpatient_body_com.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tibc_id").val(result['tibc_id']);
            $("#edit_tibc_height").val(result['tibc_height']);
            $("#edit_tibc_weight").val(result['tibc_weight']);
            $("#edit_tibc_bmi").val(result['tibc_bmi']);
            $("#edit_tibc_bmr").val(result['tibc_bmr']);
            $("#edit_tibc_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_body_com", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_body_com').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_body_com", function () {
        var tibc_id = $("#edit_tibc_id").val();
        var tibc_weight = $("#edit_tibc_weight").val();
        var tibc_bmi = $("#edit_tibc_bmi").val();
        var tibc_bmr = $("#edit_tibc_bmr").val();
        var tibc_height = $("#edit_tibc_height").val();

        var edit_tibc_um_id = $("#edit_tibc_um_id").val();
        var edit_pm_pid = $("#edit_pm_pid").val();
        var edit_patient_uni_id = $("#edit_patient_uni_id").val();

        var all = tibc_height + tibc_weight;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please Enter Height or Weight");
            $("#edit_tibc_height").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_body_com.php?do=edit'
        //var datastring= 'tibc_weight='+tibc_weight+"&tibc_bmi="+tibc_bmi+"&tibc_bmr="+tibc_bmr+"&tibc_height="+tibc_height+"&tibc_id="+tibc_id+"&edit_tibc_um_id="+edit_tibc_um_id;
        var datastring = 'tibc_weight=' + tibc_weight + "&tibc_height=" + tibc_height + "&tibc_id=" + tibc_id + "&edit_tibc_um_id=" + edit_tibc_um_id + "&edit_pm_pid=" + edit_pm_pid;
        ////console.log(datastring);

        $('#submit_edit_inpatient_body_com').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_body_com').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tibc_weight: tibc_weight,
                tibc_height: tibc_height,
                tibc_id: tibc_id,
                edit_tibc_um_id: edit_tibc_um_id,
                edit_pm_pid: edit_pm_pid,
                edit_patient_uni_id: edit_patient_uni_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tibc_id = $("#edit_tibc_id").val();
            ////console.log(tibc_id);
            $('#modal_edit_inpatient_body_com').modal('hide');

            $("#table_tr_inp_body_com_" + tibc_id).html(result.trim());

            $('#submit_edit_inpatient_body_com').attr('disabled', false);
            $('#submit_edit_inpatient_body_com').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", "#add_inpatient_in_out_chart", function () {
        $('#modal_inpatient_in_out_chart').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_in_out_chart", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_in_out_chart').click();
            return false;
        }
    });

    $(document).on("click", "#submit_inpatient_in_out_chart", function () {

        var tioc_time = $("#tioc_time").val();
        var tioc_temp = $("#tioc_temp").val();
        var tioc_output = $("#tioc_output").val();
        var tioc_drain_output = $("#tioc_drain_output").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();
        var admit_days = $("#admit_days").val();

        var all = tioc_temp + tioc_output + tioc_drain_output;
        var all_variable = all.trim();

        if (tioc_time == "") {
            alert("Please Enter Time.");
            $("#tioc_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        }

        $('#submit_inpatient_in_out_chart').attr('disabled', 'disabled');


        var post_url = 'action/action_inpatient_in_out_chart.php?do=add'
        var datastring = 'tioc_time=' + tioc_time + "&tioc_temp=" + tioc_temp + "&tioc_output=" + tioc_output + "&tioc_drain_output=" + tioc_drain_output + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;
        ////console.log(datastring);

        $('#submit_inpatient_in_out_chart').attr('disabled', 'disabled');
        $('#submit_inpatient_in_out_chart').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tioc_time: tioc_time,
                tioc_temp: tioc_temp,
                tioc_output: tioc_output,
                tioc_drain_output: tioc_drain_output,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
                admit_days: admit_days,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_in_out_chart').modal('hide');
            $('#submit_inpatient_in_out_chart').removeAttr('disabled');
            $("#tioc_time").val("");
            $("#tioc_temp").val("");
            $("#tioc_output").val("");
            $("#tioc_drain_output").val("");

            $("#add_table_inp_in_out_chart").html(result);

            $('#submit_inpatient_in_out_chart').attr('disabled', false);
            $('#submit_inpatient_in_out_chart').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_in_out_chart", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_in_out_chart').modal('show');

        var post_url = 'action/action_inpatient_in_out_chart.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tioc_id").val(result['tioc_id']);
            $("#edit_tioc_time").val(result['tioc_time']);
            $("#edit_tioc_temp").val(result['tioc_temp']);
            $("#edit_tioc_output").val(result['tioc_output']);
            $("#edit_tioc_drain_output").val(result['tioc_drain_output']);
            $("#edit_tioc_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_in_out_chart", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_in_out_chart').click();
            return false;
        }
    });

    $('#submit_edit_inpatient_in_out_chart').click(function () {
        var tioc_id = $("#edit_tioc_id").val();
        var tioc_time = $("#edit_tioc_time").val();
        var tioc_temp = $("#edit_tioc_temp").val();
        var tioc_output = $("#edit_tioc_output").val();
        var tioc_drain_output = $("#edit_tioc_drain_output").val();

        var edit_tioc_um_id = $("#edit_tioc_um_id").val();


        // if (tioc_time == "") {
        //     alert("Please Enter Time.");
        //     return false;
        // } else {

        // }

        var all = tioc_temp + tioc_output + tioc_drain_output;
        var all_variable = all.trim();

        if (tioc_time == "") {
            alert("Please Enter Time.");
            $("#tioc_time").focus();
            return false;
        } else if (all_variable == "") {
            alert("Please Enter Something.");
            return false;
        }

        var post_url = 'action/action_inpatient_in_out_chart.php?do=edit'
        var datastring = 'tioc_time=' + tioc_time + "&tioc_temp=" + tioc_temp + "&tioc_output=" + tioc_output + "&tioc_drain_output=" + tioc_drain_output + "&tioc_id=" + tioc_id + "&edit_tioc_um_id=" + edit_tioc_um_id;
        ////console.log(datastring);

        $('#submit_edit_inpatient_in_out_chart').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_in_out_chart').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tioc_time: tioc_time,
                tioc_temp: tioc_temp,
                tioc_output: tioc_output,
                tioc_drain_output: tioc_drain_output,
                tioc_id: tioc_id,
                edit_tioc_um_id: edit_tioc_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tioc_id = $("#edit_tioc_id").val();
            ////console.log(tioc_id);
            $('#modal_edit_inpatient_in_out_chart').modal('hide');

            $("#add_table_inp_in_out_chart").html(result);

            $('#submit_edit_inpatient_in_out_chart').attr('disabled', false);
            $('#submit_edit_inpatient_in_out_chart').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", ".vital_parameters_pre", function () {

        var total_admit_days = $("#total_admit_days").val();
        var admit_days = $("#admit_days").val();
        var new_admitDays = parseInt(admit_days) - parseInt(1);
        var case_p_id = $(this).attr('data-case-p');
        var case_inp_id = $(this).attr('data-case-inp');
        var patient_uni_id = $("#patient_uni_id").val();

        $(".overlay-popup").show();
        $.ajax({
            type: 'post',
            url: 'inpatient_vital_date_wise.php',
            data: {
                select_new_date: new_admitDays,
                case_p_id: case_p_id,
                case_inp_id: case_inp_id,
                patient_uni_id: patient_uni_id,

            },
            success: function (response) {
                $(".overlay-popup").hide();
                $("#admit_days").val(new_admitDays);
                $("#vital_date").val("Day: " + new_admitDays);
                $("#vital_date_display").html("Day: " + new_admitDays);


                if (new_admitDays < total_admit_days) {
                    $(".vital_parameters_next").show();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".vital_parameters_next").hide();
                }
                if (new_admitDays == 1) {
                    $(".vital_parameters_pre").hide();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".vital_parameters_pre").show();
                }

                var splitted = response.split("@@@");

                //$("#today_vital").css("display", "none");
                $("#vitals").html(splitted[0]);
                $("#examinations").html(splitted[1]);
                //$("#today_charting").css("display", "none");
                $("#charting").html(splitted[2]);
                $("#wellbeing").html(splitted[3]);

                var PatientId = $("#pm_pid").val();
                var InpatientId = $("#ip_id").val();

                $("#add_new_vitals_print").attr("href", "pdf_vital_parameters.php?p_id=" + PatientId + "&ip_id=" + InpatientId + "&pu_id=" + patient_uni_id + "&day=" + new_admitDays);

                $.myVitalsAlltable();
            }
        });

    });

    $(document).on("click", ".vital_parameters_next", function () {

        var total_admit_days = $("#total_admit_days").val();
        var admit_days = $("#admit_days").val();
        var new_admitDays = parseInt(admit_days) + parseInt(1);
        var case_p_id = $(this).attr('data-case-p');
        var case_inp_id = $(this).attr('data-case-inp');
        var patient_uni_id = $("#patient_uni_id").val();

        $(".overlay-popup").show();
        $.ajax({
            type: 'post',
            url: 'inpatient_vital_date_wise.php',
            data: {
                select_new_date: new_admitDays,
                case_p_id: case_p_id,
                case_inp_id: case_inp_id,
                patient_uni_id: patient_uni_id,

            },
            success: function (response) {
                $(".overlay-popup").hide();

                $("#admit_days").val(new_admitDays);
                $("#vital_date").val("Day: " + new_admitDays);
                $("#vital_date_display").html("Day: " + new_admitDays);

                if (new_admitDays < total_admit_days) {
                    $(".vital_parameters_next").show();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".vital_parameters_next").hide();
                }
                if (new_admitDays == 1) {
                    $(".vital_parameters_pre").hide();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".vital_parameters_pre").show();
                }

                var splitted = response.split("@@@");

                //$("#today_vital").css("display", "none");
                $("#vitals").html(splitted[0]);

                //$("#today_charting").css("display", "none");
                $("#examinations").html(splitted[1]);
                $("#charting").html(splitted[2]);
                $("#wellbeing").html(splitted[3]);

                var PatientId = $("#pm_pid").val();
                var InpatientId = $("#ip_id").val();

                $("#add_new_vitals_print").attr("href", "pdf_vital_parameters.php?p_id=" + PatientId + "&ip_id=" + InpatientId + "&pu_id=" + patient_uni_id + "&day=" + new_admitDays);

                $.myVitalsAlltable();
            }
        });

    });

    $.myVitalsAlltable = function () {
        $('#vitals').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": true,
            "paging": false,
            "searching": false,
            "autoWidth": true,
            "info": false,
            "bSort": false,
            "bDestroy": true,
            "responsive": true,
            "language": {
                "emptyTable": "No vitals added",
            }
        });

        $('#examinations').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": true,
            "paging": false,
            "searching": false,
            "autoWidth": true,
            "info": false,
            "bSort": false,
            "bDestroy": true,
            "responsive": true,
            "language": {
                "emptyTable": "No examination added",
            }
        });

        $('#wellbeing').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": true,
            "paging": false,
            "searching": false,
            "autoWidth": true,
            "info": false,
            "bSort": false,
            "bDestroy": true,
            "responsive": true,
            "language": {
                "emptyTable": "No wellbeing added",
            }
        });

        $('#charting').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": true,
            "paging": false,
            "searching": false,
            "autoWidth": true,
            "info": false,
            "bSort": false,
            "bDestroy": true,
            "responsive": true,
            "language": {
                "emptyTable": "No input/output charting added",
            }
        });

    }


    $(document).on("click", "#add_inpatient_extra_medication", function () {
        $('#modal_inpatient_extra_medication').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_extra_medication", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_extra_medication').click();
            return false;
        }
    });

    $('#submit_inpatient_extra_medication').click(function () {
        var tiem_medicine = $("#tiem_medicine").val();
        var tiem_time = $("#tiem_time").val();
        var tiem_remark = $("#tiem_remark").val();
        var tiem_reason = $("#tiem_reason").val();

        var admit_days = $("#admit_days").val();
        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (tiem_medicine == "") {
            alert("Please Enter Medicine");
            $("#tiem_medicine").focus();
            return false;
        } else if (tiem_time == "") {
            alert("Please Enter Time");
            $("#tiem_time").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_extra_medication.php?do=add'
        var datastring = 'tiem_medicine=' + tiem_medicine + "&tiem_time=" + tiem_time + "&tiem_remark=" + tiem_remark + "&tiem_reason=" + tiem_reason + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;
        ////console.log(datastring);

        $('#submit_inpatient_extra_medication').attr('disabled', 'disabled');
        $('#submit_inpatient_extra_medication').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiem_medicine: tiem_medicine,
                tiem_time: tiem_time,
                tiem_remark: tiem_remark,
                tiem_reason: tiem_reason,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
                admit_days: admit_days,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_extra_medication').modal('hide');

            $("#tiem_medicine").val("");
            $("#tiem_time").val("");
            $("#tiem_remark").val("");
            $("#tiem_reason").val("");

            if ($('#add_table_inp_extra_medication .dataTables_empty').length) {

                $("#add_table_inp_extra_medication").html(result);

            } else {
                $("#add_table_inp_extra_medication").prepend(result);
            }


            $('#submit_inpatient_extra_medication').attr('disabled', false);
            $('#submit_inpatient_extra_medication').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_extra_medication", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_extra_medication').modal('show');

        var post_url = 'action/action_inpatient_extra_medication.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tiem_id").val(result['tiem_id']);
            $("#edit_tiem_medicine").val(result['tiem_medicine']);
            $("#edit_tiem_time").val(result['tiem_time']);
            $("#edit_tiem_remark").val(result['tiem_remark']);
            $("#edit_tiem_reason").val(result['tiem_reason']);
            $("#edit_tiem_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_extra_medication", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_extra_medication').click();
            return false;
        }
    });

    $('#submit_edit_inpatient_extra_medication').click(function () {
        var tiem_id = $("#edit_tiem_id").val();
        var tiem_medicine = $("#edit_tiem_medicine").val();
        var tiem_time = $("#edit_tiem_time").val();
        var tiem_remark = $("#edit_tiem_remark").val();
        var tiem_reason = $("#edit_tiem_reason").val();

        var edit_tiem_um_id = $("#edit_tiem_um_id").val();


        if (tiem_medicine == "") {
            alert("Please Enter Medicine");
            $("#tiem_medicine").focus();
            return false;
        } else if (tiem_time == "") {
            alert("Please Enter Time");
            $("#tiem_time").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_extra_medication.php?do=edit'
        var datastring = 'tiem_medicine=' + tiem_medicine + "&tiem_time=" + tiem_time + "&tiem_remark=" + tiem_remark + "&tiem_reason=" + tiem_reason + "&tiem_id=" + tiem_id + "&edit_tiem_um_id=" + edit_tiem_um_id;
        ////console.log(datastring);

        $('#submit_edit_inpatient_extra_medication').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_extra_medication').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tiem_medicine: tiem_medicine,
                tiem_time: tiem_time,
                tiem_remark: tiem_remark,
                tiem_reason: tiem_reason,
                tiem_id: tiem_id,
                edit_tiem_um_id: edit_tiem_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tiem_id = $("#edit_tiem_id").val();
            ////console.log(tiem_id);
            $('#modal_edit_inpatient_extra_medication').modal('hide');

            $("#table_tr_inp_extra_medication_" + tiem_id).html(result.trim());

            $('#submit_edit_inpatient_extra_medication').attr('disabled', false);
            $('#submit_edit_inpatient_extra_medication').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_inpatient_extra_medication", function () {
        $('#modal_danger_inpatient_extra_medication').modal('show');
        var id = $(this).attr('data-id');

        //var text = "Are you sure you want to delete <b>Extra Medication</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tiem_id').val(id);

    });

    $(document).on("click", "#delete_inpatient_extra_medication", function () {

        var delete_tiem_id = $("#delete_tiem_id").val();
        var post_url = 'action/action_inpatient_extra_medication.php?do=delete'
        var datastring = 'delete_tiem_id=' + delete_tiem_id;

        $('#delete_inpatient_extra_medication').attr('disabled', 'disabled');
        $('#delete_inpatient_extra_medication').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_extra_medication').modal('hide');
            $('#table_tr_inp_extra_medication_' + delete_tiem_id).remove();

            $('#delete_inpatient_extra_medication').attr('disabled', false);
            $('#delete_inpatient_extra_medication').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();
        });

    });

    $(document).on("click", "#add_inpatient_extra_order", function () {
        ////console.log("Yes");
        $('#modal_inpatient_extra_order').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_extra_order", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_extra_order').click();
            return false;
        }
    });

    $('#submit_inpatient_extra_order').click(function () {
        var tieo_details = $("#tieo_details").val();
        var tieo_time = $("#tieo_time").val();
        var tieo_remark = $("#tieo_remark").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var admit_days = $("#admit_days").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (tieo_details == "") {
            alert("Please Enter Details");
            $("#tieo_details").focus();
            return false;
        } else if (tieo_time == "") {
            alert("Please Enter Time");
            $("#tieo_time").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_extra_order.php?do=add'
        var datastring = 'tieo_details=' + tieo_details + "&tieo_time=" + tieo_time + "&tieo_remark=" + tieo_remark + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;

        $('#submit_inpatient_extra_order').attr('disabled', 'disabled');
        $('#submit_inpatient_extra_order').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tieo_details: tieo_details,
                tieo_time: tieo_time,
                tieo_remark: tieo_remark,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
                admit_days: admit_days,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_inpatient_extra_order').modal('hide');

            $("#tieo_details").val("");
            $("#tieo_time").val("");
            $("#tieo_remark").val("");

            if ($('#add_table_inp_extra_order .dataTables_empty').length) {

                $("#add_table_inp_extra_order").html(result);

            } else {
                $("#add_table_inp_extra_order").prepend(result);
            }

            $('#submit_inpatient_extra_order').attr('disabled', false);
            $('#submit_inpatient_extra_order').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_inpatient_extra_order", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_extra_order').modal('show');

        var post_url = 'action/action_inpatient_extra_order.php?do=edit_pop'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tieo_id").val(result['tieo_id']);
            $("#edit_tieo_details").val(result['tieo_details']);
            $("#edit_tieo_time").val(result['tieo_time']);
            $("#edit_tieo_remark").val(result['tieo_remark']);
            $("#edit_tieo_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_extra_order", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_extra_order').click();
            return false;
        }
    });

    $('#submit_edit_inpatient_extra_order').click(function () {
        var tieo_id = $("#edit_tieo_id").val();
        var tieo_details = $("#edit_tieo_details").val();
        var tieo_time = $("#edit_tieo_time").val();
        var tieo_remark = $("#edit_tieo_remark").val();

        var edit_tieo_um_id = $("#edit_tieo_um_id").val();


        if (tieo_details == "") {
            alert("Please Enter Details");
            $("#tieo_details").focus();
            return false;
        } else if (tieo_time == "") {
            alert("Please Enter Time");
            $("#tieo_time").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_extra_order.php?do=edit'
        var datastring = 'tieo_details=' + tieo_details + "&tieo_time=" + tieo_time + "&tieo_remark=" + tieo_remark + "&tieo_id=" + tieo_id + "&edit_tieo_um_id=" + edit_tieo_um_id;

        $('#submit_edit_inpatient_extra_order').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_extra_order').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tieo_details: tieo_details,
                tieo_time: tieo_time,
                tieo_remark: tieo_remark,
                tieo_id: tieo_id,
                edit_tieo_um_id: edit_tieo_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tieo_id = $("#edit_tieo_id").val();
            //console.log(tieo_id);
            $('#modal_edit_inpatient_extra_order').modal('hide');

            $("#table_tr_inp_extra_order_" + tieo_id).html(result.trim());

            $('#submit_edit_inpatient_extra_order').attr('disabled', false);
            $('#submit_edit_inpatient_extra_order').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_inpatient_extra_order", function () {
        $('#modal_danger_inpatient_extra_order').modal('show');
        var id = $(this).attr('data-id');

        //var text = "Are you sure you want to delete <b>Extra Order</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tieo_id').val(id);

    });

    $(document).on("click", "#delete_inpatient_extra_order", function () {

        var delete_tieo_id = $("#delete_tieo_id").val();
        var post_url = 'action/action_inpatient_extra_order.php?do=delete'
        var datastring = 'delete_tieo_id=' + delete_tieo_id;

        $('#delete_inpatient_extra_order').attr('disabled', 'disabled');
        $('#delete_inpatient_extra_order').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_extra_order').modal('hide');
            $('#table_tr_inp_extra_order_' + delete_tieo_id).remove();
            //location.reload();submit_inpatient_extra_order

            $('#delete_inpatient_extra_order').attr('disabled', false);
            $('#delete_inpatient_extra_order').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(document).on("click", ".extra_order_data_pre", function () {
        //jQuery.noConflict();

        var total_admit_days = $("#total_admit_days").val();
        var case_p_id = $(this).attr('data-case-p');
        var case_inp_id = $(this).attr('data-case-inp');
        var admit_days = $("#admit_days").val();
        var new_admitDays = parseInt(admit_days) - parseInt(1);
        var patient_uni_id = $("#patient_uni_id").val();


        $(".overlay-popup").show();
        $.ajax({
            type: 'post',
            url: 'inpatient_extra_order_date_wise.php',
            data: {
                select_new_date: new_admitDays,
                case_p_id: case_p_id,
                case_inp_id: case_inp_id,
                patient_uni_id: patient_uni_id,

            },
            success: function (response) {
                $(".overlay-popup").hide();
                $("#admit_days").val(new_admitDays);
                $("#extra_medicine_date").val("Day: " + new_admitDays);
                $("#extra_medicine_date_display").html("Day: " + new_admitDays);


                if (new_admitDays < total_admit_days) {
                    $(".extra_order_data_next").show();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".extra_order_data_next").hide();
                }
                if (new_admitDays == 1) {
                    $(".extra_order_data_pre").hide();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".extra_order_data_pre").show();
                }

                var splitted = response.split("@@@");

                //$("#add_inpatient_extra_order").css("display", "none");
                $("#extra_medicine").html(splitted[0]);
                $("#extra_order").html(splitted[1]);
                //$("#wellbeing").html(splitted[2]);
                $.myExtraOrderAlltable();
            }
        });

    });

    $(document).on("click", ".extra_order_data_next", function () {
        //jQuery.noConflict();

        var total_admit_days = $("#total_admit_days").val();
        var case_p_id = $(this).attr('data-case-p');
        var case_inp_id = $(this).attr('data-case-inp');
        var admit_days = $("#admit_days").val();
        var new_admitDays = parseInt(admit_days) + parseInt(1);
        var patient_uni_id = $("#patient_uni_id").val();

        $(".overlay-popup").show();

        $.ajax({
            type: 'post',
            url: 'inpatient_extra_order_date_wise.php',
            data: {
                select_new_date: new_admitDays,
                case_p_id: case_p_id,
                case_inp_id: case_inp_id,
                patient_uni_id: patient_uni_id,

            },
            success: function (response) {
                $(".overlay-popup").hide();
                $("#admit_days").val(new_admitDays);
                $("#extra_medicine_date").val("Day: " + new_admitDays);
                $("#extra_medicine_date_display").html("Day: " + new_admitDays);

                if (new_admitDays < total_admit_days) {
                    $(".extra_order_data_next").show();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".extra_order_data_next").hide();
                }
                if (new_admitDays == 1) {
                    $(".extra_order_data_pre").hide();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".extra_order_data_pre").show();
                }

                var splitted = response.split("@@@");

                //$("#add_inpatient_extra_order").css("display", "none");
                $("#extra_medicine").html(splitted[0]);
                $("#extra_order").html(splitted[1]);
                //$("#wellbeing").html(splitted[2]);

                $.myExtraOrderAlltable();
            }
        });

    });

    $.myExtraOrderAlltable = function () {

        $('#extra_medicine').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": true,
            "responsive": true,
            "language": {
                "emptyTable": "No extra medicine added",
            },
            "bDestroy": true
        });

        $('#extra_order').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": true,
            "responsive": true,
            "language": {
                "emptyTable": "No extra order added",
            },
            "bDestroy": true
        });

    }

    $(document).on("click", "#add_inp_general_order", function () {

        $('#modal_add_inp_general_order').modal('show');
        var id = 1;
        //$('#modal_add_inp_doctor_daily_notes').modal('show');

        var post_url = 'action/action_inpatient_general_order.php?do=add_template'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_doctor_general_order_template").html(result.trim());
        });

    });

    var Goi = 0
    $(document).on("click", ".btnAdd_general_order", function () {
        Goi++;
        var div = '<div class="row align-items-center mb-2 add_custom_template reset_form_general" id="rkdiv_' + Goi + '"><div class="col-10"><input type="text" class="form-control" id="tigo_details[]" name="tigo_details[]" placeholder="Title"></div><div class="col-2"><a href="javascript:void(0);" class="btn btn-icon btn-gray-outline br-100 remove_general_order" title="Delete" data-id="rkdiv_' + Goi + '"><i class="ri-delete-bin-line"></i></a></div></div>';
        $(".extra_order_div").append(div);


        $(".extra_order_div").animate({
            scrollTop: $('.extra_order_div').prop("scrollHeight")
        }, 1000);
    });

    $(document).on("click", ".reset_full_general_form", function () {

        $('.reset_form_general').remove();
       
    });

    $(document).on("click", ".btnAdd_general_order_add", function () {
        Goi++;
        var div = '<div class="row align-items-center mb-2 add_custom_template reset_form_general" id="rkdiv_' + Goi + '"><div class="col-10"><input type="text" class="form-control" id="tigo_details[]" name="tigo_details[]" placeholder="Title"></div><div class="col-2"><a href="javascript:void(0);" class="btn btn-icon btn-gray-outline br-100 remove_general_order" title="Delete" data-id="rkdiv_' + Goi + '"><i class="ri-delete-bin-line"></i></a></div></div>';
        $(".extra_order_div_add").append(div);


        $(".extra_order_div_add").animate({
            scrollTop: $('.extra_order_div_add').prop("scrollHeight")
        }, 1000);
    });

    $(document).on("click", ".select_template_doctor_general_order", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_inpatient_general_order.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $(".extra_order_div").append(result);
        });

    });

    $(document).on("click", ".remove_general_order", function () {
        // alert("hi");
        var id = $(this).attr('data-id');
        $("#" + id).remove();
    });

    $(document).on("click", ".btn-general-order-reset", function () {

        $("#new_doctor_general_notes_form_add").trigger("reset");
        $(".add_custom_template").remove();

    });

    $("#new_doctor_general_notes_form_add").submit(function (e) {

        e.preventDefault();
        proceed = true;

        // var popup_notes = $("#popup_notes").val();

        // if (popup_notes == "") {
        //     alert("Please enter notes.");
        //     $('#popup_notes').focus();
        //     return false;
        // } else {

        // }

        if ($("#gen_pop_check").prop('checked') == true && $("#popup_template_title").val() == "") {
            alert("Please Enter Template Name.");
            $('#popup_template_title').focus();
            return false;
        } else {

        }



        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_genaral_order_notes').attr('disabled', 'disabled');
        $('.err_register').show();

        $('#submit_button_genaral_order_notes').attr('disabled', 'disabled');
        $('#submit_button_genaral_order_notes').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#popup_notes").val("");

            $('#submit_button_genaral_order_notes').removeAttr('disabled');
            $('#modal_add_inp_general_order').modal('hide');
            $('.fix_add_general_order').remove();
            $('.err_register').hide();

            $("#gen_pop_check").prop("checked", false);
            $("#popup_template_title").val("");
            if ($('#table_imp_doctor_general_order .dataTables_empty').length) {

                $("#table_imp_doctor_general_order").html(result);

            } else {
                $("#table_imp_doctor_general_order").prepend(result);
            }

            $(".add_custom_template").remove();

            $("#new_doctor_general_notes_form_add").trigger("reset");


            $('#submit_button_genaral_order_notes').attr('disabled', false);
            $('#submit_button_genaral_order_notes').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });

    $(document).on("click", ".select_edit_inpatient_general_order", function () {

        var id = $(this).attr('data-id');
        var days = $(this).attr('data-days');

        $('#modal_edit_inpatient_general_order').modal('show');

        var post_url = 'action/action_inpatient_general_order.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tigo_id").val(result['tigo_id']);
            $("#edit_tigo_details").val(result['tigo_details']);
            $("#edit_tigo_status").val(result['tigo_status']);
            $("#edit_tigo_days").val(days);

            if (result['tigo_status'] == "Stop") {
                //$(".general_active_btn").show();
                $(".general_stop_btn").hide();
            } else {
                //$(".general_active_btn").hide();
                $(".general_stop_btn").show();
            }

            $("#edit_tigo_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_general_order", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_general_order').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_general_order", function () {

        var tigo_id = $("#edit_tigo_id").val();
        var tigo_details = $("#edit_tigo_details").val();
        var tigo_status = $("#edit_tigo_status").val();
        var tigo_days = $("#edit_tigo_days").val();

        var edit_tigo_um_id = $("#edit_tigo_um_id").val();


        if (tigo_details == "") {
            alert("Please Enter Details.");
            $("#edit_tigo_details").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_general_order.php?do=edit'
        var datastring = 'tigo_details=' + tigo_details + "&tigo_status=" + tigo_status + "&tigo_id=" + tigo_id + "&edit_tigo_um_id=" + edit_tigo_um_id + "&tigo_days=" + tigo_days;
        //console.log(datastring);

        $('#submit_edit_inpatient_general_order').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_general_order').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tigo_details: tigo_details,
                tigo_status: tigo_status,
                tigo_id: tigo_id,
                edit_tigo_um_id: edit_tigo_um_id,
                tigo_days: tigo_days,
            },
        }).done(function (result) {
            ////console.log(result);
            var tigo_id = $("#edit_tigo_id").val();
            //console.log(tigo_id);
            $('#modal_edit_inpatient_general_order').modal('hide');

            $("#table_tr_inp_general_order_" + tigo_id).html(result.trim());

            $('#submit_edit_inpatient_general_order').attr('disabled', false);
            $('#submit_edit_inpatient_general_order').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });


    $(document).on("click", ".general_stop_btn", function () {

        var tigo_id = $("#edit_tigo_id").val();
        var tigo_details = $("#edit_tigo_details").val();
        var tigo_status = $("#edit_tigo_status").val();
        var tigo_days = $("#edit_tigo_days").val();

        var edit_tigo_um_id = $("#edit_tigo_um_id").val();

        var post_url = 'action/action_inpatient_general_order.php?do=edit_status'
        var datastring = 'tigo_details=' + tigo_details + "&tigo_status=" + tigo_status + "&tigo_id=" + tigo_id + "&edit_tigo_um_id=" + edit_tigo_um_id + "&tigo_days=" + tigo_days;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tigo_details: tigo_details,
                tigo_status: tigo_status,
                tigo_id: tigo_id,
                edit_tigo_um_id: edit_tigo_um_id,
                tigo_days: tigo_days,
            },
        }).done(function (result) {

            var tigo_id = $("#edit_tigo_id").val();
            //console.log(tigo_id);
            $('#modal_edit_inpatient_general_order').modal('hide');
            $("#table_tr_inp_general_order_" + tigo_id).html(result.trim());

        });

    });

    $(document).on("click", "#delete_popup_inpatient_general_order", function () {
        $('#modal_danger_inpatient_general_order').modal('show');
        var id = $(this).attr('data-id');
        //var text = "Are you sure you want to delete <b>General Order</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tigo_id').val(id);
    });

    $(document).on("click", "#delete_inpatient_general_order", function () {

        var delete_tigo_id = $("#delete_tigo_id").val();
        var post_url = 'action/action_inpatient_general_order.php?do=delete'
        var datastring = 'delete_tigo_id=' + delete_tigo_id;

        $('#delete_inpatient_general_order').attr('disabled', 'disabled');
        $('#delete_inpatient_general_order').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_general_order').modal('hide');
            $('#table_tr_inp_general_order_' + delete_tigo_id).remove();
            //location.reload();

            $('#delete_inpatient_general_order').attr('disabled', false);
            $('#delete_inpatient_general_order').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(document).on("click", "#add_inpatient_investigation", function () {
        $('#modal_inpatient_investigation').modal('show');
    });

    $('#submit_inpatient_investigation').click(function () {
        var tii_details = $("#tii_details").val();
        var tii_remark = $("#tii_remark").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();
        var admit_days = $("#admit_days").val();

        if (tii_details == "") {
            alert("Please Enter Investigation.");
            $("#tii_details").focus();
            return false;
        } else {

        }

        $('#submit_inpatient_investigation').attr('disabled', 'disabled');


        var post_url = 'action/action_inpatient_investigation.php?do=add'
        var datastring = 'tii_details=' + tii_details + "&tii_remark=" + tii_remark + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id + "&admit_days=" + admit_days;

        $('#submit_inpatient_investigation').attr('disabled', 'disabled');
        $('#submit_inpatient_investigation').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tii_details: tii_details,
                tii_remark: tii_remark,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
                admit_days: admit_days,
            },
        }).done(function (result) {
            //console.log(result);
            $('#modal_inpatient_investigation').modal('hide');
            $('#submit_inpatient_investigation').removeAttr('disabled');

            $("#tii_details").val("");
            $("#tii_remark").val("");

            if ($('#add_table_inp_investigation .dataTables_empty').length) {

                $("#add_table_inp_investigation").html(result);

            } else {
                $("#add_table_inp_investigation").prepend(result);
            }

            $('#submit_inpatient_investigation').attr('disabled', false);
            $('#submit_inpatient_investigation').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_investigation", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_investigation').click();
            return false;
        }
    });

    $(document).on("click", ".select_edit_inpatient_investigation", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_investigation').modal('show');

        var post_url = 'action/action_inpatient_investigation.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tii_id").val(result['tii_id']);
            $("#edit_tii_details").val(result['tii_details']);
            $("#edit_tii_remark").val(result['tii_remark']);
            $("#edit_tii_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $('#submit_edit_inpatient_investigation').click(function () {
        var tii_id = $("#edit_tii_id").val();
        var tii_details = $("#edit_tii_details").val();
        var tii_remark = $("#edit_tii_remark").val();

        var edit_tii_um_id = $("#edit_tii_um_id").val();


        if (tii_details == "") {
            alert("Please Enter Investigation");
            $("#tii_details").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_investigation.php?do=edit'
        var datastring = 'tii_details=' + tii_details + "&tii_remark=" + tii_remark + "&tii_id=" + tii_id + "&edit_tii_um_id=" + edit_tii_um_id;
        //console.log(datastring);

        $('#submit_edit_inpatient_investigation').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_investigation').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tii_details: tii_details,
                tii_remark: tii_remark,
                tii_id: tii_id,
                edit_tii_um_id: edit_tii_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tii_id = $("#edit_tii_id").val();
            //console.log(tii_id);
            $('#modal_edit_inpatient_investigation').modal('hide');

            $("#table_tr_inp_investigation_" + tii_id).html(result.trim());


            $('#submit_edit_inpatient_investigation').attr('disabled', false);
            $('#submit_edit_inpatient_investigation').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", "#delete_popup_inpatient_investigation", function () {
        $('#modal_danger_inpatient_investigation').modal('show');
        var id = $(this).attr('data-id');

        //var text = "Are you sure you want to delete <b>Investigation</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tii_id').val(id);

    });

    $(document).on("click", "#delete_inpatient_investigation", function () {

        var delete_tii_id = $("#delete_tii_id").val();
        var post_url = 'action/action_inpatient_investigation.php?do=delete'
        var datastring = 'delete_tii_id=' + delete_tii_id;

        $('#delete_inpatient_investigation').attr('disabled', 'disabled');
        $('#delete_inpatient_investigation').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_investigation').modal('hide');
            $('#table_tr_inp_investigation_' + delete_tii_id).remove();
            //location.reload();

            $('#delete_inpatient_investigation').attr('disabled', false);
            $('#delete_inpatient_investigation').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(document).on("keydown", "#new_case_medicine_form_add_inaptient", function (e) {

        if (e.keyCode == 13) {
            //$('#new_case_medicine_form_add_inaptient').submit();
            return false;
        }
    });

    $(document).on("submit", "#new_case_medicine_form_add_inaptient", function (e) {

        e.preventDefault();
        proceed = true;

        var tmm_medicine_name = $("#tmm_medicine_name").val();

        if (tmm_medicine_name == "") {
            alert("Please Enter Medicine Name.");
            $("#tmm_medicine_name").focus()
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_button_add_medicine').attr('disabled', 'disabled');

        $('#submit_button_add_medicine').attr('disabled', 'disabled');
        $('#submit_button_add_medicine').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_add_medicine').removeAttr('disabled');

            $("#new_case_medicine_form_add_imp").trigger("reset");

            $("#tmm_day_dose").val("");

            // $("#tmm_day_dose_1").removeClass("btn btn-success");
            // $("#tmm_day_dose_1").addClass("btn btn-primary");
            // $("#tmm_day_dose_2").removeClass("btn btn-success");
            // $("#tmm_day_dose_2").addClass("btn btn-primary");

            $('.err_register').hide();

            $("#tmm_medicine_name").val("");
            $("#tmm_generic").val("");
            $("#tmm_company").val("");

            $('#modal_add_medicine').modal('hide');
            $("#medicine_tenplate").append(result);
            //$("#pre_medicine_template").prepend(result)


            $('#submit_button_add_medicine').attr('disabled', false);
            $('#submit_button_add_medicine').show();
            $(".err_inpregisterloader").attr("style", "display:none");



        });

    });

    $(document).on("click", "#add_imp_medications", function () {

        $('#modal_add_imp_medications').modal('show');
        var id = 1;

        var post_url = 'action/action_inpatient_medications.php?do=add_template'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_doctor_medications_template").html(result.trim());
        });

    });

    $(document).on("click", ".get_all_medicine_details", function () {

        var id = $(this).attr('data-id');
        var pm_pid = $('#pm_pid').val();
        var ip_id = $('#ip_id').val();
        var patient_uni_id = $('#patient_uni_id').val();
        var post_url = 'action/action_inpatient_medications.php?do=get_medicine'
        //var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: {
                id: id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {

            var tmm_id = result['tmm_id'];
            var tmm_medicine_name = result['tmm_medicine_name'];
            var tmm_generic = result['tmm_generic'];
            var tmm_company = result['tmm_company'];

            var final_dose = result['final_dose'];
            var final_freq = result['final_freq'];
            var tmi_title = result['tmi_title'];


            //console.log(result);


            $("#timt_tmm_id").val(tmm_id);
            $("#timt_medicine_name").val(tmm_medicine_name);
            $("#timt_tmm_company").val(tmm_company);
            $("#timt_tmm_generic").val(tmm_generic);

            $("#timt_tmm_final_dose").val(final_dose);
            $("#timt_tmm_frequency").val(final_freq);
            $("#timt_tmm_instruction").val(tmi_title);

            if (result['tmm_time'] == "After Food") {
                $("#add_template_food3").prop('checked', true);
                $("#add_template_food1").prop('checked', false);
                $("#add_template_food2").prop('checked', false);
            } else if (result['tmm_time'] == "Before Food") {
                $("#add_template_food1").prop('checked', false);
                $("#add_template_food3").prop('checked', false);
                $("#add_template_food2").prop('checked', true);
            } else {
                $("#add_template_food2").prop('checked', false);
                $("#add_template_food1").prop('checked', false);
                $("#add_template_food3").prop('checked', true);
            }

            //$('.temp_text').attr('readonly', true);



            //$("#timd_tmm_type").val();


        });

    });

    $("#new_medication_treatment_form_add").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var timt_medicine_name = $("#timt_medicine_name").val();
        var timt_tmm_generic = $("#timt_tmm_generic").val();
        var timt_tmm_company = $("#timt_tmm_company").val();
        var timt_tmm_custom = $("#timt_tmm_custom").val();
        var timt_tmm_instruction = $("#timt_tmm_instruction").val();

        if (timt_medicine_name == "") {
            alert("Please Enter Medicine Name.");
            $("#timt_medicine_name").focus();
            return false;
        } else if (timt_tmm_custom == "" && timt_tmm_instruction == "") {
            alert("Please Enter Frequency and Instruction.");
            $("#timt_tmm_custom").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_new_medication_treatment_form_add').attr('disabled', 'disabled');

        $('#submit_button_new_medication_treatment_form_add').attr('disabled', 'disabled');
        $('#submit_button_new_medication_treatment_form_add').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);

            $("#new_medication_treatment_form_add").trigger("reset");
            $('#submit_button_new_medication_treatment_form_add').removeAttr('disabled');
            $("#pop_check_medi").prop('checked', false);
            $("#pop_check_medi").attr("disabled", false);

            $('.temp_text').attr('readonly', false);

            $('#modal_add_imp_medications').modal('hide');
            $(".custom_duration_div").hide();

            if ($('#add_table_inp_medication_treatment .dataTables_empty').length) {

                $("#add_table_inp_medication_treatment").html(result);

            } else {
                $("#add_table_inp_medication_treatment").append(result);
            }

            $('#submit_button_new_medication_treatment_form_add').attr('disabled', false);
            $('#submit_button_new_medication_treatment_form_add').show();
            $(".err_inpregisterloader").attr("style", "display:none");



        });

    });

    $(document).on("click", ".select_edit_inpatient_medication_treatment", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_imp_medications').modal('show');

        var post_url = 'action/action_inpatient_medications.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');
            $("#edit_timt_tmm_medicine_name").prop('readonly', true);
            $("#edit_timt_tmm_generic").prop('readonly', true);
            $("#edit_timt_tmm_company").prop('readonly', true);

            $("#edit_timt_tmm_medicine_name").val(result['timt_tmm_medicine_name']);
            $("#edit_timt_tmm_company").val(result['timt_tmm_company']);

            $("#edit_timt_tmm_generic").val(result['timt_tmm_generic']);

            $("#edit_timt_tmm_custom").val(result['timt_tmm_custom'])

            $("#edit_timt_um_id").val(result['created_by']);
            $("#edit_timt_id").val(result['timt_id']);

            if (result['timt_tmm_time'] == "After Food") {
                $("#edit_food3").prop('checked', true);
                $("#edit_food1").prop('checked', false);
                $("#edit_food2").prop('checked', false);
            } else if (result['timt_tmm_time'] == "Before Food") {
                $("#edit_food1").prop('checked', true);
                $("#edit_food3").prop('checked', false);
                $("#edit_food2").prop('checked', false);
            } else {
                $("#edit_food2").prop('checked', true);
                $("#edit_food1").prop('checked', false);
                $("#edit_food3").prop('checked', false);
            }

            if (result['timt_tmm_days_type'] == "Custom Days") {
                $("#edit_days_type1").prop('checked', true);
                $("#edit_days_type2").prop('checked', false);
                $("#edit_days_type3").prop('checked', false);
                $(".custom_duration_div").show();
            } else if (result['timt_tmm_days_type'] == "Add Till discontinued") {
                $("#edit_days_type2").prop('checked', true);
                $("#edit_days_type1").prop('checked', false);
                $("#edit_days_type3").prop('checked', false);
            } else {
                $("#edit_days_type3").prop('checked', true);
                $("#edit_days_type2").prop('checked', false);
                $("#edit_days_type1").prop('checked', false);
            }

            $("#edit_timt_tmm_days").val(result['timt_tmm_days']);
            $("#edit_timt_status").val(result['timt_status']);

            $("#edit_timt_tmm_final_dose").val(result['timt_tmm_final_dose']);
            $("#edit_timt_tmm_frequency").val(result['timt_tmm_frequency']);
            $("#edit_timt_tmm_instruction").val(result['timt_tmm_instruction']);


            if (result['timt_status'] == "Stop") {
                $(".medication_stop_btn").hide();
                //$(".medication_active_btn").show();
            } else {
                //$(".medication_active_btn").hide();
                $(".medication_stop_btn").show();
            }


        });

    });

    $(document).on("click", ".tmm_day_dose", function () {
        var values = $(this).val();
        if (values == 'day') {
            // $("#tmm_day_dose_1").removeClass("btn btn-primary");
            // $("#tmm_day_dose_1").css("background-color", "");
            // $("#tmm_day_dose_1").css("border-color", "");
            // $("#tmm_day_dose_1").addClass("btn btn-success");

            // $("#tmm_day_dose_2").removeClass("btn btn-success");
            // $("#tmm_day_dose_2").addClass("btn btn-primary");

            $("#tmm_day_dose").val("day");

        } else {

            // $("#tmm_day_dose_2").removeClass("btn btn-primary");
            // $("#tmm_day_dose_2").css("background-color", "");
            // $("#tmm_day_dose_2").css("border-color", "");
            // $("#tmm_day_dose_2").addClass("btn btn-success");

            // $("#tmm_day_dose_1").removeClass("btn btn-success");
            // $("#tmm_day_dose_1").addClass("btn btn-primary");

            $("#tmm_day_dose").val("dose");

        }
    });

    $(document).on("click", ".edit_tmm_day_dose", function () {
        var values = $(this).val();
        if (values == 'day') {
            // $("#edit_tmm_day_dose_1").removeClass("btn btn-primary");
            // $("#edit_tmm_day_dose_1").css("background-color", "");
            // $("#edit_tmm_day_dose_1").css("border-color", "");
            // $("#edit_tmm_day_dose_1").addClass("btn btn-success");

            // $("#edit_tmm_day_dose_2").removeClass("btn btn-success");
            // $("#edit_tmm_day_dose_2").addClass("btn btn-primary");

            $("#edit_tmm_day_dose").val("day");

        } else {

            // $("#edit_tmm_day_dose_2").removeClass("btn btn-primary");
            // $("#edit_tmm_day_dose_2").css("background-color", "");
            // $("#edit_tmm_day_dose_2").css("border-color", "");
            // $("#edit_tmm_day_dose_2").addClass("btn btn-success");

            // $("#edit_tmm_day_dose_1").removeClass("btn btn-success");
            // $("#edit_tmm_day_dose_1").addClass("btn btn-primary");

            $("#edit_tmm_day_dose").val("dose");

        }
    });

    $(document).on("keydown", "#edit_medication_treatment_form_add", function (e) {

        if (e.keyCode == 13) {
            $('#edit_medication_treatment_form_add').submit();
            return false;
        }
    });

    $("#edit_medication_treatment_form_add").submit(function (e) {
        e.preventDefault();

        var timt_tmm_instruction = $("#edit_timt_tmm_instruction").val();
        var timt_tmm_custom = $("#edit_timt_tmm_custom").val();

        if (timt_tmm_custom == "" && timt_tmm_instruction == "") {
            alert("Please Enter Frequency and Instruction.");
            $("#edit_timt_tmm_custom").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button').attr('disabled', 'disabled');
        $('#submit_button').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);

            var edit_timt_id = $("#edit_timt_id").val();

            $('#modal_edit_imp_medications').modal('hide');

            $("#table_tr_inp_medication_treatment_" + edit_timt_id).html(result);

            $('#submit_button').attr('disabled', false);
            $('#submit_button').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });

    $(document).on("click", ".medication_stop_btn", function () {

        var timt_id = $("#edit_timt_id").val();
        var timt_status = $("#edit_timt_status").val();
        var tigo_days = $(".admit_days").val();

        var edit_timt_um_id = $("#edit_timt_um_id").val();

        var post_url = 'action/action_inpatient_medications.php?do=edit_status'
        var datastring = 'timt_status=' + timt_status + "&timt_id=" + timt_id + "&edit_timt_um_id=" + edit_timt_um_id + "&tigo_days=" + tigo_days;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                timt_status: timt_status,
                timt_id: timt_id,
                edit_timt_um_id: edit_timt_um_id,
                tigo_days: tigo_days,
            },
        }).done(function (result) {

            var edit_timt_id = $("#edit_timt_id").val();

            $('#modal_edit_imp_medications').modal('hide');

            $("#table_tr_inp_medication_treatment_" + edit_timt_id).html(result.trim());

        });

    });

    $(document).on("click", "#delete_popup_inpatient_medication_treatment", function () {
        $('#modal_danger_inpatient_medication').modal('show');
        var timt_id = $(this).attr('data-id');

        //var text = "Are you sure you want to delete <b>Medication</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_medication_text').html(text);
        $('#delete_timt_id').val(timt_id);

    });

    $(document).on("click", "#delete_inpatient_medication", function () {

        var delete_timt_id = $("#delete_timt_id").val();
        var post_url = 'action/action_inpatient_medications.php?do=delete'
        var datastring = 'delete_timt_id=' + delete_timt_id;

        $('#delete_inpatient_medication').attr('disabled', 'disabled');
        $('#delete_inpatient_medication').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_medication').modal('hide');
            $('#table_tr_inp_medication_treatment_' + delete_timt_id).remove();
            //location.reload();

            $('#delete_inpatient_medication').attr('disabled', false);
            $('#delete_inpatient_medication').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(".tretment_medication_move tbody").sortable({
        opacity: 0.6,
        cursor: 'move',
        update: function () {

            var order = $(this).sortable("serialize");
            $.ajax({
                url: 'action/action_treatment_updatelist.php?action=updateRecordsListings',
                type: 'POST',
                data: order,
                success: function (result) {
                    //console.log(result);
                    if (result == 1) {
                        $("#success_message_listing").show();
                        $("#error_message_listing").hide();
                    } else {
                        $("#success_message_listing").hide();
                        $("#error_message_listing").show();
                    }
                }
            });
        }

    });

    $(document).on("click", ".treatment_sheet_pre", function () {

        var total_admit_days = $("#total_admit_days").val();
        var admit_days = $(".admit_days").val();
        var new_admitDays = parseInt(admit_days) - parseInt(1);
        var case_p_id = $(this).attr('data-case-p');
        var case_inp_id = $(this).attr('data-case-inp');
        var patient_uni_id = $("#patient_uni_id").val();

        $(".overlay-popup").show();
        $.ajax({
            type: 'post',
            url: 'inpatient_treatment_date_wise.php',
            data: {
                total_admit_days: total_admit_days,
                select_new_date: new_admitDays,
                case_p_id: case_p_id,
                case_inp_id: case_inp_id,
                patient_uni_id: patient_uni_id,

            },
            success: function (response) {
                $(".overlay-popup").hide();
                $(".admit_days").val(new_admitDays);
                $(".add_gen_order_admit_day").val(new_admitDays);
                $("#vital_date").val("Day: " + new_admitDays);

                $("#vital_date_display").html("Day: " + new_admitDays);

                if (new_admitDays < total_admit_days) {
                    $(".treatment_sheet_next").show();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".treatment_sheet_next").hide();
                }
                if (new_admitDays == 1) {
                    $(".treatment_sheet_pre").hide();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".treatment_sheet_pre").show();
                }

                var splitted = response.split("@@@");

                //$("#today_treatment").css("display", "none");
                $("#general_order_div").html(splitted[0]);

                //$("#today_charting").css("display", "none");
                $("#tretment_div_medication").html(splitted[1]);
                $("#treat_inv").html(splitted[2]);

                var PatientId = $("#pm_pid").val();
                var InpatientId = $("#ip_id").val();

                $("#add_new_treatment_print").attr("href", "pdf_treatment.php?p_id=" + PatientId + "&ip_id=" + InpatientId + "&pu_id=" + patient_uni_id + "&day=" + new_admitDays);

                $("#add_today_treatment_print").attr("href", "pdf_today_medicine.php?p_id=" + PatientId + "&ip_id=" + InpatientId + "&pu_id=" + patient_uni_id + "&day=" + new_admitDays);


                $.myTreatmentAlltable();

            }
        });

    });

    $(document).on("click", ".treatment_sheet_next", function () {

        var total_admit_days = $("#total_admit_days").val();
        var admit_days = $(".admit_days").val();
        var new_admitDays = parseInt(admit_days) + parseInt(1);
        var case_p_id = $(this).attr('data-case-p');
        var case_inp_id = $(this).attr('data-case-inp');
        var patient_uni_id = $("#patient_uni_id").val();

        $(".overlay-popup").show();
        $.ajax({
            type: 'post',
            url: 'inpatient_treatment_date_wise.php',
            data: {
                total_admit_days: total_admit_days,
                select_new_date: new_admitDays,
                case_p_id: case_p_id,
                case_inp_id: case_inp_id,
                patient_uni_id: patient_uni_id,

            },
            success: function (response) {
                $(".overlay-popup").hide();

                $(".admit_days").val(new_admitDays);
                $(".add_gen_order_admit_day").val(new_admitDays);
                $("#vital_date").val("Day: " + new_admitDays);

                $("#vital_date_display").html("Day: " + new_admitDays);

                if (new_admitDays < total_admit_days) {
                    $(".treatment_sheet_next").show();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".treatment_sheet_next").hide();
                }
                if (new_admitDays == 1) {
                    $(".treatment_sheet_pre").hide();
                    // $("#add_inpatient_in_out_chart").css("display", "block");
                    // $("#add_inpatient_daily_well").css("display", "block");
                } else {
                    $(".treatment_sheet_pre").show();
                }

                var splitted = response.split("@@@");

                //$("#today_treatment").css("display", "none");
                $("#general_order_div").html(splitted[0]);

                //$("#today_charting").css("display", "none");
                $("#tretment_div_medication").html(splitted[1]);
                $("#treat_inv").html(splitted[2]);

                var PatientId = $("#pm_pid").val();
                var InpatientId = $("#ip_id").val();

                $("#add_new_treatment_print").attr("href", "pdf_treatment.php?p_id=" + PatientId + "&ip_id=" + InpatientId + "&day=" + new_admitDays);

                $("#add_today_treatment_print").attr("href", "pdf_today_medicine.php?p_id=" + PatientId + "&ip_id=" + InpatientId + "&day=" + new_admitDays);

                $.myTreatmentAlltable();

            }
        });

    });

    $.myTreatmentAlltable = function () {


        $('#medications').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": false,
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": true,
            "responsive": true,
            "language": {
                "emptyTable": "No medications added",
            },
            "bDestroy": true
        });

        $(".tretment_medication_move tbody").sortable({
            opacity: 0.6,
            cursor: 'move',
            update: function () {

                var order = $(this).sortable("serialize");
                $.ajax({
                    url: 'action/action_treatment_updatelist.php?action=updateRecordsListings',
                    type: 'POST',
                    data: order,
                    success: function (result) {
                        //console.log(result);
                        if (result == 1) {
                            $("#success_message_listing").show();
                            $("#error_message_listing").hide();
                        } else {
                            $("#success_message_listing").hide();
                            $("#error_message_listing").show();
                        }
                    }
                });
            }
        });

        $('#general_order').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": false,
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": true,
            "responsive": true,
            "language": {
                "emptyTable": "No order added",
            },
            "bDestroy": true
        });

        $('#treat_inv').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "scrollX": false,
            "paging": false,
            "lengthChange": false,
            "searching": false,
            "ordering": false,
            "info": false,
            "autoWidth": true,
            "responsive": true,
            "language": {
                "emptyTable": "No investigations added",
            },
            "bDestroy": true
        });

    }


    $(document).on("submit", "#form_modal_add_popup_inp_lab_parameter_box_box", function (e) {

        e.preventDefault();
        proceed = true;

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });

        var arr = [];

        $("#pre_cash_casemanage_lab_parameter_selected").find('li').each(function () {

            var MyText = $(this).text().trim();
            arr.push(MyText);

        });

        new_val = arr.join();

        if (new_val == "") {
            alert("Please Select Lab Parameter");
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        var pm_pid = $('#pm_pid').val();
        var pm_ipid = $('#ip_id').val();

        $('#submit_button_popup_lab_parameter_box').attr('disabled', 'disabled');

        $('#submit_button_popup_lab_parameter_box').attr('disabled', 'disabled');
        $('#submit_button_popup_lab_parameter_box').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            $('#modal_lab_parameter_template_box').modal('hide');
            $('#submit_button_popup_lab_parameter_box').removeAttr('disabled');
            $("#pre_cash_casemanage_lab_parameter_template").html("");
            $("#pre_cash_casemanage_lab_parameter_selected").html("");
            $("#select_tclt_id").val(0);
            $('.err_register').hide();

            var splitted = result.split("@@@");
            var added_value = splitted[0];
            var count_para = splitted[1];
            $("#add_lab_value").attr('data-value', '2');

            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var in_pid = $("#add_case_lab_heading").attr('data-inid');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-puid');

            $('#add_inp_lab_value').attr('data-value', 1);

            $.custominpatientnewlabtable(pm_pid, in_pid, patient_uni_id);

            $('#submit_button_popup_lab_parameter_box').attr('disabled', false);
            $('#submit_button_popup_lab_parameter_box').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });


    $.custominpatientnewlabtable = function (pm_pid, in_pid, patient_uni_id) {

        var pm_pid = pm_pid;
        var in_pid = in_pid;
        var patient_uni_id = patient_uni_id;
        var post_url = 'action/add_lab_table_inp.php?do=add_table'
        var datastring = 'pm_pid=' + pm_pid + "&in_pid=" + in_pid + "&patient_uni_id=" + patient_uni_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $(".table-labreport").html(result.trim());

        });

    }


    $(document).on("click", "#add_inp_lab_value", function () {

        var value = $(this).attr("data-value");

        if (value > 0) {
            $('#modal_add_lab_value').modal('show');
        } else {
            $('#modal_para_lab_inpatient').modal('show');
        }

        var dt = new Date();
        var time = dt.getHours() + ":" + dt.getMinutes();
        // console.log(time);
        $('#tcm_val_time').val(time);


        var id = $(this).attr('data-id');
        var inid = $(this).attr("data-inid");
        var patient_uni_id = $(this).attr("data-pu_id");

        var post_url = 'action/action_inpatient_lab_para.php?do=add_inp_value_popup'
        var datastring = 'id=' + id + '&ip_id=' + inid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
                ip_id: inid,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            $("#added_value").html(result);
        });
    });


    $("#add_lab_value_submit").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });

        var arr = [];

        var arrayvalues = [];

        $("input.all_lab_para_value_req").each(function () {

            if ($(this).val() == 0) {

                arrayvalues.push('false');

            } else {

                arrayvalues.push('true');
            }
        });

        if (arrayvalues.indexOf("true") === -1) {
            alert('Please enter anyone lab value');
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_button_add_lab_value').attr('disabled', 'disabled');


        $('#submit_button_add_lab_value').attr('disabled', 'disabled');
        $('#submit_button_add_lab_value').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_button_add_lab_value').removeAttr('disabled');
            $('#modal_add_lab_value').modal('hide');
            $('#modal_add_lab_value_cm  ').modal('hide');
            $('.err_register').hide();

            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var in_pid = $("#add_case_lab_heading").attr('data-inid');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-puid');

            $.custominpatientnewlabtable(pm_pid, in_pid, patient_uni_id);

            $('#submit_button_add_lab_value').attr('disabled', false);
            $('#submit_button_add_lab_value').show();
            $(".err_inpregisterloader").attr("style", "display:none");



        });
    });

    $(document).on("click", "#edit_lab_datetime", function () {
        $('#modal_edit_lab_value_date').modal('show');

        $('#datetime_department').show(); //than show
        $('#sms_department').hide(); //than show
        $('.main_edit_date_sms').text('Edit Date/Time');
        $("#DateTime").prop("checked", true);

        var id = $(this).attr('data-id');
        $("#sms_lab_imp_id").val(id);
        var post_url = 'action/action_inpatient_lab_para.php?do=edit_value_datetime'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#edit_added_value_datetime").html(result);
            $('.calender').flatpickr({
                disableMobile: "true",
                dateFormat: "d/m/Y",
            });
        });
    });


    $(document).on('change', '.imp_lab_report_opt', function () {
        if (this.value == "DateTime") { //check value if it is domicilio
            $('#datetime_department').show(); //than show
            $('#sms_department').hide(); //than show
            $('.main_edit_date_sms').text('Edit Date/Time');
        } else {
            $('#datetime_department').hide(); //than show
            $('#sms_department').show(); //than showv
            $('.main_edit_date_sms').text('Send SMS');
        }
    });


    $("#edit_lab_datetime_submit").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();

        $('#submit_button_edit_lab_datetime').attr('disabled', 'disabled');
        $('#submit_button_edit_lab_datetime').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#modal_edit_lab_value_date').modal('hide');

            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var in_pid = $("#add_case_lab_heading").attr('data-inid');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-puid');

            $.custominpatientnewlabtable(pm_pid, in_pid, patient_uni_id);


            $('#submit_button_edit_lab_datetime').attr('disabled', false);
            $('#submit_button_edit_lab_datetime').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });
    });


    $(document).on("click", ".add_single_inp_lab_value_historical", function () {
        var tilv_id = $(this).attr("data-tilv_id");
        var tilp_id = $(this).attr("data-tilp_id");

        $("#add_tilv_id").val(tilv_id);
        $("#add_tilp_id").val(tilp_id);
        $(".add_single_req").html("");
        $('#modal_add_single_lab_value_historical').modal('show');

        var id = $(this).attr('data-id');
        var post_url = 'action/action_inpatient_lab_para.php?do=add_single_value_popup'
        var datastring = 'id=' + tilp_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#add_single_added_value").html(result);
        });


    });


    $("#add_single_inp_lab_value_submit_historical").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var add_single_lab_val = $("#add_single_lab_val").val();

        if (add_single_lab_val == "") {
            alert("Please Enter Calue.");
            $(".add_single_req").html("Please Enter Calue.");
            $("#add_single_lab_val").focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_button_add_single_lab_value').attr('disabled', 'disabled');

        $('#submit_button_add_single_lab_value').attr('disabled', 'disabled');
        $('#submit_button_add_single_lab_value').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);            
            $('#modal_add_single_lab_value_historical').modal('hide');
            $('#submit_button_add_single_lab_value').removeAttr('disabled');

            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var in_pid = $("#add_case_lab_heading").attr('data-inid');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-puid');

            $.custominpatientnewlabtable(pm_pid, in_pid, patient_uni_id);


            $('#submit_button_add_single_lab_value').attr('disabled', false);
            $('#submit_button_add_single_lab_value').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(document).on("click", "#edit_lab_value", function () {
        $('#modal_edit_lab_value').modal('show');
        var id = $(this).attr('data-id');
        var post_url = 'action/action_inpatient_lab_para.php?do=edit_value_popup'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#edit_added_value").html(result);
        });
    });

    $("#edit_lab_value_submit").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();

        $('#submit_button_edit_lab_value').attr('disabled', 'disabled');
        $('#submit_button_edit_lab_value').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);            
            $('#modal_edit_lab_value').modal('hide');
            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var in_pid = $("#add_case_lab_heading").attr('data-inid');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-puid');

            $.custominpatientnewlabtable(pm_pid, in_pid, patient_uni_id);

            $('#submit_button_edit_lab_value').attr('disabled', false);
            $('#submit_button_edit_lab_value').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });
    });

    $(document).on("click", "#submit_button_delete_lab", function () {

        var id = $("#delete_lab_imp_id").val();
        var post_url = 'action/action_inpatient_lab_para.php?do=delete_lab_para'
        var datastring = 'id=' + id;
        //console.log(post_url);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            ////console.log(result);
            $('#modal_edit_lab_value_date').modal('hide');
            var pm_pid = $("#add_case_lab_heading").attr('data-id');
            var in_pid = $("#add_case_lab_heading").attr('data-inid');
            var patient_uni_id = $("#add_case_lab_heading").attr('data-puid');


            $.custominpatientnewlabtable(pm_pid, in_pid, patient_uni_id);
        });

    });


    $(document).on("click", "#add_inp_radiology_report", function () {
        ////console.log("Yes");
        var id = 1;
        $('#modal_add_inp_radiology_report').modal('show');

        var post_url = 'action/action_radiology_report_template.php?do=add_template'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_radiology_report_template").html(result.trim());
        });

    });


    $(document).on("click", ".select_template_radiology_report", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_radiology_report_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val = $("#popup_radiology_notes").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#popup_radiology_notes").val(old_val + new_val);
            } else {
                $("#popup_radiology_notes").val(old_val + "\n" + new_val);
            }
        });

    });


    $("#new_radiology_report_form_add").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tirr_title = $("#tirr_title").val();
        var popup_notes = $("#popup_radiology_notes").val();
        var tirr_date = $("#tirr_date").val();
        var tirr_time = $("#tirr_time").val();

        if (tirr_title == "") {
            alert("Please Enter Title");
            $('#tirr_title').focus();
            return false;
        } else if (popup_notes == "") {
            alert("Please Enter Notes");
            $('#popup_radiology_notes').focus();
            return false;
        } else if (tirr_date == "") {
            alert("Please Enter Date");
            $('#tirr_date').focus();
            return false;
        } else if (tirr_time == "") {
            alert("Please Enter Time");
            $('#tirr_time').focus();
            return false;
        } else if ($('input[name="pop_check"]:checked').length > 0 && $("#popup_template_title").val() == "") {
            alert("Please Enter Template Name");
            $('#popup_template_title').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_radiology_report_template').attr('disabled', 'disabled');
        $('.err_register').show();

        $('#submit_button_radiology_report_template').attr('disabled', 'disabled');
        $('#submit_button_radiology_report_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#tirr_title").val("");
            $("#popup_notes").val("");

            $('#modal_add_inp_radiology_report').modal('hide');
            $('#submit_button_radiology_report_template').removeAttr('disabled');
            $('.err_register').hide();

            if ($('#table_imp_radiology_report .dataTables_empty').length) {

                $("#table_imp_radiology_report").html(result);

            } else {
                $("#table_imp_radiology_report").prepend(result);
            }

            $("#new_radiology_report_form_add").trigger("reset");


            $('#submit_button_radiology_report_template').attr('disabled', false);
            $('#submit_button_radiology_report_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });


    $(document).on("click", ".select_edit_radiology_report", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_radiology_report').modal('show');

        var post_url = 'action/action_radiology_report_template.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tirr_id").val(result['tirr_id']);
            $("#edit_tirr_title").val(result['tirr_title']);
            $("#edit_tirr_notes").val(result['tirr_notes']);
            $("#edit_tirr_radiologist").val(result['tirr_radiologist']);
            $("#edit_tirr_date").val(result['tirr_date']);
            $("#edit_tirr_time").val(result['tirr_time']);
            $("#edit_tirr_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });


    $(document).on("keydown", "#form_modal_edit_radiology_report", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_radiology_report').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_radiology_report", function () {

        var tirr_id = $("#edit_tirr_id").val();
        var edit_tirr_um_id = $("#edit_tirr_um_id").val();

        var edit_tirr_title = $("#edit_tirr_title").val();
        var edit_tirr_notes = $("#edit_tirr_notes").val();
        var edit_tirr_radiologist = $("#edit_tirr_radiologist").val();
        var edit_tirr_date = $("#edit_tirr_date").val();
        var edit_tirr_time = $("#edit_tirr_time").val();

        if (edit_tirr_title == "") {
            alert("Please Enter Title");
            $('#edit_tirr_title').focus();
            return false;
        } else if (edit_tirr_notes == "") {
            alert("Please Enter Notes");
            $('#edit_tirr_notes').focus();
            return false;
        } else if (edit_tirr_date == "") {
            alert("Please Enter Date");
            $('#edit_tirr_date').focus();
            return false;
        } else if (edit_tirr_time == "") {
            alert("Please Enter Time");
            $('#edit_tirr_time').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_radiology_report_template.php?do=edit'
        var datastring = 'tirr_title=' + edit_tirr_title + '&tirr_notes=' + edit_tirr_notes + "&tirr_id=" + tirr_id + "&edit_tirr_um_id=" + edit_tirr_um_id + "&tirr_date=" + edit_tirr_date + "&tirr_time=" + edit_tirr_time + "&tirr_radiologist=" + edit_tirr_radiologist;
        //console.log(datastring);

        $('#submit_edit_radiology_report').attr('disabled', 'disabled');
        $('#submit_edit_radiology_report').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tirr_title: edit_tirr_title,
                tirr_notes: edit_tirr_notes,
                tirr_id: tirr_id,
                edit_tirr_um_id: edit_tirr_um_id,
                tirr_date: edit_tirr_date,
                tirr_time: edit_tirr_time,
                tirr_radiologist: edit_tirr_radiologist,
            },
        }).done(function (result) {
            ////console.log(result);
            $("#edit_tirr_title").val("");
            $("#edit_tirr_notes").val("");
            //console.log(tirr_id);
            $('#modal_edit_radiology_report').modal('hide');

            $("#table_tr_radiology_report_" + tirr_id).html(result.trim());


            $('#submit_edit_radiology_report').attr('disabled', false);
            $('#submit_edit_radiology_report').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", ".delete_radiology_report", function () {

        $('#modal-danger-imp-radiologoy').modal('show');
        var radiolabname = $(this).attr('data-name');
        var tirr_id = $(this).attr('data-id');

        // $('#deltitlename').html(radiolabname);

        //var text = "Are you sure you want to delete <b>" + radiolabname + "</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_radiolab_text').html(text);
        $('#delete_tirr_id').val(tirr_id);
    });


    $(document).on("click", "#delete_inpatient_radiology_report", function () {
        var delete_tirr_id = $("#delete_tirr_id").val();
        var post_url = 'action/action_radiology_report_template.php?do=delete'
        var datastring = 'delete_tirr_id=' + delete_tirr_id;

        $('#delete_inpatient_radiology_report').attr('disabled', 'disabled');
        $('#delete_inpatient_radiology_report').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tirr_id: delete_tirr_id,
            },
        }).done(function (result) {
            ////console.log(result);
            // $('#modal-danger-case-allergies').modal('hide');
            // $('#tr_case_allergies_' + delete_tca_id).remove();


            $('#delete_inpatient_radiology_report').attr('disabled', false);
            $('#delete_inpatient_radiology_report').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();
        });

    });

    $(document).on("click", "#add_inpatient_doctor_billing_sheet", function () {
        $('#modal_inpatient_doctor_billing_sheet').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_doctor_billing_sheet", function (e) {
        if (e.keyCode == 13) {
            $('#submit_inpatient_doctor_billing_sheet').click();
            return false;
        }
    });

    $('#submit_inpatient_doctor_billing_sheet').click(function () {
        var tdbs_date = $("#tdbs_date").val();
        var tdbs_doc_name = $("#tdbs_doc_name").val();
        var tdbs_service = $("#tdbs_service").val();
        var tdbs_charge = $("#tdbs_charge").val();
        var tdbs_remark = $("#tdbs_remark").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();


        if (tdbs_date == "") {
            alert("Please Enter Date.");
            $("#tdbs_date").focus();
            return false;
        } else if (tdbs_doc_name == "") {
            alert("Please Enter Doctor Name.");
            $("#tdbs_doc_name").focus();
            return false;
        } else {

        }


        var post_url = 'action/action_inpatient_doctor_billing_sheet.php?do=add'
        var datastring = 'tdbs_date=' + tdbs_date + "&tdbs_doc_name=" + tdbs_doc_name + "&tdbs_service=" + tdbs_service + "&tdbs_charge=" + tdbs_charge + "&tdbs_remark=" + tdbs_remark + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id;
        //console.log(datastring);

        $('#submit_inpatient_doctor_billing_sheet').attr('disabled', 'disabled');
        $('#submit_inpatient_doctor_billing_sheet').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdbs_date: tdbs_date,
                tdbs_doc_name: tdbs_doc_name,
                tdbs_service: tdbs_service,
                tdbs_charge: tdbs_charge,
                tdbs_remark: tdbs_remark,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            //console.log(result);
            $('#modal_inpatient_doctor_billing_sheet').modal('hide');

            $("#tdbs_date").val("");
            $("#tdbs_doc_name").val("");
            $("#tdbs_service").val("");
            $("#tdbs_charge").val("");
            $("#tdbs_remark").val("");

            // if ($('#add_table_inp_doctor_billing_sheet .dataTables_empty').length) {

            //     $("#add_table_inp_doctor_billing_sheet").html(result);

            // } else {
            //     $("#add_table_inp_doctor_billing_sheet").prepend(result);
            // }

            location.reload();

            $('#submit_inpatient_doctor_billing_sheet').attr('disabled', false);
            $('#submit_inpatient_doctor_billing_sheet').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });

    $(document).on("click", ".select_edit_inpatient_doctor_billing_sheet", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_doctor_billing_sheet').modal('show');

        var post_url = 'action/action_inpatient_doctor_billing_sheet.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tdbs_id").val(result['tdbs_id']);
            $("#edit_tdbs_date").val(result['tdbs_date']);
            $("#edit_tdbs_doc_name").val(result['tdbs_doc_name']);
            $("#edit_tdbs_service").val(result['tdbs_service']);
            $("#edit_tdbs_charge").val(result['tdbs_charge']);
            $("#edit_tdbs_remark").val(result['tdbs_remark']);
            $("#edit_tdbs_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_doctor_billing_sheet", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_doctor_billing_sheet').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_doctor_billing_sheet", function () {

        var tdbs_id = $("#edit_tdbs_id").val();
        var tdbs_date = $("#edit_tdbs_date").val();
        var tdbs_doc_name = $("#edit_tdbs_doc_name").val();
        var tdbs_service = $("#edit_tdbs_service").val();
        var tdbs_charge = $("#edit_tdbs_charge").val();
        var tdbs_remark = $("#edit_tdbs_remark").val();

        var edit_tdbs_um_id = $("#edit_tdbs_um_id").val();


        if (tdbs_date == "") {
            alert("Please Enter Date.");
            $("#edit_tdbs_date").focus();
            return false;
        } else if (tdbs_doc_name == "") {
            alert("Please Enter Doctor Name.");
            $("#edit_tdbs_doc_name").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_doctor_billing_sheet.php?do=edit'
        var datastring = 'tdbs_date=' + tdbs_date + "&tdbs_doc_name=" + tdbs_doc_name + "&tdbs_service=" + tdbs_service + "&tdbs_charge=" + tdbs_charge + "&tdbs_remark=" + tdbs_remark + "&tdbs_id=" + tdbs_id + "&edit_tdbs_um_id=" + edit_tdbs_um_id;
        //console.log(datastring);

        $('#submit_edit_inpatient_doctor_billing_sheet').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_doctor_billing_sheet').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdbs_date: tdbs_date,
                tdbs_doc_name: tdbs_doc_name,
                tdbs_service: tdbs_service,
                tdbs_charge: tdbs_charge,
                tdbs_remark: tdbs_remark,
                tdbs_id: tdbs_id,
                edit_tdbs_um_id: edit_tdbs_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tdbs_id = $("#edit_tdbs_id").val();
            //console.log(tdbs_id);
            $('#modal_edit_inpatient_doctor_billing_sheet').modal('hide');

            $("#table_tr_inp_doctor_billing_sheet_" + tdbs_id).html(result.trim());


            //location.reload();

            $('#submit_edit_inpatient_doctor_billing_sheet').attr('disabled', false);
            $('#submit_edit_inpatient_doctor_billing_sheet').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });


    $(document).on("click", "#delete_popup_inpatient_doctor_billing_sheet", function () {
        $('#modal_danger_inpatient_doctor_billing_sheet').modal('show');
        var id = $(this).attr('data-id');

        //var text = "Are you sure you want to delete <b>Billing Sheet</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tdbs_id').val(id);

    });

    $(document).on("click", "#delete_inpatient_doctor_billing_sheet", function () {

        var delete_tdbs_id = $("#delete_tdbs_id").val();
        var post_url = 'action/action_inpatient_doctor_billing_sheet.php?do=delete'
        var datastring = 'delete_tdbs_id=' + delete_tdbs_id;

        $('#delete_inpatient_doctor_billing_sheet').attr('disabled', 'disabled');
        $('#delete_inpatient_doctor_billing_sheet').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_doctor_billing_sheet').modal('hide');
            $('#table_tr_inp_doctor_billing_sheet_' + delete_tdbs_id).remove();
            //location.reload();

            $('#delete_inpatient_doctor_billing_sheet').attr('disabled', false);
            $('#delete_inpatient_doctor_billing_sheet').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });

    $(document).on("click", "#add_inpatient_nurse_billing_sheet", function () {
        $('#modal_inpatient_nurse_billing_sheet').modal('show');
    });

    $(document).on("keydown", "#form_modal_inpatient_nurse_billing_sheet", function (e) {

        if (e.keyCode == 13) {
            $('#submit_inpatient_nurse_billing_sheet').click();
            return false;
        }
    });

    $('#submit_inpatient_nurse_billing_sheet').click(function () {
        var tnbs_date = $("#tnbs_date").val();
        var tnbs_doc_name = $("#tnbs_doc_name").val();
        var tnbs_service = $("#tnbs_service").val();
        var tnbs_charge = $("#tnbs_charge").val();
        var tnbs_remark = $("#tnbs_remark").val();

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var ip_id = $("#ip_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        if (tnbs_date == "") {
            alert("Please Enter Date.");
            $("#tnbs_date").focus();
            return false;
        } else if (tnbs_doc_name == "") {
            alert("Please Enter Doctor Name.");
            $("#tnbs_doc_name").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_nurse_billing_sheet.php?do=add'
        var datastring = 'tnbs_date=' + tnbs_date + "&tnbs_doc_name=" + tnbs_doc_name + "&tnbs_service=" + tnbs_service + "&tnbs_charge=" + tnbs_charge + "&tnbs_remark=" + tnbs_remark + "&pm_id=" + pm_id + "&pm_pid=" + pm_pid + "&ip_id=" + ip_id;
        //console.log(datastring);

        $('#submit_inpatient_nurse_billing_sheet').attr('disabled', 'disabled');
        $('#submit_inpatient_nurse_billing_sheet').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tnbs_date: tnbs_date,
                tnbs_doc_name: tnbs_doc_name,
                tnbs_service: tnbs_service,
                tnbs_charge: tnbs_charge,
                tnbs_remark: tnbs_remark,
                pm_id: pm_id,
                pm_pid: pm_pid,
                ip_id: ip_id,
                patient_uni_id: patient_uni_id,
            },
        }).done(function (result) {
            //console.log(result);
            $('#modal_inpatient_nurse_billing_sheet').modal('hide');

            $("#tnbs_date").val("");
            $("#tnbs_doc_name").val("");
            $("#tnbs_service").val("");
            $("#tnbs_charge").val("");
            $("#tnbs_remark").val("");

            // if ($('#add_table_inp_nurse_billing_sheet .dataTables_empty').length) {

            //     $("#add_table_inp_nurse_billing_sheet").html(result);

            // } else {
            //     $("#add_table_inp_nurse_billing_sheet").prepend(result);
            // }

            location.reload();

            $('#submit_inpatient_nurse_billing_sheet').attr('disabled', false);
            $('#submit_inpatient_nurse_billing_sheet').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(document).on("click", ".select_edit_inpatient_nurse_billing_sheet", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_inpatient_nurse_billing_sheet').modal('show');

        var post_url = 'action/action_inpatient_nurse_billing_sheet.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tnbs_id").val(result['tnbs_id']);
            $("#edit_tnbs_date").val(result['tnbs_date']);
            $("#edit_tnbs_doc_name").val(result['tnbs_doc_name']);
            $("#edit_tnbs_service").val(result['tnbs_service']);
            $("#edit_tnbs_charge").val(result['tnbs_charge']);
            $("#edit_tnbs_remark").val(result['tnbs_remark']);
            $("#edit_tnbs_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_inpatient_nurse_billing_sheet", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_inpatient_nurse_billing_sheet').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_inpatient_nurse_billing_sheet", function () {
        var tnbs_id = $("#edit_tnbs_id").val();
        var tnbs_date = $("#edit_tnbs_date").val();
        var tnbs_doc_name = $("#edit_tnbs_doc_name").val();
        var tnbs_service = $("#edit_tnbs_service").val();
        var tnbs_charge = $("#edit_tnbs_charge").val();
        var tnbs_remark = $("#edit_tnbs_remark").val();

        var edit_tnbs_um_id = $("#edit_tnbs_um_id").val();


        if (tnbs_date == "") {
            alert("Please Enter Date.");
            $("#edit_tnbs_date").focus();
            return false;
        } else if (tnbs_doc_name == "") {
            alert("Please Enter doctor name.");
            $("#edit_tnbs_doc_name").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_inpatient_nurse_billing_sheet.php?do=edit'
        var datastring = 'tnbs_date=' + tnbs_date + "&tnbs_doc_name=" + tnbs_doc_name + "&tnbs_service=" + tnbs_service + "&tnbs_charge=" + tnbs_charge + "&tnbs_remark=" + tnbs_remark + "&tnbs_id=" + tnbs_id + "&edit_tnbs_um_id=" + edit_tnbs_um_id;
        //console.log(datastring);

        $('#submit_edit_inpatient_nurse_billing_sheet').attr('disabled', 'disabled');
        $('#submit_edit_inpatient_nurse_billing_sheet').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tnbs_date: tnbs_date,
                tnbs_doc_name: tnbs_doc_name,
                tnbs_service: tnbs_service,
                tnbs_charge: tnbs_charge,
                tnbs_remark: tnbs_remark,
                tnbs_id: tnbs_id,
                edit_tnbs_um_id: edit_tnbs_um_id,
            },
        }).done(function (result) {
            ////console.log(result);
            var tnbs_id = $("#edit_tnbs_id").val();
            //console.log(tnbs_id);
            $('#modal_edit_inpatient_nurse_billing_sheet').modal('hide');

            $("#table_tr_inp_nurse_billing_sheet_" + tnbs_id).html(result.trim());


            //location.reload();


            $('#submit_edit_inpatient_nurse_billing_sheet').attr('disabled', false);
            $('#submit_edit_inpatient_nurse_billing_sheet').show();
            $(".err_inpregisterloader").attr("style", "display:none");


        });

    });

    $(document).on("click", "#delete_popup_inpatient_nurse_billing_sheet", function () {

        $('#modal_danger_inpatient_nurse_billing_sheet').modal('show');
        var id = $(this).attr('data-id');

        //var text = "Are you sure you want to delete <b>Billing Sheet</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tnbs_id').val(id);

    });

    $(document).on("click", "#delete_inpatient_nurse_billing_sheet", function () {

        var delete_tnbs_id = $("#delete_tnbs_id").val();
        var post_url = 'action/action_inpatient_nurse_billing_sheet.php?do=delete'
        var datastring = 'delete_tnbs_id=' + delete_tnbs_id;

        $('#delete_inpatient_nurse_billing_sheet').attr('disabled', 'disabled');
        $('#delete_inpatient_nurse_billing_sheet').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#modal_danger_inpatient_nurse_billing_sheet').modal('hide');
            $('#table_tr_inp_nurse_billing_sheet_' + delete_tnbs_id).remove();
            //location.reload();


            $('#delete_inpatient_nurse_billing_sheet').attr('disabled', false);
            $('#delete_inpatient_nurse_billing_sheet').show();
            $(".err_inpregisterloader").attr("style", "display:none");
        });

    });

    $(document).on("click", "#add_inp_doctor_daily_notes", function () {
        ////console.log("Yes");
        var id = 1;
        $('#modal_add_inp_doctor_daily_notes').modal('show');

        var post_url = 'action/action_doctor_notes_template.php?do=add_template'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_doctor_notes_template").html(result.trim());
        });

    });

    $(document).on("click", ".select_template_doctor_notes", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_doctor_notes_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val = $("#popup_doctor_notes").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#popup_doctor_notes").val(old_val + new_val);
            } else {
                $("#popup_doctor_notes").val(old_val + "\n" + new_val);
            }
        });

    });

    $(document).on("submit", "#new_doctor_notes_form_add", function (e) {


        e.preventDefault();
        proceed = true;

        var popup_notes = $("#popup_doctor_notes").val();
        var tidn_date = $("#tidn_date").val();
        var tidn_time = $("#tidn_time").val();

        if (popup_notes == "") {
            alert("Please Enter notes");
            $('#popup_doctor_notes').focus();
            return false;
        } else if (tidn_date == "") {
            alert("Please Enter date");
            $('#tidn_date').focus();
            return false;
        } else if (tidn_time == "") {
            alert("Please Enter time");
            $('#tidn_time').focus();
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_doctor_notes_template').attr('disabled', 'disabled');
        $('.err_register').show();

        $('#submit_button_doctor_notes_template').attr('disabled', 'disabled');
        $('#submit_button_doctor_notes_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#popup_doctor_notes").val("");
            $('#submit_button_doctor_notes_template').removeAttr('disabled');
            $('#modal_add_inp_doctor_daily_notes').modal('hide');
            $('.err_register').hide();
            $("#new_doctor_notes_form_add").trigger("reset");

            if ($('#table_imp_doctor_daily_notes .dataTables_empty').length) {

                $("#table_imp_doctor_daily_notes").html(result);

            } else {
                $("#table_imp_doctor_daily_notes").prepend(result);
            }


            $('#submit_button_doctor_notes_template').attr('disabled', false);
            $('#submit_button_doctor_notes_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");



        });

    });

    $(document).on("click", ".select_edit_doctor_extra_notes", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_doctor_extra_notes').modal('show');

        var post_url = 'action/action_doctor_notes_template.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tidn_id").val(result['tidn_id']);

            $("#edit_tidn_temp").val(result['tidn_temp']);
            $("#edit_tidn_pres").val(result['tidn_pres']);
            $("#edit_tidn_resp_rate").val(result['tidn_resp_rate']);
            $("#edit_tidn_blood_press").val(result['tidn_blood_press']);
            $("#edit_tidn_spo2").val(result['tidn_spo2']);

            $("#edit_tidn_notes").val(result['tidn_notes']);
            $("#edit_tidn_date").val(result['tidn_date']);
            $("#edit_tidn_time").val(result['tidn_time']);
            $("#edit_tidn_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_doctor_extra_notes", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_doctor_extra_notes').click();
            return false;
        }
    });

    $('#submit_edit_doctor_extra_notes').click(function () {
        var tidn_id = $("#edit_tidn_id").val();
        var edit_tidn_um_id = $("#edit_tidn_um_id").val();

        var edit_tidn_notes = $("#edit_tidn_notes").val();

        var edit_tidn_date = $("#edit_tidn_date").val();
        var edit_tidn_time = $("#edit_tidn_time").val();

        var edit_tidn_temp = $("#edit_tidn_temp").val();
        var edit_tidn_pres = $("#edit_tidn_pres").val();
        var edit_tidn_resp_rate = $("#edit_tidn_resp_rate").val();
        var edit_tidn_blood_press = $("#edit_tidn_blood_press").val();
        var edit_tidn_spo2 = $("#edit_tidn_spo2").val();


        if (edit_tidn_notes == "") {
            alert("Please Enter Notes");
            $("#edit_tidn_notes").focus();
            return false;
        } else if (edit_tidn_date == "") {
            alert("Please Enter date");
            $("#edit_tidn_date").focus();
            return false;
        } else if (edit_tidn_time == "") {
            alert("Please Enter time");
            $("#edit_tidn_time").focus();
            return false;
        } else {

        }

        var post_url = 'action/action_doctor_notes_template.php?do=edit'
        var datastring = 'tidn_notes=' + edit_tidn_notes + "&tidn_id=" + tidn_id + "&edit_tidn_um_id=" + edit_tidn_um_id + "&tidn_date=" + edit_tidn_date + "&tidn_time=" + edit_tidn_time + "&edit_tidn_temp=" + edit_tidn_temp + "&edit_tidn_pres=" + edit_tidn_pres + "&edit_tidn_resp_rate=" + edit_tidn_resp_rate + "&edit_tidn_blood_press=" + edit_tidn_blood_press + "&edit_tidn_spo2=" + edit_tidn_spo2;
        //console.log(datastring);


        $('#submit_edit_doctor_extra_notes').attr('disabled', 'disabled');
        $('#submit_edit_doctor_extra_notes').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tidn_notes: edit_tidn_notes,
                tidn_id: tidn_id,
                edit_tidn_um_id: edit_tidn_um_id,
                tidn_date: edit_tidn_date,
                tidn_time: edit_tidn_time,
                edit_tidn_temp: edit_tidn_temp,
                edit_tidn_pres: edit_tidn_pres,
                edit_tidn_resp_rate: edit_tidn_resp_rate,
                edit_tidn_blood_press: edit_tidn_blood_press,
                edit_tidn_spo2: edit_tidn_spo2,
            },
        }).done(function (result) {
            ////console.log(result);
            var tidn_id = $("#edit_tidn_id").val();
            //console.log(tidn_id);
            $('#modal_edit_doctor_extra_notes').modal('hide');

            $("#table_tr_doctor_extra_notes_" + tidn_id).html(result.trim());

            $('#submit_edit_doctor_extra_notes').attr('disabled', false);
            $('#submit_edit_doctor_extra_notes').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("click", "#add_inp_nurse_daily_notes", function () {
        ////console.log("Yes");
        var id = 1;
        $('#modal_add_inp_nurse_daily_notes').modal('show');

        var post_url = 'action/action_nurse_notes_template.php?do=add_template'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_nurse_notes_template").html(result.trim());
        });

    });

    $(document).on("click", ".select_template_nurse_notes", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_nurse_notes_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val = $("#popup_nurse_notes").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#popup_nurse_notes").val(old_val + new_val);
            } else {
                $("#popup_nurse_notes").val(old_val + "\n\n" + new_val);
            }
        });
    });

    $("#new_nurse_notes_form_add").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var popup_notes = $("#popup_nurse_notes").val();
        var tinn_date = $("#tinn_date").val();
        var tinn_time = $("#tinn_time").val();

        if (popup_notes == "") {
            alert("Please Enter notes");
            $('#popup_nurse_notes').focus();
            return false;
        } else if (tinn_date == "") {
            alert("Please Enter date");
            $('#tinn_date').focus();
            return false;
        } else if (tinn_time == "") {
            alert("Please Enter time");
            $('#tinn_time').focus();
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_nurse_notes_template').attr('disabled', 'disabled');
        $('.err_register').show();

        $('#submit_button_nurse_notes_template').attr('disabled', 'disabled');
        $('#submit_button_nurse_notes_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#popup_nurse_notes").val("");
            $('#submit_button_nurse_notes_template').removeAttr('disabled');
            $('#modal_add_inp_nurse_daily_notes').modal('hide');
            $('.err_register').hide();
            $("#new_nurse_notes_form_add").trigger("reset");

            if ($('#table_imp_nurse_daily_notes .dataTables_empty').length) {

                $("#table_imp_nurse_daily_notes").html(result);

            } else {
                $("#table_imp_nurse_daily_notes").prepend(result);
            }

            $('#submit_button_nurse_notes_template').attr('disabled', false);
            $('#submit_button_nurse_notes_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");



        });

    });

    $(document).on("click", ".select_edit_nurse_extra_notes", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_nurse_extra_notes').modal('show');

        var post_url = 'action/action_nurse_notes_template.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tinn_id").val(result['tinn_id']);
            $("#edit_tinn_notes").val(result['tinn_notes']);
            $("#edit_tinn_date").val(result['tinn_date']);
            $("#edit_tinn_time").val(result['tinn_time']);
            $("#edit_tinn_um_id").val(result['created_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_nurse_extra_notes", function (e) {

        if (e.keyCode == 13) {
            $('#submit_edit_nurse_extra_notes').click();
            return false;
        }
    });

    $(document).on("click", "#submit_edit_nurse_extra_notes", function () {

        var tinn_id = $("#edit_tinn_id").val();
        var edit_tinn_um_id = $("#edit_tinn_um_id").val();

        var edit_tinn_notes = $("#edit_tinn_notes").val();

        var edit_tinn_date = $("#edit_tinn_date").val();
        var edit_tinn_time = $("#edit_tinn_time").val();

        if (edit_tinn_notes == "") {
            alert("Please enter notes");
            $('#edit_tinn_notes').focus();
            return false;
        } else if (edit_tinn_date == "") {
            alert("Please enter date");
            $('#edit_tinn_date').focus();
            return false;
        } else if (edit_tinn_time == "") {
            alert("Please enter time");
            $('#edit_tinn_time').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_nurse_notes_template.php?do=edit'
        var datastring = 'tinn_notes=' + edit_tinn_notes + "&tinn_id=" + tinn_id + "&edit_tinn_um_id=" + edit_tinn_um_id + "&tinn_date=" + edit_tinn_date + "&tinn_time=" + edit_tinn_time;
        //console.log(datastring);

        $('#submit_edit_nurse_extra_notes').attr('disabled', 'disabled');
        $('#submit_edit_nurse_extra_notes').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tinn_notes: edit_tinn_notes,
                tinn_id: tinn_id,
                edit_tinn_um_id: edit_tinn_um_id,
                tinn_date: edit_tinn_date,
                tinn_time: edit_tinn_time,
            },
        }).done(function (result) {
            ////console.log(result);
            var tinn_id = $("#edit_tinn_id").val();
            //console.log(tinn_id);
            $('#modal_edit_nurse_extra_notes').modal('hide');

            $("#table_tr_nurse_extra_notes_" + tinn_id).html(result.trim());


            $('#submit_edit_nurse_extra_notes').attr('disabled', false);
            $('#submit_edit_nurse_extra_notes').show();
            $(".err_inpregisterloader").attr("style", "display:none");


            //location.reload();

        });

    });

    $(document).on("change", "#add_patient_case_document_inpatient", function (e) {

        e.preventDefault();
        proceed = true;


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_case_document').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#file").val("");
            $('#submit_button_case_document').removeAttr('disabled');
            $('.err_register').hide();
            window.location.reload();
        });
    });

    $(document).on("click", "#edit_document_inpatient", function () {
        var id = $(this).data("id");
        var document_title = $(this).data("title");
        $('#tcd_id').val(id);
        $('.document_name').html(document_title);

        $('#edit_upload_document_submit_inpatient').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            type: "POST",
            url: "action/action_document.php?do=get_desc",
            data: {
                id: id,
            },
        }).done(function (result) {

            $('#doc_desc').html(result.trim());

            $('#edit_upload_document_submit_inpatient').attr('disabled', false);

        });
    });

    $(document).on("click", "#add_inp_doctor_procedure", function () {
        ////console.log("Yes");
        var id = 1;
        $('#modal_add_inp_doctor_procedure').modal('show');

        var post_url = 'action/action_doctor_procedure_template.php?do=add_template'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_doctor_procedure_template").html(result.trim());
        });

    });


    $(document).on("click", ".select_template_pre_op", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_oper_notes_template.php?do=pre_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val1 = $("#pre_op_order").val();
            var old_val = old_val1.trim();
            var new_val = result.trim();
            if (old_val == "") {
                $("#pre_op_order").val(old_val + new_val);
            } else {
                $("#pre_op_order").val(old_val + "\n" + new_val);
            }
        });

    });


    $(document).on("click", ".select_template_doctor_procedure", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_doctor_procedure_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val = $("#popup_notes").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#popup_notes").val(old_val + new_val);
            } else {
                $("#popup_notes").val(old_val + "\n" + new_val);
            }
        });

    });

    $(document).on("submit", "#new_doctor_procedure_form_add", function (e) {

        e.preventDefault();
        proceed = true;

        var tidp_title = $("#tidp_title").val();
        var popup_notes = $("#popup_notes").val();
        var tidp_date = $("#tidp_date").val();
        var tidp_time = $("#tidp_time").val();

        if (tidp_title == "") {
            alert("Please Enter Title.");
            $('#tidp_title').focus();
            return false;
        } else if (tidp_date == "") {
            alert("Please Enter Date.");
            $('#tidp_date').focus();
            return false;
        } else if ($('.add_procedure_tabbtn_preo.active').length > 0 && ($('input[name="pre_temp_check"]:checked').length > 0 && $("#pre_op_template_title").val() == "")) {
            alert("Please Enter Template Name");
            $('#pre_op_template_title').focus();
            return false;

        } else if ($('.add_procedure_tabbtn_on.active').length > 0 && ($('input[name="prosimp_notes_temp_check"]:checked').length > 0 && $("#popup_template_title").val() == "")) {
            alert("Please Enter Template Name");
            $('#popup_template_title').focus();
            return false;

        } else if ($('.add_procedure_tabbtn_po.active').length > 0 && ($('input[name="pop_temp_check"]:checked').length > 0 && $("#post_op_template_title").val() == "")) {
            alert("Please Enter Template Name");
            $('#post_op_template_title').focus();
            return false;

        }
        // else if (tidp_time == "") {
        //     alert("Please enter start time.");
        //     $('#tidp_time').focus();
        //     return false;
        // } 
        else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_edit_doctor_procedure').attr('disabled', 'disabled');
        $('.err_register').show();


        // $('#submit_edit_doctor_procedure').attr('disabled', 'disabled');
        // $('#submit_edit_doctor_procedure').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            // $("#tidp_title").val("");
            // $("#popup_notes").val("");

            // $('#modal_add_inp_doctor_procedure').modal('hide');
            // $('#submit_button_doctor_procedure_template').removeAttr('disabled');
            // $('.err_register').hide();

            // if ($('#table_imp_doctor_procedure .dataTables_empty').length) {

            //     $("#table_imp_doctor_procedure").html(result);

            // } else {
            //     $("#table_imp_doctor_procedure").prepend(result);
            // }

            // $("#new_doctor_procedure_form_add").trigger("reset");

            // $('#submit_edit_doctor_procedure').attr('disabled', false);
            // $('#submit_edit_doctor_procedure').show();
            // $(".err_inpregisterloader").attr("style", "display:none");
            location.reload();

        });

    });

    $(document).on("click", ".select_edit_template_post_op", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_oper_notes_template.php?do=post_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val1 = $("#edit_tidp_post_op_order").val();
            var old_val = old_val1.trim();
            var new_val = result.trim();
            if (old_val == "") {
                $("#edit_tidp_post_op_order").val(old_val + new_val);
            } else {
                $("#edit_tidp_post_op_order").val(old_val + "\n\n" + new_val);
            }
        });

    });

    $(document).on("click", ".select_edit_doctor_procedure", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_doctor_procedure').modal('show');

        var post_url = 'action/action_doctor_procedure_template.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tidp_id").val(result['tidp_id']);
            $("#edit_tidp_title").val(result['tidp_title']);
            $("#edit_tidp_notes").val(result['tidp_notes']);
            $("#edit_tidp_anaesthetist").val(result['tidp_anaesthetist']);
            $("#edit_tidp_date").val(result['tidp_date']);
            $("#edit_tidp_time").val(result['tidp_time']);
            $("#edit_tidp_end_time").val(result['tidp_end_time']);
            $("#edit_tidp_duration").val(result['tidp_duration']);

            $("#edit_tidp_pre_op_order").val(result['tidp_pre_op_order']);
            $("#edit_tidp_post_op_order").val(result['tidp_post_op_order']);

            $("#edit_tidp_anaesthetic_type").val(result['tidp_anaesthetic_type']);
            $("#edit_tidp_blood_lose").val(result['tidp_blood_lose']);

            $("#edit_tidp_um_id").val(result['created_by']);

            $("#edit_tidp_done_by").val(result['tidp_done_by']);

            // $("#ticnm_template_name").val("");
            // $("#ticnm_template_content").val("");

            // $("#pre_in_asses_notes_template").append(result);              
            //location.reload();

        });

    });

    $(document).on("click", ".select_edit_template_pre_op", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_oper_notes_template.php?do=pre_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val1 = $("#edit_tidp_pre_op_order").val();
            var old_val = old_val1.trim();
            var new_val = result.trim();
            if (old_val == "") {
                $("#edit_tidp_pre_op_order").val(old_val + new_val);
            } else {
                $("#edit_tidp_pre_op_order").val(old_val + "\n\n" + new_val);
            }
        });

    });

    $(document).on("click", ".select_template_edit_doctor_procedure", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_doctor_procedure_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val = $("#edit_tidp_notes").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#edit_tidp_notes").val(old_val + new_val);
            } else {
                $("#edit_tidp_notes").val(old_val + "\n\n" + new_val);
            }
        });

    });

    $(document).on("click", ".select_template_post_op", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_oper_notes_template.php?do=post_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val1 = $("#post_op_order").val();
            var old_val = old_val1.trim();
            var new_val = result.trim();
            if (old_val == "") {
                $("#post_op_order").val(old_val + new_val);
            } else {
                $("#post_op_order").val(old_val + "\n" + new_val);
            }
        });

    });

    $(document).on("submit", "#form_modal_edit_doctor_procedure", function (e) {

        e.preventDefault();
        proceed = true;

        var tidp_id = $("#edit_tidp_id").val();
        var edit_tidp_um_id = $("#edit_tidp_um_id").val();

        var edit_tidp_title = $("#edit_tidp_title").val();
        var edit_tidp_notes = $("#edit_tidp_notes").val();
        var edit_tidp_anaesthetist = $("#edit_tidp_anaesthetist").val();
        var edit_tidp_anaesthetic_type = $("#edit_tidp_anaesthetic_type").val();
        var edit_tidp_blood_lose = $("#edit_tidp_blood_lose").val();
        var edit_tidp_date = $("#edit_tidp_date").val();
        var edit_tidp_time = $("#edit_tidp_time").val();

        if (edit_tidp_title == "") {
            alert("Please Enter Title.");
            $('#edit_tidp_title').focus();
            return false;
        } else if (edit_tidp_date == "") {
            alert("Please Enter Date.");
            $('#edit_tidp_date').focus();
            return false;
        } else if ($('.edit_procedure_tabbtn_preo.active').length > 0 && ($('input[name="pre_temp_check"]:checked').length > 0 && $("#edit_pre_op_template_title").val() == "")) {
            alert("Please Enter Template Name");
            $('#edit_pre_op_template_title').focus();
            return false;

        } else if ($('.edit_procedure_tabbtn_on.active').length > 0 && ($('input[name="prosimp_notes_temp_check"]:checked').length > 0 && $("#edit_popup_template_title").val() == "")) {
            alert("Please Enter Template Name");
            $('#edit_popup_template_title').focus();
            return false;

        } else if ($('.edit_procedure_tabbtn_po.active').length > 0 && ($('input[name="pop_temp_check"]:checked').length > 0 && $("#edit_post_op_template_title").val() == "")) {
            alert("Please Enter Template Name");
            $('#edit_post_op_template_title').focus();
            return false;

        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_edit_doctor_procedure').attr('disabled', 'disabled');
        $('.edit_err_register').show();

        // $('#submit_edit_doctor_procedure').attr('disabled', 'disabled');
        // $('#submit_edit_doctor_procedure').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            // $("#tidp_title").val("");
            // $("#popup_notes").val("");

            // $('#modal_edit_doctor_procedure').modal('hide');
            // $('#submit_edit_doctor_procedure').removeAttr('disabled');
            // $('.edit_err_register').hide();

            // $("#table_tr_doctor_procedure_" + tidp_id).html(result.trim());

            // $("#form_modal_edit_doctor_procedure").trigger("reset");


            // $('#submit_edit_doctor_procedure').attr('disabled', false);
            // $('#submit_edit_doctor_procedure').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });

    });

    $(document).on("click", "#delete_doctor_procedure", function () {
        $('#modal_danger_doctor_procedure').modal('show');
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-username');

        $('#deltitlename').html(title);

        //var text = "Are you sure you want to delete <b>" + title + "</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        //$('.delete_usermaster_text').html(text);
        $('#delete_tidp_id').val(id);

    });

    $(document).on("click", "#delete_doctor_procedure_submit", function () {

        var delete_tidp_id = $("#delete_tidp_id").val();
        var post_url = 'action/action_doctor_procedure_template.php?do=delete'
        var datastring = 'delete_tidp_id=' + delete_tidp_id;

        $('#delete_doctor_procedure_submit').attr('disabled', 'disabled');
        $('#delete_doctor_procedure_submit').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_danger_doctor_procedure').modal('hide');
            // $('#table_tr_doctor_procedure_' + delete_tidp_id).remove();
            location.reload();

            $('#delete_doctor_procedure_submit').attr('disabled', false);
            $('#delete_doctor_procedure_submit').show();
            $(".err_inpregisterloader").attr("style", "display:none");

        });

    });

    $(document).on("click", ".clear_dis_hostory", function () {
        $("#tids_history").val("");
    });

    $(document).on("click", "#add_dis_hostory", function () {
        $('#modal_add_dis_hostory').modal('show');
    });

    $(document).on("keydown", "#form_modal_add_dis_hostory", function (e) {
        if (e.keyCode == 13 && !e.shiftKey) {
            $('#submit_button_dis_history').click(e);
            return false;
        }
    });


    $(document).on("click", "#submit_button_dis_history", function (e) {
        var tdhpm_template_name = $.trim($("#tdhpm_template_name").val());
        var tdhpm_template_content = $.trim($("#tdhpm_template_content").val());

        if (tdhpm_template_name == "") {
            $("#tdhpm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tdhpm_template_content == "") {
            $("#tdhpm_template_content").focus();
            alert("Please Enter History.");
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_history.php?do=add'

        $('#submit_button_dis_history').attr('disabled', 'disabled');
        $('#submit_button_dis_history').hide()
        $(".err_inpregisterloader_hc").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdhpm_template_name: tdhpm_template_name,
                tdhpm_template_content: tdhpm_template_content,
            },
        }).done(function (result) {

            ////console.log(result);
            $('#modal_add_dis_hostory').modal('hide');

            $("#tdhpm_template_name").val("");
            $("#tdhpm_template_content").val("");
            
            var old_val = $("#tids_history").val();
            var new_val = tdhpm_template_content;
            if (old_val == "") {
                $("#tids_history").val(old_val + new_val);
            } else {
                $("#tids_history").val(old_val + "\n" + new_val);
            }


            $("#pre_dis_history_template").prepend(result);
            //location.reload();

            // var old_val = $("#tids_history").val();
            // var new_val = tdhpm_template_content.trim();
            // if (old_val == "") {
            //     $("#tids_history").val(old_val + new_val);
            // } else {
            //     $("#tids_history").val(old_val + "\n" + new_val);
            // }

            $('#submit_button_dis_history').attr('disabled', false);
            $('#submit_button_dis_history').show();
            $(".err_inpregisterloader_hc").attr("style", "display:none");


        });

    });

    $(document).on("click", ".select_template_dis_history", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_history.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_history").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tids_history").val(old_val + new_val);
            } else {
                $("#tids_history").val(old_val + "\n" + new_val);
            }

            $(".auto_tids_history").animate({
                scrollTop: $('.auto_tids_history').prop("scrollHeight")
            }, 800);
        });

    });

    $(document).on("click", ".clear_dis_procedure", function () {
        $("#tids_procedure").val("");
    });

    $(document).on("click", ".select_template_dis_procedure", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_procedure.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_procedure").val();
            var new_val = result.trim();
            var splitted = new_val.split("@");
            var title = splitted[0];
            var notes = splitted[1];
            var done_by = splitted[2];
            var date = splitted[3];
            var time = splitted[4];
            if (splitted[5] == '-') {
                var anaesthetist = "";
            } else {
                var anaesthetist = splitted[5];
            }
            if (splitted[6] == '-') {
                var anaesthesia = "";
            } else {
                var anaesthesia = " under " + splitted[6] + " given by ";
            }
            if (splitted[7] == '-') {
                var bloodloss = "";
            } else {
                var bloodloss = "\n \nEstimated blood loss was " + splitted[7];
            }
            if (splitted[1] == '-') {
                var operating_notes = "";
            } else {
                var operating_notes = "\n \nOperative/Procedure notes: \n" + splitted[1];
            }

            var final_value = title + " done by " + done_by + " on " + date + anaesthesia + anaesthetist + "." + operating_notes + bloodloss;


            if (old_val == "") {
                $("#tids_procedure").val(old_val + final_value);
            } else {
                $("#tids_procedure").val(old_val + "\n\n" + final_value);
            }

            $(".auto_tids_procedure").animate({
                scrollTop: $('.auto_tids_procedure').prop("scrollHeight")
            }, 800);
        });

    });

    $(document).on("click", ".clear_dis_radiology_report", function () {

        $("#tids_radiology_report").val("");

    });

    $(document).on("click", ".select_template_dis_radiology_report", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_radiology_report.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_radiology_report").val();
            var new_val = result.trim();
            var splitted = new_val.split("@");
            var title = splitted[0];
            var rediologie = splitted[1];
            var notes = splitted[2];
            var done_by = splitted[3];
            var date = splitted[4];
            var time = splitted[5];

            var final_value = title + "\n" + rediologie + "\n" + notes + "\n" + done_by + "\n" + date + "\n" + time;

            if (old_val == "") {
                $("#tids_radiology_report").val(old_val + final_value);
            } else {
                $("#tids_radiology_report").val(old_val + "\n\n" + final_value);
            }

            $(".auto_tids_radiology_report").animate({
                scrollTop: $('.auto_tids_radiology_report').prop("scrollHeight")
            }, 800);

        });

    });

    $(document).on("click", ".clear_dis_condition", function () {

        $("#tids_condition").val("");

    });

    $(document).on("click", ".select_template_dis_condition", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_condition.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_condition").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tids_condition").val(old_val + new_val);
            } else {
                $("#tids_condition").val(old_val + "\n" + new_val);
            }

            $(".auto_tids_condition").animate({
                scrollTop: $('.auto_tids_condition').prop("scrollHeight")
            }, 800);

        });

    });

    $(document).on("click", "#add_dis_condition", function () {
        $('#modal_add_dis_condition').modal('show');
    });

    $(document).on("keydown", "#form_modal_add_dis_condition", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_dis_condition').click(e);
            return false;
        }
    });

    $(document).on("click", "#submit_button_dis_condition", function (e) {
        var tdcm_template_name = $.trim($("#tdcm_template_name").val());
        var tdcm_template_content = $.trim($("#tdcm_template_content").val());

        if (tdcm_template_name == "") {
            $("#tdcm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tdcm_template_content == "") {
            $("#tdcm_template_content").focus();
            alert("Please Enter History.");
            return false;
        } else {

        }

        $('#submit_button_dis_condition').attr('disabled', 'disabled');
        $('#submit_button_dis_condition').hide()
        $(".err_inpregisterloader_dis_condition").attr("style", "display:block");

        var post_url = 'action/action_case_template_dis_condition.php?do=add'
        var datastring = 'tdcm_template_name=' + tdcm_template_name + "&tdcm_template_content=" + tdcm_template_content;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdcm_template_name: tdcm_template_name,
                tdcm_template_content: tdcm_template_content,
            },
        }).done(function (result) {

            ////console.log(result);
            $('#modal_add_dis_condition').modal('hide');

            $("#tdcm_template_name").val("");
            $("#tdcm_template_content").val("");

            $("#pre_dis_condition_template").prepend(result);
            //location.reload();

            // var old_val = $("#tids_condition").val();
            // var new_val = tdcm_template_content.trim();
            // if (old_val == "") {
            //     $("#tids_condition").val(old_val + new_val);
            // } else {
            //     $("#tids_condition").val(old_val + "\n" + new_val);
            // }

            $('#submit_button_dis_condition').attr('disabled', false);
            $('#submit_button_dis_condition').show();
            $(".err_inpregisterloader_dis_condition").attr("style", "display:none");



        });

    });

    $(document).on("click", "#submit_button_popup_lab_invs_parameter_box_inpatient", function () {

        var arr = [];

        $("#pre_cash_casemanage_lab_invs_parameter_selected").find('.bg-tr').each(function () {

            var MyText = $(this).attr('data-tclpid').trim();
            arr.push(MyText);

        });

        new_val = arr.join();

        if (new_val == "") {
            alert("Please Select Lab Parameter");
            return false;
        } else {

        }

        var post_url = 'action/action_case_investigation.php?do=show_grp'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                new_val: new_val
            },
        }).done(function (result) {

            //console.log(result);

            var old_val = $("#tids_investigation").val();
            if (old_val == "") {
                $("#tids_investigation").val(old_val + result.trim());
            } else {
                $("#tids_investigation").val(old_val + "\n" + result.trim());
            }

            $('#modal_lab_parameter_inves_template_box').modal('hide');
            $("#pre_cash_casemanage_lab_invs_parameter_template").html("");
            $("#pre_cash_casemanage_lab_invs_parameter_selected").html("");
            $("#select_tclt_id").val(0);
            $("#edit_text_case_inv_lab_title").val("");
            $("#edit_text_case_inv_lab_parametre").val("");



        });

    });

    $(document).on("click", ".clear_dis_advice", function () {

        $("#tids_advice").val("");

    });

    $(document).on("click", "#add_dis_advice", function () {
        $('#modal_add_dis_advice').modal('show');
    });

    $(document).on("keydown", "#form_modal_add_dis_advice", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_dis_advice').click(e);
            return false;
        }
    });

    $(document).on("click", "#submit_button_dis_advice", function (e) {

        var tdam_template_name = $.trim($("#tdam_template_name").val());
        var tdam_template_content = $.trim($("#tdam_template_content").val());

        if (tdam_template_name == "") {
            $("#tdam_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tdam_template_name == "") {
            $("#tdam_template_content").focus();
            alert("Please Enter Content.");
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_advice.php?do=add'
        var datastring = 'tdam_template_name=' + tdam_template_name + "&tdam_template_content=" + tdam_template_content;
        //console.log(datastring);

        $('#submit_button_dis_advice').attr('disabled', 'disabled');
        $('#submit_button_dis_advice').hide()
        $(".err_inpregisterloader_dis_advice").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdam_template_name: tdam_template_name,
                tdam_template_content: tdam_template_content,
            },
        }).done(function (result) {

            ////console.log(result);
            $('#modal_add_dis_advice').modal('hide');

            $("#tdam_template_name").val("");
            $("#tdam_template_content").val("");

            $("#pre_dis_advice_template").prepend(result);
            //location.reload();

            // var old_val = $("#tids_advice").val();
            // var new_val = tdam_template_content.trim();
            // if (old_val == "") {
            //     $("#tids_advice").val(old_val + new_val);
            // } else {
            //     $("#tids_advice").val(old_val + "\n" + new_val);
            // }

            $('#submit_button_dis_advice').attr('disabled', false);
            $('#submit_button_dis_advice').show();
            $(".err_inpregisterloader_dis_advice").attr("style", "display:none");



        });

    });

    $(document).on("click", ".select_template_dis_advice", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_advice.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_advice").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tids_advice").val(old_val + new_val);
            } else {
                $("#tids_advice").val(old_val + "\n" + new_val);
            }

            $(".auto_tids_advice").animate({
                scrollTop: $('.auto_tids_advice').prop("scrollHeight")
            }, 800);

        });

    });

    $(document).on("click", ".clear_dis_when_obt_urgent_care", function () {

        $("#tids_when_obt_urgent_care").val("");

    });

    $(document).on("click", ".select_template_dis_when_obt_urgent_care", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_when_obt_urgent_care.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_when_obt_urgent_care").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tids_when_obt_urgent_care").val(old_val + new_val);
            } else {
                $("#tids_when_obt_urgent_care").val(old_val + "\n" + new_val);
            }

            $(".auto_tids_when_obt_urgent_care").animate({
                scrollTop: $('.auto_tids_when_obt_urgent_care').prop("scrollHeight")
            }, 800);

        });

    });

    $(document).on("click", "#add_dis_when_obt_urgent_care", function () {
        $('#modal_add_dis_when_obt_urgent_care').modal('show');
    });

    $(document).on("keydown", "#form_modal_add_dis_when_obt_urgent_care", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_dis_when_obt_urgent_care').click(e);
            return false;
        }
    });

    $(document).on("click", "#submit_button_dis_when_obt_urgent_care", function (e) {

        var twoucm_template_name = $.trim($("#twoucm_template_name").val());
        var twoucm_template_content = $.trim($("#twoucm_template_content").val());

        if (twoucm_template_name == "") {
            $("#twoucm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (twoucm_template_name == "") {
            $("#twoucm_template_content").focus();
            alert("Please Enter Content.");
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_when_obt_urgent_care.php?do=add'
        var datastring = 'twoucm_template_name=' + twoucm_template_name + "&twoucm_template_content=" + twoucm_template_content;
        //console.log(datastring);

        $('#submit_button_dis_when_obt_urgent_care').attr('disabled', 'disabled');
        $('#submit_button_dis_when_obt_urgent_care').hide()
        $(".err_inpregisterloader_dis_when_to_obtain_uc").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                twoucm_template_name: twoucm_template_name,
                twoucm_template_content: twoucm_template_content,
            },
        }).done(function (result) {

            ////console.log(result);
            $('#modal_add_dis_when_obt_urgent_care').modal('hide');

            $("#twoucm_template_name").val("");
            $("#twoucm_template_content").val("");

            $("#pre_dis_when_obt_urgent_care_template").prepend(result);
            //location.reload();

            // var old_val = $("#tids_when_obt_urgent_care").val();
            // var new_val = twoucm_template_content.trim();
            // if (old_val == "") {
            //     $("#tids_when_obt_urgent_care").val(old_val + new_val);
            // } else {
            //     $("#tids_when_obt_urgent_care").val(old_val + "\n" + new_val);
            // }

            $('#submit_button_dis_when_obt_urgent_care').attr('disabled', false);
            $('#submit_button_dis_when_obt_urgent_care').show();
            $(".err_inpregisterloader_dis_when_to_obtain_uc").attr("style", "display:none");



        });

    });

    $(document).on("click", ".clear_dis_how_obt_urgent_care", function () {

        $("#tids_how_obt_urgent_care").val("");

    });

    $(document).on("click", "#add_dis_how_obt_urgent_care", function () {
        $('#modal_add_dis_how_obt_urgent_care').modal('show');
    });

    $(document).on("keydown", "#modal_add_dis_how_obt_urgent_care", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_dis_how_obt_urgent_care').click(e);
            return false;
        }
    });

    $(document).on("click", "#submit_button_dis_how_obt_urgent_care", function (e) {

        var thoucm_template_name = $.trim($("#thoucm_template_name").val());
        var thoucm_template_content = $.trim($("#thoucm_template_content").val());

        if (thoucm_template_name == "") {
            $("#thoucm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (thoucm_template_content == "") {
            $("#thoucm_template_content").focus();
            alert("Please Enter Content.");
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_how_obt_urgent_care.php?do=add'
        var datastring = 'thoucm_template_name=' + thoucm_template_name + "&thoucm_template_content=" + thoucm_template_content;
        //console.log(datastring);


        $('#submit_button_dis_how_obt_urgent_care').attr('disabled', 'disabled');
        $('#submit_button_dis_how_obt_urgent_care').hide()
        $(".err_inpregisterloader_dis_how_to_obtain_uc").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                thoucm_template_name: thoucm_template_name,
                thoucm_template_content: thoucm_template_content,
            },
        }).done(function (result) {

            ////console.log(result);
            $('#modal_add_dis_how_obt_urgent_care').modal('hide');

            $("#thoucm_template_name").val("");
            $("#thoucm_template_content").val("");

            $("#pre_dis_how_obt_urgent_care_template").prepend(result);
            //location.reload();

            // var old_val = $("#tids_how_obt_urgent_care").val();
            // var new_val = thoucm_template_content.trim();
            // if (old_val == "") {
            //     $("#tids_how_obt_urgent_care").val(old_val + new_val);
            // } else {
            //     $("#tids_how_obt_urgent_care").val(old_val + "\n" + new_val);
            // }


            $('#submit_button_dis_how_obt_urgent_care').attr('disabled', false);
            $('#submit_button_dis_how_obt_urgent_care').show();
            $(".err_inpregisterloader_dis_how_to_obtain_uc").attr("style", "display:none");


        });

    });

    $(document).on("click", ".select_template_dis_how_obt_urgent_care", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_dis_how_obt_urgent_care.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var old_val = $("#tids_how_obt_urgent_care").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tids_how_obt_urgent_care").val(old_val + new_val);
            } else {
                $("#tids_how_obt_urgent_care").val(old_val + "\n" + new_val);
            }

            $(".auto_tids_how_obt_urgent_care").animate({
                scrollTop: $('.auto_tids_how_obt_urgent_care').prop("scrollHeight")
            }, 800);

        });

    });

    $(document).on("submit", "#new_inpat_dis_summary_form_add", function (e) {

        e.preventDefault();
        proceed = true;


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_inpatient_dis_summary').attr('disabled', 'disabled');
        $(".overlay-popup").show();

        $('#submit_button_inpatient_dis_summary').attr('disabled', 'disabled');
        $('#submit_button_inpatient_dis_summary').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $(".overlay-popup").hide();
            $("#tids_id").val(result['tids_id']);
            var status = result['tids_status'];
            // $("#status_message").show();
            $("#status_message").modal('show');

            $('#submit_button_inpatient_dis_summary').attr('disabled', false);
            $('#submit_button_inpatient_dis_summary').show();
            $(".err_inpregisterloader").attr("style", "display:none");



        });

    });


    $(document).on("change", ".change_days_diet", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=diet_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-diet').scroll(function () {

        if ($('.load-more-diet').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_diet_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.diet_pagination_data').append(response);
                            $('.diet_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("change", ".change_days_food_diary", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=food_diary_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-food-diary').scroll(function () {

        if ($('.load-more-food-diary').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_food_diary_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.food_diary_pagination_data').append(response);
                            $('.food_diary_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("change", "#all_days_in", function () {
        var val = $("#all_days_in").val();
        var treat_days = $("#treat_days").val();
        var all_duration_type = $("#all_duration_type").val();

        $(".tids_tmm_days").val(val);


        if (all_duration_type == "day(s)") {

            var daysval = val;

        } else if (all_duration_type == "week(s)") {

            var daysval = val * 7;

        } else if (all_duration_type == "month(s)") {

            var daysval = val * 28;

        } else if (all_duration_type == "year(s)") {

            var daysval = val * 365;

        } else {
            var daysval = val;
        }

        var days = parseInt(daysval) + parseInt(treat_days);
        ////console.log(days);
        var n = days; //number of days to add. 
        var today = new Date(); //Today's Date
        var requiredDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + n);
        //console.log(requiredDate);
        var dd = requiredDate.getDate();
        var mm = (requiredDate.getMonth() + 1).toString().padStart(2, "0");
        var y = requiredDate.getFullYear();




        var someFormattedDate = dd + '/' + mm + '/' + y;
        var date_formate = y + '-' + mm + '-' + dd;
        // var fdate =  $('#fdate').val(someFormattedDate);
        //console.log(date_formate);

        //$('#fdate').val(date_formate);


        // var post_url = 'action/action_check_followup_date_availablity.php'
        // var datastring = 'fdate=' + someFormattedDate + '&treat_days=' + val;
        // $.ajax({ //ajax form submit
        //     type: "POST",
        //     url: post_url,
        //     data: datastring
        // }).done(function(result) {
        //     console.log(result);
        //     $('#fdate').val(result); 
        // });

        /**/

    });

    $(document).on("change", "#all_duration_type_in", function () {

        var all_duration_type = $("#all_duration_type_in").val();
        $(".all_tids_tmm_duration_type").val(all_duration_type);

        var val = $("#all_days_in").val();
        var treat_days = $("#treat_days").val();

        if (all_duration_type == "day(s)") {

            var daysval = val;

        } else if (all_duration_type == "week(s)") {

            var daysval = val * 7;

        } else if (all_duration_type == "month(s)") {

            var daysval = val * 28;

        } else if (all_duration_type == "year(s)") {

            var daysval = val * 365;

        } else {
            var daysval = val;
        }

        var days = parseInt(daysval) + parseInt(treat_days);
        ////console.log(days);
        var n = days; //number of days to add. 
        var today = new Date(); //Today's Date
        var requiredDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + n);
        //console.log(requiredDate);
        var dd = requiredDate.getDate();
        var mm = requiredDate.getMonth() + 1;
        var y = requiredDate.getFullYear();

        var someFormattedDate = dd + '/' + mm + '/' + y;
        // var fdate =  $('#fdate').val(someFormattedDate);

        //console.log(someFormattedDate);
        //$('#fdate').val(someFormattedDate);

    });

    $(document).on("change", ".department_filter_id_inp", function () {
        var dp_id = $(this).val();
        if (dp_id == 0) {
            var dp_id_link = "";
        } else {
            var dp_id_link = "&dp_id=" + dp_id;
        }
        var Link = $(".base_url_practice").val();
        var pm_pid = $("#pm_pid").val();
        var ip_id = $("#ip_id").val();
        window.location.href = Link + "inpatient/inpatient_op_consultants.php?id=" + pm_pid + "&ip_id=" + ip_id + dp_id_link;

    });

    $(document).on("change", ".doctor_filter_id_inp", function () {
        var doc_id = $(this).val();
        var dp_id = $(this).attr("data-dp_id");
        if (dp_id == 0) {
            var dp_id_link = "";
            var doc_id_link = "";
        } else {
            var dp_id_link = "&dp_id=" + dp_id;
        }
        if (doc_id == 0) {
            var doc_id_link = "";
        } else {
            var doc_id_link = "&doc_id=" + doc_id;
        }
        var pm_pid = $("#pm_pid").val();
        var ip_id = $("#ip_id").val();
        var Link = $(".base_url_practice").val();
        window.location.href = Link + "inpatient/inpatient_op_consultants.php?id=" + pm_pid + "&ip_id=" + ip_id + dp_id_link + doc_id_link;
    });

    $(document).on("click", ".save_medicine_frequancy_inpatient", function (e) {

        var id = $(this).attr('data-id');

        var med_rand_id = $(this).attr('data-med_rand_id');
        var med_rand_id_concat = '_' + med_rand_id;

        var save_templete_morning = $('.save_templete_morning_' + id + med_rand_id_concat).val();
        var save_templete_afternoon = $('.save_templete_afternoon_' + id + med_rand_id_concat).val();
        var save_templete_evening = $('.save_templete_evening_' + id + med_rand_id_concat).val();
        var save_templete_night = $('.save_templete_night_' + id + med_rand_id_concat).val();

        var post_url = 'action/action_case_add_medicine.php?do=edit_medicine_freq'
        var datastring = 'tmm_id=' + id + "&save_templete_morning=" + save_templete_morning + "&save_templete_afternoon=" + save_templete_afternoon + "&save_templete_evening=" + save_templete_evening + "&save_templete_night=" + save_templete_night;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            // $('#li_case_lab_inv_title_' + id).remove();

        });

    });

    $(document).on("click", ".case_select_medicine_taper_inpatient", function () {
        var id = $(this).attr('data-medicineid');

        var taper = $(this).attr('data-taper');
        var ranid = $(this).attr('data-ranid');

        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();
        var decode_pm_pid = $("#decode_pm_pid").val();

        var post_url = 'action/action_case_add_medicine.php?do=template&last_weight=' + last_weight + '&last_bsa=' + last_bsa + "&decode_pm_pid=" + decode_pm_pid;
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $(result).insertAfter('#medicine_name_' + ranid);
            $(result).insertAfter('#medicine_template_' + ranid);

            //$( ".medicine_case_name" ).sortable();

            $.CustomCashsheetPredictiveJs();

        });
    });

    $(document).on("click", "#edit_histroy_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_histroy_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_history_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#his_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#form_modal_edit_histroy_template", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#submit_button_edit_histroy_template').click();
            return false;
        }
    });


    $(document).on("click", "#submit_button_edit_histroy_template", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#his_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        var post_url = 'action/action_history_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_histroy_template').attr('disabled', 'disabled');
        $('#submit_button_edit_histroy_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {

            $('#modal_edit_histroy_template').modal('hide');
            //$('#his_' + temp_id).html(result);

            $('#submit_button_edit_histroy_template').attr('disabled', false);
            $('#submit_button_edit_histroy_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });

    $(document).on("click", "#add_new_template", function () {
        ////console.log("Yes");
        $('#modal_add_template').modal('show');
    });

    $(document).on("keydown", "#history_master_setting", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#history_master_setting').submit();
            return false;
        }
    });

    $("#history_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var hm_name = $("#hm_name").val();
        var hm_content = $("#hm_content").val();
        //alert(edit_ward_bed);
        if (hm_name == "") {
            $("#hm_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (hm_content == "") {
            $("#hm_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();


        $('#submit_button_history_master').attr('disabled', 'disabled');
        $('#submit_button_history_master').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');

            //var formId = $(this).closest("form").attr('id'); 
            $("#history_master_setting").trigger("reset");

            // if ($('#histroy .dataTables_empty').length) {
            //     $("#histroy").html(result.trim());
            // } else {
            //     $("#histroy").prepend(result.trim());
            // }

            $('#submit_button_history_master').attr('disabled', false);
            $('#submit_button_history_master').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });
    });

    $(document).on("click", "#delete_histroy_template", function () {
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_histroy_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_history_template_text').html(templatename);
        $("#delete_tihm_id").val(id);

    });

    $(document).on("click", "#submit_button_delete_histroy_template", function () {


        var id = $("#delete_tihm_id").val();
        var post_url = 'action/action_history_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_histroy_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_histroy_template').attr("style", "display:none");
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            location.reload();
            // $('#modal_delete_histroy_template').modal('hide');
            // $('#his_' + id).remove();

            // $('#submit_button_delete_histroy_template').attr('disabled', false);
            // $('#submit_button_delete_histroy_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

        });
    });

    $(document).on("keydown", "#examination_master_setting", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#examination_master_setting').submit();
            return false;
        }
    });

    $("#examination_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var em_name = $("#em_name").val();
        var em_content = $("#em_content").val();
        //alert(edit_ward_bed);
        if (em_name == "") {
            $("#em_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (em_content == "") {
            $("#em_content").focus();
            alert("Please Enter content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();


        $('#submit_button_examination_master_setting').attr('disabled', 'disabled');
        $('#submit_button_examination_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $("#examination_master_setting").trigger("reset");
            // if ($('#examination .dataTables_empty').length) {
            //     $("#examination").html(result.trim());
            // } else {
            //     $("#examination").prepend(result.trim());
            // }

            $('#submit_button_examination_master_setting').attr('disabled', false);
            $('#submit_button_examination_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();




        });
    });

    $(document).on("click", "#edit_exam_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_exam_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_examination_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#et_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#form_modal_edit_exam_template", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#submit_button_edit_exam_template').click();
            return false;
        }
    });

    $(document).on("click", "#submit_button_edit_exam_template", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#et_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter name.");
            return false;
        }

        var post_url = 'action/action_examination_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_exam_template').attr('disabled', 'disabled');
        $('#submit_button_edit_exam_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {

            $('#modal_edit_exam_template').modal('hide');
            //$('#exam_' + temp_id).html(result);

            $('#submit_button_edit_exam_template').attr('disabled', false);
            $('#submit_button_edit_exam_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });
    });

    $(document).on("click", "#delete_exam_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');

        $('#modal_delete_exam_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";

        $('.delete_exam_template_text').html(templatename);
        $("#delete_tiem_id").val(id);

    });

    $(document).on("click", "#submit_button_delete_exam_template", function () {

        var id = $("#delete_tiem_id").val();
        var post_url = 'action/action_examination_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_exam_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_exam_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            location.reload();
            // $('#modal_delete_exam_template').modal('hide');
            // $('#exam_' + id).remove();

            // $('#submit_button_delete_exam_template').attr('disabled', false);
            // $('#submit_button_delete_exam_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

        });
    });

    $(document).on("keydown", "#remark_master_setting", function (e) {

        if (e.keyCode == 13) {
            $('#remark_master_setting').submit();
            return false;
        }
    });

    $("#remark_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var rm_name = $("#rm_name").val();
        var rm_content = $("#rm_content").val();
        //alert(edit_ward_bed);
        if (rm_name == "") {
            $("#rm_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (rm_content == "") {
            $("#rm_content").focus();
            alert("Please Enter content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();

        $('#submit_button_remark_master_setting').attr('disabled', 'disabled');
        $('#submit_button_remark_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $("#remark_master_setting").trigger("reset");
            // if ($('#remarks .dataTables_empty').length) {
            //     $("#remarks").html(result.trim());
            // } else {
            //     $("#remarks").prepend(result.trim());
            // }

            $('#submit_button_remark_master_setting').attr('disabled', false);
            $('#submit_button_remark_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });
    });

    $(document).on("click", "#edit_remark_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_remark_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_remark_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#rm_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#form_modal_edit_remark_template", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_edit_remark_master_setting').click();
            return false;
        }
    });


    $(document).on("click", "#submit_button_edit_remark_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#rm_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        var post_url = 'action/action_remark_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_remark_master_setting').attr('disabled', 'disabled');
        $('#submit_button_edit_remark_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            $('#modal_edit_remark_template').modal('hide');
            //$('#rem_' + temp_id).html(result);

            $('#submit_button_edit_remark_master_setting').attr('disabled', false);
            $('#submit_button_edit_remark_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });

    $(document).on("click", "#delete_remark_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_remark_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_remark_template_text').html(templatename);
        $("#delete_tirm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_remark_template", function () {

        var id = $("#delete_tirm_id").val();
        var post_url = 'action/action_remark_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_remark_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_remark_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_remark_template').modal('hide');
            // $('#rem_' + id).remove();

            // $('#submit_button_delete_remark_template').attr('disabled', false);
            // $('#submit_button_delete_remark_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });

    $(document).on("click", "#add_new_setting_dis_procedure", function () {
        $('#modal_add_template').modal('show');
    });

    $(document).on("keydown", "#dis_procedure_master_setting", function (e) {

        if (e.keyCode == 13) {
            $('#dis_procedure_master_setting').submit();
            return false;
        }
    });

    $("#dis_procedure_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var dpm_name = $("#dpm_name").val();
        var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (dpm_name == "") {
            $("#dpm_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (dpm_content == "") {
            $("#dpm_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();

        $('#submit_button_dis_procedure_master_setting').attr('disabled', 'disabled');

        $('#submit_button_dis_procedure_master_setting').attr('disabled', 'disabled');
        $('#submit_button_dis_procedure_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $('#submit_button_dis_procedure_master_setting').removeAttr('disabled');
            $("#dis_procedure_master_setting").trigger("reset");
            // if ($('#discharge_procedure .dataTables_empty').length) {
            //     $("#discharge_procedure").html(result.trim());
            // } else {
            //     $("#discharge_procedure").prepend(result.trim());
            // }

            $('#submit_button_dis_procedure_master_setting').attr('disabled', false);
            $('#submit_button_dis_procedure_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });

    $(document).on("click", "#edit_dis_procedure_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_procedure_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_procedure_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#dpm_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#form_modal_edit_dis_procedure_template", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_edit_dis_procedure_master_setting').click();
            return false;
        }
    });

    $(document).on("click", "#submit_button_edit_dis_procedure_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#dpm_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        var post_url = 'action/action_dis_procedure_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_dis_procedure_master_setting').attr('disabled', 'disabled');
        $('#submit_button_edit_dis_procedure_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            $('#modal_edit_dis_procedure_template').modal('hide');
            //$('#dis_pro_' + temp_id).html(result);

            $('#submit_button_edit_dis_procedure_master_setting').attr('disabled', false);
            $('#submit_button_edit_dis_procedure_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });

    $(document).on("click", "#delete_dis_procedure_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_procedure_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_procedure_template_text').html(templatename);
        $("#delete_tdppm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_procedure_template", function () {

        var id = $("#delete_tdppm_id").val();
        var post_url = 'action/action_dis_procedure_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_dis_procedure_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_procedure_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_procedure_template').modal('hide');
            // $('#dis_pro_' + id).remove();

            // $('#submit_button_delete_dis_procedure_template').attr('disabled', false);
            // $('#submit_button_delete_dis_procedure_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");
            location.reload();

        });

    });

    $(document).on("change", ".select_inpatient_settings_dropdowan", function () {
        var redirect_page = $(this).val();
        window.location.href = redirect_page;
    });

    $(document).on("click", "#add_new_setting_dis_radiology_report", function () {
        $('#modal_add_template').modal('show');
    });

    $(document).on("keydown", "#dis_radiology_report_master_setting", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_dis_radiology_report_master_setting').click();
            return false;
        }
    });

    $("#dis_radiology_report_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var drrm_name = $("#drrm_name").val();
        var drrm_content = $("#drrm_content").val();
        //alert(edit_ward_bed);
        if (drrm_name == "") {
            $("#drrm_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (drrm_content == "") {
            $("#drrm_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        // $('.err_register_new').show();

        $('#submit_button_dis_radiology_report_master_setting').attr('disabled', 'disabled');
        // $('#submit_button_dis_radiology_report_master_setting').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            // $("#modal_add_template").modal('hide');
            // //$("#discharge_radiology_report").append(result);

            // $('#submit_button_dis_radiology_report_master_setting').attr('disabled', false);
            // $('#submit_button_dis_radiology_report_master_setting').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });
    });

    $(document).on("click", "#edit_dis_radiology_report_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_radiology_report_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_radiology_report_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#drrm_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#modal_edit_dis_radiology_report_template_edit", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_edit_dis_radiology_report_master_setting').click();
            return false;
        }
    });

    $(document).on("click", "#submit_button_edit_dis_radiology_report_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#drrm_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            alert("Please enter name.");
            return false;
        }

        var post_url = 'action/action_dis_radiology_report_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_dis_radiology_report_master_setting').attr('disabled', 'disabled');
        $('#submit_button_edit_dis_radiology_report_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            $('#modal_edit_dis_radiology_report_template').modal('hide');
            //$('#rem_' + temp_id).html(result);

            $('#submit_button_edit_dis_radiology_report_master_setting').attr('disabled', false);
            $('#submit_button_edit_dis_radiology_report_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });

    $(document).on("click", "#delete_dis_radiology_report_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_radiology_report_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_radiology_report_template_text').html(templatename);
        $("#delete_tdrrm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_radiology_report_template", function () {

        var id = $("#delete_tdrrm_id").val();
        var post_url = 'action/action_dis_radiology_report_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_dis_radiology_report_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_radiology_report_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_radiology_report_template').modal('hide');
            // $('#rem_' + id).remove();

            // $('#submit_button_delete_dis_radiology_report_template').attr('disabled', false);
            // $('#submit_button_delete_dis_radiology_report_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");
            location.reload();  

        });

    });

    $(document).on("change", ".change_sleep_table", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=sleep_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-sleep').scroll(function () {

        if ($('.load-more-sleep').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_sleep_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.sleep_pagination_data').append(response);
                            $('.sleep_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("change", ".change_water_table", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=water_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-water').scroll(function () {

        if ($('.load-more-water').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_water_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.water_pagination_data').append(response);
                            $('.water_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });


    $(document).on("click", "#add_new_setting_dis_history_present", function () {
        $('#modal_add_template').modal('show');
    });

    $(document).on("keydown", "#dis_history_present_master_setting", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#dis_history_present_master_setting').submit();
            return false;
        }
    });

    $("#dis_history_present_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var dhpm_name = $("#dhpm_name").val();
        var dhpm_content_add = $("#dhpm_content_add").val();
        // alert(dhpm_content);
        if (dhpm_name == "") {
            $("#dhpm_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        
        if (dhpm_content_add == "") {
            // ("#dhpm_content_add").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();


        $('#submit_button_dis_history_present_master_setting').attr('disabled', 'disabled');
        $('#submit_button_dis_history_present_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $("#dis_history_present_master_setting").trigger("reset");
            // if ($('#discharge_history_present .dataTables_empty').length) {
            //     $("#discharge_history_present").html(result.trim());
            // } else {
            //     $("#discharge_history_present").prepend(result.trim());
            // }

            $('#submit_button_dis_history_present_master_setting').attr('disabled', false);
            $('#submit_button_dis_history_present_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });


    $(document).on("click", "#edit_dis_history_present_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_history_present_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_history_present_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#dhpm_id").val(splitted[2]);

            }
        });
    });


    $(document).on("click", "#submit_button_edit_dis_history_present_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#dhpm_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        if (edit_temp_desc == "") {
            // ("#dhpm_content_add").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = 'action/action_dis_history_present_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_dis_history_present_master_setting').attr('disabled', 'disabled');
        $('#submit_button_edit_dis_history_present_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            $('#modal_edit_dis_history_present_template').modal('hide');
            //$('#dis_his_pre_' + temp_id).html(result);

            $('#submit_button_edit_dis_history_present_master_setting').attr('disabled', false);
            $('#submit_button_edit_dis_history_present_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });
    });

    $(document).on("click", "#delete_dis_history_present_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_history_present_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_history_present_template_text').html(templatename);
        $("#delete_tdhpm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_history_present_template", function () {

        var id = $("#delete_tdhpm_id").val();
        var post_url = 'action/action_dis_history_present_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $('#submit_button_delete_dis_history_present_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_history_present_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_history_present_template').modal('hide');
            // $('#dis_his_pre_' + id).remove();

            // $('#submit_button_delete_dis_history_present_template').attr('disabled', false);
            // $('#submit_button_delete_dis_history_present_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");
            location.reload();

        });

    });

    $(document).on("click", "#add_new_setting_dis_condition", function () {
        $('#modal_add_template').modal('show');
    });

    $(document).on("keydown", "#dis_condition_master_setting", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#dis_condition_master_setting').submit();
            return false;
        }
    });


    $("#dis_condition_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tdcm_name = $("#dcm_name").val();
        var tdcm_content = $("#dcm_content").val();
        //alert(edit_ward_bed);
        if (tdcm_name == "") {
            $("#dcm_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (tdcm_content == "") {
            $("#dcm_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();

        $('#submit_button_dis_condition_master_setting').attr('disabled', 'disabled');
        $('#submit_button_dis_condition_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $("#dis_condition_master_setting").trigger("reset");
            // if ($('#discharge_condition .dataTables_empty').length) {
            //     $("#discharge_condition").html(result.trim());
            // } else {
            //     $("#discharge_condition").prepend(result.trim());
            // }

            $('#submit_button_dis_condition_master_setting').attr('disabled', false);
            $('#submit_button_dis_condition_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });

    $(document).on("keydown", "#form_modal_edit_dis_condition_template", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#submit_button_edit_dis_condition_master_setting').click();
            return false;
        }
    });


    $(document).on("click", "#edit_dis_condition_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_condition_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_condition_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#dcm_id").val(splitted[2]);

            }
        });
    });


    $(document).on("click", "#submit_button_edit_dis_condition_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#dcm_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        if (edit_temp_desc == "") {
            $("#edit_temp_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = 'action/action_dis_condition_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_dis_condition_master_setting').attr('disabled', 'disabled');
        // $('#submit_button_edit_dis_condition_master_setting').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            // $('#modal_edit_dis_condition_template').modal('hide');
            // //$('#dis_con_' + temp_id).html(result);

            // $('#submit_button_edit_dis_condition_master_setting').attr('disabled', false);
            // $('#submit_button_edit_dis_condition_master_setting').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });




    $(document).on("click", "#delete_dis_condition_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_condition_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_condition_template_text').html(templatename);
        $("#delete_tdcm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_condition_template", function () {

        var id = $("#delete_tdcm_id").val();
        var post_url = 'action/action_dis_condition_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);


        $('#submit_button_delete_dis_condition_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_condition_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_condition_template').modal('hide');
            // $('#dis_con_' + id).remove();

            // $('#submit_button_delete_dis_condition_template').attr('disabled', false);
            // $('#submit_button_delete_dis_condition_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });

    $(document).on("click", "#add_new_setting_dis_advice", function () {
        $('#modal_add_template').modal('show');
    });


    $(document).on("keydown", "#dis_advice_master_setting", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#dis_advice_master_setting').submit();
            return false;
        }
    });


    $("#dis_advice_master_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tdam_name = $("#dam_name").val();
        var tdam_content = $("#dam_content").val();
        //alert(edit_ward_bed);
        if (tdam_name == "") {
            $("#dam_name").val();
            alert("Please Enter Name.");
            return false;
        }
        if (tdam_content == "") {
            $("#dam_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();


        $('#submit_button_dis_advice_master_setting').attr('disabled', 'disabled');
        // $('#submit_button_dis_advice_master_setting').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            // $("#modal_add_template").modal('hide');
            // $("#dis_advice_master_setting").trigger("reset");
            // // if ($('#discharge_advice .dataTables_empty').length) {
            // //     $("#discharge_advice").html(result.trim());
            // // } else {
            // //     $("#discharge_advice").prepend(result.trim());
            // // }


            // $('#submit_button_dis_advice_master_setting').attr('disabled', false);
            // $('#submit_button_dis_advice_master_setting').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });

    });

    $(document).on("click", "#edit_dis_advice_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_advice_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_advice_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#dam_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#form_modal_edit_dis_advice_template", function (e) {

        if (e.keyCode == 13 && !e.shiftKey) {
            $('#submit_button_edit_dis_advice_master_setting').click();
            return false;
        }
    });

    $(document).on("click", "#submit_button_edit_dis_advice_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#dam_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        if (edit_temp_desc == "") {
            $("#edit_temp_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = 'action/action_dis_advice_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;

        $('#submit_button_edit_dis_advice_master_setting').attr('disabled', 'disabled');
        $('#submit_button_edit_dis_advice_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            $('#modal_edit_dis_advice_template').modal('hide');
            //$('#dis_advice_' + temp_id).html(result);

            $('#submit_button_edit_dis_advice_master_setting').attr('disabled', false);
            $('#submit_button_edit_dis_advice_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });

    $(document).on("click", "#delete_dis_advice_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_advice_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_advice_template_text').html(templatename);
        $("#delete_tdam_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_advice_template", function () {

        var id = $("#delete_tdam_id").val();
        var post_url = 'action/action_dis_advice_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_dis_advice_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_advice_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_advice_template').modal('hide');
            // $('#dis_advice_' + id).remove();

            // $('#submit_button_delete_dis_advice_template').attr('disabled', false);
            // $('#submit_button_delete_dis_advice_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });

    $(document).on("click", "#add_new_setting_dis_when_obt_urgent_care", function () {
        $('#modal_add_template').modal('show');
    });


    $(document).on("submit", "#dis_when_obt_urgent_care_master_setting", function (e) {

        e.preventDefault();
        proceed = true;

        var twoucm_name = $("#dam_name").val();
        var twoucm_content = $("#dam_content").val();
        //alert(edit_ward_bed);
        if (twoucm_name == "") {
            $("#dam_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (twoucm_content == "") {
            $("#twoucm_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();

        $('#submit_button_dis_when_obt_urgent_care_master_setting').attr('disabled', 'disabled');
        $('#submit_button_dis_when_obt_urgent_care_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $("#dis_when_obt_urgent_care_master_setting").trigger("reset");
            // if ($('#discharge_when_obt_urgent_care .dataTables_empty').length) {
            //     $("#discharge_when_obt_urgent_care").html(result.trim());
            // } else {
            //     $("#discharge_when_obt_urgent_care").prepend(result.trim());
            // }

            $('#submit_button_dis_when_obt_urgent_care_master_setting').attr('disabled', false);
            $('#submit_button_dis_when_obt_urgent_care_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();


        });

    });

    $(document).on("click", "#edit_dis_when_obt_urgent_care_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_when_obt_urgent_care_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_when_obt_urgent_care_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#dam_id").val(splitted[2]);

            }
        });
    });


    $(document).on("click", "#submit_button_edit_dis_when_obt_urgent_care_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#dam_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }

        if (edit_temp_desc == "") {
            $("#edit_temp_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = 'action/action_dis_when_obt_urgent_care_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;


        $('#submit_button_edit_dis_when_obt_urgent_care_master_setting').attr('disabled', 'disabled');
        // $('#submit_button_edit_dis_when_obt_urgent_care_master_setting').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            // $('#modal_edit_dis_when_obt_urgent_care_template').modal('hide');
            // //$('#dis_when_obt_urgent_care_' + temp_id).html(result);

            // $('#submit_button_edit_dis_when_obt_urgent_care_master_setting').attr('disabled', false);
            // $('#submit_button_edit_dis_when_obt_urgent_care_master_setting').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });


    $(document).on("click", "#delete_dis_when_obt_urgent_care_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_when_obt_urgent_care_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_when_obt_urgent_care_template_text').html(templatename);
        $("#delete_twoucm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_when_obt_urgent_care_template", function () {

        var id = $("#delete_twoucm_id").val();
        var post_url = 'action/action_dis_when_obt_urgent_care_master_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);

        $('#submit_button_delete_dis_when_obt_urgent_care_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_when_obt_urgent_care_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_when_obt_urgent_care_template').modal('hide');
            // $('#dis_when_obt_urgent_care_' + id).remove();

            // $('#submit_button_delete_dis_when_obt_urgent_care_template').attr('disabled', false);
            // $('#submit_button_delete_dis_when_obt_urgent_care_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");
            location.reload();

        });

    });

    $(document).on("click", "#add_new_setting_dis_how_obt_urgent_care", function () {
        $('#modal_add_template').modal('show');
    });

    $(document).on("submit", "#dis_how_obt_urgent_care_master_setting", function (e) {

        e.preventDefault();
        proceed = true;

        var thoucm_name = $("#dam_name").val();
        var thoucm_content = $("#dam_content").val();
        //alert(edit_ward_bed);
        if (thoucm_name == "") {
            $("#dam_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (thoucm_content == "") {
            $("#dam_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();


        $('#submit_button_dis_how_obt_urgent_care_master_setting').attr('disabled', 'disabled');
        $('#submit_button_dis_how_obt_urgent_care_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);   
            $("#modal_add_template").modal('hide');
            $("#dis_how_obt_urgent_care_master_setting").trigger("reset");
            // if ($('#discharge_how_obt_urgent_care .dataTables_empty').length) {
            //     $("#discharge_how_obt_urgent_care").html(result.trim());
            // } else {
            //     $("#discharge_how_obt_urgent_care").prepend(result.trim());
            // }

            $('#submit_button_dis_how_obt_urgent_care_master_setting').attr('disabled', false);
            $('#submit_button_dis_how_obt_urgent_care_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });

    $(document).on("click", "#edit_dis_how_obt_urgent_care_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_how_obt_urgent_care_template').modal('show');

        $.ajax({
            type: 'post',
            url: "action/action_dis_how_obt_urgent_care_master_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var results = result.trim();
                var splitted = result.split("@@@");
                $("#edit_temp_name").val(splitted[0]);
                $("#edit_temp_content").val(splitted[1]);
                $("#dam_id").val(splitted[2]);

            }
        });
    });

    $(document).on("keydown", "#form_modal_edit_dis_how_obt_urgent_care_template", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_edit_dis_how_obt_urgent_care_master_setting').click();
            return false;
        }
    });

    $(document).on("click", "#submit_button_edit_dis_how_obt_urgent_care_master_setting", function () {
        var edit_temp_name = $("#edit_temp_name").val();
        var edit_temp_desc = $("#edit_temp_content").val();
        var temp_id = $("#dam_id").val();
        //alert(edit_ward_bed);
        if (edit_temp_name == "") {
            $("#edit_temp_name").focus();
            alert("Please Enter Name.");
            return false;
        }
        if (edit_temp_desc == "") {
            $("#edit_temp_content").focus();
            alert("Please Enter Content.");
            return false;
        }

        var post_url = 'action/action_dis_how_obt_urgent_care_master_setting.php?do=edit'
        var datastring = 'edit_temp_name=' + edit_temp_name + '&edit_temp_desc=' + edit_temp_desc + '&id=' + temp_id;
        ////console.log(datastring);

        $('#submit_button_edit_dis_how_obt_urgent_care_master_setting').attr('disabled', 'disabled');
        $('#submit_button_edit_dis_how_obt_urgent_care_master_setting').hide()
        $(".err_inpregisterloader").attr("style", "display:block");


        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_temp_name: edit_temp_name,
                edit_temp_desc: edit_temp_desc,
                id: temp_id,
            },
        }).done(function (result) {
            $('#modal_edit_dis_how_obt_urgent_care_template').modal('hide');
            //$('#dis_how_obt_urgent_care_' + temp_id).html(result);

            $('#submit_button_edit_dis_how_obt_urgent_care_master_setting').attr('disabled', false);
            $('#submit_button_edit_dis_how_obt_urgent_care_master_setting').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });
    });


    $(document).on("click", "#delete_dis_how_obt_urgent_care_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_dis_how_obt_urgent_care_template').modal('show');
        //var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_dis_how_obt_urgent_care_template_text').html(templatename);
        $("#delete_thoucm_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_dis_how_obt_urgent_care_template", function () {

        var id = $("#delete_thoucm_id").val();
        var post_url = 'action/action_dis_how_obt_urgent_care_master_setting.php?do=delete'
        var datastring = 'id=' + id;

        $('#submit_button_delete_dis_how_obt_urgent_care_template').attr('disabled', 'disabled');
        // $('#submit_button_delete_dis_how_obt_urgent_care_template').hide()
        // $(".err_inpregisterloader").attr("style", "display:block");

        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_delete_dis_how_obt_urgent_care_template').modal('hide');
            // $('#dis_how_obt_urgent_care_' + id).remove();

            // $('#submit_button_delete_dis_how_obt_urgent_care_template').attr('disabled', false);
            // $('#submit_button_delete_dis_how_obt_urgent_care_template').show();
            // $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();

        });

    });

    $(document).on("click", "#add_new_setting_doctor_general_order", function () {
        $('#modal_add_inp_general_order').modal('show');
    });

    $("#add_doctor_general_order_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var popup_template_title = $("#popup_template_title").val();
        //var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (popup_template_title == "") {
            $("#popup_template_title").focus();
            alert("Please Enter Title.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_add').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });


    $(document).on("click", ".edit_doctor_general_order_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');
        $('#modal_edit_inp_general_order').modal('show');
        $("#edit_tdgot_id").val(id);

        $.ajax({
            type: 'post',
            url: "action/action_general_order_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                $(".extra_order_div").html(result.trim());
                $("#edit_popup_template_title").val(title);

            }
        });

    });

    $("#edit_doctor_general_order_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_popup_template_title = $("#edit_popup_template_title").val();
        //var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (edit_popup_template_title == "") {
            $("#edit_popup_template_title").focus();
            alert("Please Enter Title.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_edit').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });


    $('.load-more-document').on('scroll', function () {

        if ($('.load-more-document').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());

            row = row + 1;
            // if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_document_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.document_pagination_data').append(response);
                            $('.document_pagination_data').scrollTop(240);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $('.load-more-highlight').scroll(function () {

        if ($('.load-more-highlight').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_diet_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.p_highlight_pagination_data').append(response);
                            $('.p_highlight_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("click", ".change_inp_date", function () {
        var id = $(this).attr("id");
        $(".change_inp_date").removeClass("active");
        $(".date_id_" + id).addClass("active");
    });

    $(document).on("change", ".change_days_exersice", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=exersice_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-exercies').scroll(function () {

        if ($('.load-more-exercies').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_exercies_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    console.log(response);
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.exercies_pagination_data').append(response);
                            $('.exercies_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("change", ".change_days_breathing", function () {

        var d_type = $(this).val();

        var post_url = 'action/create_myt_table_session.php?do=breathing_session';
        var datastring = 'd_type=' + d_type;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: datastring
        }).done(function (result) {

            window.location.reload();

        });
    });

    $('.load-more-breathing').scroll(function () {

        if ($('.load-more-breathing').scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {

            var patient_id = $('#patient_id').val();
            var row = Number($('#row').val());
            var allcount = Number($('#all').val());
            row = row + 1;
            //if (row <= allcount) {
            $("#row").val(row);
            $.ajax({
                type: 'post',
                url: 'action/action_get_breathing_myt_data.php',
                data: {
                    patient_id: patient_id,
                    row: row,

                },
                dataType: "text",
                success: function (response) {
                    console.log(response);
                    if (response.trim() !== "") {
                        setTimeout(function () {
                            $('.breathing_pagination_data').append(response);
                            $('.breathing_pagination_data').scrollTop(260);
                        }, 1000);
                    }
                }
            });
            // } else {

            // }
        }
    });

    $(document).on("click", "#delete_doctor_general_order_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_doctor_general_order_template').modal('show');
        // var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_doctor_general_order_template_text').html(templatename);
        $("#delete_tdgot_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_doctor_general_order_template", function () {

        var id = $("#delete_tdgot_id").val();
        var post_url = 'action/action_general_order_setting.php?do=delete'
        var datastring = 'id=' + id;

        $('#submit_button_delete_doctor_general_order_template').attr('disabled', 'disabled');
        $('#submit_button_delete_doctor_general_order_template').hide()
        $(".err_inpregisterloader").attr("style", "display:block");



        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#submit_button_delete_doctor_general_order_template').attr('disabled', false);
            $('#submit_button_delete_doctor_general_order_template').show();
            $(".err_inpregisterloader").attr("style", "display:none");

            location.reload();
        });

    });

    $(document).on("keydown", "#form_modal_add_ot", function (e) {

        if (e.keyCode == 13) {
            $('#submit_button_add_ot').click();
            return false;
        }
    });


    $(document).on("click", "#submit_button_add_ot", function () {

        var ot_name = $("#ot_name").val();

        if (ot_name == "") {
            alert("Please enter OT name.");
            return false;
        }

        var post_url = 'action/action_new_ot.php?do=add'
        var datastring = 'ot_name=' + ot_name;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                ot_name: ot_name,
            },
        }).done(function (result) {
            //alert(result);
            location.reload();
            // $('#modal_add_ot').modal('hide');

            // $("#ot_name").val("");

            // $("#new_ot").append(result);

        });

    });

    $(document).on("click", "#submit_button_add_ot_first", function () {

        var ot_name = $("#ot_name").val();

        if (ot_name == "") {
            alert("Please enter OT name.");
            return false;
        }

        var post_url = 'action/action_new_ot.php?do=add'
        var datastring = 'ot_name=' + ot_name;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                ot_name: ot_name,
            },
        }).done(function (result) {
            //alert(result);
            window.location.href = "ot_details.php?id=" + result;
            // $('#modal_add_ot').modal('hide');

            // $("#ot_name").val("");

            // $("#new_ot").append(result);

        });

    });


    $(document).on("click", ".select_edit_ot_name", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_ot').modal('show');

        var post_url = 'action/action_new_ot.php?do=edit_pop'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tom_id").val(result['tom_id']);
            $("#edit_ot_name").val(result['ot_name']);

        });

    });



    $('#submit_button_edit_ot').click(function () {
        var tom_id = $("#edit_tom_id").val();
        var ot_name = $("#edit_ot_name").val();


        if (ot_name == "") {
            alert("Please enter Ward Name.");
            return false;
        } else {

        }

        var post_url = 'action/action_new_ot.php?do=edit'
        var datastring = 'tom_id=' + tom_id + "&ot_name=" + ot_name;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tom_id: tom_id,
                ot_name: ot_name,
            },
        }).done(function (result) {

            //console.log(result);  
            location.reload();

        });

    });


    $(document).on("click", "#add_new_otr", function () {
        ////console.log("Yes");
        $('#modal_add_otr').modal('show');
    });


    $(document).on("click", "#submit_button_add_otr", function () {

        var otr_name = $("#otr_name").val();
        var ot_id = $("#ot_id").val();


        if (otr_name == "") {
            alert("Please enter name.");
            return false;
        }

        var post_url = 'action/action_new_otr.php?do=add'
        var datastring = 'otr_name=' + otr_name + "&ot_id=" + ot_id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                otr_name: otr_name,
                ot_id: ot_id,
            },
        }).done(function (result) {
            //alert(result);
            location.reload();
            // $('#modal_add_otr').modal('hide');

            // $("#otr_name").val("");
            // $(".dataTables_empty").css("display", "none");

            // $("#form_modal_add_otr").trigger("reset");

            // $("#new_otr_tr").append(result);


        });

    });

    $(document).on("click", "#submit_button_edit_otr", function () {
        var edit_otr_name = $("#edit_otr_name").val();
        var edit_ot_id = $("#edit_ot_id").val();
        //alert(edit_otr_name);
        if (edit_otr_name == "") {
            alert("Please enter name.");
            return false;
        }
        var post_url = 'action/action_new_otr.php?do=edit'
        var datastring = 'edit_otr_name=' + edit_otr_name + '&edit_ot_id=' + edit_ot_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                edit_otr_name: edit_otr_name,
                edit_ot_id: edit_ot_id,
            },
        }).done(function (result) {
            // $('#modal_edit_otr').modal('hide');
            // $('#tr_ward_bed_' + edit_ot_id).html(result);
            location.reload();
        });
    });

    $(document).on("click", "#delete_otr", function () {
        var id = $(this).attr('data-id');
        var delete_name = $(this).attr('data-text');
        //$('#modal_delete_otr').modal('show');
        $(".delete_room_text").html(delete_name);

        $("#delete_tca_id").val(id);
        $(document).on("click", "#submit_button_delete_otr", function () {

            var id = $("#delete_tca_id").val();

            var post_url = 'action/action_new_otr.php?do=delete'
            var datastring = 'id=' + id;
            //alert(datastring);
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                data: datastring
            }).done(function (result) {
                ////console.log(result);
                location.reload();
                // $('#modal_delete_otr').modal('hide');
                // $('#tr_ward_bed_' + id).remove();
            });
        });
    });
    $(document).on("click", "#edit_otr", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        $('#modal_edit_otr').modal('show');

        $.ajax({
            type: 'post',
            url: "action/edit_otr.php",
            data: {
                dataId: id,

            },
            cache: false,
            success: function (result) {
                var splitted = result.split("@@@");
                var edit_ot_id1 = result.split('@@@')[0];
                var edit_ot_id = edit_ot_id1.trim();
                $("#edit_ot_id").val(edit_ot_id);
                $("#edit_otr_name").val(splitted[1]);
            }
        });
    });

    $(document).on("click", "#delete_ot", function () {
        var id = $(this).attr('data-id');
        $('#modal_delete_ot').modal('show');
        var delete_name = $(this).attr('data-text');
        $(".delete_ward_text").html("Are you sure you want to delete <b>" + delete_name + " OT Complex</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.")

        $('#submit_button_delete_ot').click(function () {

            var post_url = 'action/action_new_ot.php?do=delete'
            var datastring = 'id=' + id;
            ////console.log(datastring);
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                data: datastring
            }).done(function (result) {
                $('#modal_delete_ot').modal('hide');
                window.location.assign("ot.php?ot_id=" + result);
            });

        });

    });

    $(document).on("click", "#block_otr", function () {
        var id = $(this).attr('data-id');
        var block_name = $(this).attr('data-text');
        var block_val = $(this).attr('data-val');
        $(".block_room_text").html(block_name);
        $("#block_tca_id").val(id);
        $("#block_val").val(block_val);
        $(document).on("click", "#submit_button_block_otr", function () {

            var id = $("#block_tca_id").val();
            var block_val = $("#block_val").val();

            var post_url = 'action/action_new_otr.php?do=block'
            var datastring = 'id=' + id + '&block_val=' + block_val;
            //alert(datastring);
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                data: datastring
            }).done(function (result) {
                window.location.reload();

            });

        });

    });

    $(document).on("submit", "#new_ot_block_time_add", function (e) {

        e.preventDefault();
        proceed = true;

        var ot_complex = $("#ot_complex").val();
        var get_ot = $("#get_ot").val();
        var otb_start_date = $("#otb_start_date").val();
        var otb_end_date = $("#otb_end_date").val();

        if (get_ot == "") {
            alert("Please Select OT.");
            return false;
        } else if (otb_start_date == "") {
            alert("Please Select Start Date.");
            return false;
        } else if (otb_end_date == "") {
            alert("Please Select End Date.");
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_button_add_block_time').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                window.location.reload();
            }


        });

    });

    $(document).on("click", "#edit_block", function () {
        var id = $(this).attr('data-id');
        $('#modal_edit_block_time').modal('show');

        $.ajax({
            type: 'post',
            url: "action/edit_block_time.php",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                var splitted = result.split("@@@");
                var otc_id = splitted[1].trim();
                var ot_id = splitted[2].trim();
                console.log(otc_id);
                $("#block_main_id").val(splitted[0].trim());
                $('#edit_ot_complex').val(otc_id);
                $('#edit_get_ot').val(ot_id);
                $("#edit_otb_start_date").val(splitted[4].trim());
                $("#edit_otb_end_date").val(splitted[5].trim());
                $("#edit_otb_start_time").val(splitted[6].trim());
                $("#edit_otb_end_time").val(splitted[7].trim());
                // $.myeditotbloack(otc_id,ot_id);



            }
        });

    });

    $(document).on("submit", "#new_ot_block_time_edit", function (e) {

        e.preventDefault();
        proceed = true;

        var block_main_id = $("#block_main_id").val();
        var ot_complex = $("#edit_ot_complex").val();
        var get_ot = $("#edit_get_ot").val();
        var otb_start_date = $("#edit_otb_start_date").val();
        var otb_end_date = $("#edit_otb_end_date").val();

        if (otb_start_date == "") {
            alert("Please Select Start Date.");
            return false;
        } else if (otb_end_date == "") {
            alert("Please Select End Date.");
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_button_edit_block_time').attr('disabled', 'disabled');



        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            // $('#block_time_data_' + block_main_id).html(result);
            // $('#modal_edit_block_time').modal('hide');
            // $('.err_register').hide();
            // $('#submit_button_edit_block_time').attr('disabled', false);
            location.reload();
        });

    });

    $(document).on("click", "#delete_ot_block", function () {
        var id = $(this).attr('data-id');
        $('#del_block_main_id').val(id);
        // $(".delete_block_text").html("Are you sure you want to delete permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.")
    });

    $('#submit_button_delete_ot_block').click(function () {

        var id = $('#del_block_main_id').val();
        var post_url = 'action/action_ot_block.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            // $('#modal_delete_ot_block').modal('hide');
            // $('#block_time_data_' + result.trim()).remove();
            location.reload();
        });

    });

    $(document).on("click", ".check_patient", function () {

        var div_val = $(this).val();
        if (div_val == "ipd") { //check value if it is domicilio
            $('.ipd_patient_div').show();
            $('.opd_patient_div').hide();
            $('.existing_patient').html("");
            $('.number_val').val("");
        } else {
            $('.ipd_patient_div').hide();
            $('.opd_patient_div').show();
            $('.existing_patient').html("");
            $('.number_val').val("");
        }
    });

    $(document).on("keyup", "#search_patient_contact_no_opd", function () {

        var contact_no = $(this).val();
        var p_ot_id = $("#p_ot_id").val();
        var p_otr_id = $("#p_otr_id").val();

        if (contact_no.length == 10) {

            var Link = $(".base_url_practice").val();
            var post_url = 'action/get_opd_patient_from_contact_no.php';
            var datastring = 'contact_no=' + contact_no + '&p_ot_id=' + p_ot_id + '&p_otr_id=' + p_otr_id;
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {

                var splitted1 = result.split("@@@");
                var existing_patient = splitted1[0];
                var time_doc = splitted1[1];
                $('.existing_patient').html(existing_patient);
                $('.add_patient_button').html(time_doc);

            });

        } else {
            $('.existing_patient').html("");
            $('.add_patient_button').html("");
            // alert("Please enter 10 digit mobile number.");
            // $('#search_patient_contact_no').focus();
            return false;
        }

    });

    $(document).on("keyup", "#ipd_search_patient_contact_no", function () {

        var contact_no = $(this).val();
        var p_ot_id = $("#p_ot_id").val();
        var p_otr_id = $("#p_otr_id").val();

        if (contact_no.length == 10) {

            var Link = $(".base_url_practice").val();
            var post_url = 'action/get_ipd_patient_from_contact_no.php';
            var datastring = 'contact_no=' + contact_no + '&p_ot_id=' + p_ot_id + '&p_otr_id=' + p_otr_id;
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                dataType: 'text',
                data: datastring
            }).done(function (result) {
                var splitted1 = result.split("@@@");
                var existing_patient = splitted1[0];
                var time_doc = splitted1[1];
                $('.existing_patient').html(existing_patient);
                $('.add_patient_button').html(time_doc);
            });

        } else {
            $('.existing_patient').html("");
            $('.add_patient_button').html("");
            // alert("Please enter 10 digit mobile number.");
            // $('#search_patient_contact_no').focus();
            return false;
        }

    });

    $(document).on("submit", "#opd_patient_form_add_atd", function (e) {

        e.preventDefault();
        proceed = true;
        var old_ot_id = $("#old_ot_id").val();
        var old_otr_id = $("#old_otr_id").val();
        var patient_barcode_id = $("#patient_barcode_id").val();
        var old_pm_first_name = $("#old_pm_first_name").val();
        var opd_atd_start_date = $("#opd_atd_start_date").val();
        var opd_atd_time = $("#opd_atd_time").val();
        var opd_atd_od = $("#opd_atd_od").val();
        var opd_atd_ot = $("#opd_atd_ot").val();

        if (patient_barcode_id == "") {
            alert("Your patient id is blank");
            return false;
        } else if (old_pm_first_name == "") {
            alert("Please Select Name.");
            return false;
        } else if (opd_atd_od == "0") {
            alert("Please select operating doctor.");
            $('#opd_atd_od').focus();
            return false;
        } else if (opd_atd_ot == "0") {
            alert("Please select operation type.");
            $('#opd_atd_ot').focus();
            return false;
        } else if (opd_atd_start_date == "") {
            alert("Please Select Date.");
            return false;
        } else if (opd_atd_time == "") {
            alert("Please Select Time.");
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_new_patient_add_ot_old_atd').hide();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result.trim() == 1) {
                console.log("Not Done");
                $('.err_register').hide();
                $('#submit_new_patient_add_ot_old_atd').show();
                $(".block_validation_opd").attr("style", "color: red; margin-left: 10px; display:block");
            } else if (result.trim() == 2) {
                window.location.href = "ot_schedule.php?ot_id=" + old_ot_id + "&otr_id=" + old_otr_id;
            } else {
                $('.err_register').hide();
                $('#submit_new_patient_add_ot_old_atd').show();
            }
        });

    });

    $(document).on("change", "#change_appointment_graph", function () {
        var id = $(this).val();
        //alert(id);
        var Link = $(".base_url_practice").val();
        var post_url = Link + 'action/select_hospital_graph.php?do=appointment';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: {
                dataId: id,
            },
        }).done(function (response) {
            overall_chart.updateSeries([{
                name: "Total Apoointment",
                data: response.appointment
            }, {
                name: "Cancelled Appointment",
                data: response.cancel_appointment
            }]);
            overall_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#ot_appointment_date", function () {

        var ot_id = $(this).attr("data-ot-id");
        var otr_id = $(this).attr("data-otr-id");
        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + month + day;
        var Link = $(".base_url_practice").val();
        window.location.href = 'ot_schedule.php?ot_id=' + ot_id + '&otr_id=' + otr_id + '&date=' + last_date;
    });

    $(document).on("change", ".ot_select", function () {

        var onid = $(this).attr("data-id");
        var status_val = $(this).val();
        var Link = $(".base_url_practice").val();
        var post_url = Link + 'ot_schedule/change_status.php';
        $.ajax({
            type: 'post',
            url: post_url,
            data: {
                status: status_val,
                app_id: onid,
            },
            success: function (response) {

                if (status_val.trim() == "4") {
                    $("#change_status_div_" + onid).html('<span class="selectpickrcustomtag finished">Finished</span>');
                    $("#edit_appo_" + onid).css("display", "none");
                    // $("#pr_select_" + onid).prop('disabled', true);
                    // $("#pr_select_" + onid +"_chosen .chosen-select-tag").attr('disabled', true)

                } else if (status_val.trim() == "5") {

                    $("#change_status_div_" + onid).html('<span class="selectpickrcustomtag cancelled">Cancelled</span>');
                    $("#edit_appo_" + onid).css("display", "none");
                    // $("#pr_select_" + onid).prop('disabled', true);
                    //$("#reschedule_"+onid).show();

                } else {

                    $("#ot_select_" + onid).prop('disabled', false);

                }

                if (status_val.trim() == "1") {
                    $("#select_" + onid).addClass("pretop");
                    $("#select_" + onid).removeClass("engaged");
                    $("#select_" + onid).removeClass("scheduled");
                    $("#select_" + onid).removeClass("in_ot");
                    $("#select_" + onid).removeClass("postop");
                } else if (status_val.trim() == "2") {
                    $("#select_" + onid).addClass("in_ot");
                    $("#select_" + onid).removeClass("postop");
                    $("#select_" + onid).removeClass("engaged");
                    $("#select_" + onid).removeClass("pretop");
                    $("#select_" + onid).removeClass("scheduled");
                } else if (status_val.trim() == "0") {
                    $("#select_" + onid).addClass("scheduled");
                    $("#select_" + onid).removeClass("pretop");
                    $("#select_" + onid).removeClass("engaged");
                    $("#select_" + onid).removeClass("in_ot");
                    $("#select_" + onid).removeClass("postop");
                } else if (status_val.trim() == "3") {
                    $("#select_" + onid).removeClass("in_ot");
                    $("#select_" + onid).addClass("postop");
                    $("#select_" + onid).removeClass("engaged");
                    $("#select_" + onid).removeClass("pretop");
                    $("#select_" + onid).removeClass("scheduled");
                }

                // if (status_val.trim() == "4") {
                //     $("#ot_select_" + onid).prop('disabled', true);
                // } else if (status_val.trim() == "5") {
                //     $("#ot_select_" + onid).prop('disabled', true);
                // } else {
                //     $("#ot_select_" + onid).prop('disabled', false);
                // }


            }
        });

    });

    $(document).on("submit", "#patient_form_edit_ot", function (e) {

        e.preventDefault();
        proceed = true;
        var old_ot_id = $("#old_ot_id").val();
        var edit_otid = $("#edit_otid").val();

        var edit_ipd_start_date = $("#edit_ipd_start_date").val();
        var edit_ipd_atd_time = $("#edit_ipd_atd_time").val();
        var edit_ipd_atd_od = $("#edit_ipd_atd_od").val();
        var edit_ipd_atd_ot = $("#edit_ipd_atd_ot").val();



        if (edit_ipd_start_date == "") {
            alert("Please select date.");
            $('#edit_ipd_start_date').focus();
            return false;
        } else if (edit_ipd_atd_time == "") {
            alert("Please enter time.");
            $('#edit_ipd_atd_time').focus();
            return false;
        } else if (edit_ipd_atd_od == "0") {
            alert("Please select operating doctor.");
            $('#edit_ipd_atd_od').focus();
            return false;
        } else if (edit_ipd_atd_ot == "0") {
            alert("Please select operation type.");
            $('#edit_ipd_atd_ot').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();
        $('#submit_new_patient_add_edit_atd').hide();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result.trim() == 1) {
                //console.log("Not Done");
                $('.err_register').hide();
                $('#submit_new_patient_add_edit_atd').show();
                $(".edit_block_validation").attr("style", "color: red; margin-left: 10px; display:block");
            } else if (result.trim() == 2) {
                window.location.href = "ot_schedule.php?ot_id=" + old_ot_id + "&otr_id=" + edit_otid;
            } else {
                $('.err_register').hide();
                $('#submit_new_patient_add_edit_atd').show();
            }
        });

    });

    $(document).on("click", "#delete_ot_pm", function () {
        var id = $(this).attr('data-id');
        var delete_name = $(this).attr('data-text');
        $(".delete_ot_pm_text").html(delete_name);
        $(".delete_room_id").val(id);
    });

    $('#submit_button_delete_ot_pm').click(function () {
        var id = $(".delete_room_id").val();
        var post_url = 'action/action_add_admission.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $('#modal_delete_ot_pm').modal('hide');
            window.location.reload();
        });

    });

    $(document).on("change", ".change_calender_status_ot", function () {

        var id = $(this).val();
        var onid = $(this).attr("data-ot-id");
        var otrid = $(this).attr("data-otr-id");
        //alert(id);
        var Link = $(".base_url_practice").val();
        if (id == "") {
            window.location.href = "appointments_calendar_otschedule.php?ot_id=" + onid + "&otr_id=" + otrid;
        } else {
            window.location.href = "appointments_calendar_otschedule.php?ot_id=" + onid + "&otr_id=" + otrid + "&s_id=" + id;
        }


    });

    $(document).on("click", ".clear_pre_op", function () {

        $("#pre_op_order").val("");

    });

    $(document).on("click", ".clear_post_op", function () {

        $("#post_op_order").val("");

    });

    $(document).on("submit", "#add_pre_operative_order", function (e) {

        e.preventDefault();
        proceed = true;

        var tpoot_template_name = $("#tpoot_template_name").val();
        var tpoot_title = $("#tpoot_title").val();


        if (tpoot_template_name == "") {
            $("#tpoot_template_name").focus();
            alert("Please add title.");
            return false;
        }

        if (tpoot_title == "") {
            $("#tpoot_title").focus();
            alert("Please add content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_genaral_pre_oprative').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_button_genaral_pre_oprative').removeAttr('disabled');
            var splitted = result.split("@@@");
            var text_value = splitted[0];
            var li_value = splitted[1];
            $('.overlay-popup-full').hide();


            $("#pre_op_template").prepend(li_value.trim());
            $('#addpreoperativeordersmodal').modal('hide');
            var old_val = $("#pre_op_order").val();
            var new_val = text_value.trim();
            if (old_val == "") {
                $("#pre_op_order").val(old_val + new_val);
            } else {
                $("#pre_op_order").val(old_val + "\n" + new_val);
            }

            $("#add_pre_operative_order").trigger("reset");
        });

    });

    $(document).on("click", ".select_template_ot_consu", function () {
        var id = $(this).attr('data-id');


        var post_url = 'action/action_add_medicine.php?do=template';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            if ($('.ot_opre_consume .inner_ot_opre_consume').length) {
                $(".ot_opre_consume").html(result);
            } else {
                $(".ot_opre_consume").append(result);
            }

            $(".ot_opre_consume").animate({
                scrollTop: $('.ot_opre_consume').prop("scrollHeight")
            }, 1000);

            // $('.medicine_case_name').animate({scrollTop: Sheight}, 2000);

            // $('.medicine_case_name').animate({
            //     scrollTop: $('#medicine_case_name').get(0).scrollHeight
            // }, 2000);

        });
    });

    $(document).on("submit", "#new_medicine_form_add_ot", function (e) {

        e.preventDefault();
        proceed = true;

        var tmm_medicine_name = $("#tmm_medicine_name").val();
        var tmm_strength = $("#tmm_strength").val();
        var tmm_unit = $("#tmm_unit").val();

        if (tmm_medicine_name == "") {
            alert("Please Enter Medicine Name.");
            $("#tmm_medicine_name").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_add_medicine').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            //console.log(result);

            var splitted = result.split("@@@");
            var text_value = splitted[0];
            var li_value = splitted[1];


            $("#ot_opre_consume_template").prepend(li_value.trim());

            $('#submit_button_add_medicine').removeAttr('disabled');
            $('.err_register').hide();

            $("#new_medicine_form_add_ot").trigger("reset");

            // $("#tmm_day_dose").val("");

            // $("#tmm_day_dose_1").removeClass("btn btn-success")
            // $("#tmm_day_dose_1").addClass("btn btn-primary");

            // $("#tmm_day_dose_1").removeClass("btn btn-success")
            // $("#tmm_day_dose_1").addClass("btn btn-primary");



            $('#addnewmedicine').modal('hide');

            var formId = $(this).closest("form").attr('id');
            $("#" + formId).trigger("reset");


            if ($('.ot_opre_consume .inner_ot_opre_consume').length) {
                $(".ot_opre_consume").html(text_value);
            } else {
                $(".ot_opre_consume").append(text_value);
            }

            $(".ot_opre_consume").animate({
                scrollTop: $('.ot_opre_consume').prop("scrollHeight")
            }, 1000);

        });

    });

    $(document).on("click", ".clear_ot_opre_consume", function () {

        $(".ot_opre_consume").html('<div class="inner_ot_opre_consume" style="text-align: center;">Select Item</div>');

    });

    $(document).on("click", ".select_template_ope_notes", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_oper_notes_template.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var old_val = $("#oper_notes").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#oper_notes").val(old_val + new_val);
            } else {
                $("#oper_notes").val(old_val + "\n\n" + new_val);
            }
        });

    });

    $(document).on("click", ".clear_ope_notes", function () {

        $("#oper_notes").val("");

    });

    $(document).on("submit", "#form_modal_add_oper_notes", function (e) {

        e.preventDefault();
        proceed = true;
        var add_temp_title_on = $("#add_temp_title_on").val();
        var add_temp_content_on = $("#add_temp_content_on").val();

        if (add_temp_title_on == "") {
            alert("Please enter title.");
            $('#add_temp_title_on').focus();
            return false;
        } else if (add_temp_content_on == "") {
            alert("Please enter content.");
            $('#add_temp_content_on').focus();
            return false;
        } else {

        }
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_add_on').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_button_add_on').removeAttr('disabled');
            $('#addoperativenotesmodal').modal('hide');
            $("#pre_opre_template").append(result);
            $('.overlay-popup-full').hide();

            var old_val = $("#oper_notes").val();
            var new_val = $("#add_temp_content_on").val();
            if (old_val == "") {
                $("#oper_notes").val(old_val + new_val);
            } else {
                $("#oper_notes").val(old_val + "\n\n" + new_val);
            }

            $("#form_modal_add_oper_notes").trigger("reset");
        });

    });

    $(document).on('click', '.remove_ot_opre_consume', function () {
        var button_id = $(this).attr("id");
        $('#ot_opre_consume_' + button_id).remove();
    });

    $(document).on("submit", "#add_post_operative_order", function (e) {

        e.preventDefault();
        proceed = true;

        var tpsoot_template_name = $("#tpsoot_template_name").val();

        if (tpsoot_template_name == "") {
            $("#tpsoot_template_name").focus();
            alert("Please add title.");
            return false;
        }

        if (tpsoot_title == "") {
            $("#tpsoot_title").focus();
            alert("Please add content.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_genaral_post_oprative').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var splitted = result.split("@@@");
            var text_value = splitted[0];
            var li_value = splitted[1];
            $('.overlay-popup-full').hide();
            $('#submit_button_genaral_post_oprative').removeAttr('disabled');
            $("#post_op_template").prepend(li_value.trim());
            $('#addpostoperativeordermodal').modal('hide');
            var old_val = $("#post_op_order").val();
            var new_val = text_value.trim();
            if (old_val == "") {
                $("#post_op_order").val(old_val + new_val);
            } else {
                $("#post_op_order").val(old_val + "\n" + new_val);
            }

            $("#add_post_operative_order").trigger("reset");
        });

    });

    $(document).on("submit", "#edit_ot_details", function (e) {

        e.preventDefault();
        proceed = true;

        var back_ot_id = $("#back_ot_id").val();
        var back_otr_id = $("#back_otr_id").val();

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.overlay-popup-full').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result.trim() == 1) {
                window.location.href = "ot_schedule.php?ot_id=" + back_ot_id + "&otr_id=" + back_otr_id;
                // window.location.reload();
            } else {

            }
        });

    });

    $(document).on("submit", "#add_ot_details", function (e) {

        e.preventDefault();
        proceed = true;
        var back_ot_id = $("#back_ot_id").val();
        var back_otr_id = $("#back_otr_id").val();

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.overlay-popup-full').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            if (result.trim() == 1) {

                window.location.href = "ot_schedule.php?ot_id=" + back_ot_id + "&otr_id=" + back_otr_id;
                // window.location.reload();
            } else {

            }
        });

    });

    $(document).on("click", "#submit_ot_print", function () {
        ////console.log("Yes");
        $('input[type="checkbox"][name="ot_printoption[]"]').removeAttr('checked');
        $('#ot_checkallprintoption').removeAttr('checked');
        $('#single_print').modal('show');

    });

    $(document).on("change", "#change_revenue_graph", function () {
        var id = $(this).val();
        //alert(id);
        var Link = $(".base_url_practice").val();
        var post_url = Link + 'action/select_hospital_graph.php?do=revenue';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: {
                dataId: id,
            },
        }).done(function (response) {
            overall_chart_bill.updateSeries([{
                name: "",
                data: response.revenue
            }]);
            overall_chart_bill.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $("#ot_checkallprintoption").click(function () {
        $('input:checkbox').not(this).prop('checked', this.checked);
    });

    $("#ot_printoptionsubmit").submit(function (event) {

        if ($('input[type=checkbox][name="ot_printoption[]"]:checked').length == 0) {
            alert("Please select at least one checkbox");
            return false;
        } else {
            document.getElementById('printpopupclose').click();
            return true;
        }

    });

    $("#add_pre_operative_order_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tpoot_template_name = $("#tpoot_template_name").val();
        //var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (tpoot_template_name == "") {
            $("#tpoot_template_name").focus();
            alert("Please add title.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_poo').attr('disabled', 'disabled');
        $('.err_register_add').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".edit_pre_operative_order_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');
        $('#modal_edit_inp_pre_operative_order').modal('show');
        $("#edit_tpoot_id").val(id);

        $.ajax({
            type: 'post',
            url: "action/action_pre_operative_order_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            dataType: 'JSON',
            cache: false,
            success: function (result) {
                console.log(result);
                $("#edit_tpoot_id").val(result['tpoot_id']);
                $("#edit_tpoot_template_name").val(result['tpoot_template_name']);
                $("#edit_popup_template_title").val(result['tpoot_title']);
                $("#edit_tpoot_created_by").val(result['created_by']);

            }
        });

    });

    $("#edit_pre_operative_order_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_tpoot_template_name = $("#edit_tpoot_template_name").val();
        //var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (edit_tpoot_template_name == "") {
            $("#edit_tpoot_template_name").focus();
            alert("Please add title.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_edit_poo').attr('disabled', 'disabled');
        $('.err_register_edit').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".delete_pre_operative_order_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_pre_operative_order_template').modal('show');
        var text = templatename;
        //alert(text);
        $('.delete_pre_operative_order_template_text').html(text);
        $("#delete_tpoot_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_pre_operative_order_template", function () {

        var id = $("#delete_tpoot_id").val();
        var post_url = 'action/action_pre_operative_order_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });

    });

    $("#add_post_operative_order_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tpsoot_template_name = $("#tpsoot_template_name").val();
        //var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (tpsoot_template_name == "") {
            $("#tpsoot_template_name").focus();
            alert("Please add title.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_ptoo').attr('disabled', 'disabled');
        $('.err_register_add').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".edit_post_operative_order_template", function () {
        //console.log("Yes");
        var id = $(this).attr('data-id');
        var title = $(this).attr('data-title');
        $('#modal_edit_inp_post_operative_order').modal('show');
        $("#edit_tpsoot_id").val(id);

        $.ajax({
            type: 'post',
            url: "action/action_post_operative_order_setting.php?do=edit_popup",
            data: {
                dataId: id,
            },
            dataType: 'JSON',
            cache: false,
            success: function (result) {
                $("#edit_tpsoot_id").val(result['tpsoot_id']);
                $("#edit_tpsoot_template_name").val(result['tpsoot_template_name']);
                $("#edit_popup_template_title").val(result['tpsoot_title']);
                $("#edit_tpsoot_created_by").val(result['created_by']);

            }
        });

    });

    $("#edit_post_operative_order_setting").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_tpsoot_template_name = $("#edit_tpsoot_template_name").val();
        //var dpm_content = $("#dpm_content").val();
        //alert(edit_ward_bed);
        if (edit_tpsoot_template_name == "") {
            $("#edit_tpsoot_template_name").focus();
            alert("Please add title.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_edit_ptoo').attr('disabled', 'disabled');
        $('.err_register_edit').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", "#delete_post_operative_order_template", function () {

        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        $('#modal_delete_post_operative_order_template').modal('show');
        var text = templatename;
        $('.delete_post_operative_order_template_text').html(text);
        $("#delete_tpsoot_id").val(id);


    });

    $(document).on("click", "#submit_button_delete_post_operative_order_template", function () {

        var id = $("#delete_tpsoot_id").val();
        var post_url = 'action/action_post_operative_order_setting.php?do=delete'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".change_notes_date", function () {
        var id = $(this).attr('data-id');
        var patient_unique_id = $('#patient_unique_id').val();
        $(".change_notes_date").removeClass("active");
        $(this).addClass("active");
        var Link = $(".base_url_practice").val();
        var post_url = 'action/select_operative_notes.php?do=show';
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'text',
            data: {
                dataId: id
            }
        }).done(function (result) {
            $('.oprative_notes_html').html(result.trim());
        });
    });


    $(document).on("keyup", ".inpatient_treatment_search_medicine_textbox", function () {
        var searchString1 = $(this).val();

        $.ajax({
            type: 'post',
            url: 'action/action_inpatient_medications.php?do=add_template',
            data: {
                p_d_data1: searchString1.trim(),
            },
            dataType: "text",
            success: function (response) {
                $("#pre_doctor_medications_template").html(response);
            }
        });

    });

    $(document).on("click", "#atdcasesheet_print_popup", function () {
        ////console.log("Yes");
        // $('input[type="checkbox"][name="printoption[]"]').removeAttr('checked');
        //$('#checkallprintoption').removeAttr('checked');
        var atd_discharged_language = $('#select_print_atd_discharged_file').val();
        $('#atd_discharged_language').val(btoa(atd_discharged_language));
        $('#modal_atdcasesheet_print_popup').modal('show');
    });

    $(document).on("click", ".send_whatsapp_on_video_call", function () {

        var ap_id = $(this).attr("data-ap_id");

        $.ajax({
            type: 'post',
            url: $(".base_url_practice").val() + 'action/action_send_whatsapp_on_video_call.php',
            data: {
                ap_id: ap_id
            },
            success: function (response) {

            }
        });

    });

    // $("#pm_age").change(function () {
    //     $('#age_string').html("");

    //     var currentDate = new Date();
    //     var age_1 = $('#pm_age').val();
    //     var day = currentDate.getDate();
    //     var month = currentDate.getMonth() + 1;
    //     var year = currentDate.getFullYear() - age_1;

    //     if (day < 10) {
    //         day = '0' + day;
    //     }
    //     if (month < 10) {
    //         month = '0' + month;
    //     }
    //     var birth_date = day + "-" + month + "-" + year;


    //     return $('#pm_dob').val(birth_date);
    // });

    $("#pm_age").change(function () {
        var age_1 = $('#pm_age').val();
        if(age_1!='')
        {
            $('#age_string').html("");
            var currentDate = new Date();
            var day = currentDate.getDate();
            var month = currentDate.getMonth() + 1;
            var year = currentDate.getFullYear() - age_1;
            if (day < 10) {
                day = '0' + day;
            }
            if (month < 10) {
                month = '0' + month;
            }
            var birth_date = day + "-" + month + "-" + year;
            return $('#pm_dob').val(birth_date);
        }
    });

    $("#pm_dob").change(function () {

        var AgeText = $("#pm_age").val();
        $('#age_string').html("");

        var newdate = $('#pm_dob').val();
        var datearray = newdate.split("-");
        var MyBdate = datearray[1] + '/' + datearray[0] + '/' + datearray[2];

        var now = new Date();
        var today = new Date(now.getYear(), now.getMonth(), now.getDate());

        var yearNow = now.getYear();
        var monthNow = now.getMonth();
        var dateNow = now.getDate();

        var dob = new Date(MyBdate.substring(6, 10),
            MyBdate.substring(0, 2) - 1,
            MyBdate.substring(3, 5)
        );
        var yearDob = dob.getYear();
        var monthDob = dob.getMonth();
        var dateDob = dob.getDate();
        var age = {};
        var ageString = "";
        var yearString = "";
        var monthString = "";
        var dayString = "";

        yearAge = yearNow - yearDob;

        if (monthNow >= monthDob)
            var monthAge = monthNow - monthDob;
        else {
            yearAge--;
            var monthAge = 12 + monthNow - monthDob;
        }

        if (dateNow >= dateDob)
            var dateAge = dateNow - dateDob;
        else {
            monthAge--;
            var dateAge = 31 + dateNow - dateDob;

            if (monthAge < 0) {
                monthAge = 11;
                yearAge--;
            }
        }

        age = {
            years: yearAge,
            months: monthAge,
            days: dateAge
        };
        ////console.log(age);
        if (age.years > 1) yearString = " Years";
        else yearString = " Year";
        if (age.months > 1) monthString = " Months";
        else monthString = " Month";
        if (age.days > 0) dayString = " Days";
        else dayString = " Day";

        if ((age.years > 0) && (age.months > 0) && (age.days >= 0))
            ageString = age.years + yearString;
        else if ((age.years == 0) && (age.months == 0) && (age.days >= 0))
            ageString = age.days + dayString;
        else if ((age.years > 0) && (age.months == 0) && (age.days == 0))
            ageString = age.years + yearString;
        else if ((age.years > 0) && (age.months > 0) && (age.days == 0))
            ageString = age.years + yearString;
        else if ((age.years == 0) && (age.months > 0) && (age.days > 0))
            ageString = age.months + monthString;
        else if ((age.years > 0) && (age.months == 0) && (age.days >= 0))
            ageString = age.years + yearString;
        else if ((age.years == 0) && (age.months > 0) && (age.days == 0))
            ageString = age.months + monthString;
        else ageString = "";

        var only_new_age = ageString.substr(0, ageString.indexOf(' '));
        var only_new_string = ageString.substr(ageString.indexOf(' ') + 1);


        if (only_new_age != "") {

            //$('#pm_age').attr('readonly', true).val(only_new_age + " " + only_new_string);
            $('#pm_age').val(only_new_age + " " + only_new_string);



        } else {

            alert("Please enter valid date");
            $("#pm_dob").val("");
            $("#pm_age").val("");
            $("#pm_dob").focus();
        }

        

        //$('#age_string').html(only_new_string);


    });

    $(document).on("click", "#submit_delete_popup_obstetrics_history", function (event) {

        var pm_pid = $(".pm_pid").val();
        var pm_id = $("#pm_id").val();

        var rowId = $("#row_tcoh_id").val();
        var tcoh_id = $("#delete_tcoh_id").val();


        var post_url = 'action/action_casemanager_ob_his.php?do=delete_oh_a'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                rowId: rowId,
                tcoh_id: tcoh_id,
            },
        }).done(function (result) {

            
            $("#tr_case_obstetrics_history_" + rowId).remove();
            $('#deletepopup_obs').modal('hide');
            //$(".delete-message").show().delay(5000).fadeOut();

            var patient_uni_id = $("#patient_uni_id").val();
            $.myAllObHistory(patient_uni_id);

        });

    });

    $(document).on("click", ".edit_popup_obstetrics_history", function (event) {

        var tcoh_id = $(this).attr('data-tcoh_id');
        var tr_id = $(this).attr('data-tr_id');

        var post_url = 'action/action_casemanager_ob_his.php?do=edit_ob_his'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tr_id: tr_id,
                tcoh_id: tcoh_id,
            },
        }).done(function (result) {

            $('#modal_edit_ob_history').modal('show');
            $(".edit_content").html(result);

        });

    });

    $(document).on("click", ".submit_popup_p_obstetrics_history_edit", function (event) {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var pa_tcoh_id = $("#edit_pa_tcoh_id").val();

        var tcoh_p_term = $("#edit_tcoh_p_term").val();
        var tcoh_p_weeks = $("#edit_tcoh_p_weeks").val();
        var tcoh_p_delivery = $("#edit_tcoh_p_delivery").val();
        var tcoh_p_status = $("#edit_tcoh_p_status").val();

        var tcoh_p_status_number = $("#edit_tcoh_p_status_number").val();
        var tcoh_p_location = $("#edit_tcoh_p_location").val();
        var tcoh_p_mo_year = $("#edit_tcoh_p_mo_year").val();
        var tcoh_p_gender = $("#edit_tcoh_p_gender").val();
        var tcoh_p_birth_weight = $("#edit_tcoh_p_birth_weight").val();
        var tcoh_p_remarks = $("#edit_tcoh_p_remarks").val();

        $('.submit_popup_p_obstetrics_history_edit').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        var post_url = 'action/action_casemanager_ob_his.php?do=edit_oh_p'
        //var datastring = 'pm_pid=' + pm_pid + "&pc_id=" + pc_id + "&pm_case_type=" + pm_case_type + "&pm_appo_time=" + pm_appo_time + "&date_wise=" + date_wise;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                pa_tcoh_id: pa_tcoh_id,
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                tcoh_p_term: tcoh_p_term,
                tcoh_p_weeks: tcoh_p_weeks,
                tcoh_p_delivery: tcoh_p_delivery,
                tcoh_p_status: tcoh_p_status,
                tcoh_p_status_number: tcoh_p_status_number,
                tcoh_p_location: tcoh_p_location,
                tcoh_p_mo_year: tcoh_p_mo_year,
                tcoh_p_gender: tcoh_p_gender,
                tcoh_p_birth_weight: tcoh_p_birth_weight,
                tcoh_p_remarks: tcoh_p_remarks,
            },
        }).done(function (result) {

            $('#modal_edit_ob_history').modal('hide');

            $('.submit_popup_p_obstetrics_history_edit').removeAttr('disabled');

            var tr_id = $('#ob_tr_id').val();

            console.log(tr_id);

            $('#tr_case_obstetrics_history_' + tr_id).html(result.trim());

            $(".edit_content").html("");

            var patient_uni_id = $("#patient_uni_id").val();
            $(".success-message").show().delay(5000).fadeOut();
            $.myAllObHistory(patient_uni_id);

        });


    });

    $(document).on("click", ".submit_popup_a_obstetrics_history_edit", function (event) {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var ab_tcoh_id = $("#edit_ab_tcoh_id").val();

        var tcoh_a_weeks = $("#edit_tcoh_a_weeks").val();
        var tcoh_a_heart_act = $("#edit_tcoh_a_heart_act").val();
        var tcoh_a_treatment = $("#edit_tcoh_a_treatment").val();
        var tcoh_a_location = $("#edit_tcoh_a_location").val();

        var tcoh_a_remarks = $("#edit_tcoh_a_remarks").val();

        $('.submit_popup_a_obstetrics_history_edit').attr('disabled', 'disabled');
        //$('.overlay-popup-full').show();

        var post_url = 'action/action_casemanager_ob_his.php?do=edit_oh_a'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                ab_tcoh_id: ab_tcoh_id,
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                tcoh_a_weeks: tcoh_a_weeks,
                tcoh_a_heart_act: tcoh_a_heart_act,
                tcoh_a_treatment: tcoh_a_treatment,
                tcoh_a_location: tcoh_a_location,
                tcoh_a_remarks: tcoh_a_remarks,
            },
        }).done(function (result) {

            $('#modal_edit_ob_history').modal('hide');

            $('.submit_popup_a_obstetrics_history_edit').removeAttr('disabled');

            var tr_id = $('#ob_tr_id').val();

            console.log(tr_id);

            $('#tr_case_obstetrics_history_' + tr_id).html(result.trim());

            $(".edit_content").html("");

            var patient_uni_id = $("#patient_uni_id").val();
            $(".success-message").show().delay(5000).fadeOut();
            $.myAllObHistory(patient_uni_id);
        });


    });

    $(document).on("click", ".submit_popup_e_obstetrics_history_edit", function (event) {

        var pm_pid = $("#pm_pid").val();
        var pm_id = $("#pm_id").val();
        var patient_uni_id = $("#patient_uni_id").val();

        var el_tcoh_id = $("#edit_el_tcoh_id").val();

        var tcoh_e_weeks = $("#edit_tcoh_e_weeks").val();
        var tcoh_e_location = $("#edit_tcoh_e_location").val();
        var tcoh_e_treatment = $("#edit_tcoh_e_treatment").val();
        var tcoh_e_remarks = $("#edit_tcoh_e_remarks").val();

        $('.submit_popup_e_obstetrics_history_edit').attr('disabled', 'disabled');
        //$('.overlay-popup-full').show();

        var post_url = 'action/action_casemanager_ob_his.php?do=edit_oh_e'

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                el_tcoh_id: el_tcoh_id,
                pm_pid: pm_pid,
                pm_id: pm_id,
                patient_uni_id: patient_uni_id,
                tcoh_e_weeks: tcoh_e_weeks,
                tcoh_e_location: tcoh_e_location,
                tcoh_e_treatment: tcoh_e_treatment,
                tcoh_e_remarks: tcoh_e_remarks,
            },
        }).done(function (result) {

            $('#modal_edit_ob_history').modal('hide');

            $('.submit_popup_e_obstetrics_history_edit').removeAttr('disabled');

            var tr_id = $('#ob_tr_id').val();

            console.log(tr_id);

            $('#tr_case_obstetrics_history_' + tr_id).html(result.trim());

            $(".edit_content").html("");

            var patient_uni_id = $("#patient_uni_id").val();
            console.log(patient_uni_id);
            $(".success-message").show().delay(5000).fadeOut();
            $.myAllObHistory(patient_uni_id);
        });


    });

    $(document).on("click", "#add_imp_pharmacy_medications", function () {

        $('#addmedicinepharmacytemplatemodal').modal('show');
        var id = 1;

        var post_url = 'action/action_load_pharmacy_medicine.php?do=load_treatment_medicine'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#pre_pharmacy_medications_template").html(result.trim());
        });

    });

    $(document).on("click", ".get_all_pre_medicine_details", function () {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_load_pharmacy_medicine.php?do=get_pre_medicine'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring
        }).done(function (result) {

            var tmm_id = result['tmm_id'];
            var tmm_medicine_name = result['tmm_medicine_name'];
            var tmm_generic = result['tmm_generic'];
            var tmm_company = result['tmm_company'];

            //console.log(result);

            $("#timt_pre_tmm_id").val(tmm_id);
            $("#timt_pre_medicine_name").val(tmm_medicine_name);
            $("#timt_pre_tmm_company").val(tmm_company);
            $("#timt_pre_tmm_generic").val(tmm_generic);

        });

    });

    $("#new_pre_medication_treatment_form_add").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var timt_pre_medicine_name = $("#timt_pre_medicine_name").val();
        var timt_tmm_generic = $("#timt_pre_tmm_generic").val();
        var timt_tmm_company = $("#timt_pre_tmm_company").val();
        var timt_tmm_custom = $("#timt_pre_tmm_custom").val();
        var timt_tmm_instruction = $("#timt_pre_tmm_instruction").val();

        if (timt_pre_medicine_name == "") {
            alert("Please Enter Medicine Name.");
            $("#timt_pre_medicine_name").focus();
            return false;
        } else if (timt_tmm_custom == "" && timt_tmm_instruction == "") {
            alert("Please Enter Frequency and Instruction.");
            $("#timt_pre_tmm_custom").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_medication_treatment_form_add').attr('disabled', 'disabled');


        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);

            $("#new_pre_medication_treatment_form_add").trigger("reset");
            $('#submit_button_medication_treatment_form_add').removeAttr('disabled');
            $("#pop_check_medi").prop('checked', false);
            $("#pop_check_medi").attr("disabled", false);

            $('.temp_text').attr('readonly', false);

            $('#addmedicinepharmacytemplatemodal').modal('hide');
            $(".custom_duration_div").hide();

            if ($('#add_table_inp_medication_treatment .dataTables_empty').length) {

                $("#add_table_inp_medication_treatment").html(result);

            } else {
                $("#add_table_inp_medication_treatment").append(result);
            }

            $('#submit_button_medication_treatment_form_add').attr('disabled', false);
            $('#submit_button_medication_treatment_form_add').show();
            $(".err_inpregisterloader").attr("style", "display:none");




        });

    });

    $(document).on("click", "#print_document", function () {
        var id = $(this).attr("data-pm_pid");
        var appid = $(this).attr("data-appid");
        var pu_id = $(this).attr("data-pu_id");
        $('#modal_hos_doc_print_popup').modal('show');
        $('#patient_id').val(id);
        $('#app_id').val(appid);
        $('#patuniid').val(pu_id);
    });

    $("#pdoc_print").submit(function (event) {
        if ($('input[type=radio][name="printdoc"]:checked').length == 0) {
            alert("Please select at least one option");
            return false;
        } else {
            //document.getElementById('printpopupclose').click();
            //return true;
        }
    });

    $(document).on("click", "#atd_print_document", function () {
        var id = $(this).attr("data-pm_pid");
        var inpid = $(this).attr("data-ipid");
        var pu_id = $(this).attr("data-pu_id");
        $('#modal_hos_doc_atd_print_popup').modal('show');
        $('#patient_id').val(id);
        $('#inpatient_id').val(inpid);
        $('#patuniid').val(pu_id);
    });

    $("#pdoc_print_atd").submit(function (event) {
        if ($('input[type=radio][name="printdoc"]:checked').length == 0) {
            alert("Please select at least one option");
            return false;
        } else {
            //document.getElementById('printpopupclose').click();
            //return true;
        }
    });

    $(document).on("click", ".case_select_medicine_taper", function () {
        var id = $(this).attr('data-medicineid');

        var taper = $(this).attr('data-taper');
        var ranid = $(this).attr('data-ranid');

        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();
        var decode_pm_pid = $("#decode_pm_pid").val();
        var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');

        var post_url = 'action/action_case_add_medicine.php?do=template&last_weight=' + last_weight + '&last_bsa=' + last_bsa + "&decode_pm_pid=" + decode_pm_pid;
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
                patient_uni_id: patient_uni_id,

            },
        }).done(function (result) {

            $(result).insertAfter('#medicine_name_' + ranid);
            $(result).insertAfter('#medicine_template_' + ranid);

            //$( ".medicine_case_name" ).sortable();

            $.CustomCashsheetPredictiveJs();

        });
    });

    $(document).on("click", ".case_select_medicine_pharmacy_taper", function () {
        var id = $(this).attr('data-medicineid');

        var taper = $(this).attr('data-taper');
        var ranid = $(this).attr('data-ranid');

        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();
        var decode_pm_pid = $("#decode_pm_pid").val();
        var patient_uni_id = $("#add_case_lab_heading").attr('data-pa_uni_id');

        var post_url = 'action/action_case_add_pharmacy_medicine.php?do=template&last_weight=' + last_weight + '&last_bsa=' + last_bsa + "&decode_pm_pid=" + decode_pm_pid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
                patient_uni_id: patient_uni_id,

            },
        }).done(function (result) {

            $(result).insertAfter('#medicine_name_' + ranid);
            $(result).insertAfter('#medicine_template_' + ranid);



        });
    });

    $(document).on("click", ".btn-danger-close", function () {

        var formId = $(this).closest("form").attr('id');

        $("#popup_notes").val("");

        $(".text_all_dis").attr('disabled', false);
        $('.temp_text').attr('readonly', false);
        $('.fix_add_general_order').remove();
        $("#pre_doctor_load_medications_template").html("");
        $(".custom_duration_div").hide();

        $("#" + formId).trigger("reset");
        $("#pop_check_medi").attr("disabled", false);


        $("#pre_cash_casemanage_second_tag_template").html("");
        $("#pre_cash_casemanage_third_tag_template").html("");
        $("#form_modal_add_popup_custom_box_box").trigger("reset");
        $('#modal_custom_template_box').modal('hide');
        $("#select_tctf_id").val(0);
        $("#select_tcts_id").val(0);
        $("#select_tctt_id").val(0);

        $("#pre_cash_casemanage_lab_parameter_template").html("");
        $("#pre_cash_casemanage_lab_parameter_selected").html("");

        $("#pre_cash_casemanage_lab_invs_parameter_template").html("");
        $("#pre_cash_casemanage_lab_invs_parameter_selected").html("");

        $("#select_tclt_id").val(0);
        $("#edit_text_case_inv_lab_title").val("");
        $("#edit_text_case_inv_lab_parametre").val("");
        $("#edit_text_case_lab_title").val("");
        $("#edit_text_case_lab_parametre").val("");

        $(".add_custom_template").remove();

        $(".medicine_tem_part").html("");
        $("#medicine_template_name").val("");

        $("#form_modal_add_popup_case_report_box").trigger("reset");
        $("#select_tcrt_id").val(0);
        $("#select_tcrr_id").val(0);

        $("#pre_cash_casemanage_report_remarks_template").html("");

        $(".li_case_report_title").css({
            'background-color': '#FFFFFF'
        });
        $(".li_case_report_remarks").css({
            'background-color': '#FFFFFF'
        });

        $.customCaseReportremoveErrorClass();


        //$('#case_custom_popup_textarea').summernote('code', "");
    });

    $(".patient_name_conatct_no_search").autocomplete({
        source: $(".get_base_url").val() + 'action/get_billing_patient_name_conatct_no_search.php',
        minLength: 3,
        focus: function (event, ui) {
            event.preventDefault();
            // $(".patient_name_conatct_no_search").val(ui.item.value);
            return false;
        },
        change: function (event, ui) {
            if (!ui.item) {
                $('#patient_unique_id').val("");
                $('#pname').val("");
            }
        },
        select: function (event, ui) {
            event.preventDefault();
            $(".search_patient_div").hide();
            $(".patient_details_div").show();
            $("#patient_unique_id").val(ui.item.patient_unique_id);
            $("#vacc_pm_ref_id").val(ui.item.patient_unique_id);

            var pname = ui.item.fname + ui.item.lname;
            var address = ui.item.address;
            var phone = ui.item.phone;

            var patient_name_id = '<span class="font-bold">' + pname + '</span>&nbsp;|&nbsp;' + ui.item.gen + '<span>&nbsp;&nbsp;</span>' + ui.item.age;
            $(".patient_details").html(patient_name_id);
            $(".patient_id").html(ui.item.pid);
            $(".p_dob").html(ui.item.dob);
            $(".p_email").html(ui.item.email);
            $(".p_contact_no").html(phone);
            $(".p_address").html(address);
            $(".clear_vaccine_patient").show();
            return false;
        }
    });

    $("#new_patient_form_add_vacc").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var patient_unique_id = $("#patient_unique_id").val();
        var atd_department = $("#old_atd_department").val();
        var atd_admitting_doctor = $("#old_atd_admitting_doctor").val();



        if (patient_unique_id == "") {
            alert("Please enter patient name.");
            $('#pname').focus();
            return false;
        } else if (atd_department == "") {
            alert("Please Select Department.");
            $('#old_atd_department').focus();
            return false;
        } else if (atd_admitting_doctor == "") {
            alert("Please Select Doctor.");
            $('#old_atd_admitting_doctor').focus();
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        //$('#submit_new_patient_add').attr('disabled', 'disabled');
        $('#submit_new_patient_add_vacc').hide();
        $('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            console.log(result);

            if (result == 1) {
                window.location.href = "vaccination_appointment.php";

            } else if (result == 2) {
                $('#submit_new_patient_add_vacc').show();
                $('.err_registerloader').hide();

            } else if (result == 3) {
                alert("Patient already in your database");
                $('#submit_new_patient_add_vacc').show();
                $('.err_registerloader').hide();

                return false;
            }

        });

    });

    $(document).on("click", "#delete_popup_vacc", function () {
        var id = $(this).attr('data-id');
        var pid = $(this).attr('data-pid');
        //$('#modal_vacc').modal('show');

        $('#delete_vacc_patient').click(function () {

            var post_url = 'action/action_patient_master_vacc.php?do=delete'
            var datastring = 'id=' + id + "&pm_pid=" + pid;
            ////console.log(datastring);
            $.ajax({ //ajax form submit
                type: "POST",
                url: post_url,
                data: datastring
            }).done(function (result) {
                ////console.log(result);
                // $('#modal_vacc').modal('hide');
                // $('#tr_vacc_' + id).remove();
                window.location.reload();

            });

        });

    });

    $(".add_patient_vaccine").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var pm_vaccine = $(this).closest(".pm_vaccine").val();
        var pm_user = $(this).closest(".pm_user").val();
        var given_date = $(this).closest('tr').find('.given_date').val();

        if (given_date == "") {
            alert("Please select given date.");
            return false;
        } else {

        }

        var message = 'Are you sure you want to save ??';
        if (confirm(message)) {

            var post_url = $(this).attr("action");
            var request_method = $(this).attr("method");
            var form_data = new FormData(this);

            $.ajax({ //ajax form submit
                url: post_url,
                type: request_method,
                data: form_data,
                dataType: "text",
                contentType: false,
                cache: false,
                processData: false
            }).done(function (result) {
                window.location.reload();

            });
        } else {
            return false;
        }

    });

    $(document).on("change", "#new_date_vacc", function () {

        var date = $(this).val();
        var dteSplit = date.split("-");
        var yr = dteSplit[2]; //special yr format, take last 2 digits
        var month = dteSplit[1];
        var day = dteSplit[0];
        var last_date = yr + month + day;
        var Link = $(".base_url_practice").val();
        window.location.href = Link + 'vaccination/daily_vaccine.php?date=' + last_date;
    });


    $(document).on("click", "#view_patient_details", function () {

        var id = $(this).attr('data-id');
        //$('#modal_vacc_patient_details').modal('show');

        var post_url = 'action/action_patient_master_vacc.php?do=patient_details'
        var datastring = 'id=' + id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $(".vac_p_details").html(result);

        });

    });

    $("#vacc_add_group").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var group_name = $("#group_name").val();

        if (group_name == "") {
            alert("Please enter the Group Name.");
            $('#group_name').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                $("span.name_validation").html("This name is already taken.");
                $('.err_register').hide();
                $('#submit_button').attr('disabled', false);
            } else {
                location.reload();
            }



        });
    });


    $(document).on("click", "#edit_group_vacc", function () {

        var id = $(this).attr('data-id');
        //$('#modal_edit_group_vacc').modal('show');

        var post_url = 'action/action_group_master.php?do=edit_pop_group'
        var datastring = 'id=' + id;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            $("#group_id").val(result['tvg_id']);
            $("#edit_group_name").val(result['tvg_name']);

        });
    });

    $("#vacc_edit_group").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var group_id = $("#group_id").val();
        var edit_group_name = $("#edit_group_name").val();

        if (edit_group_name == "") {
            alert("Please Enter Group Name.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                $("span.edit_name_validation").html("This name is already taken.");
                $('.err_register').hide();
                $('#submit_button').attr('disabled', false);
            } else {
                location.reload();
            }

        });

    });

    $(document).on("click", "#delete_group_vacc", function () {

        $('#modal_delete_group_vacc').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_group_id').val(id);

    });


    $(document).on("click", "#submit_button_delete_group", function () {
        var id = $('#delete_group_id').val();
        var post_url = 'action/action_group_master.php?do=delete'
        var datastring = 'id=' + id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });
    });


    $(document).on("click", "#add_generic_vacc", function () {

        $('#modal_add_generic_vacc').modal('show');

    });


    $("#vacc_add_generic").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var generic_name = $("#generic_name").val();

        if (generic_name == "") {
            alert("Please enter the generic Name.");
            $('#generic_name').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                $("span.generic_name_validation").html("This name is already taken.");
                $('.err_register').hide();
                $('#submit_button').attr('disabled', false);
            } else {
                location.reload();
            }



        });
    });


    $(document).on("click", "#edit_generic_vacc", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_generic_vacc').modal('show');

        var post_url = 'action/action_generic_master.php?do=edit_pop_generic'
        var datastring = 'id=' + id;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            $("#generic_id").val(result['tvgn_id']);
            $("#edit_generic_name").val(result['tvgn_name']);

        });
    });

    $("#vacc_edit_generic").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var generic_id = $("#generic_id").val();
        var edit_generic_name = $("#edit_generic_name").val();

        if (edit_generic_name == "") {
            alert("Please Enter Generic Name.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                $("span.edit_generic_name_validation").html("This name is already taken.");
                $('.err_register').hide();
                $('#submit_button').attr('disabled', false);
            } else {
                location.reload();
            }

        });

    });

    $(document).on("click", "#delete_generic_vacc", function () {

        $('#modal_delete_generic_vacc').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_generic_id').val(id);

    });


    $(document).on("click", "#submit_button_delete_generic_vacc", function () {
        var id = $('#delete_generic_id').val();
        var post_url = 'action/action_generic_master.php?do=delete'
        var datastring = 'id=' + id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });
    });


    $(document).on("click", "#add_company_vacc", function () {

        $('#modal_add_company_vacc').modal('show');

    });


    $("#vacc_add_company").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var company_name = $("#company_name").val();

        if (company_name == "") {
            alert("Please enter the company Name.");
            $('#company_name').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                $("span.company_name_validation").html("This name is already taken.");
                $('.err_register').hide();
                $('#submit_button').attr('disabled', false);
            } else {
                location.reload();
            }



        });
    });


    $(document).on("click", "#edit_company_vacc", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_company_vacc').modal('show');

        var post_url = 'action/action_company_master.php?do=edit_pop_company'
        var datastring = 'id=' + id;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            $("#company_id").val(result['tvc_id']);
            $("#edit_company_name").val(result['tvc_name']);

        });
    });

    $("#vacc_edit_company").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var company_id = $("#company_id").val();
        var edit_company_name = $("#edit_company_name").val();

        if (edit_company_name == "") {
            alert("Please Enter company Name.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result == 1) {
                $("span.edit_company_name_validation").html("This name is already taken.");
                $('.err_register').hide();
                $('#submit_button').attr('disabled', false);
            } else {
                location.reload();
            }

        });

    });

    $(document).on("click", "#delete_company_vacc", function () {

        $('#modal_delete_company_vacc').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_company_id').val(id);

    });


    $(document).on("click", "#submit_button_delete_company_vacc", function () {
        var id = $('#delete_company_id').val();
        var post_url = 'action/action_company_master.php?do=delete'
        var datastring = 'id=' + id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });
    });

    $("#new_vaccine_form_add").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var pha_tpm_name = $("#pha_tpm_name").val();
        var pha_tpmg_id = $("#pha_tpmg_id").val();
        var pha_tpmgn_id = $("#pha_tpmgn_id").val();
        var pha_tpmc_id = $("#pha_tpmc_id").val();

        if (pha_tpm_name == "") {
            alert("Please Enter Vaccine Name.");
            return false;
        } else if (pha_tpmg_id == "") {
            alert("Please Enter Group.");
            return false;
        } else if (pha_tpmgn_id == "") {
            alert("Please Enter Generic.");
            return false;
        } else if (pha_tpmc_id == "") {
            alert("Please Enter Company.");
            return false;
        } else {

        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_add_medicine').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //$('#submit_button').removeAttr('disabled');
            location.reload();

        });


    });


    $(".add_pharma_tpmg_id").autocomplete({

        source: 'action/action_group_master.php?do=get',
        minLength: 1,
        focus: function (event, ui) {
            return false;
            event.preventDefault();
            $('.add_pharma_tpmg_id').trigger('click');

        },
        change: function (event, ui) {
            // if (!ui.item) {
            //     $('.add_pharma_tpmg_id').val("");
            // }
        },
        select: function (event, ui) {
            $(".add_pharma_tpmg_id").val(ui.item.label);
            $(".add_pharma_tpmg_id").val(ui.item.value);
            return false;
        }
    });


    $(document).on('keyup', '.add_pharma_tpmgn_id', function () {

        $.autocomplete_generic_pharma_start();

    });

    $.autocomplete_generic_pharma_start = function () {

        $(".add_pharma_tpmgn_id").autocomplete({

            source: 'action/action_generic_master.php?do=get',
            minLength: 1,
            response: function (event, ui) {

                if (ui.content.length == 0) {
                    ui.content.push({
                        label: $(this).val(),
                        value: $(this).val(),
                        id: 0
                    });
                }
            }
        }).on('autocompleteselect', function (event, ui) {
            $(".add_pharma_tpmgn_id").val(ui.item.value);
            return false;
        });

    }


    $(document).on('keyup', '.add_pharma_tpmc_id', function () {

        $.autocomplete_company_pharma_start();

    });

    $.autocomplete_company_pharma_start = function () {

        $(".add_pharma_tpmc_id").autocomplete({

            source: 'action/action_company_master.php?do=get',
            minLength: 1,
            response: function (event, ui) {

                if (ui.content.length == 0) {
                    ui.content.push({
                        label: $(this).val(),
                        value: $(this).val(),
                        id: 0
                    });
                }
            }
        }).on('autocompleteselect', function (event, ui) {
            $(".add_pharma_tpmc_id").val(ui.item.value);
            return false;
        });

    }


    $(document).on("click", "#edit_vaccine_master", function () {

        var id = $(this).attr('data-id');
        $('#modal_edit_vaccine').modal('show');

        var post_url = 'action/action_new_vaccine.php?do=edit_pop_vaccine'
        var datastring = 'id=' + id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {

            $("#edit_pha_medicine_id").val(result['tvac_id']);
            $("#edit_pha_tpm_name").val(result['tvac_name']);
            $("#edit_pha_tpmg_id").val(result['tvg_name']);
            $("#edit_pha_tpmgn_id").val(result['tvgn_name']);
            $("#edit_pha_tpmc_id").val(result['tvc_name']);
            $("#edit_pha_reorder").val(result['tvac_reorder_reminder']);
            $("#edit_pha_expire").val(result['tvac_expire_reminder']);
            $("#edit_pha_location").val(result['tvac_location']);
        });
    });

    $("#new_vaccine_form_edit").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_pha_medicine_id = $("#edit_pha_medicine_id").val();
        var edit_pha_tpm_name = $("#edit_pha_tpm_name").val();
        var edit_pha_tpmg_id = $("#edit_pha_tpmg_id").val();
        var edit_pha_tpmgn_id = $("#edit_pha_tpmgn_id").val();
        var edit_pha_tpmc_id = $("#edit_pha_tpmc_id").val();
        var edit_pha_reorder = $("#edit_pha_reorder").val();
        var edit_pha_expire = $("#edit_pha_expire").val();
        var edit_pha_location = $("#edit_pha_location").val();


        if (edit_pha_tpm_name == "") {
            alert("Please Enter Vaccine Name.");
            return false;
        }

        if (edit_pha_tpmg_id == "") {
            alert("Please Enter Group.");
            return false;
        }

        if (edit_pha_tpmc_id == "") {
            alert("Please Enter Company.");
            return false;
        }

        if (edit_pha_tpmgn_id == "") {
            alert("Please Enter Generic.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            location.reload();

        });

    });

    $(document).on("click", "#delete_vaccine_master", function () {

        $('#modal_delete_vaccine').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_pha_mm_id').val(id);

    });

    $(document).on("click", "#submit_button_delete_vaccine", function () {
        var id = $('#delete_pha_mm_id').val();
        var post_url = 'action/action_new_vaccine.php?do=delete'
        var datastring = 'id=' + id;
        console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });
    });

    var i = 0;

    $(document).on('click', '#add_dnemic_vaccinerow', function () {
        i++;
        //var id = $(this).attr('data-id');
        //var id = $("#main_cat").val();
        //var gston = $(".gsttypeselect").val();
        var post_url = 'action/action_vaccine_templete.php?do=template'
        var datastring = 'id=' + i;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var append_data = result;


            $('#dynamicTable1').append('<tr id="row' + i + '" class="dynamic-added all_tr_vaccine">' + append_data + '<td class=""><a href="javascript:void(0);" id="row' + i + '" class="btn btn-gray-outline p-1 br-100 btn-close-sm btn_remove" width="20" height="20"><i class="ri-close-line"></i></a></tr>');

            //$(".chosen-select").chosen(); 

            $('.tvtv_name').chosen({
                disable_search: true,
                prettySelect: true
            });
        });
    });

    $(document).on('click', '.btn_remove', function () {
        var button_id = $(this).attr("id");
        $('#' + button_id + '').remove();
    });


    $("#add_vaccine_templete").submit(function (e) {

        var tvt_age = $("#tvt_age").val();
        if (tvt_age == '') {
            alert("Age is empty.");
            $("#tvt_age").focus();
            return false;
        }

        var isMobileVersion = $('.all_tr_vaccine');
        if (isMobileVersion.length == 0) {
            alert("Please Add Vaccine");
            return false;
        }

        // alert($(".tvtv_name").val());
        $(".tvtv_name").each(function () {
            if ($(this).val() == "") {
                alert('Please Select vaccine Name.');
                smb = "false";
                return false;

            } else {
                smb = "true";
            }
        });

        if (smb == "false") {
            return false;
        }

        e.preventDefault();
        proceed = true;
        $('#submit_button_opd_invoice').attr('disabled', 'disabled');
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            window.location.href = "vaccine_template.php";
            //window.location.reload();
        });

    });

    $("#edit_vaccine_templete").submit(function (e) {

        var tvt_age = $("#tvt_age").val();
        if (tvt_age == '') {
            alert("Age is empty.");
            $("#tvt_age").focus();
            return false;
        }

        var isMobileVersion = $('.all_tr_vaccine');
        if (isMobileVersion.length == 0) {
            alert("Please Add Vaccine");
            return false;
        }

        // alert($(".tvtv_name").val());
        $(".tvtv_name").each(function () {
            if ($(this).val() == "") {
                alert('Please Select vaccine Name.');
                smb = "false";
                return false;

            } else {
                smb = "true";
            }
        });

        if (smb == "false") {
            return false;
        }


        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            //window.location.href="out_invoice.php";
            window.location.href = "vaccine_template.php";
        });

    });


    $(document).on("click", "#delete_vaccine_templete", function () {
        $('#modal_delete_vaccine_templete').modal('show');
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');

        var text = templatename;
        $('.delete_vaccine_template_text').html(text);
        $('#delete_vac_temp_id').val(id);

    });

    $(document).on("click", "#submit_button_delete_vac_temp", function () {
        var id = $('#delete_vac_temp_id').val();
        var post_url = 'action/action_vaccine_templete.php?do=delete'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            window.location.reload();
        });

    });
    $(document).on("click", "#openpmssharecodemodal", function () {
        $('.pmsrefcodepatientdrp').val('').trigger('chosen:updated');
        $("#send_refer_code").trigger("reset");

        var Link = $(".get_base_url").val();

        $.post(Link + "action/action_get_patient_list_for_hm_code_link.php?do=link", {

        }, function (data) {

            $(".pmsrefcodepatientdrp").html(data);
            $('.pmsrefcodepatientdrp').trigger("chosen:updated");

        })

    });

    $(document).on("click", ".submit_collection_report", function () {
        rad_val = $("input:radio.checked_collection_report_type:checked").val();
        var depart = $(".depart").val();
        //alert(depart);
        if (depart > 0) {
            depart = depart;
            var departlink = '&d=' + depart;
            var departlink1 = 'd=' + depart;
        } else {
            alert("Please Select Bill Type");
            $("#depart").focus();
            return false;
            depart = "";
            var departlink = '';
            var departlink1 = '';
        }
        var s_date_3c = $(".s_date_3c").val();
        if (s_date_3c != "") {
            s_date_3c = s_date_3c;
            var start_datelink = '&s=' + s_date_3c;
        } else {
            alert("Please Select Start Date");
            $(".s_date_3c").focus();
            return false;
            s_date_3c = "";
            var start_datelink = '';
        }
        var e_date_3c = $(".e_date_3c").val();
        if (e_date_3c != "") {
            e_date_3c = e_date_3c;
            var end_datelink = '&e=' + e_date_3c;
        } else {
            alert("Please Select End Date");
            $(".e_date_3c").focus();
            return false;
            e_date_3c = "";
            var end_datelink = '';
        }
        if (rad_val == "dw_report") {

            var site_url_day_wice = "action/export_day_wice_col_report.php?";
            var day_wice_Export = site_url_day_wice + departlink1 + start_datelink + end_datelink;
            window.open(day_wice_Export, '_blank'); //export csv end 
        } else {
            var Link = $(".get_base_url").val();
            var site_url = "collection_report_table.php?type=1";
            var Main_Link = site_url + start_datelink + end_datelink + departlink;
            window.location.href = Main_Link;
        }


    });

    $(".checkbox_collection_bill_type").click(function () {
        if ($(".checkbox_collection_bill_type").is(':checked')) {
            $('#collection_bill_type option').prop('selected', true);
            // $("#collection_bill_type > option").prop("selected", "selected");
            $("#collection_bill_type").trigger("chosen:updated");
        } else {
            $('#collection_bill_type option').prop('selected', false);
            $("#collection_bill_type").trigger("chosen:updated");
        }
    });

    $("#issuedbycheck").click(function () {
        if ($("#issuedbycheck").is(':checked')) {
            $('#issued_by option').prop('selected', true);
            // $("#issued_by > option").prop("selected", "selected");
            $("#issued_by").trigger("chosen:updated");
        } else {
            $('#issued_by option').prop('selected', false);
            $("#issued_by").trigger("chosen:updated");
        }
    });
    $("#checkbox_mode_of_payment").click(function () {
        if ($("#checkbox_mode_of_payment").is(':checked')) {
            $('#mode_of_payment option').prop('selected', true);
            // $("#mode_of_payment > option").prop("selected", "selected");
            $("#mode_of_payment").trigger("chosen:updated");
        } else {
            $('#mode_of_payment option').prop('selected', false);
            $("#mode_of_payment").trigger("chosen:updated");
        }
    });

    $(document).on('change', '#collection_depart', function () {
        var id = this.value;

        var post_url = 'action/action_bill_department.php?do=collection_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#collection_depart_name").html(result);

        });

    });

    $("#defaultCheck1_linkshare").click(function () {
        if ($("#defaultCheck1_linkshare").is(':checked')) {
            $('.single_patient_sharepmslink').prop('disabled', true).trigger("chosen:updated");
            $('.single_patient_sharepmslink').val('').trigger('chosen:updated');
            $("#defaultCheck1_linkshare").val('1');

        } else {
            // $('.single_patient_sharepmslink').removeAttr('disabled');
            $('.single_patient_sharepmslink').prop('disabled', false).trigger("chosen:updated");
            $("#defaultCheck1_linkshare").val('');

        }
    });

    $(document).on("click", "#share_clinic_link_modal_open", function () {
        $('.pmssharelinkpatientdrp').val('').trigger('chosen:updated');
        $("#send_pmsshare_link").trigger("reset");

        var Link = $(".get_base_url").val();

        $.post(Link + "action/action_get_patient_list_for_hm_code_link.php?do=code", {

        }, function (data) {

            $(".pmssharelinkpatientdrp").html(data);
            $('.pmssharelinkpatientdrp').trigger("chosen:updated");

        })

    });

    $("#send_pmsshare_link").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var all_patient = $("#defaultCheck1_linkshare").val();
        var single_patient = $(".single_patient_sharepmslink").val();

        if (all_patient == "" && single_patient == "") {
            alert("Please select patient.");
            return false;
        } else if ($("#shareviasms_linkshare").prop('checked') == false && $("#shareviaemail_linkshare").prop('checked') == false) {
            alert("Please select share via.");
            return false;
        } else if ($("#shareviaemail_linkshare").prop('checked') == false && $("#shareviasms_linkshare").prop('checked') == false) {
            alert("Please select share via.");
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#send_pmsshare_link_btn').attr('disabled', 'disabled');
        $('#send_pmsshare_link_btn').hide();
        $('.err_registerloader_sendpmslink').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $("#share_clinic_link_modal").modal("hide");
            $('#send_pmsshare_link_btn').attr('disabled', false);
            $('#send_pmsshare_link_btn').show();
            $('.err_registerloader_sendpmslink').hide();

        });

    });

    $("#shareviasms_linkshare").click(function () {
        if ($("#shareviasms_linkshare").is(':checked')) {
            $("#shareviasms_linkshare").val('1');

        } else {
            $("#shareviasms_linkshare").val('');
        }
    });

    $("#shareviaemail_linkshare").click(function () {
        if ($("#shareviaemail_linkshare").is(':checked')) {
            $("#shareviaemail_linkshare").val('1');

        } else {
            $("#shareviaemail_linkshare").val('');
        }
    });

    $("#billtypecheck").click(function () {
        if ($("#billtypecheck").is(':checked')) {
            $('#incentive_3c option').prop('selected', true);
            // $("#incentive_3c > option").prop("selected", "selected");
            $("#incentive_3c").trigger("chosen:updated");
        } else {
            $('#incentive_3c option').prop('selected', false);
            $("#incentive_3c").trigger("chosen:updated");
        }
    });

    $(document).on('change', '.checked_report_type', function () {
        if (this.value == "Detailed_Report") { //check value if it is domicilio
            $('#incentive_3c').prop('disabled', false);
            $('#show_hide_ins_user_selectbox').show();
        } else {
            $('#show_hide_ins_user_selectbox').hide();
            $('#incentive_3c').prop('disabled', 'disabled');
        }
    });

    $(document).on('change', '#3c_depart', function () {
        var id = this.value;

        var post_url = 'action/action_bill_department.php?do=3c_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#3cdepart_name").html(result);

        });

    });

    $(document).on("click", "#submit_3c_report", function () {

        var Link = $(".get_base_url").val();
        var site_url = "3c_reprt_table.php?type=1";
        var chkArray = [];
        var chkArrayBillType = [];

        var section = $("#3c_depart").val();

        if (section == 0) {
            alert("Select Report Type.");
            $("#3c_depart").focus();
            return false;
        } else if ($('.bill_type:checked').length == 0) {
            alert("Please Select Type.");
            return false;
        } else if ($('#3cr_s_date_3c').val() == "") {
            alert("Please Select Start date.");
            $("#3cr_s_date_3c").focus();
            return false;
        } else if ($('#3cr_e_date_3c').val() == "") {
            alert("Please Select End date.");
            $("#3cr_e_date_3c").focus();
            return false;
        }


        var depart = $("#3c_depart").val();
        if (depart) {
            depart = depart;
            var departlink = '&d=' + depart;
        } else {
            depart = "";
            var departlink = '';
        }

        var accountant_3c = $("#accountant_3c").val();
        if (accountant_3c) {
            accountant_3c = accountant_3c;
            var accountant_3clink = '&a=' + accountant_3c;
        } else {
            accountant_3c = "";
            var accountant_3clink = '';
        }

        var s_date_3c = $("#3cr_s_date_3c").val();
        if (s_date_3c) {
            s_date_3c = s_date_3c;
            var start_datelink = '&sd=' + s_date_3c;
        } else {
            s_date_3c = "";
            var start_datelink = '';
        }

        var e_date_3c = $("#3cr_e_date_3c").val();
        if (e_date_3c) {
            e_date_3c = e_date_3c;
            var end_datelink = '&ed=' + e_date_3c;
        } else {
            e_date_3c = "";
            var end_datelink = '';
        }

        $(".bill_type:checked").each(function () {
            chkArrayBillType.push($(this).val());
        });

        selectedBillType = chkArrayBillType.join(',');

        if (selectedBillType) {
            bill_type = selectedBillType;
            var bill_typelink = '&bt=' + bill_type;
        } else {
            bill_type = "";
            var bill_typelink = '';
        }

        var Main_Link = site_url + departlink + accountant_3clink + start_datelink + end_datelink + bill_typelink;
        window.location.href = Main_Link;

    });

    $(".checked_issuedbycheck").click(function () {
        if ($(".checked_issuedbycheck").is(':checked')) {
            $('#issued_by_biiling option').prop('selected', true);
            // $("#issued_by_biiling > option").prop("selected", "selected");
            $("#issued_by_biiling").trigger("chosen:updated");
        } else {
            $('#issued_by_biiling option').prop('selected', false);
            $("#issued_by_biiling").trigger("chosen:updated");
        }
    });

    $(".billhoscls").change(function () {
        var billhmid = $(this).val();
        if (billhmid != "") {
            $('.billing_overall_div_option_type').show();
            $.post("action/action_billing_overall_option_gate.php", {

                hmid: billhmid

            }, function (data) {
                $('.billing_overall_div_option_type').html(data);
            })

        } else {
            $('.billing_overall_div_option_type').hide();
            $('.billing_overall_div_option').hide();
            // $('.billing_overall_div_option_type').hide();
            // $('.billing_overall_div_option_type').hide();
        }

    });

    // $(document).on("click", "#submit_billing_overall_report", function () {

    //     var checked_chk = $("input[name='cash_flow_report_type']:checked").val();

    //     if (checked_chk == "revenue") {

    //         var hmid = 0;
    //         var type = 0;
    //         var anyone = "";
    //         var anyone_val = "";
    //         var accountant = "";
    //         var issued_by = "";
    //         var Main_Link = "";
    //         var billcounter = "";

    //         var Link = $(".get_base_url").val();
    //         var site_url = "pdf_billing_overall_report.php?";

    //         var type = $("#depart_bill").val();
    //         var hmid = $("#billhos").val();
    //         var billcounter = $("#bill_id_report").val();
    //         var anyone = $("#billanyone_report").val();
    //         var anyone_val = $("#billanyone").val();
    //         var accountant = $("#accountant_3c_bill").val();
    //         var issued_by = $("#issued_by_biiling").val();
    //         var startdate = $("#rev_s_date_3c").val();
    //         var enddate = $("#rev_e_date_3c").val();

    //         if ($('.bill_overall_report_typecls:checked').length == 0) {

    //             alert("Please Select Report Type.");
    //             return false;

    //         }

    //         if (hmid == "") {
    //             alert("Please Select Hospital.");
    //             $("#billhos").focus();
    //             return false;
    //         } else {
    //             var hmlink = '&hm_id=' + hmid;
    //         }


    //         if (type == 0) {
    //             alert("Please Select Type.");
    //             $("#depart").focus();
    //             return false;
    //         } else {
    //             var typelink = '&type=' + type;
    //         }

    //         if (billcounter == "") {
    //             alert("Please Select Counter.");
    //             $("#bill_id_report").focus();
    //             return false;
    //         } else {
    //             var billcounterlink = '&billcounter=' + billcounter;
    //         }


    //         if (anyone == "") {
    //             alert("Please Select Any One.");
    //             $("#billanyone_report").focus();
    //             return false;
    //         } else {
    //             var anyonelink = '&anyone=' + anyone;
    //         }

    //         if (anyone_val == null || anyone_val == "") {
    //             var anytypename = $("#billanyone_report option:selected").text()
    //             alert("Please Select " + anytypename + ".");
    //             $("#billanyone").focus();
    //             return false;
    //         } else {
    //             var anyone_vallink = '&anyone_val=' + anyone_val;
    //         }

    //         if (accountant == null || accountant == "") {
    //             alert("Please Select Account.");
    //             $("#accountant_3c_bill").focus();
    //             return false;
    //         } else {
    //             var accountantlink = '&accountant=' + accountant;
    //         }

    //         if (issued_by == null || issued_by == "") {
    //             alert("Please Select Issued By.");
    //             $("#issued_by_biiling").focus();
    //             return false;
    //         } else {
    //             var issued_bylink = '&issued_by=' + issued_by;
    //         }

    //         if ($('#rev_s_date_3c').val() == "") {

    //             alert("Please select Start date.");
    //             return false;

    //         } else {
    //             var start_datelink = '&start_date=' + startdate;
    //         }

    //         if ($('#rev_e_date_3c').val() == "") {

    //             alert("Please select End date.");
    //             return false;

    //         } else {
    //             var end_datelink = '&end_date=' + enddate;
    //         }

    //         var Main_Link = site_url + hmlink + typelink + billcounterlink + anyonelink + anyone_vallink +
    //             accountantlink + issued_bylink + start_datelink + end_datelink;

    //         //export csv start

    //         var site_url_Export = "action/export_billing_overall_revenue_report.php?";
    //         var Main_Link_Export = site_url_Export + hmlink + typelink + billcounterlink + anyonelink + anyone_vallink +
    //             accountantlink + issued_bylink + start_datelink + end_datelink;

    //         window.open(Main_Link_Export, '_blank'); //export csv end
    //         //window.open(Main_Link, '_blank');


    //     } else if (checked_chk == "cash_flow") {

    //         $.get_cash_flow_report();

    //     } else {

    //     }


    // });

    // $.get_cash_flow_report = function () {


    //     var type = 0;
    //     var accountant = "";
    //     var issued_by = "";
    //     var Main_Link = "";
    //     var billcounter = "";
    //     var cash_flow_cat = "";
    //     var cash_bill_type = "";
    //     var cash_mode_of_payment = "";

    //     var Link = $(".get_base_url").val();
    //     var site_url = "pdf_cash_flow.php?";

    //     var type = $("#cash_depart").val();
    //     var billcounter = $("#cash_depart_type").val();
    //     var accountant = $("#cash_accountant").val();
    //     var issued_by = $("#cash_issued_by").val();
    //     var startdate = $("#cash_s_date_3c").val();
    //     var enddate = $("#cash_e_date_3c").val();
    //     var cash_flow_cat = $("#cash_flow_cat").val();
    //     var cash_bill_type = $("#cash_collection_bill_type").val();
    //     var cash_mode_of_payment = $("#cash_mode_of_payment").val();


    //     if (type == 0) {
    //         alert("Please select bill type.");
    //         $("#cash_depart").focus();
    //         return false;
    //     } else {
    //         var typelink = '&a=' + type;
    //     }



    //     if (billcounter == "") {
    //         alert("Please select counter.");
    //         $("#cash_depart_type").focus();
    //         return false;
    //     } else {
    //         var billcounterlink = '&c=' + billcounter;
    //     }

    //     if (cash_flow_cat == null) {
    //         //alert("Please select category.");
    //         //$("#cash_flow_cat").focus();
    //         //return false;
    //         var catelink = '&b=0';
    //     } else {
    //         var catelink = '&b=' + cash_flow_cat;
    //     }


    //     if (cash_bill_type == null) {
    //         alert("Please select type.");
    //         $("#cash_collection_bill_type").focus();
    //         return false;
    //     } else {
    //         var bill_link = '&d=' + cash_bill_type;
    //     }

    //     if (issued_by == null) {
    //         alert("Please select issued By.");
    //         $("#cash_issued_by").focus();
    //         return false;
    //     } else {
    //         var issued_bylink = '&e=' + issued_by;
    //     }

    //     if (cash_mode_of_payment == null) {
    //         alert("Please select mode of payment.");
    //         $("#cash_mode_of_payment").focus();
    //         return false;
    //     } else {
    //         var modlink = '&f=' + cash_mode_of_payment;
    //     }


    //     if (accountant == null) {
    //         alert("Please select account.");
    //         $("#cash_accountant").focus();
    //         return false;
    //     } else {
    //         var accountantlink = '&g=' + accountant;
    //     }


    //     if ($('#cash_s_date_3c').val() == "") {

    //         alert("Please select start date.");
    //         return false;

    //     } else {
    //         var start_datelink = '&h=' + startdate;
    //     }

    //     if ($('#cash_e_date_3c').val() == "") {

    //         alert("Please select end date.");
    //         return false;

    //     } else {
    //         var end_datelink = '&i=' + enddate;
    //     }
    //     //print

    //     var Main_Link = site_url + typelink + catelink + billcounterlink + bill_link + issued_bylink + modlink + accountantlink + start_datelink + end_datelink;

    //     //export csv start

    //     var site_url_Export = "action/export_cash_flow.php?";
    //     var Main_Link_Export = site_url_Export + typelink + catelink + billcounterlink + bill_link + issued_bylink +
    //         modlink + accountantlink + start_datelink + end_datelink;
    //     window.open(Main_Link_Export, '_blank'); //export csv end 
    //     //window.open(Main_Link, '_blank'); //print

    // }

    $(document).on('change', '#cash_depart', function () {
        var id = this.value;

        var post_url = 'action/get_bill_counter_for_cash_flow.php?do=cash_flow_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $(".cash_flow_counter_div").html(result);
            $(".chosen_select").chosen();

        });

    });

    $("#checkbox_cash_type").click(function () {
        if ($("#checkbox_cash_type").is(':checked')) {
            $('#cash_collection_bill_type option').prop('selected', true);
            // $("#cash_collection_bill_type > option").prop("selected", "selected");
            $("#cash_collection_bill_type").trigger("chosen:updated");
        } else {
            $('#cash_collection_bill_type option').prop('selected', false);
            $("#cash_collection_bill_type").trigger("chosen:updated");
        }
    });


    $("#checkbox_issued_by").click(function () {
        if ($("#checkbox_issued_by").is(':checked')) {
            $('#cash_issued_by option').prop('selected', true);
            // $("#cash_issued_by > option").prop("selected", "selected");
            $("#cash_issued_by").trigger("chosen:updated");
        } else {
            $('#cash_issued_by option').prop('selected', false);
            $("#cash_issued_by").trigger("chosen:updated");
        }
    });

    $("#checkbox_mod").click(function () {
        if ($("#checkbox_mod").is(':checked')) {
            $('#cash_mode_of_payment option').prop('selected', true);
            // $("#cash_mode_of_payment > option").prop("selected", "selected");
            $("#cash_mode_of_payment").trigger("chosen:updated");
        } else {
            $('#cash_mode_of_payment option').prop('selected', false);
            $("#cash_mode_of_payment").trigger("chosen:updated");
        }
    });

    $("#checkbox_aco").click(function () {
        if ($("#checkbox_aco").is(':checked')) {
            $('#cash_accountant option').prop('selected', true);
            // $("#cash_accountant > option").prop("selected", "selected");
            $("#cash_accountant").trigger("chosen:updated");
        } else {
            $('#cash_accountant option').prop('selected', false);
            $("#cash_accountant").trigger("chosen:updated");
        }
    });

    $(document).on('change', '.department_over_doctor', function () {
        var depart_doc = this.value;
        var hosid = $("#pam_over_hopitals_id").val();

        var post_url = 'action/action_select_department_doctor.php?type=hospital'
        var datastring = 'hosid=' + hosid + '&depart_doc=' + depart_doc;

        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#hos_or_department").html(result.trim());
            $(".chosen_select").chosen();
            // if (depart_doc == 1) {
            //     $("#div_over_department").show();
            //     $(".details_over_department_id").html(result.trim());
            //     $(".details_over_doctor_id").html("");
            //     $("#div_over_doctor").hide();
            // }
            // else if (depart_doc == 2) {
            //     $("#div_over_department").hide();
            //     $(".details_over_department_id").html("");
            //     $(".details_over_doctor_id").html(result.trim());
            //     $("#div_over_doctor").show();
            // } else {
            //     $("#div_over_department").hide();
            //     $(".details_over_department_id").html("");
            //     $(".details_over_doctor_id").html("");
            //     $("#div_over_doctor").hide();
            // }

        });


    });

    // $(document).on("click", "#submit_ipd_financial_all_report_overall", function () {

    //     var Array_details_over_department_id = [];

    //     var Array_over_details_doctor_id = [];



    //     var pam_hopitals_id = $("#pam_over_hopitals_id").val();
    //     if (pam_hopitals_id > 0) {
    //         pam_hopitals_id = pam_hopitals_id;
    //         var Hospitallink = '&hm_id=' + pam_hopitals_id;
    //     } else {
    //         alert("Please Select Hospital");
    //         return false;
    //         depart = "";
    //         var Hospitallink = '';
    //     }

    //     var department_doctor = $("#department_over_doctor").val();
    //     if (department_doctor > 0) {
    //         department_doctor = department_doctor;
    //         var departmentlink = '&depart_doc=' + department_doctor;
    //     } else {
    //         alert("Please Select Department Or Doctor");
    //         return false;
    //         depart = "";
    //         var departmentlink = '';
    //     }

    //     var s_date_3c = $("#cos_date_3c").val();
    //     if (s_date_3c != "") {
    //         s_date_3c = s_date_3c;
    //         var start_datelink = '&start_date=' + s_date_3c;
    //     } else {
    //         alert("Please Select Start Date");
    //         $("#cos_date_3c").focus();
    //         return false;
    //         s_date_3c = "";
    //         var start_datelink = '';
    //     }

    //     var e_date_3c = $("#coe_date_3c").val();
    //     if (e_date_3c != "") {
    //         e_date_3c = e_date_3c;
    //         var end_datelink = '&end_date=' + e_date_3c;
    //     } else {
    //         alert("Please Select End Date");
    //         $("#coe_date_3c").focus();
    //         return false;
    //         e_date_3c = "";
    //         var end_datelink = '';
    //     }

    //     $.each($(".details_over_department_id option:selected"), function () {
    //         Array_details_over_department_id.push($(this).val());
    //     });

    //     details_over_department_id = Array_details_over_department_id.join(",");

    //     if (details_over_department_id != "") {
    //         details_over_department_id = details_over_department_id;
    //         var details_department_idlink = '&details_department_id=' + details_over_department_id;
    //     } else {
    //         details_over_department_id = "";
    //         var details_department_idlink = '';
    //     }

    //     $.each($(".details_over_doctor_id option:selected"), function () {
    //         Array_over_details_doctor_id.push($(this).val());
    //     });

    //     details_over_doctor_idString = Array_over_details_doctor_id.join(",");

    //     if (details_over_doctor_idString != "") {
    //         details_over_doctor_idString = details_over_doctor_idString;
    //         var details_doctor_idlink = '&details_doctor_id=' + details_over_doctor_idString;
    //     } else {
    //         details_over_doctor_idString = "";
    //         var details_doctor_idlink = '';
    //     }


    //     // var Link = $(".get_base_url").val();
    //     // var site_url = Link + "master_data/pdf_appointment_analytics_overall.php?type=1";
    //     // var Main_Link = site_url + start_datelink + end_datelink + Hospitallink + departmentlink + details_department_idlink + details_doctor_idlink;
    //     //console.log(Main_Link);
    //     // window.location.href = Main_Link;
    //     //window.open(Main_Link,'_blank');

    //     var report_type = $("input[name='report_type']:checked").val();
    //     var report_type_idlink = '&report_type=' + report_type;

    //     var site_url_Export = "action/action_export_financial_ipd_reports.php?type=1";
    //     var Main_Link_Export = site_url_Export + report_type_idlink + start_datelink + end_datelink + Hospitallink + departmentlink + details_department_idlink + details_doctor_idlink;
    //     console.log(Main_Link_Export);
    //     window.open(Main_Link_Export, '_blank'); //export csv end
    //     window.open(Main_Link, '_blank');

    // });

    $(document).on("click", "#submit_appointment_report", function () {

        var pam_hopitals_id = $("#pam_hopitals_id").val();
        if (pam_hopitals_id > 0) {
            pam_hopitals_id = pam_hopitals_id;
            var Hospitallink = '&hm_id=' + pam_hopitals_id;
        } else {
            alert("Please Select Hospital");
            return false;
            depart = "";
            var Hospitallink = '';
        }

        var s_date_3c = $("#app_s_date_3c").val();
        if (s_date_3c != "") {
            s_date_3c = s_date_3c;
            var start_datelink = '&start_date=' + s_date_3c;
        } else {
            alert("Please Select Start Date");
            $("#app_s_date_3c").focus();
            return false;
            s_date_3c = "";
            var start_datelink = '';
        }

        var e_date_3c = $("#app_e_date_3c").val();
        if (e_date_3c != "") {
            e_date_3c = e_date_3c;
            var end_datelink = '&end_date=' + e_date_3c;
        } else {
            alert("Please Select End Date");
            $("#app_e_date_3c").focus();
            return false;
            e_date_3c = "";
            var end_datelink = '';
        }

        var popup_clinical = $("input[name='popup_clinical']:checked").val();
        if (popup_clinical) {
            popup_clinical = popup_clinical;
            var Clinicallink = '&clinical=' + popup_clinical;
        } else {
            popup_clinical = "";
            var Clinicallink = '';
        }

        var Link = $(".get_base_url").val();
        var site_url = "export_appointment_analytics_report.php?type=1";
        var Main_Link = site_url + start_datelink + end_datelink + Hospitallink + Clinicallink;
        console.log(Main_Link);
        // window.location.href = Main_Link;
        window.open(Main_Link, '_blank');


    });

    $(document).on('change', '.app_department_doctor', function () {
        var depart_doc = this.value;
        var hosid = $("#pam_gen_hopitals_id").val();

        var post_url = 'action/action_select_department_doctor.php?type=app_hospital'
        var datastring = 'hosid=' + hosid + '&depart_doc=' + depart_doc;

        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#app_hos_or_department").html(result.trim());
            $(".chosen_select").chosen();

        });


    });


    $(document).on('change', '.pam_department_over_doctor', function () {
        var depart_doc = this.value;
        var hosid = $("#app_pam_over_hopitals_id").val();

        var post_url = 'action/action_select_department_doctor.php?type=app_pam_hospital'
        var datastring = 'hosid=' + hosid + '&depart_doc=' + depart_doc;

        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#app_pam_hos_or_department").html(result.trim());
            $(".chosen_select").chosen();

        });


    });



    $(document).on('change', '#pre_gen_department_id', function (e) {
        var dpid = this.value;
        // var hosid = $("#pre_gen_hopitals_id").val();

        var post_url = 'action/action_select_department_doctor.php?type=hospital_only'
        var datastring = 'dpid=' + dpid;

        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var dp_id = $("#pre_gen_department_id").val();
            var um_id = $("#pre_details_doctor_id").val();
            $(".details_doctor_id").html(result.trim());
            $.mydepartmentMedicine(e, dp_id, um_id);
        });


    });

    $(document).on('change', '#pre_details_doctor_id', function (e) {
        var um_id = this.value;
        var serach = $('#pre_search_type').val();
        var dp_id = $('#pre_gen_department_id').val();
        $.mydepartmentMedicine(e, dp_id, um_id);

    });


    $(document).on('change', '#pre_search_type', function (e) {
        var um_id = $("#pre_details_doctor_id").val();
        var serach = $(this).val()
        var dp_id = $("#pre_gen_department_id").val();
        $.mydepartmentMedicine(e, dp_id, um_id);
    });

    $.mydepartmentMedicine = function (e, dp_id, um_id) {

        e.preventDefault();

        var dpid = dp_id;
        var serach = $("#pre_search_type").val();
        $(".details_medicine_id").show();
        $("#pa-mgc-label").html('Select ' + serach);

        //deselect all previous option
        $("#details_medicine_id").each(function () {
            $(this).val(null).trigger('change');
        });

        var UmIDArray = [];
        $.each($("#pre_details_doctor_id option:selected"), function () {
            UmIDArray.push($(this).val());
        });
        UmidString = UmIDArray.join(",");


        $('#details_medicine_id').select2({
            dropdownParent: $('#prescriptionanalyticsmodal'), // Only For Select Display in Modal
            dropdownPosition: 'below',
            minimumInputLength: 3,
            maximumSelectionLength: 100,
            width: 'resolve', // need to override the changed default   
            scrollAfterSelect: false,
            ajax: {
                delay: 250, // wait 250 milliseconds before triggering the request
                // quietMillis: 250,
                url: 'action/action_select_medicine_para.php',
                type: "post",
                dataType: 'json',
                data: function (params) {
                    var query = {
                        keyword: params.term,
                        page: params.page || 1,
                        serach: serach,
                        dpid: dpid,
                        um_id: UmidString
                    }
                    return query;
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;
                    var datalist = data['data'];
                    var totaldata = data.totaldata;
                    if (datalist != null && datalist.length > 0) {
                        return {
                            results: datalist,
                            pagination: {
                                more: (params.page * 150) < totaldata
                            }
                        };
                    } else {
                        return false
                    }
                },
                cache: true
            },
            dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
            escapeMarkup: function (m) {
                return m;
            } // we do not want to escape markup since we are displaying html in resul
        })
    }


    $(document).on("click", "#submit_prescription_report", function (e) {

        var pam_hopitals_id = $("#pre_gen_hopitals_id").val();
        var pam_department_id = $("#pre_gen_department_id").val();
        var pre_search_type = $("#pre_search_type").val();
        var pre_opd_ipd = $("#pre_opd_ipd").val();
        var s_date_3c = $("#medi_cs_date_3c").val();
        var e_date_3c = $("#medi_ce_date_3c").val();
        var details_medicine_id = $("#details_medicine_id").val();

        // if(pam_department_id == 0){

        //     alert("Please Select Department");
        //     $("#pre_gen_department_id").focus();
        //     return false;

        // }  else

        if (details_medicine_id.length == "0" && $("#only_medicine_check").is(':checked') == false) {

            alert("Please Select " + pre_search_type);
            $("#details_medicine_id").focus();
            return false;

        } else if (pre_opd_ipd == 0) {

            alert("Please Select OPD / IPD");
            $("#pre_opd_ipd").focus();
            return false;

        } else if (s_date_3c == "" || s_date_3c == null) {

            alert("Please Start Date");
            $("#s_date_3c").focus();
            return false;

        } else if (e_date_3c == "" || e_date_3c == null) {

            alert("Please End Date");
            $("#e_date_3c").focus();
            return false;

        } else {

            $("#form_submit_prescription_report").submit();
            return true;

        }

    });



    $(document).on('change', '.ipd_department_over_doctor', function () {
        var depart_doc = this.value;
        var hosid = $("#ipd_pam_over_hopitals_id").val();

        var post_url = 'action/action_select_department_doctor.php?type=hospital'
        var datastring = 'hosid=' + hosid + '&depart_doc=' + depart_doc;

        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#ipd_hos_or_department").html(result.trim());
            $(".chosen_select").chosen();
        });


    });

    // $(document).on("click", "#submit_ipd_all_report_overall", function () {

    //     var Array_details_over_department_id = [];

    //     var Array_over_details_doctor_id = [];



    //     var pam_hopitals_id = $("#ipd_pam_over_hopitals_id").val();
    //     if (pam_hopitals_id > 0) {
    //         pam_hopitals_id = pam_hopitals_id;
    //         var Hospitallink = '&hm_id=' + pam_hopitals_id;
    //     } else {
    //         alert("Please Select Hospital");
    //         return false;
    //         depart = "";
    //         var Hospitallink = '';
    //     }

    //     var department_doctor = $("#ipd_department_over_doctor").val();
    //     if (department_doctor > 0) {
    //         department_doctor = department_doctor;
    //         var departmentlink = '&depart_doc=' + department_doctor;
    //     } else {
    //         alert("Please Select Department Or Doctor");
    //         return false;
    //         depart = "";
    //         var departmentlink = '';
    //     }

    //     if (department_doctor == 1) {
    //         var pam_department_id = $("#details_over_department_id").val();
    //         if (pam_department_id == "") {
    //             alert("Please Select Department");
    //             return false;

    //         }
    //     } else if (department_doctor == 2) {

    //         var pam_department_id = $("#details_over_doctor_id").val();
    //         if (pam_department_id == "") {
    //             alert("Please Select Doctor");
    //             return false;
    //         }
    //     }

    //     var s_date_3c = $("#ipd_cos_date_3c").val();
    //     if (s_date_3c != "") {
    //         s_date_3c = s_date_3c;
    //         var start_datelink = '&start_date=' + s_date_3c;
    //     } else {
    //         alert("Please Select Start Date");
    //         $("#ipd_cos_date_3c").focus();
    //         return false;
    //         s_date_3c = "";
    //         var start_datelink = '';
    //     }

    //     var e_date_3c = $("#ipd_coe_date_3c").val();
    //     if (e_date_3c != "") {
    //         e_date_3c = e_date_3c;
    //         var end_datelink = '&end_date=' + e_date_3c;
    //     } else {
    //         alert("Please Select End Date");
    //         $("#ipd_coe_date_3c").focus();
    //         return false;
    //         e_date_3c = "";
    //         var end_datelink = '';
    //     }

    //     $.each($(".details_over_department_id option:selected"), function () {
    //         Array_details_over_department_id.push($(this).val());
    //     });

    //     details_over_department_id = Array_details_over_department_id.join(",");

    //     if (details_over_department_id !== "") {
    //         details_over_department_id = details_over_department_id;
    //         var details_department_idlink = '&details_department_id=' + details_over_department_id;
    //     } else {
    //         details_over_department_id = "";
    //         var details_department_idlink = '';
    //     }

    //     $.each($(".details_over_doctor_id option:selected"), function () {
    //         Array_over_details_doctor_id.push($(this).val());
    //     });

    //     details_over_doctor_idString = Array_over_details_doctor_id.join(",");

    //     if (details_over_doctor_idString !== "") {
    //         details_over_doctor_idString = details_over_doctor_idString;
    //         var details_doctor_idlink = '&details_doctor_id=' + details_over_doctor_idString;
    //     } else {
    //         details_over_doctor_idString = "";
    //         var details_doctor_idlink = '';
    //     }


    //     // var Link = $(".get_base_url").val();
    //     // var site_url = Link + "master_data/pdf_appointment_analytics_overall.php?type=1";
    //     // var Main_Link = site_url + start_datelink + end_datelink + Hospitallink + departmentlink + details_department_idlink + details_doctor_idlink;
    //     //console.log(Main_Link);
    //     // window.location.href = Main_Link;
    //     //window.open(Main_Link,'_blank');

    //     var site_url_Export = "action/action_export_ipd_reports.php?type=1";
    //     var Main_Link_Export = site_url_Export + start_datelink + end_datelink + Hospitallink + departmentlink + details_department_idlink + details_doctor_idlink;
    //     console.log(Main_Link_Export);
    //     window.open(Main_Link_Export, '_blank'); //export csv end
    //     window.open(Main_Link, '_blank');

    // });

    $(document).on("click", "#refer_popup_patient", function () {
        $('#modal_refer_popup_patient').modal('show');
        var id = $(this).attr("data-id");
        $('#rid_value').val(id);
        var post_url = 'action/action_refer_master.php?do=popup_data_patient'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#refer_data").html(result);

        });
    });

    $(document).on("click", "#get_refer_date_data", function () {
        var id = $("#rid_value").val();
        var from_date = $("#from_date").val();
        var to_date = $("#to_date").val();
        if (from_date == "") {
            alert("From date is empty");
            return false;
        } else if (to_date == "") {
            alert("To date is empty");
            return false;
        } else {

        }
        var post_url = 'action/action_refer_master.php?do=popup_filter_data'
        var datastring = 'id=' + id + '&from_date=' + from_date + '&to_date=' + to_date;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#refer_data").html(result);

        });

    });

    $(document).on("click", "#get_clear_refer_date_data", function () {
        var id = $('#rid_value').val();
        $('#rid_value').val(id);
        var post_url = 'action/action_refer_master.php?do=popup_data_patient'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#from_date").val("");
            $("#to_date").val("");
            $("#refer_data").html(result);

        });

    });

    $("#add_new_ref_doctor_master").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#rm_name").val();
        var rm_email = $("#rm_email").val();
        var rm_phone_no = $("#rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_add_ref_doctor').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $("#edit_new_ref_doctor_master").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#edit_rm_name").val();
        var rm_email = $("#edit_rm_email").val();
        var rm_phone_no = $("#edit_rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#edit_rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#edit_rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#edit_rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_edit_ref_doctor').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".select_edit_refer_doctor", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');

        var post_url = 'action/action_new_referance.php?do=edit_details'
        var datastring = 'rm_id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: "JSON",
        }).done(function (result) {

            $("#edit_rm_id").val(result['rm_id']);
            $("#edit_rm_name").val(result['rm_name']);
            $("#edit_rm_email").val(result['rm_email']);
            $("#edit_rm_phone_no").val(result['rm_phone_no']);

        });

    });

    $(document).on("click", ".delete_single_refer_doctor", function () {

        var rm_id = $(this).attr('data-id');
        var text = "Are you sure you want to delete <b>Reference</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);
        $('#delete_rm_id').val(rm_id);
    });

    $(document).on("click", "#delete_refer_doctor", function () {
        var delete_rm_id = $("#delete_rm_id").val();
        var post_url = 'action/action_refer_master.php?do=delete_other'
        var datastring = 'delete_rm_id=' + delete_rm_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", "#refer_popup", function () {
        var id = $(this).attr("data-id");
        $("#rid_value").val(id);
        var post_url = 'action/action_refer_master.php?do=popup_data'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#refer_data").html(result);

        });
    });

    $(document).on("click", "#get_refer_doctor_date_data", function () {
        var id = $("#rid_value").val();
        var from_date = $("#from_date").val();
        var to_date = $("#to_date").val();
        if (from_date == "") {
            alert("Start date is empty");
            return false;
        } else if (to_date == "") {
            alert("End date is empty");
            return false;
        } else {

        }
        var post_url = 'action/action_refer_master.php?do=popup_filter_doctor_data'
        var datastring = 'id=' + id + '&from_date=' + from_date + '&to_date=' + to_date;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#refer_data").html(result);

        });

    });

    $(document).on("click", "#get_clear_refer_doctor_date_data", function () {
        var id = $('#rid_value').val();
        $('#rid_value').val(id);
        var post_url = 'action/action_refer_master.php?do=popup_data'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#from_date").val("");
            $("#to_date").val("");
            $("#refer_data").html(result);

        });

    });

    $("#add_inp_new_ref_doctor_master").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#rm_name").val();
        var rm_email = $("#rm_email").val();
        var rm_phone_no = $("#rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_add_inp_ref_doctor_master').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".select_edit_refer_inp", function () {
        ////console.log("Yes");
        var id = $(this).attr('data-id');

        var post_url = 'action/action_inp_new_referance.php?do=edit_inp_details'
        var datastring = 'rm_id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: "JSON",
        }).done(function (result) {

            $("#edit_inp_rm_id").val(result['rm_id']);
            $("#edit_inp_rm_name").val(result['rm_name']);
            $("#edit_inp_rm_email").val(result['rm_email']);
            $("#edit_inp_rm_phone_no").val(result['rm_phone_no']);

        });

    });

    $("#edit_inp_new_ref_doctor_master").submit(function (e) {
        e.preventDefault();

        //  proceed = true;
        var rm_name = $("#edit_inp_rm_name").val();
        var rm_email = $("#edit_inp_rm_email").val();
        var rm_phone_no = $("#edit_inp_rm_phone_no").val();

        if (rm_name == "") {
            alert("Please enter name.");
            $("#edit_inp_rm_name").focus();
            return false;
        } else if (rm_email == "") {
            alert("Please Enter email.");
            $("#edit_inp_rm_email").focus();
            return false;
        } else if (rm_phone_no == "") {
            alert("Please Enter phone number.");
            $("#edit_inp_rm_phone_no").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_edit_inp_ref_doctor_master').attr('disabled', 'disabled');
        ////console.log(form_data);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", ".delete_single_refer_inp", function () {

        var rm_id = $(this).attr('data-id');
        var text = "Are you sure you want to delete <b>Reference</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_usermaster_text').html(text);
        $('#delete_rm_id').val(rm_id);
    });

    $(document).on("click", "#delete_refer_doctor", function () {
        var delete_rm_id = $("#delete_rm_id").val();
        var post_url = 'action/action_inp_new_referance.php?do=delete_other'
        var datastring = 'delete_rm_id=' + delete_rm_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            location.reload();
        });

    });

    $(document).on("click", "#refer_popup_inp", function () {
        var id = $(this).attr("data-id");
        $('#rid_value').val(id);
        var post_url = 'action/action_refer_master_inp.php?do=popup_data'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#refer_data_inp").html(result);

        });
    });

    $(document).on("click", "#get_date_data", function () {

        var id = $("#rid_value").val();
        var from_date = $("#from_date").val();
        var to_date = $("#to_date").val();
        if (from_date == "") {
            alert("Start date is empty");
            return false;
        } else if (to_date == "") {
            alert("End date is empty");
            return false;
        } else {

        }
        var post_url = 'action/action_refer_master_inp.php?do=popup_filter_data'
        var datastring = 'id=' + id + '&from_date=' + from_date + '&to_date=' + to_date;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            //console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#refer_data_inp").html(result);

        });

    });

    $(document).on("click", "#get_clear_date_data", function () {
        var id = $('#rid_value').val();
        $('#rid_value').val(id);
        var post_url = 'action/action_refer_master_inp.php?do=popup_data'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal_refer_popup').modal('hide');
            $("#from_date").val("");
            $("#to_date").val("");
            $("#refer_data_inp").html(result);

        });

    });

    $(document).on("keyup", ".case_search_medicine_template", function () {
        var searchString1 = $(this).val();
        var department_id = $("#department_id").val();

        $.ajax({
            type: 'post',
            url: 'action/get_search_medicine_name_templae.php',
            data: {
                p_d_data1: searchString1.trim(),
                department_id: department_id,

            },
            dataType: "text",
            success: function (response) {
                $("#pre_medicine_template").html(response);
            }
        });

    });

    $(document).on("change", "#change_opd_graph", function () {
        var id = $(this).val();
        var bill_id = $(this).attr("data-id");
        //alert(id);
        //var Link = $(".base_url_practice").val();
        var post_url = 'action/select_opd_graph.php?do=collection';
        var datastring = 'id=' + id + "&bill_id=" + bill_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            collection_chart.updateSeries([{
                name: "Collection",
                data: response.collection
            }, {
                name: "Refund",
                data: response.refund
            }]);
            collection_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_opd_revenue_graph", function () {
        var id = $(this).val();
        var bill_id = $(this).attr("data-id");
        //alert(id);
        //var Link = $(".base_url_practice").val();
        var post_url = 'action/select_opd_graph.php?do=revenue';
        var datastring = 'id=' + id + "&bill_id=" + bill_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            opdbillingrevenue_chart.updateSeries([{
                name: "Revenue",
                data: response.Revenue
            }, {
                name: "Credit Notes",
                data: response.Credit_Notes
            }]);
            opdbillingrevenue_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_ipd_graph", function () {
        var id = $(this).val();
        var bill_id = $(this).attr("data-id");
        //alert(id);
        //var Link = $(".base_url_practice").val();
        var post_url = 'action/select_ipd_graph.php?do=collection';
        var datastring = 'id=' + id + "&bill_id=" + bill_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            collection_chart.updateSeries([{
                name: "Collection",
                data: response.collection
            }, {
                name: "Refund",
                data: response.refund
            }]);
            collection_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_ipd_revenue_graph", function () {
        var id = $(this).val();
        var bill_id = $(this).attr("data-id");
        //alert(id);
        //var Link = $(".base_url_practice").val();
        var post_url = 'action/select_ipd_graph.php?do=revenue';
        var datastring = 'id=' + id + "&bill_id=" + bill_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            opdbillingrevenue_chart.updateSeries([{
                name: "Revenue",
                data: response.Revenue
            }, {
                name: "Credit Notes",
                data: response.Credit_Notes
            }]);
            opdbillingrevenue_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_hos_appointment_graph", function () {
        var id = $(this).val();
        var hm_id_array = $(this).attr("data-id");
        var post_url = 'action/select_appointment_graph.php?do=appointment';
        var datastring = 'id=' + id + "&hm_id_array=" + hm_id_array;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            appointment_type_chart.updateSeries([{
                name: "Total Appointment",
                data: response.new_appointment
            }, {
                name: "Cancelled Appointment",
                data: response.old_appointment
            }]);
            appointment_type_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_hos_case_type_graph", function () {
        var id = $(this).val();
        var hm_id_array = $(this).attr("data-id");
        var post_url = 'action/select_appointment_graph.php?do=case_type';
        var datastring = 'id=' + id + "&hm_id_array=" + hm_id_array;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            appointments_casetype_chart.updateSeries([response.new_appointment, response.old_appointment, response.urgent]);
            // appointments_casetype_chart.updateOptions({
            //     xaxis: {
            //         categories: response.dates,
            //     }
            // })
        });
    });

    $(document).on("change", "#change_bor_graph", function () {
        var id = $(this).val();
        var hm_id_array = $(this).attr("data-id");
        var post_url = 'action/select_inpatient_graph.php?do=bor';
        var datastring = 'id=' + id + "&hm_id_array=" + hm_id_array;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            inpatient_bedoccupancy_chart.updateSeries([{
                name: "Bed Occupancy Rate (BOR)",
                data: response.total_bor
            }]);
            inpatient_bedoccupancy_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_pharmacy_graph", function () {
        var id = $(this).val();
        var hm_id_array = $(this).attr("data-id");
        var pharma_id_array = $(this).attr("data-pharmaid");
        var post_url = 'action/select_pharmacy_graph.php';
        var datastring = 'id=' + id + "&hm_id_array=" + hm_id_array + "&pharma_id_array=" + pharma_id_array;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            otheranalytics_pharmacy_chart.updateSeries([{
                name: "Purchase Invoice",
                data: response.purchase_invoice
            }, {
                name: "Purchase Return",
                data: response.purchase_return
            }, {
                name: "Sale Invoice",
                data: response.sales_invoice
            }, {
                name: "Sale Return",
                data: response.sales_return
            }]);
            otheranalytics_pharmacy_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $(document).on("change", "#change_pathology_graph", function () {
        var id = $(this).val();
        var hm_id_array = $(this).attr("data-id");
        var post_url = 'action/select_pathology_graph.php?do=billing';
        var datastring = 'id=' + id + "&hm_id_array=" + hm_id_array;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            dataType: 'JSON',
            data: datastring,
        }).done(function (response) {
            inpatient_pathology_chart.updateSeries([{
                name: "OPD",
                data: response.opd_count
            }, {
                name: "IPD",
                data: response.ipd_count
            }]);
            inpatient_pathology_chart.updateOptions({
                xaxis: {
                    categories: response.dates,
                }
            })
        });
    });

    $("#search_patient_name_ecrf").autocomplete({

        // var Url_post = Link+"action/get_old_patient_from_barcode_id.php";
        source: 'action/get_patient_from_name.php',
        minLength: 1,
        focus: function (event, ui) {
            $("#search_patient_name_ecrf").val(ui.item.pname);
            return false;
            event.preventDefault();
            //$('#search_patient_name_ecrf').trigger('click');

        },
        change: function (event, ui) {
            if (!ui.item) {
                // $('#search_patient_name_ecrf').val("");
                // $('#parent_id').val("");
                // $("#pm_age").val("");
                // $("#tura_country").val("");
                // $("#tura_state").val("");
                // $("#tura_city").val("");
                // $('input[type="radio"][name="tura_gender"]').prop('checked', false);
                $("#parent_id").val("0");


            }
        },

        select: function (event, ui) {
            event.preventDefault();
            //$("#search_patient_name_ecrf").val(ui.item.pname);
            $("#search_patient_name_ecrf").val(ui.item.tura_patient_name);
            $("#parent_id").val(ui.item.parent_id);
            $("#pm_age").val(ui.item.pm_age);
            $("#pm_dob").val(ui.item.tura_dob);
            $("#tura_country").val(ui.item.tura_country);
            $("#tura_state").val(ui.item.tura_state);
            $("#tura_city").val(ui.item.tura_city);
            $('input[type="radio"][name="tura_gender"][value="' + ui.item.tura_gender + '"]').prop('checked', true);
        },

    });

    $("#ecrf_add_form").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var search_patient_name_ecrf = $("#search_patient_name_ecrf").val();
        if (search_patient_name_ecrf == "") {
            alert("Please add patient name.");
            $('#search_patient_name_ecrf').focus();
            return false;
        } else {

        }

        var btn_save = $(document.activeElement).val();
        if (btn_save == 1) {
            var form_post_url = "action/action_ujvira.php?do=add_1";
        } else {

            var patient_weight = $("#patient_weight").val();
            var tura_hos_id = $("#tura_hos_id").val();
            var tura_comorbidity_present = $("#tura_comorbidity_present").val();
            var tura_ecog = $("#tura_ecog").val();
            var tura_her2neu = $("#tura_her2neu").val();
            var tura_dsap = $("#tura_dsap").val();
            var tura_used_line = $("#tura_used_line").val();
            var tura_first_dose = $("#tura_first_dose").val();
            var tura_starting_dose = $("#tura_starting_dose").val();
            var tura_standard_dose = $("#tura_standard_dose").val();
            var tura_subsequent_cycle = $("#tura_subsequent_cycle").val();
            var tura_which_cycle = $("#tura_which_cycle").val();
            var tura_subsequent_cycle_reason = $("#tura_subsequent_cycle_reason").val();
            var tura_number_of_cycle = $("#tura_number_of_cycle").val();
            var tura_best_responce = $("#tura_best_responce").val();
            var tura_free_survival = $("#tura_free_survival").val();
            var tura_elevated_grade = $("#tura_elevated_grade").val();
            var tura_any_other_aeoi = $("#tura_any_other_aeoi").val();
            var tura_grade = $("#tura_grade").val();
            //var tura_observation_remarks = $("#tura_observation_remarks").val();
            var tura_observation_remarks = $("input[name='tura_elevated_trans']:checked").val();
            var tura_thrombocytopenia = $("input[name='tura_thrombocytopenia']:checked").val();
            var tura_thrombocytopenia_grade = $("#tura_thrombocytopenia_grade").val();
            var tura_anemia = $("input[name='tura_anemia']:checked").val();
            var tura_anemia_grade = $("#tura_anemia_grade").val();
            var tura_neutropenia = $("input[name='tura_neutropenia']:checked").val();
            var tura_neutropenia_grade = $("#tura_neutropenia_grade").val();
            var tura_lvef = $("input[name='tura_lvef']:checked").val();
            var tura_lvef_grade = $("#tura_lvef_grade").val();
            var tura_hyperglycemia = $("input[name='tura_hyperglycemia']:checked").val();
            var tura_hyperglycemia_grade = $("#tura_hyperglycemia_grade").val();
            var tura_date_of_cycle = $("#tura_date_of_cycle").val();
            var tura_date_of_document = $("#tura_date_of_document").val();

            if (patient_weight == "") {
                alert("Body Weight is empty.");
                $('#patient_weight').focus();
                return false;
            } else if (tura_hos_id == "") {
                alert("Hospital ID is empty.");
                $('#tura_hos_id').focus();
                return false;
            } else if (tura_comorbidity_present == "") {
                alert("Comorbidity present is empty.");
                $('#tura_comorbidity_present').focus();
                return false;
            } else if (tura_ecog == "") {
                alert("ECOG Score is empty.");
                $('#tura_ecog').focus();
                return false;
            } else if ($('.tura_er:checked').length == 0) {
                alert("ER is empty.");
                $('.tura_er').focus();
                return false;
            } else if ($('.tura_pr:checked').length == 0) {
                alert("PR is empty.");
                $('.tura_pr').focus();
                return false;
            } else if (tura_her2neu == "") {
                alert("HER2neu Score is empty.");
                $('#tura_her2neu').focus();
                return false;
            } else if ($('.tura_vis_inv:checked').length == 0) {
                alert("Visceral involvement is empty.");
                $('.tura_vis_inv').focus();
                return false;
            } else if ($('.tura_non_vis_inv:checked').length == 0) {
                alert("Non-visceral involvement is empty.");
                $('.tura_non_vis_inv').focus();
                return false;
            } else if ($('.tura_brain_inv:checked').length == 0) {
                alert("Brain involvement is empty.");
                $('.tura_brain_inv').focus();
                return false;
            } else if (tura_dsap == "") {
                alert("Disease Status at current Presentation is empty.");
                $('#tura_dsap').focus();
                return false;
            } else if ($('.tura_trastuzumab:checked').length == 0) {
                alert("Details of Prior Therapies is empty.");
                $('.tura_trastuzumab').focus();
                return false;
            } else if ($('.tura_pertuzumab:checked').length == 0) {
                alert("Pertuzumab is empty.");
                $('.tura_pertuzumab').focus();
                return false;
            } else if ($('.tura_lapatinib:checked').length == 0) {
                alert("Lapatinib is empty.");
                $('.tura_lapatinib').focus();
                return false;
            } else if ($('.tura_endocrine_theraphy:checked').length == 0) {
                alert("Endocrine Therapy is empty.");
                $('.tura_endocrine_theraphy').focus();
                return false;
            } else if ($('.tura_rfbm:checked').length == 0) {
                alert("Radiotherapy for Brain Mets is empty.");
                $('.tura_rfbm').focus();
                return false;
            } else if (tura_used_line == "") {
                alert("Used in which line is empty.");
                $('#tura_used_line').focus();
                return false;
            } else if (tura_date_of_cycle == "") {
                alert("Date of 1st cycle is empty.");
                $('#tura_date_of_cycle').focus();
                return false;
            } else if (tura_first_dose == "") {
                alert("Dose of first cycle is empty.");
                $('#tura_first_dose').focus();
                return false;
            } else if (tura_starting_dose == "") {
                alert("Starting Dose is empty.");
                $('#tura_starting_dose').focus();
                return false;
            } else if (tura_starting_dose == "Lower" && tura_standard_dose == "") {
                alert("Standard Dose is empty.");
                $('#tura_standard_dose').focus();
                return false;
            } else if (tura_subsequent_cycle == "") {
                alert("Subsequent cycle is empty.");
                $('#tura_subsequent_cycle').focus();
                return false;
            } else if (tura_subsequent_cycle == "Yes" && tura_which_cycle == "") {
                alert("Which cycle is empty.");
                $('#tura_which_cycle').focus();
                return false;
            } else if (tura_subsequent_cycle == "Yes" && tura_subsequent_cycle_reason == "") {
                alert("Subsequent Cycle Reason is empty.");
                $('#tura_subsequent_cycle_reason').focus();
                return false;
            } else if (tura_number_of_cycle == "") {
                alert("Number of cycles with UJVIRA is empty.");
                $('#tura_number_of_cycle').focus();
                return false;
            // } else if (tura_date_of_document == "") {
            //     alert("Date of documented disease progression is empty.");
            //     $('#tura_date_of_document').focus();
            //     return false;
            } else if (tura_best_responce == "") {
                alert("What is the Best response is empty.");
                $('#tura_best_responce').focus();
                return false;
            } else if (tura_free_survival == "") {
                alert("Survival Measurement is empty.");
                $('#tura_free_survival').focus();
                return false;
            } else if ($('.tura_elevated_trans:checked').length == 0) {
                alert("Elevated transaminases is empty.");
                $('.tura_elevated_trans').focus();
                return false;
            } else if (tura_observation_remarks == "Yes" && tura_elevated_grade == "") {
                alert("Please Select Elevated transaminases Grade.");
                $('#tura_elevated_grade').focus();
                return false;
            } else if ($('.tura_thrombocytopenia:checked').length == 0) {
                alert("Thrombocytopenia is empty.");
                $('.tura_thrombocytopenia').focus();
                return false;
            } else if (tura_thrombocytopenia == "Yes" && tura_thrombocytopenia_grade == "") {
                alert("Please Select Thrombocytopenia Grade.");
                $('#tura_thrombocytopenia_grade').focus();
                return false;
            } else if ($('.tura_neutropenia:checked').length == 0) {
                alert("Neutropenia is empty.");
                $('.tura_neutropenia').focus();
                return false;
            } else if (tura_neutropenia == "Yes" && tura_neutropenia_grade == "") {
                alert("Please Select Neutropenia Grade.");
                $('#tura_neutropenia_grade').focus();
                return false;
            } else if ($('.tura_anemia:checked').length == 0) {
                alert("Anemia is empty.");
                $('.tura_anemia').focus();
                return false;
            } else if (tura_anemia == "Yes" && tura_anemia_grade == "") {
                alert("Please Select Anemia Grade.");
                $('#tura_anemia_grade').focus();
                return false;
            } else if ($('.tura_lvef:checked').length == 0) {
                alert("LVEF is empty.");
                $('.tura_lvef').focus();
                return false;
            } else if (tura_lvef == "Yes" && tura_lvef_grade == "") {
                alert("Please Select LVEF Grade.");
                $('#tura_lvef_grade').focus();
                return false;
            } else if ($('.tura_hyperglycemia:checked').length == 0) {
                alert("Hyperglycemia is empty.");
                $('.tura_hyperglycemia').focus();
                return false;
            } else if (tura_hyperglycemia == "Yes" && tura_hyperglycemia_grade == "") {
                alert("Please Select Hyperglycemia Grade.");
                $('#tura_hyperglycemia_grade').focus();
                return false;
            // } else if (tura_any_other_aeoi == "") {
            //     alert("Any other is empty.");
            //     $('#tura_any_other_aeoi').focus();
            //     return false;
            // } else if (tura_grade == "") {
            //     alert("Any other grade is empty.");
            //     $('#tura_grade').focus();
            //     return false;
            } else if (tura_observation_remarks == "") {
                alert("Observation or remarks is empty.");
                $('#tura_observation_remarks').focus();
                return false;
            }

            var form_post_url = "action/action_ujvira.php?do=add";
        }
        var post_url = form_post_url;
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.submit_ecrf_add_form').hide();
        $('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.href = "ecrf.php";
        });

    });

    $(document).on("click", ".check_abha_id_created_onap", function () {

        $("#checkabhaidcreatedmodal").modal('show');
        var puid_encode = $(this).attr("data-id");

        var appointment_add_link = "book_appointment.php?id=" + puid_encode;
        var edit_patient_link = "edit_patient.php?q=" + puid_encode + "&type=all_patients";

        $("#appointment_add_link").attr("href", appointment_add_link);
        $("#edit_patient_link").attr("href", edit_patient_link);

    });

    $(document).on("click", ".check_abha_id_created_onatd", function () {

        $("#checkabhaidcreatedmodalatd").modal('show');
        var puid_encode = $(this).attr("data-id");

        var atd_add_link = "add_admission_details.php?id=" + puid_encode;
        var edit_patient_link = "edit_patient_atd.php?q=" + puid_encode;

        $("#atd_add_link").attr("href", atd_add_link);
        $("#edit_patient_link").attr("href", edit_patient_link);

    });

    $(document).on("change", "#select_tftm_id", function (e) {

        var id = $(this).val();
        var post_url = 'action/action_patient_followup_temp.php?do=template'
        var datastring = 'id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#tftm_desc").val(result.trim());

        });

    });

    $("#add_patient_followup").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var select_tftm_id = $("#select_tftm_id").val();
        var tcfc_schedule_date = $("#tcfc_schedule_date").val();

        if (select_tftm_id == "0") {
            alert("Please select templete.");
            $('#select_tftm_id').focus();
            return false;
        } else if (tcfc_schedule_date == "") {
            alert("Please select date.");
            $('#tcfc_schedule_date').focus();
            return false;
        } else {

        }
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_patient_followup').attr('disabled', 'disabled');
        //$('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            window.location.reload();
        });

    });



    $(document).on("click", "#delete_followup_care", function () {
        console.log("Yes");
        $('#modal_delete_followup_care').modal('show');
        var billpaymentoptionname = $(this).attr('data-rname');
        var bpid = $(this).attr('data-id');

        $('.delete_billpaymentoption_text').html(billpaymentoptionname);
        $('#delete_bpid_id').val(bpid);

    });

    $(document).on("click", "#submit_delete_followup_care", function () {
        var delete_bpid_id = $("#delete_bpid_id").val();
        var post_url = 'action/action_patient_followup_temp.php?do=delete'
        var datastring = 'delete_bpid_id=' + delete_bpid_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            //$('#modal-danger-case-diagnosis').modal('hide');
            //$('#tr_case_diagnosis_' + delete_tcd_id).remove();
            location.reload();
        });

    });

    $("#form_modal_add_advice").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var toam_template_name = $("#toam_template_name").val();
        var toam_template_content = $("#toam_template_content").val();

        if (toam_template_name == "") {
            alert("Please enter name.");
            $('#toam_template_name').focus();
            return false;
        } else if (toam_template_content == "") {
            alert("Please enter content.");
            $('#toam_template_content').focus();
            return false;
        } else {

        }
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_advice').attr('disabled', 'disabled');
        //$('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_advice').removeAttr('disabled');
            $('#modal_add_advice').modal('hide');
            $("#pre_cash_advice_template").prepend(result);

            var old_val = $("#tcm_advice").val();
            var new_val = $("#toam_template_content").val();
            if (old_val == "") {
                $("#tcm_advice").val(old_val + new_val);
            } else {
                $("#tcm_advice").val(old_val + "\n" + new_val);
            }

            $("#form_modal_add_advice").trigger("reset");

        });

    });

    $(document).on('change', '#ipd_pam_over_hopitals_id', function () {

        $("#ipd_department_over_doctor").val("0");
        $("#div_over_department").hide();
        $("#div_over_doctor").hide();

    });

    $(document).on("change", ".case_given_date", function () {

        var templete_id = $(this).closest('tr').find(".templete_id").val();

        var tvp_id = $(this).closest('tr').find(".tvp_id").val();

        var TrValue = $(this).closest('tr').attr('id');

        var valRouteArray = [];

        var valDoseArray = [];

        var valVaccineArray = [];

        var valAllvaccineArray = [];

        // $(".btn-popup-purple-medicine").each(function() {
        //     chkMediArray.push($(this).attr('data-id'));
        // });

        $(this).closest('tr').find(".route").each(function () {
            valRouteArray.push($(this).val());
        });

        $(this).closest('tr').find(".dose").each(function () {
            valDoseArray.push($(this).val());
        });

        $(this).closest('tr').find(".pm_vaccine").each(function () {
            valVaccineArray.push($(this).val());
        });

        $(this).closest('tr').find(".all_vacc").each(function () {
            valAllvaccineArray.push($(this).val());
        });


        var tvpv_old_id = $(this).closest('tr').find(".tvpv_old_id").val();

        var given_date = $(this).closest('tr').find('.case_given_date').val();

        //var vaccine_id = $(this).closest('tr').find('.vaccine_id').val();

        var action_hidden = $(this).closest('tr').find('.action_hidden').val();

        var remarks = $(this).closest('tr').find('.vaccination_remarks').val();



        var vac_pm_pid = $(this).closest('tr').find(".vac_pm_pid").val();
        var vac_patient_uni_id = $(this).closest('tr').find(".vac_patient_uni_id").val();



        var post_url = 'action/action_patient_vaccine.php?do=add'
        var datastring = 'templete_id=' + templete_id + "&tvp_id=" + tvp_id + "&all_vacc=" + valAllvaccineArray + "&route=" + valRouteArray + "&dose=" + valDoseArray + "&tvpv_old_id=" + tvpv_old_id + "&given_date=" + given_date + "&action_hidden=" + action_hidden + "&remarks=" + remarks + "&pm_vaccine=" + valVaccineArray + "&pm_pid=" + vac_pm_pid;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                templete_id: templete_id,
                tvp_id: tvp_id,
                all_vacc: valAllvaccineArray,
                route: valRouteArray,
                dose: valDoseArray,
                tvpv_old_id: tvpv_old_id,
                given_date: given_date,
                action_hidden: action_hidden,
                remarks: remarks,
                pm_vaccine: valVaccineArray,
                pm_pid: vac_pm_pid,
                patient_unique_id: vac_patient_uni_id,
            },
        }).done(function (result) {

            var id_val = result.trim();


            $('#' + TrValue).find('.vaccine_id_chk').val(id_val);

            $('#' + TrValue).find('#tvp_id').val(id_val);

            $('#' + TrValue).find('#action_hidden').val('1');

            $('#' + TrValue).find('.vaccine_id_chk').attr("checked", true);

            $('#' + TrValue).find('.vaccine_id_chk').attr("disabled", false);

            $('#' + TrValue).find('#remarks').attr("disabled", false);

            $('#' + TrValue).find('.pm_vaccine').attr("disabled", true);

            $('#' + TrValue).find('.vaccine_id_chk').attr('id', 'vaccine_box_id_' + id_val);

            $('#' + TrValue).find('.vaccine_id_for').attr('for', 'vaccine_box_id_' + id_val);

        });

    });

    $(document).on("change", ".vaccination_remarks", function () {

        var tvp_id = $(this).closest('tr').find(".tvp_id").val();

        var remarks = $(this).closest('tr').find('.vaccination_remarks').val();

        console.log(tvp_id);
        console.log(remarks);

        var post_url = 'action/action_patient_vaccine.php?do=edit'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tvp_id: tvp_id,
                remarks: remarks,
            }
        }).done(function (result) {


        });

    });

    $(".allusertypeunchk_qa").on('click', function (e) {
        var check = $('input[name="tds_dia_type_qa[]"]:checked').length;
        if (check > 3) {
            alert("Do not check more then 3.");
            return false;
        }
    });

    $(document).on("submit", "#new_doctor_setting_qa_form_add", function (e) {

        e.preventDefault();
        proceed = true;

        var check = $('input[name="tds_dia_type_qa[]"]:checked').length;
        if (check < 3) {
            alert("Please checked minimum 3 checkbox.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register_user_group1').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            //console.log(result);
            $('.err_register_user_group1').hide();
            location.reload();
        });
    });

    $(document).on("click", "#modal_draftpopupview", function () {

        var onid = $(this).attr("data-id");
        var post_url = 'action/action_ujvira.php?do=get_details'
        var datastring = 'patient_id=' + onid;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#form_data_table').html(result);

        });

    });

    $("#ecrf_edit_form").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var btn_save = $(document.activeElement).val();
        if (btn_save == 1) {
            var form_post_url = "action/action_ujvira.php?do=edit_1";
        } else {

            var patient_weight = $("#patient_weight").val();
            var tura_hos_id = $("#tura_hos_id").val();
            var tura_comorbidity_present = $("#tura_comorbidity_present").val();
            var tura_ecog = $("#tura_ecog").val();
            var tura_her2neu = $("#tura_her2neu").val();
            var tura_dsap = $("#tura_dsap").val();
            var tura_used_line = $("#tura_used_line").val();
            var tura_first_dose = $("#tura_first_dose").val();
            var tura_starting_dose = $("#tura_starting_dose").val();
            var tura_standard_dose = $("#tura_standard_dose").val();
            var tura_subsequent_cycle = $("#tura_subsequent_cycle").val();
            var tura_which_cycle = $("#tura_which_cycle").val();
            var tura_subsequent_cycle_reason = $("#tura_subsequent_cycle_reason").val();
            var tura_number_of_cycle = $("#tura_number_of_cycle").val();
            var tura_best_responce = $("#tura_best_responce").val();
            var tura_free_survival = $("#tura_free_survival").val();
            var tura_elevated_grade = $("#tura_elevated_grade").val();
            var tura_any_other_aeoi = $("#tura_any_other_aeoi").val();
            var tura_grade = $("#tura_grade").val();
            //var tura_observation_remarks = $("#tura_observation_remarks").val();
            var tura_observation_remarks = $("input[name='tura_elevated_trans']:checked").val();
            var tura_thrombocytopenia = $("input[name='tura_thrombocytopenia']:checked").val();
            var tura_thrombocytopenia_grade = $("#tura_thrombocytopenia_grade").val();
            var tura_anemia = $("input[name='tura_anemia']:checked").val();
            var tura_anemia_grade = $("#tura_anemia_grade").val();
            var tura_neutropenia = $("input[name='tura_neutropenia']:checked").val();
            var tura_neutropenia_grade = $("#tura_neutropenia_grade").val();
            var tura_lvef = $("input[name='tura_lvef']:checked").val();
            var tura_lvef_grade = $("#tura_lvef_grade").val();
            var tura_hyperglycemia = $("input[name='tura_hyperglycemia']:checked").val();
            var tura_hyperglycemia_grade = $("#tura_hyperglycemia_grade").val();
            var tura_date_of_cycle = $("#tura_date_of_cycle").val();
            var tura_date_of_document = $("#tura_date_of_document").val();

            if (patient_weight == "") {
                alert("Body Weight is empty.");
                $('#patient_weight').focus();
                return false;
            } else if (tura_hos_id == "") {
                alert("Hospital ID is empty.");
                $('#tura_hos_id').focus();
                return false;
            } else if (tura_comorbidity_present == "") {
                alert("Comorbidity present is empty.");
                $('#tura_comorbidity_present').focus();
                return false;
            } else if (tura_ecog == "") {
                alert("ECOG Score is empty.");
                $('#tura_ecog').focus();
                return false;
            } else if ($('.tura_er:checked').length == 0) {
                alert("ER is empty.");
                $('.tura_er').focus();
                return false;
            } else if ($('.tura_pr:checked').length == 0) {
                alert("PR is empty.");
                $('.tura_pr').focus();
                return false;
            } else if (tura_her2neu == "") {
                alert("HER2neu Score is empty.");
                $('#tura_her2neu').focus();
                return false;
            } else if ($('.tura_vis_inv:checked').length == 0) {
                alert("Visceral involvement is empty.");
                $('.tura_vis_inv').focus();
                return false;
            } else if ($('.tura_non_vis_inv:checked').length == 0) {
                alert("Non-visceral involvement is empty.");
                $('.tura_non_vis_inv').focus();
                return false;
            } else if ($('.tura_brain_inv:checked').length == 0) {
                alert("Brain involvement is empty.");
                $('.tura_brain_inv').focus();
                return false;
            } else if (tura_dsap == "") {
                alert("Disease Status at current Presentation is empty.");
                $('#tura_dsap').focus();
                return false;
            } else if ($('.tura_trastuzumab:checked').length == 0) {
                alert("Details of Prior Therapies is empty.");
                $('.tura_trastuzumab').focus();
                return false;
            } else if ($('.tura_pertuzumab:checked').length == 0) {
                alert("Pertuzumab is empty.");
                $('.tura_pertuzumab').focus();
                return false;
            } else if ($('.tura_lapatinib:checked').length == 0) {
                alert("Lapatinib is empty.");
                $('.tura_lapatinib').focus();
                return false;
            } else if ($('.tura_endocrine_theraphy:checked').length == 0) {
                alert("Endocrine Therapy is empty.");
                $('.tura_endocrine_theraphy').focus();
                return false;
            } else if ($('.tura_rfbm:checked').length == 0) {
                alert("Radiotherapy for Brain Mets is empty.");
                $('.tura_rfbm').focus();
                return false;
            } else if (tura_used_line == "") {
                alert("Used in which line is empty.");
                $('#tura_used_line').focus();
                return false;
            } else if (tura_date_of_cycle == "") {
                alert("Date of 1st cycle is empty.");
                $('#tura_date_of_cycle').focus();
                return false;
            } else if (tura_first_dose == "") {
                alert("Dose of first cycle is empty.");
                $('#tura_first_dose').focus();
                return false;
            } else if (tura_starting_dose == "") {
                alert("Starting Dose is empty.");
                $('#tura_starting_dose').focus();
                return false;
            } else if (tura_starting_dose == "Lower" && tura_standard_dose == "") {
                alert("Standard Dose is empty.");
                $('#tura_standard_dose').focus();
                return false;
            } else if (tura_subsequent_cycle == "") {
                alert("Subsequent cycle is empty.");
                $('#tura_subsequent_cycle').focus();
                return false;
            } else if (tura_subsequent_cycle == "Yes" && tura_which_cycle == "") {
                alert("Which cycle is empty.");
                $('#tura_which_cycle').focus();
                return false;
            } else if (tura_subsequent_cycle == "Yes" && tura_subsequent_cycle_reason == "") {
                alert("Subsequent Cycle Reason is empty.");
                $('#tura_subsequent_cycle_reason').focus();
                return false;
            } else if (tura_number_of_cycle == "") {
                alert("Number of cycles with UJVIRA is empty.");
                $('#tura_number_of_cycle').focus();
                return false;
            // } else if (tura_date_of_document == "") {
            //     alert("Date of documented disease progression is empty.");
            //     $('#tura_date_of_document').focus();
            //     return false;
            } else if (tura_best_responce == "") {
                alert("What is the Best response is empty.");
                $('#tura_best_responce').focus();
                return false;
            } else if (tura_free_survival == "") {
                alert("Survival Measurement is empty.");
                $('#tura_free_survival').focus();
                return false;
            } else if ($('.tura_elevated_trans:checked').length == 0) {
                alert("Elevated transaminases is empty.");
                $('.tura_elevated_trans').focus();
                return false;
            } else if (tura_observation_remarks == "Yes" && tura_elevated_grade == "") {
                alert("Please Select Elevated transaminases Grade.");
                $('#tura_elevated_grade').focus();
                return false;
            } else if ($('.tura_thrombocytopenia:checked').length == 0) {
                alert("Thrombocytopenia is empty.");
                $('.tura_thrombocytopenia').focus();
                return false;
            } else if (tura_thrombocytopenia == "Yes" && tura_thrombocytopenia_grade == "") {
                alert("Please Select Thrombocytopenia Grade.");
                $('#tura_thrombocytopenia_grade').focus();
                return false;
            } else if ($('.tura_neutropenia:checked').length == 0) {
                alert("Neutropenia is empty.");
                $('.tura_neutropenia').focus();
                return false;
            } else if (tura_neutropenia == "Yes" && tura_neutropenia_grade == "") {
                alert("Please Select Neutropenia Grade.");
                $('#tura_neutropenia_grade').focus();
                return false;
            } else if ($('.tura_anemia:checked').length == 0) {
                alert("Anemia is empty.");
                $('.tura_anemia').focus();
                return false;
            } else if (tura_anemia == "Yes" && tura_anemia_grade == "") {
                alert("Please Select Anemia Grade.");
                $('#tura_anemia_grade').focus();
                return false;
            } else if ($('.tura_lvef:checked').length == 0) {
                alert("LVEF is empty.");
                $('.tura_lvef').focus();
                return false;
            } else if (tura_lvef == "Yes" && tura_lvef_grade == "") {
                alert("Please Select LVEF Grade.");
                $('#tura_lvef_grade').focus();
                return false;
            } else if ($('.tura_hyperglycemia:checked').length == 0) {
                alert("Hyperglycemia is empty.");
                $('.tura_hyperglycemia').focus();
                return false;
            } else if (tura_hyperglycemia == "Yes" && tura_hyperglycemia_grade == "") {
                alert("Please Select Hyperglycemia Grade.");
                $('#tura_hyperglycemia_grade').focus();
                return false;
            // } else if (tura_any_other_aeoi == "") {
            //     alert("Any other is empty.");
            //     $('#tura_any_other_aeoi').focus();
            //     return false;
            // } else if (tura_grade == "") {
            //     alert("Any other grade is empty.");
            //     $('#tura_grade').focus();
            //     return false;
            } else if (tura_observation_remarks == "") {
                alert("Observation or remarks is empty.");
                $('#tura_observation_remarks').focus();
                return false;
            }

            var form_post_url = "action/action_ujvira.php?do=edit";
        }
        var post_url = form_post_url;
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.submit_ecrf_edit_form').hide();
        $('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            location.href = "ecrf.php";
        });

    });

    $(document).on("click", ".open_modal_remarks", function () {

        $('#remarks_modal').modal('show');

        var data_type = $(this).attr("data-type");
        var data_tura_id = $(this).attr("data-tura-id");
        var data_patient_id = $(this).attr("data-patient-id");

        $("#data_type").val(data_type);
        $("#data_tura_id").val(data_tura_id);
        $("#data_patient_id").val(data_patient_id);

        var post_url = 'action/action_ujvira.php?do=get_edit_question_remarks'
        var datastring = 'type=' + data_type + "&tura_id=" + data_tura_id + "&patient_id=" + data_patient_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            ////console.log(result);
            $('#tura_remarks').val(result.trim());

        });

    });

    $("#question_remarks").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var tura_remarks = $("#tura_remarks").val();
        var data_type = $("#data_type").val();
        if (tura_remarks == "") {
            alert("Please enter remarks.");
            $('#tura_remarks').focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_question_remarks').hide();
        $('.err_register').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_question_remarks').show();
            $('.err_register').hide();

            $('#remarks_modal').modal('hide');
            $("[data-type=" + data_type + "]").css("display", "none");
            $("[data-type=" + data_type + "]").removeClass('open_modal_remarks');
            // $("#patient_weight").removeClass("open_modal_remarks");
            $("[data-type=" + data_type + "_hidden]").css("display", "block");

            $(".patient_weight").prop('disabled', true);

        });

    });

    $(document).on("change", "#tura_twd", function () {

        var val_other = $(this).val();
        if (val_other == "Other") {
            $('.ura_twd_other').css("display", "block");
            $('.ura_twd_other').val("");
        } else {
            $('.ura_twd_other').css("display", "none");
        }
    });

    $(document).on("click", ".tura_elevated_trans", function () {

        $('.tura_elevated_grade').val("");
        var tura_elevated_grade_hidden_val = $('.tura_elevated_grade_hidden').val();
        $('.tura_elevated_grade').val(tura_elevated_grade_hidden_val);

        var data_type = $(this).attr("data-draft");
        if (this.value == "Yes" && data_type == 0) { //check value if it is domicilio
            $('.tura_elevated_grade_hidden').css("display", "block");
            $('.tura_elevated_grade').css("display", "none");

            $(".tura_elevated_grade_hidden").addClass('open_modal_remarks');

        } else if (this.value == "Yes" && data_type !== 0) {
            $('.tura_elevated_grade_hidden').css("display", "none");
            $('.tura_elevated_grade').css("display", "block");
        } else {
            $('.tura_elevated_grade_hidden').css("display", "none");
            $('.tura_elevated_grade').css("display", "none");
        }
    });

    $(document).on("click", ".tura_thrombocytopenia", function () {

        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.tura_thrombocytopenia_grade').css("display", "block");
            $('.tura_thrombocytopenia_grade').val("");
        } else {
            $('.tura_thrombocytopenia_grade').css("display", "none");
        }
    });
    $(document).on("click", ".tura_anemia", function () {

        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.tura_anemia_grade').css("display", "block");
            $('.tura_anemia_grade').val("");
        } else {
            $('.tura_anemia_grade').css("display", "none");
        }
    });

    $(document).on("click", ".tura_neutropenia", function () {

        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.tura_neutropenia_grade').css("display", "block");
            $('.tura_neutropenia_grade').val("");
        } else {
            $('.tura_neutropenia_grade').css("display", "none");
        }
    });

    $(document).on("click", ".tura_lvef", function () {

        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.tura_lvef_grade').css("display", "block");
            $('.tura_lvef_grade').val("");
        } else {
            $('.tura_lvef_grade').css("display", "none");
        }
    });

    $(document).on("click", ".tura_hyperglycemia", function () {

        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.tura_hyperglycemia_grade').css("display", "block");
            $('.tura_hyperglycemia_grade').val("");
        } else {
            $('.tura_hyperglycemia_grade').css("display", "none");
        }
    });

    $(document).on("keyup", ".tura_any_other_aeoi", function () {
        var data_type = $(this).attr("data-draft");
        // alert(this.value);
        $('.tura_grade').val("");
        var tura_grade_hidden_val = $('.tura_grade_hidden').val();
        $('.tura_grade').val(tura_grade_hidden_val);

        if (this.value !== "" && data_type == 0) { //check value if it is domicilio
            $('.tura_grade_hidden').css("display", "block");
            $('.tura_grade').css("display", "none");

            $(".tura_grade_hidden").addClass('open_modal_remarks');

        } else if (this.value !== "" && data_type !== 0) {
            $('.tura_grade_hidden').css("display", "none");
            $('.tura_grade').css("display", "block");
        } else {
            $('.tura_grade_hidden').css("display", "none");
            $('.tura_grade').css("display", "none");
        }
    });

    $(document).on("click", "#reset_ecrf_form", function () {

        window.location.reload();

    });

    $(document).on("click", ".edit_inp_dis_date", function () {
        var mainid = $(this).attr("data-mainid");
        var id = $(this).attr("data-id");
        var inpid = $(this).attr("data-ipid");
        var DisDate = $(this).attr("data-date");
        var AddDate = $(this).attr("data-adate");
        var DisTime = $(this).attr("data-time");

        var AdTime = $(this).attr("data-atime");
        var DpId = $(this).attr("data-dpid");
        var UmId = $(this).attr("data-umid");


        //$('#modal_dis_date_edit').modal('show');
        $('#edit_tapm_id').val(mainid);
        $('#edit_pmpid').val(id);
        $('#edit_inpid').val(inpid);

        // $('#tapm_time').val(DisTime);
        $('#tapm_time').flatpickr({
            enableTime: true,
            noCalendar: true,
            dateFormat: "H:i",
            time_24hr: true,
            defaultDate: ['"' + DisTime + '"']
        });

        // $('#tapm_admitting_time').val(AdTime);
        $('#tapm_admitting_time').flatpickr({
            enableTime: true,
            noCalendar: true,
            dateFormat: "H:i",
            time_24hr: true,
            defaultDate: ['"' + AdTime + '"']
        });

        $('#atd_department').val(DpId);
        $('#atd_admitting_doctor').val(UmId);
        $('#tapm_admitting_date').flatpickr({
            dateFormat: 'd-m-Y',
            disableMobile: "true",
            defaultDate: ['"' + AddDate + '"']
        });
        $('#tapm_date').flatpickr({
            dateFormat: 'd-m-Y',
            disableMobile: "true",
            defaultDate: ['"' + DisDate + '"']
        });
        // $('#tapm_admitting_date').flatpickr('update', AddDate);
        // $('#tapm_date').flatpickr('update', DisDate);

        // $('#tapm_admitting_date').val(AddDate);
        // $('#tapm_date').val(DisDate);
        // $('.calender1').datepicker({
        //   autoclose: true
        // });

    });

    $(document).on("submit", "#form_button_edit_discharged", function (e) {

        e.preventDefault();
        proceed = true;

        var atd_department = $("#atd_department").val();
        var tapm_date = $("#tapm_date").val();
        var tapm_time = $("#tapm_time").val();
        var atd_admitting_doctor = $("#atd_admitting_doctor").val();

        if (tapm_date == "") {
            alert("Please enter discharged date.");
            return false;
        }

        if (tapm_time == "") {
            alert("Please enter discharged time.");
            return false;
        }

        if (atd_department == "0") {
            alert("Please select department.");
            return false;
        }
        if (atd_admitting_doctor == "0" || atd_admitting_doctor == "") {
            alert("Please Select Admitting Doctor.");
            return false;
        }

        $('#submit_button_edit_discharged').attr('disabled', 'disabled');
        $('.err_register').show();

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            if (result.trim() == 1) {
                window.location.reload();
            } else {

                $('#submit_button_edit_discharged').removeAttr('disabled');
                $('.err_register').hide();
                $('.help-block-date').html("Discharge date cannot precede admission date");


            }

        });

    });

    $(document).on("click", ".discharged_readmitted", function () {
        ////console.log("Yes");
        // $('#modal_discharged_readmitted').modal('show');

        var id = $(this).attr('data-id');
        $.ajax({
            type: 'post',
            url: "action/action_transfer.php?do=transfer_data",
            data: {
                dataId: id,
            },
            cache: false,
            success: function (result) {
                //alert(result);
                // $('#modal_discharged_readmitted').modal('hide');
                var splitted1 = result.split("@@@");
                $("#pname").val(splitted1[2]);
                $("#pid").val(splitted1[0]);
                $("#ip_no").val(splitted1[1]);
                // $("#admit_ward").val(splitted1[3]);
                var ward = splitted1[3];
                //alert("ss "+ward);
                $('#admit_ward option[value=' + ward + ']').attr("selected", true);
                var ward_txt = $('#admit_ward option[value=' + ward + ']').text();
                $("#select2-admit_ward-container").html(ward_txt);

                var room = splitted1[5];
                $("#admit_room").val(room);
                $("#atd_id").val(splitted1[6]);
                var department = splitted1[7];
                $('#admit_department option[value=' + department + ']').attr("selected", true);

                var department_txt = $('#admit_department option[value=' + department + ']').text();
                $("#select2-admit_department-container").html(department_txt);
                //$("#atd_id").val(splitted1[8]);
                var doctor = splitted1[8];
                $("#select2-admit_doctor-container").html(doctor);

            }
        });
    });

    $(document).on('change', '#readmit_ward', function () {
        var id = this.value;

        var post_url = 'action/action_transfer.php?do=room_template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            $("#readmit_room").html(result);
        });
    });

    $("#form_readmit_discharged").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var readmit_ward = $("#readmit_ward").val();
        var readmit_room = $("#readmit_room").val();

        if (readmit_ward == "") {
            alert("Please select ward.");
            return false;
        }

        if (readmit_room == "") {
            alert("Please select room/bed.");
            return false;
        }


        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('.err_register_new').show();
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            // //console.log(result); 
            // var atd_id = result.trim();    
            // $("#tr_atdward_bed_"+atd_id).remove();       
            // $('#modal_transfer').modal('hide');

            location.reload();


        });
    });

    $("#forget_password_send_otp").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var contact_no = $("#contact_no").val();
        if (contact_no.length < 10 || contact_no.length > 10) {
            alert("Please enter 10 digit valid mobile number.");
            $('#contact_no').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_forget_password_otp').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var filter_result = $.trim(result);
            var split_result = filter_result.split("@@@");
            var flag = split_result[0];

            if (flag == 1) {

                var patient_unique_id = split_result[1];
                window.location.href = "otpverification.php?q=" + patient_unique_id;

            } else if (flag == 2) {
                alert("mobile number not exists.");
                $('#submit_forget_password_otp').removeAttr('disabled');
                return false;
            } else if (flag == 9) {
                alert("Please enter mobile number.");
                $('#submit_forget_password_otp').removeAttr('disabled');
                return false;
            } else if (flag == 5) {
                alert("something went wrong.");
                $('#submit_forget_password_otp').removeAttr('disabled');
                return false;
            } else {

            }
        });
    });

    $(document).on("click", "#resend_otp_patient_forget", function () {

        $("#first").val('');
        $("#second").val('');
        $("#third").val('');
        $("#fourth").val('');

        $("#resend_otp_patient_forget").addClass("disable");
        var contact_no = $("#contact_no").val();
        var random_id = $("#random_id").val();
        var post_url = 'action/forget_password_otp.php?do=resend_otp'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                contact_no: contact_no
            },
        }).done(function (result) {
            var flag = $.trim(result);
            if (flag == 1) {
                alert("otp resend successfully");
            } else if (flag == 2) {
                alert("something went wrong.");
                return false;
            }
        });

        var i = 60; //second
        (function timer() {
            if (--i < 0) {
                $("#countdown").html('');
                $("#resend_otp_patient_forget").removeClass("disable").addClass("enable");
                return;
            }
            setTimeout(function () {
                $("#countdown").html('New OTP?, try after ' + i + ' secs');
                timer();
            }, 1000);
        })();

    });

    $("#forget_otp_verification").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var first = $("#first").val();
        var second = $("#second").val();
        var third = $("#third").val();
        var fourth = $("#fourth").val();
        var contact_no = $("#contact_no").val();
        var random_id = $("#random_id").val();

        if (first == "" || second == "" || third == "" || fourth == "") {
            alert("Please enter valid otp.");
            $('#otp_verifi').focus();
            return false;
        } else if ($.isNumeric(first) == false) {
            alert("Please enter valid numeric otp.");
            $('#first').focus();
            return false;
        } else if ($.isNumeric(second) == false) {
            alert("Please enter valid numeric otp.");
            $('#second').focus();
            return false;
        } else if ($.isNumeric(third) == false) {
            alert("Please enter valid numeric otp.");
            $('#third').focus();
            return false;
        } else if ($.isNumeric(fourth) == false) {
            alert("Please enter valid numeric otp.");
            $('#fourth').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#patient_login_btn').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            var flag = $.trim(result);
            if (flag == 1) {

                $("#first").val('');
                $("#second").val('');
                $("#third").val('');
                $("#fourth").val('');

                window.location.href = "resetpassword_new.php?q=" + random_id;

            } else if (flag == 2) {
                alert("Wrong Otp.");
                $(".otp_verifi").addClass("focus");
                $("#first").val('');
                $("#second").val('');
                $("#third").val('');
                $("#fourth").val('');
                return false;


            } else {

            }
        });
    });

    $(document).on("keydown", "#myModal", function (e) {
        var charCode = e.charCode || e.keyCode || e.which;
        if (charCode == 27) {
            alert("Please click Done button.");
            return false;
        }
    });

    $("#add_patient_followup_case_manager").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var select_tftm_id = $("#select_tftm_id").val();
        var tcfc_schedule_date = $("#tcfc_schedule_date").val();

        if (select_tftm_id == "0") {
            alert("Please select templete.");
            $('#select_tftm_id').focus();
            return false;
        } else if (tcfc_schedule_date == "") {
            alert("Please select date.");
            $('#tcfc_schedule_date').focus();
            return false;
        } else {

        }
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_patient_followup').attr('disabled', 'disabled');
        //$('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_patient_followup').removeAttr('disabled');
            $('#modal_add_new_folloup_casemanager_template').modal('hide');
            $("#add_patient_followup_case_manager").trigger("reset");

        });

    });

    $(document).on("click", "#dataanalytics_billing_overall_report_btn", function (e) {

        var checked_chk = $("input[name='cash_flow_report_type']:checked").val();

        if (checked_chk == "revenue") {

            $('#form_dataanalytics_billing_overall_report').attr('action', 'action/export_billing_overall_revenue_report.php');

            var hmid = 0;
            var type = 0;
            var anyone = "";
            var anyone_val = "";
            var accountant = "";
            var issued_by = "";
            var Main_Link = "";
            var billcounter = "";

            var Link = $(".get_base_url").val();
            var type = $("#depart_bill").val();
            var hmid = $("#billhos").val();
            var billcounter = $("#bill_id_report").val();
            var anyone = $("#billanyone_report").val();
            var anyone_val = $("#billanyone").val();
            var accountant = $("#accountant_3c_bill").val();
            var issued_by = $("#issued_by_biiling").val();
            var startdate = $("#rev_s_date_3c").val();
            var enddate = $("#rev_e_date_3c").val();

            if ($('.bill_overall_report_typecls:checked').length == 0) {
                alert("Please Select Report Type.");
                return false;
            } else if (hmid == "") {
                alert("Please Select Hospital.");
                $("#billhos").focus();
                return false;
            } else if (type == 0) {
                alert("Please Select Type.");
                $("#depart_bill").focus();
                return false;
            } else if (billcounter == "") {
                alert("Please Select Counter.");
                $("#bill_id_report").focus();
                return false;
            } else if (anyone == "") {
                alert("Please Select Any One.");
                $("#billanyone_report").focus();
                return false;
            } else if (anyone_val == null || anyone_val == "") {
                var anytypename = $("#billanyone_report option:selected").text()
                alert("Please Select " + anytypename + ".");
                $("#billanyone").focus();
                return false;
            } else if (accountant == null || accountant == "") {
                alert("Please Select Account.");
                $("#accountant_3c_bill").focus();
                return false;
            } else if (issued_by == null || issued_by == "") {
                alert("Please Select Issued By.");
                $("#issued_by_biiling").focus();
                return false;
            } else if ($('#rev_s_date_3c').val() == "") {
                alert("Please Select Start Date.");
                $("#rev_s_date_3c").focus();
                return false;
            } else if ($('#rev_e_date_3c').val() == "") {
                alert("Please Select End Date.");
                $("#rev_s_date_3c").focus();
                return false;
            } else {
                $("#form_dataanalytics_billing_overall_report").submit();
                return false;
            }

        } else {

            $('#form_dataanalytics_billing_overall_report').attr('action', 'action/export_cash_flow.php');

            var type = 0;
            var accountant = "";
            var issued_by = "";
            var Main_Link = "";
            var billcounter = "";
            var cash_flow_cat = "";
            var cash_bill_type = "";
            var cash_mode_of_payment = "";

            var Link = $(".get_base_url").val();
            var type = $("#cash_depart").val();
            var billcounter = $("#cash_depart_type").val();
            var accountant = $("#cash_accountant").val();
            var issued_by = $("#cash_issued_by").val();
            var startdate = $("#cash_s_date_3c").val();
            var enddate = $("#cash_e_date_3c").val();
            var cash_flow_cat = $("#cash_flow_cat").val();
            var cash_bill_type = $("#cash_collection_bill_type").val();
            var cash_mode_of_payment = $("#cash_mode_of_payment").val();

            if (type == 0) {
                alert("Please Select Bill Type.");
                $("#cash_depart").focus();
                return false;
            } else if (billcounter == "") {
                alert("Please Select Counter.");
                $("#cash_depart_type").focus();
                return false;
            } else if (cash_bill_type == null) {
                alert("Please Select Type.");
                $("#cash_collection_bill_type").focus();
                return false;
            } else if (issued_by == null) {
                alert("Please Select Issued By.");
                $("#cash_issued_by").focus();
                return false;
            } else if (cash_mode_of_payment == null) {
                alert("Please Select Mode of Payment.");
                $("#cash_mode_of_payment").focus();
                return false;
            } else if (accountant == null) {
                alert("Please Select Account.");
                $("#cash_accountant").focus();
                return false;
            } else if ($('#cash_s_date_3c').val() == "") {
                alert("Please Select Start Date.");
                $("#cash_s_date_3c").focus();
                return false;
            } else if ($('#cash_e_date_3c').val() == "") {
                alert("Please Select End Date.");
                $("#cash_e_date_3c").focus();
                return false;
            } else {

                $("#form_dataanalytics_billing_overall_report").submit();
                return false;

            }

        }

    });

    $(document).on("click", "#dataanalytics_collection_report_details", function (e) {

        $('#form_dataanalytics_collection_report_details').attr('action', 'collection_all_report_detaield.php?type=1');

        var depart = $("#collection_depart").val();
        var selected = $(".collection_depart_type").val();
        var s_date_3c = $("#cs_date_3c").val();
        var e_date_3c = $("#ce_date_3c").val();

        if (depart == 0) {
            alert("Please Select Bill Type");
            $("#collection_depart").focus();
            return false;
        } else if (s_date_3c == "") {
            alert("Please Select Start Date");
            $("#cs_date_3c").focus();
            return false;
        } else if (e_date_3c == "") {
            alert("Please Select End Date");
            $("#e_date_3c").focus();
            return false;
        } else {

            $("#form_dataanalytics_collection_report_details").submit();
            return true;

        }


    });

    $(document).on("click", ".data_billing_collection_report_btn", function (e) {
        var action = $(this).data('action');
        $('#form_data_billing_collection_report').attr('action', action);
        $("#form_data_billing_collection_report").submit();
        return false;
    });

    $(document).on("click", "#dataanalytics_submit_details_report", function (e) {

        var report_type = $('input[name=report_type]:checked').val();
        if (report_type == "Detailed_Report") {
            var action = "3c_details_table.php?type=1";
        } else {
            var action = "overall_incentive_table.php?type=1";
        }
        $('#dataanalytics_submit_details_report_form').attr('action', action);

        var incentive_3c = $("#incentive_3c").val();
        var inc_depart = $("#inc_depart").val();
        var inc_det_s_date_3c = $("#inc_det_s_date_3c").val();
        var inc_det_e_date_3c = $("#inc_det_e_date_3c").val();

        if (incentive_3c == "" && report_type == "Detailed_Report") {
            alert("Please Select Incentive User");
            return false;
        } else if (inc_depart == 0) {
            alert("Please Select Department");
            $("#inc_depart").focus();
            return false;
        } else if (inc_det_s_date_3c == "") {
            alert("Please Select Start Date");
            $("#inc_det_s_date_3c").focus();
            return false;
        } else if (inc_det_e_date_3c == "") {
            alert("Please Select End Date");
            $("#inc_det_e_date_3c").focus();
            return false;
        } else {
            $("#dataanalytics_submit_details_report_form").submit();
            return false;
        }

    });

    $(document).on("click", ".export_incentive_details_report_btn_btn", function (e) {
        var action = $(this).data('action');
        $('#export_incentive_details_report_form').attr('action', action);
        $("#export_incentive_details_report_form").submit();
        return false;
    });

    $(document).on("click", "#dataanalytics_submit_ipd_financial_all_report_overall_btn", function (e) {

        var pam_hopitals_id = $("#pam_over_hopitals_id").val();
        var department_doctor = $("#department_over_doctor").val();
        var s_date_3c = $("#cos_date_3c").val();
        var e_date_3c = $("#coe_date_3c").val();

        if (pam_hopitals_id == 0) {
            alert("Please Select Hospital");
            $("#pam_over_hopitals_id").focus();
            return false;
        } else if (department_doctor == 0) {
            alert("Please Select Department Or Doctor");
            return false;
        } else if (s_date_3c == "") {
            alert("Please Select Start Date");
            $("#cos_date_3c").focus();
            return false;
        } else if (e_date_3c == "") {
            alert("Please Select End Date");
            $("#coe_date_3c").focus();
            return false;
        } else {
            $("#submit_ipd_financial_all_report_overall_btn_form").submit();
            return false;
        }

    });

    $(document).on("click", "#dataanalytics_submit_appointment_report_details_btn", function (e) {

        var pam_hopitals_id = $("#pam_gen_hopitals_id").val();
        var department_doctor = $("#department_doctor").val();
        var s_date_3c = $("#app_cs_date_3c").val();
        var e_date_3c = $("#app_ce_date_3c").val();

        if (pam_hopitals_id == 0) {
            alert("Please Select Hospital");
            $("#pam_gen_hopitals_id").focus();
            return false;
        } else if (department_doctor == 0) {
            alert("Please Select Department Or Doctor");
            $("#department_doctor").focus();
            return false;
        } else if (s_date_3c == "") {
            alert("Please Select Start Date");
            $("#app_cs_date_3c").focus();
            return false;
        } else if (e_date_3c == "") {
            alert("Please Select End Date");
            $("#app_ce_date_3c").focus();
            return false;
        } else {
            $("#submit_appointment_report_details_form").submit();
            return false;
        }

    });

    $(document).on("click", "#dataanalytics_submit_appointment_report_overall_btn", function (e) {

        var pam_hopitals_id = $("#app_pam_over_hopitals_id").val();
        var department_doctor = $("#pam_department_over_doctor").val();
        var s_date_3c = $("#app_pam_cos_date_3c").val();
        var e_date_3c = $("#app_pam_coe_date_3c").val();

        if (pam_hopitals_id == 0) {
            alert("Please Select Hospital");
            $("#app_pam_over_hopitals_id").focus();
            return false;
        } else if (department_doctor == 0) {
            alert("Please Select Department Or Doctor");
            $("#pam_department_over_doctor").focus();
            return false;
        } else if (s_date_3c == "") {
            alert("Please Select Start Date");
            $("#app_pam_cos_date_3c").focus();
            return false;
        } else if (e_date_3c == "") {
            alert("Please Select End Date");
            $("#app_pam_coe_date_3c").focus();
            return false;
        } else {
            $("#submit_appointment_report_overall_form").submit();
            return false;
        }

    });

    $(document).on("click", "#dataanalytics_submit_ipd_all_report_overall_btn", function (e) {

        var pam_hopitals_id = $("#ipd_pam_over_hopitals_id").val();
        var department_doctor = $("#ipd_department_over_doctor").val();
        var pam_department_id = $("#details_over_department_id").val();
        var pam_doctor_id = $("#details_over_doctor_id").val();
        var s_date_3c = $("#ipd_cos_date_3c").val();
        var e_date_3c = $("#ipd_coe_date_3c").val();

        if (pam_hopitals_id == 0) {
            alert("Please Select Hospital");
            $("#ipd_pam_over_hopitals_id").focus();
            return false;
        } else if (department_doctor == 0) {
            alert("Please Select Department Or Doctor");
            $("#ipd_department_over_doctor").focus();
            return false;
        } else if (department_doctor == 1 && pam_department_id == "") {
            alert("Please Select Department");
            $("#details_over_department_id").focus();
            return false;
        } else if (department_doctor == 2 && pam_doctor_id == "") {
            alert("Please Select Doctor");
            $("#details_over_doctor_id").focus();
            return false;
        } else if (s_date_3c == "") {
            alert("Please Select Start Date");
            $("#ipd_cos_date_3c").focus();
            return false;
        } else if (e_date_3c == "") {
            alert("Please Select End Date");
            $("#ipd_coe_date_3c").focus();
            return false;
        } else {
            $("#submit_ipd_all_report_overall_form").submit();
            return false;
        }

    });

    $(document).on("click", ".select_template_investigation", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_investigation.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var cleanText = $("#tcm_investigation").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_investigation').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_investigation').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_investigation').summernote('code', "" + result + "&nbsp;");
            } else {
                $('#tcm_investigation').summernote('code', old_val_html + "<br>" + result + "&nbsp;");
            }

        });

    });

    $(document).on("click", ".clear_investigation", function () {

        // $("#tcm_investigation").val("");
        $('#tcm_investigation').summernote('code', "");

    });

    $(document).on("click", "#add_investigation", function () {
        ////console.log("Yes");
        $('#modal_add_investigation').modal('show');
    });

    $("#form_modal_add_investigation").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var toim_template_name = $("#toim_template_name").val();
        var cleanText = $("#case_investigation_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if (cleanText == "") {
            alert("Please enter content.");
            $('#toim_template_content').focus();
            return false;
        } else if (toim_template_name == "" && $('#edit_toim_id').val() > 0) {
            alert("Please enter name.");
            $('#toim_template_name').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_investigation').attr('disabled', 'disabled');

        if (toim_template_name != "") {

            $.ajax({ //ajax form submit
                url: post_url,
                type: request_method,
                data: form_data,
                dataType: "text",
                contentType: false,
                cache: false,
                processData: false
            }).done(function (result) {

                $('#submit_button_investigation').removeAttr('disabled');
                $('#modal_lab_parameter_inves_template_box').modal('hide');

                var edit_toim_id = $("#edit_toim_id").val();
                if (edit_toim_id == 0) {
                    $("#pre_cash_investigation_template").prepend(result);
                } else {
                    $("#li_case_investigation_" + edit_toim_id).html(result.trim());
                }

                $("#form_modal_add_investigation").trigger("reset");

                $('.todo-list li.bg-purple').removeClass('bg-purple');
                $('#pre_cash_casemanage_lab_invs_parameter_template').html('');
                $("#form_modal_add_investigation").trigger("reset");
                $("#modal_lab_parameter_inves_template_box").modal("hide");
                $('#case_investigation_popup_textarea').summernote('code', "");

            });

        } else {

            $('#submit_button_investigation').removeAttr('disabled');
            $('#modal_lab_parameter_inves_template_box').modal('hide');


            var new_val_html = $('#case_investigation_popup_textarea').summernote('code').trim();
            var cleanText = $("#tcm_investigation").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_investigation').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_investigation').summernote('code', "");
            }
            if (cleanText == "") {
                $('#tcm_investigation').summernote('code', new_val_html);
            } else {
                $('#tcm_investigation').summernote('code', old_val_html + new_val_html);
            }


            $("#form_modal_add_investigation").trigger("reset");

            $('.todo-list li.bg-purple').removeClass('bg-purple');
            $('#pre_cash_casemanage_lab_invs_parameter_template').html('');
            $("#form_modal_add_investigation").trigger("reset");
            $("#modal_lab_parameter_inves_template_box").modal("hide");
            $('#case_investigation_popup_textarea').summernote('code', "");

        }

    });

    $('#submit_button_add_investigation').click(function () {
        var add_temp_title_investigation = $("#add_temp_title_investigation").val();
        var add_temp_content_investigation = $("#add_temp_content_investigation").val();

        if (add_temp_title_investigation == "") {
            alert("Please enter Title.");
            return false;
        }

        if (add_temp_content_investigation == "") {
            alert("Please enter content.");
            return false;
        }

        var post_url = 'action/action_new_out_investigation.php?do=add'
        var datastring = 'add_temp_title_investigation=' + add_temp_title_investigation + "&add_temp_content_investigation=" + add_temp_content_investigation;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                add_temp_title_investigation: add_temp_title_investigation,
                add_temp_content_investigation: add_temp_content_investigation,
            },
        }).done(function (result) {
            ////console.log(result);
            // $('#modal_add_advice_template').modal('hide');

            // $("#add_temp_title_advice").val("");
            // $("#add_temp_content_advice").val("");

            // if ($('#out_advice .dataTables_empty').length) {
            //     $("#out_advice").html(result.trim());
            // } else {
            //     $("#out_advice").prepend(result.trim());
            // }

            location.reload();

        });

    });

    $(document).on('change', '.onselect_salutation', function (e) {

        var checkedGender = $('input:radio[name=pm_gender]');
        checkedGender.prop('checked', false);

        var maleArray = ['Mr', 'S/O'];
        var femaleArray = ['Miss', 'Mrs', 'Ms.', 'Ms', 'D/O'];

        var salutation = this.value;

        if (jQuery.inArray(salutation, maleArray) != -1) {

            checkedGender.filter('[value=Male]').prop('checked', true);

        } else if (jQuery.inArray(salutation, femaleArray) != -1) {

            checkedGender.filter('[value=Female]').prop('checked', true);

        } else {

        }

    });

    $(document).on('change', '.onchecked_gender', function (e) {
        var salutation = $('#pm_salutation').val();
        var notSelectdArray = ['Dr', 'Master', 'B/O'];
        var gender = this.value;
        if (jQuery.inArray(salutation, notSelectdArray) != -1) {
            $('#pm_salutation').val('');
            if (gender == 'Other') {
                $('#pm_salutation').val('');
            } else {
                $('#pm_salutation').val(salutation);
            }
        } else {
            if (gender == 'Male') {
                $('#pm_salutation').val('Mr');
            } else if (gender == 'Female') {
                $('#pm_salutation').val('Ms.');
            } else {
                $('#pm_salutation').val('');
            }
        }
    });

    $("#search_advice_setting").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".advice_setting_table .advice_setting_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    $("#search_investigation_setting").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $(".investigation_setting_table .investigation_setting_tr_data").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    // $(document).on("click", ".close-setting-investigation", function () {

    //     $('.todo-list li.bg-purple').removeClass('bg-purple');
    //     $("#form_modal_add_investigation").trigger("reset");
    //     $("#addnewinvestigationtmaplate").modal("hide");
    //     $('#case_investigation_popup_textarea').summernote('code', "");
    // });

    $("#form_modal_add_setting_investigation").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var toim_template_name = $("#toim_template_name").val();
        var cleanText = $("#case_investigation_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if (toim_template_name == "") {
            alert("Please enter name.");
            $('#toim_template_name').focus();
            return false;
        } else if (cleanText == "") {
            alert("Please enter content.");
            $('#toim_template_content').focus();
            return false;
        } else {

        }
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('#submit_button_investigation').attr('disabled', 'disabled');
        //$('.err_registerloader').show();

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            location.reload();

        });

    });

    $(document).on("click", "#add_setting_investigation", function () {

        $('#addnewinvestigationtmaplate').modal('show');
        $('.inv_title').html('Add New Investigation');
        $('#edit_toim_id').val(0);
        $('#case_investigation_popup_textarea').summernote('code', "");
        $('#form_modal_add_setting_investigation').attr('action', 'action/action_case_template_investigation.php?do=add');



    });

    $(document).on("click", "#edit_setting_investigation", function () {

        var id = $(this).attr('data-id');

        $('#addnewinvestigationtmaplate').modal('show');
        $('.inv_title').html('Edit Investigation');
        $('#edit_toim_id').val(id);
        $('#form_modal_add_setting_investigation').attr('action', 'action/action_case_template_investigation.php?do=edit');
        $.ajax({
            type: 'post',
            url: "action/action_case_template_investigation.php?do=edit-popup",
            data: {
                dataId: id,
            },
            dataType: "JSON",
            cache: false,
            success: function (result) {

                $('#case_investigation_popup_textarea').summernote('code', result['toim_template_content']);
                $("#toim_template_name").val(result['toim_template_name']);
            }
        });

    });

    $(document).on("click", "#delete_investigation", function () {
        $('#modal_delete_investigation').modal('show');
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');

        var text = "Are you sure you want to delete <b>" + templatename + "</b> template permanently ?";
        $('.delete_out_investigation_template_text').html(text);
        $('#delete_toim_id').val(id);



    });

    $(document).on("click", "#submit_button_delete_investigation", function () {
        var id = $('#delete_toim_id').val();
        var post_url = 'action/action_case_template_investigation.php?do=delete'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            }
        }).done(function (result) {
            location.reload();
        });
    });

    $(document).on('click', '.checkAllcaseprescription', function (e) {
        if ($(this).is(":checked")) {
            $(".caseprescriptionoption").prop('checked', true);
        } else {
            $(".caseprescriptionoption").prop('checked', false);
        }
    });

    $(document).on("submit", "#formsettingsCaseprescription", function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#formsettingsCaseprescriptionbtn').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#formsettingsCaseprescriptionbtn').attr('disabled', false);
            $('.err_register').hide();

            location.reload();
        });
    });

    $(document).on('click', '.checkAllrxprintoption', function (e) {
        if ($(this).is(":checked")) {
            $(".rxprintoption").prop('checked', true);
        } else {
            $(".rxprintoption").prop('checked', false);
        }
    });

    $(document).on("submit", "#formsettingsRxprintoption", function (e) {

        e.preventDefault();
        proceed = true;

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#formsettingsRxprintoptionbtn').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#formsettingsRxprintoptionbtn').attr('disabled', false);
            $('.err_register').hide();

            location.reload();
        });
    });

    $(document).on("click", ".clear_dis_investigation", function () {

        // $("#tcm_investigation").val("");
        $('#tids_investigation').summernote('code', "");

    });

    $(document).on("click", ".select_template_dis_investigation", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_investigation.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            var cleanText = $("#tids_investigation").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tids_investigation').summernote('code').trim();

            if (cleanText == "") {
                $('#tids_investigation').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tids_investigation').summernote('code', "" + result + "&nbsp;");
            } else {
                $('#tids_investigation').summernote('code', old_val_html + "<br>" + result + "&nbsp;");
            }

        });

    });

    $(document).on("click", ".edit-case-allergies", function () {

        var id = $(this).attr('data-edit-tca_id');
        $('#editallergiesmodal').modal('show');

        var case_allergy = $('#case_allergy_' + id).is(":checked");

        var post_url = 'action/action_case_allergies.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tca_id").val(result['tca_id']);
            $("#edit_type").val(result['type']);
            $("#edit_tca_created_date").val(result['tca_created_date']);
            $("#edit_tca_print").val(case_allergy);

        });

    });

    $("#edit_case_allergies").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var type = $('#edit_type').val();

        if (type.trim() == "") {

            alert('Please enter type');
            $('#edit_type').focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_allergies').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_allergies').attr('disabled', false);
            $('.err_register').hide();
            var edit_tca_id = $('#edit_tca_id').val();
            $('#editallergiesmodal').modal('hide');
            $("#edit_case_allergies").trigger("reset");
            $('#tr_case_allergies_' + edit_tca_id).html(result.trim())
        });
    });

    $(document).on("click", "#delete_single_case_allergies", function () {
        var delete_tca_id = $("#delete_tca_id").val();
        var post_url = 'action/action_case_allergies.php?do=delete'
        var datastring = 'delete_tca_id=' + delete_tca_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tca_id: delete_tca_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_delete_allergies_single').modal('hide');
            $('#tr_case_allergies_' + delete_tca_id).remove();

            var tbody = $("#allergies_table tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="4" class="dataTables_empty">No allergies added</td></tr>');
            }

        });
    });

    $(document).on("click", ".edit-case-bodycom", function () {

        var id = $(this).attr('data-edit-tcbc_id');
        $('#editbodycommodal').modal('show');

        var case_body_com = $('#case_body_com_' + id).is(":checked");

        var post_url = 'action/action_case_body_com.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            $("#edit_tcbc_id").val(result['tcbc_id']);
            $("#edit_tcbc_height").val(result['height']);
            $("#edit_tcbc_weight").val(result['weight']);
            $("#edit_tcbc_created_date").val(result['tcbc_created_date']);
            $("#edit_tcbc_print").val(case_body_com);

            $("#edit_tcbc_pm_pid").val(result['pm_pid']);
            $("#edit_tcbc_patient_unique_id").val(result['patient_unique_id']);

        });

    });

    $("#edit_case_body_com").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var height = $('#edit_tcbc_height').val();
        var weight = $('#edit_tcbc_weight').val();

        if (height.trim() == "") {

            alert('Please enter height');
            $('#edit_tcbc_height').focus();
            return false;
        } else if (weight.trim() == "") {

            alert('Please enter weight');
            $('#edit_tcbc_weight').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_body_com').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_body_com').attr('disabled', false);
            $('.err_register').hide();
            var edit_tcbc_id = $('#edit_tcbc_id').val();
            $('#editbodycommodal').modal('hide');
            $("#edit_case_body_com").trigger("reset");
            $('#tr_case_body_com_' + edit_tcbc_id).html(result.trim())
        });
    });

    $(document).on("click", ".close-setting-investigation", function () {

        $('.todo-list li.bg-purple').removeClass('bg-purple');
        $("#form_modal_add_investigation").trigger("reset");
        $('#pre_cash_casemanage_lab_invs_parameter_template').html('');
        $("#modal_lab_parameter_inves_template_box").modal("hide");
        $('#case_investigation_popup_textarea').summernote('code', "");
    });

    $(document).on("click", "#delete_single_case_body_com", function () {
        var delete_tcbc_id = $("#delete_tcbc_id").val();
        var post_url = 'action/action_case_body_com.php?do=delete'
        var datastring = 'delete_tcbc_id=' + delete_tcbc_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tcbc_id: delete_tcbc_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_delete_body_com_single').modal('hide');
            $('#tr_case_body_com_' + delete_tcbc_id).remove();
            var tbody = $("#body_com_table tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="7" class="dataTables_empty">No body composition added</td></tr>');
            }

        });
    });

    $(document).on("click", ".edit-case-vital", function () {

        var id = $(this).attr('data-edit-tcv_id');
        $('#editvitalsmodal').modal('show');

        var case_vitals = $('#case_vitals_' + id).is(":checked");

        var post_url = 'action/action_case_vitals.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            $("#edit_tcv_id").val(result['tcv_id']);
            $("#edit_tcv_temp").val(result['temp']);
            $("#edit_tcv_pres").val(result['pres']);
            $("#edit_tcv_resp_rate").val(result['resp_rate']);
            $("#edit_tcv_blood_press").val(result['blood_press']);
            $("#edit_tcv_spo2").val(result['spo2']);
            $("#edit_tcv_created_date").val(result['tcv_created_date']);
            $("#edit_tcv_print").val(case_vitals);


        });

    });

    $("#edit_case_vital").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var temp = $("#edit_tcv_temp").val();
        var resp_rate = $("#edit_tcv_resp_rate").val();
        var pres = $("#edit_tcv_pres").val();
        var blood_press = $("#edit_tcv_blood_press").val();
        var spo2 = $("#edit_tcv_spo2").val();

        var all = temp + resp_rate + pres + blood_press + spo2;
        var all_variable = all.trim();

        if (all_variable == "") {
            alert("Please enter Something.");
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_vital').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_vital').attr('disabled', false);
            $('.err_register').hide();
            var edit_tcv_id = $('#edit_tcv_id').val();
            $('#editvitalsmodal').modal('hide');
            $("#edit_case_vital").trigger("reset");
            $('#tr_case_vitals_' + edit_tcv_id).html(result.trim())
        });

    });

    $(document).on("click", "#delete_single_case_vital", function () {
        var delete_tcv_id = $("#delete_tcv_id").val();
        var post_url = 'action/action_case_vitals.php?do=delete'
        var datastring = 'delete_tcv_id=' + delete_tcv_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tcv_id: delete_tcv_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_delete_vitals_single').modal('hide');
            $('#tr_case_vitals_' + delete_tcv_id).remove();
            var tbody = $("#vital_table tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="7" class="dataTables_empty">No vital added</td></tr>');
            }

        });
    });

    $(document).on("click", ".edit-case-diagnosis", function () {

        var id = $(this).attr('data-edit-tcd_id');
        $('#editdiagnosismodal').modal('show');

        var case_diagnosis = $('#diagnosis_table_' + id).is(":checked");

        var post_url = 'action/action_case_diagnosis.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tcd_id").val(result['tcd_id']);
            $("#edit_diagnosis").val(result['diagnosis']);
            $("#edit_icd_code").val(result['icd_code']);
            $("#edit_diagnosis_type").val(result['type']);
            $("#edit_tcd_created_date").val(result['tcd_created_date']);
            $("#edit_tcd_print").val(case_diagnosis);

        });

    });

    $("#edit_case_diagnosis").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_icd_code = $('#edit_icd_code').val();
        var edit_diagnosis_type = $('#edit_diagnosis_type').val();
        var edit_diagnosis = $('#edit_diagnosis').val();

        if (edit_diagnosis.trim() == "") {

            alert('Please enter diagnosis');
            $('#edit_diagnosis').focus();
            return false;
        } else if (edit_diagnosis_type.trim() == "") {

            alert('Please select diagnosis type');
            $('#edit_diagnosis_type').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_diagnosis').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_diagnosis').attr('disabled', false);
            $('.err_register').hide();
            var edit_tcd_id = $('#edit_tcd_id').val();
            $('#editdiagnosismodal').modal('hide');
            $("#edit_case_diagnosis").trigger("reset");
            $('#tr_case_dia_diagnosis_' + edit_tcd_id).html(result.trim())
        });
    });

    $(document).on("click", "#delete_single_case_diagnosis", function () {
        var delete_tcd_id = $("#delete_tcd_id").val();
        var post_url = 'action/action_case_diagnosis.php?do=delete'
        var datastring = 'delete_tcd_id=' + delete_tcd_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tcd_id: delete_tcd_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-diagnosis').modal('hide');
            $('#tr_case_dia_diagnosis_' + delete_tcd_id).remove();

            var tbody = $("#diagnosis_table tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="5" class="dataTables_empty">No diagnosis added</td></tr>');
            }

        });
    });

    $(document).on("click", ".edit-case-treatment", function () {

        var id = $(this).attr('data-edit-totm_id');
        $('#modal_edit_treatment').modal('show');

        var post_url = 'action/action_case_template_treatment.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_totm_id").val(result['totm_id']);
            $("#edit_totm_template_name").val(result['totm_template_name']);
            $("#edit_totm_template_content").val(result['totm_template_content']);

        });

    });

    $("#edit_case_treatment").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_totm_template_name = $('#edit_totm_template_name').val();
        var edit_totm_template_content = $('#edit_totm_template_content').val();

        if (edit_totm_template_name.trim() == "") {

            alert('Please enter title');
            $('#edit_totm_template_name').focus();
            return false;
        } else if (edit_totm_template_content.trim() == "") {

            alert('Please enter content');
            $('#edit_totm_template_content').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_edit_treatment').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_edit_treatment').attr('disabled', false);
            $('.err_register').hide();
            var edit_totm_id = $('#edit_totm_id').val();
            $('#modal_edit_treatment').modal('hide');
            $("#edit_case_treatment").trigger("reset");
            $('#li_case_treatment_' + edit_totm_id).html(result.trim())
        });
    });

    $(document).on("click", "#delete_case_treatment", function () {
        $('#modal-danger-case-treatment').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_totm_id').val(id);
    });

    $(document).on("click", "#delete_single_case_diagnosis", function () {
        var delete_tcd_id = $("#delete_tcd_id").val();
        var post_url = 'action/action_case_diagnosis.php?do=delete'
        var datastring = 'delete_tcd_id=' + delete_tcd_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tcd_id: delete_tcd_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-diagnosis').modal('hide');
            $('#tr_case_dia_diagnosis_' + delete_tcd_id).remove();

            var tbody = $("#diagnosis_table tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="5" class="dataTables_empty">No diagnosis added</td></tr>');
            }

        });
    });

    $(document).on("click", "#delete_single_case_treatment", function () {
        var delete_totm_id = $("#delete_totm_id").val();
        var post_url = 'action/action_case_template_treatment.php?do=delete'
        var datastring = 'delete_totm_id=' + delete_totm_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_totm_id: delete_totm_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-treatment').modal('hide');
            $('#li_case_treatment_' + result.trim()).remove();
        });
    });

    $(document).on("click", ".edit-case-advice", function () {

        var id = $(this).attr('data-edit-toam_id');
        $('#modal_edit_advice').modal('show');

        var post_url = 'action/action_case_template_advice.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_toam_id").val(result['toam_id']);
            $("#edit_toam_template_name").val(result['toam_template_name']);
            $("#edit_toam_template_content").val(result['toam_template_content']);

        });

    });

    $("#edit_case_advice").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_toam_template_name = $('#edit_toam_template_name').val();
        var edit_toam_template_content = $('#edit_toam_template_content').val();

        if (edit_toam_template_name.trim() == "") {

            alert('Please enter title');
            $('#edit_toam_template_name').focus();
            return false;
        } else if (edit_toam_template_content.trim() == "") {

            alert('Please enter content');
            $('#edit_toam_template_content').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_edit_advice').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_edit_advice').attr('disabled', false);
            $('.err_register').hide();
            var edit_toam_id = $('#edit_toam_id').val();
            $('#modal_edit_advice').modal('hide');
            $("#edit_case_advice").trigger("reset");
            $('#li_case_advice_' + edit_toam_id).html(result.trim())
        });
    });

    $(document).on("click", "#delete_case_advice", function () {
        $('#modal-danger-case-advice').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_toam_id').val(id);
    });

    $(document).on("click", "#delete_single_case_advice", function () {
        var delete_toam_id = $("#delete_toam_id").val();
        var post_url = 'action/action_case_template_advice.php?do=delete'
        var datastring = 'delete_toam_id=' + delete_toam_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_toam_id: delete_toam_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-advice').modal('hide');
            $('#li_case_advice_' + result.trim()).remove();
        });
    });

    $(document).on("click", ".edit-case-investigation", function () {

        var id = $(this).attr('data-edit-toim_id');
        $('#modal_lab_parameter_inves_template_box').modal('show');

        $('.inv_title').html('Edit Investigation');
        $('#form_modal_add_investigation').attr('action', 'action/action_case_template_investigation.php?do=edit');

        var post_url = 'action/action_case_template_investigation.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_toim_id").val(result['toim_id']);
            $("#toim_template_name").val(result['toim_template_name']);
            $('#case_investigation_popup_textarea').summernote('code', "" + result['toim_template_content']);
            // $("#edit_toim_template_content").val(result['toim_template_content']);

        });

    });

    $("#edit_case_investigation").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_toim_template_name = $('#edit_toim_template_name').val();
        var edit_toam_template_content = $('#edit_toam_template_content').val();

        if (edit_toim_template_name.trim() == "") {

            alert('Please enter title');
            $('#edit_toim_template_name').focus();
            return false;
        } else if (edit_toam_template_content.trim() == "") {

            alert('Please enter content');
            $('#edit_toam_template_content').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_edit_investigation').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_edit_investigation').attr('disabled', false);
            $('.err_register').hide();
            var edit_toam_id = $('#edit_toam_id').val();
            $('#modal_edit_investigation').modal('hide');
            $("#edit_case_investigation").trigger("reset");
            $('#li_case_investigation_' + edit_toam_id).html(result.trim())
        });
    });

    $(document).on("click", ".edit-case-report", function () {

        var id = $(this).attr('data-edit-tccr_id');
        $('#editreportsmodal').modal('show');

        var case_report = $('#case_report_' + id).is(":checked");

        var post_url = 'action/action_case_report_submit_popup.php?do=edit_pop_report'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            //$('#modal_add_clinic_notes').modal('hide');

            $("#edit_tccr_id").val(result['tccr_id']);
            $("#edit_tccr_title").val(result['tccr_title']);
            $("#edit_tccr_remarks").val(result['tccr_remarks']);
            $("#edit_tccr_created_date").val(result['tccr_created_date']);
            $("#edit_tccr_print").val(case_report);

        });

    });

    $("#edit_case_reports").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_icd_code = $('#edit_icd_code').val();
        var edit_tccr_remarks = $('#edit_tccr_remarks').val();
        var edit_tccr_title = $('#edit_tccr_title').val();

        if (edit_tccr_title.trim() == "") {

            alert('Please enter title');
            $('#edit_tccr_title').focus();
            return false;
        } else if (edit_tccr_remarks.trim() == "") {

            alert('Please enter remarks');
            $('#edit_tccr_remarks').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_edit_remarks').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_edit_remarks').attr('disabled', false);
            $('.err_register').hide();
            var edit_tccr_id = $('#edit_tccr_id').val();
            $('#editreportsmodal').modal('hide');
            $("#edit_case_reports").trigger("reset");
            $('#tr_case_CaseReports_' + edit_tccr_id).html(result.trim())
        });
    });

    $(document).on("click", "#delete_popup_case_report", function () {
        $('#modal_delete_case_report_single').modal('show');
        var tccr_id = $(this).attr('data-tccr_id');
        $('#delete_tccr_id').val(tccr_id);
    });

    $(document).on("click", "#delete_single_case_reports", function () {
        var delete_tccr_id = $("#delete_tccr_id").val();
        var post_url = 'action/action_case_report_submit_popup.php?do=delete'
        var datastring = 'delete_tccr_id=' + delete_tccr_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tccr_id: delete_tccr_id,
            },
        }).done(function (result) {

            $('#modal_delete_case_report_single').modal('hide');
            $('#tr_case_CaseReports_' + delete_tccr_id).remove();
        });
    });

    $(document).on("click", ".edit-case-visual-acuity", function () {

        var id = $(this).attr('data-edit-tcva_id');
        $('#modal_edit_visual_acuity').modal('show');

        var case_visual_acuity = $('#case_visual_acuity_' + id).is(":checked");

        var post_url = 'action/action_case_visual_acuity.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            $("#edit_tcva_id").val(result['tcva_id']);
            $("#edit_tcva_right_eye").val(result['right_eye']);
            $("#edit_tcva_left_eye").val(result['left_eye']);
            $("#edit_tcva_tcva_date").val(result['tcva_date']);
            $("#edit_tcva_tcva_time").val(result['tcva_time']);
            $("#edit_tcva_remarks").val(result['remarks']);
            $("#edit_tcva_created_date").val(result['tcva_created_date']);
            $("#edit_tcva_print").val(case_visual_acuity);
           
            $('#edit_tcva_tcva_time').flatpickr({
                enableTime: true,
                noCalendar: true,
                dateFormat: "H:i",
            });

            $('#edit_tcva_tcva_date').flatpickr({
                dateFormat: 'Y-m-d',
                disableMobile: "true",
            });

        });

    });

    $("#edit_case_visual_acuity").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var right_eye = $("#edit_tcva_right_eye").val();
        var left_eye = $("#edit_tcva_left_eye").val();
        var remarks = $("#txt_va_remarks").val();

        var tcva_date = $("#edit_tcva_tcva_date").val();
        var tcva_time = $("#edit_tcva_tcva_time").val();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#edit_tcva_right_eye").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#edit_tcva_left_eye").focus();
            return false;
        }

        if (tcva_date == "") {
            alert("Please enter date.");
            $("#edit_tcva_tcva_date").focus();
            return false;
        }

        if (tcva_time == "") {
            alert("Please enter time.");
            $("#edit_tcva_tcva_time").focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_visual_acuity').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_visual_acuity').attr('disabled', false);
            $('.err_register').hide();
            var edit_tcva_id = $('#edit_tcva_id').val();
            $('#modal_edit_visual_acuity').modal('hide');
            $("#edit_case_visual_acuity").trigger("reset");
            $('#tr_case_visual_acuity_' + edit_tcva_id).html(result.trim())
        });

    });

    $(document).on("click", "#delete_popup_visual_acuity", function () {
        $('#modal_delete_visual_acuity_single').modal('show');
        var tcva_id = $(this).attr('data-tcva_id');

        var text = "<img src='../assets/img/dlt.svg' class='dlticon dlticon-casemanager'/><br/>Are you sure you want to delete <b>vitals</b> permanently ? <br /> <b>NOTE</b>: Once deleted, the record will not be recoverable.";
        $('.delete_case_vitals_text').html(text);
        $('#delete_tcva_id').val(tcva_id);
    });

    $(document).on("click", "#delete_single_case_visual_acuity", function () {
        var delete_tcva_id = $("#delete_tcva_id").val();
        var post_url = 'action/action_case_visual_acuity.php?do=delete'
        var datastring = 'delete_tcva_id=' + delete_tcva_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tcva_id: delete_tcva_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_delete_visual_acuity_single').modal('hide');
            $('#tr_case_visual_acuity_' + delete_tcva_id).remove();
            var tbody = $("#example4_17 tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="5" class="dataTables_empty">No visual acuity added</td></tr>');
            }

        });
    });

    $(document).on("click", ".edit-case-iop", function () {

        var id = $(this).attr('data-edit-tcei_id');
        $('#modal_edit_iop').modal('show');

        var case_iop = $('#case_iop_' + id).is(":checked");

        var post_url = 'action/action_case_eye_iop.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            $("#edit_tcei_id").val(result['tcei_id']);
            $("#edit_tcei_right_eye").val(result['right_eye']);
            $("#edit_tcei_left_eye").val(result['left_eye']);
            $("#edit_tcei_tcei_date").val(result['tcei_date']);
            $("#edit_tcei_tcei_time").val(result['tcei_time']);
            $("#edit_tcei_remarks").val(result['remarks']);
            $("#edit_tcei_created_date").val(result['tcei_created_date']);
            $("#edit_tcei_print").val(case_iop);

            $('#edit_tcei_tcei_date').flatpickr({
                dateFormat: 'Y-m-d'
            });

            $('#edit_tcei_tcei_time').flatpickr({
                enableTime: true,
                noCalendar: true,
                dateFormat: "H:i",
            });


        });

    });

    $("#edit_case_iop").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var right_eye = $("#edit_tcei_right_eye").val();
        var left_eye = $("#edit_tcei_left_eye").val();
        var remarks = $("#txt_va_remarks").val();

        var tcei_date = $("#edit_tcei_tcei_date").val();
        var tcei_time = $("#edit_tcei_tcei_time").val();

        if (right_eye == "") {
            alert("Please enter Right Eye.");
            $("#edit_tcei_right_eye").focus();
            return false;
        }

        if (left_eye == "") {
            alert("Please enter Left Eye.");
            $("#edit_tcei_left_eye").focus();
            return false;
        }

        if (tcei_date == "") {
            alert("Please enter date.");
            $("#edit_tcei_tcei_date").focus();
            return false;
        }

        if (tcei_time == "") {
            alert("Please enter time.");
            $("#edit_tcei_tcei_time").focus();
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_iop').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_iop').attr('disabled', false);
            $('.err_register').hide();
            var edit_tcei_id = $('#edit_tcei_id').val();
            $('#modal_edit_iop').modal('hide');
            $("#edit_case_iop").trigger("reset");
            $('#tr_case_eye_iop_' + edit_tcei_id).html(result.trim())
        });

    });

    $(document).on("click", "#delete_popup_iop", function () {
        $('#modal_delete_iop_single').modal('show');
        var tcei_id = $(this).attr('data-tcei_id');

        $('#delete_tcei_id').val(tcei_id);
    });

    $(document).on("click", "#delete_single_case_iop", function () {
        var delete_tcei_id = $("#delete_tcei_id").val();
        var post_url = 'action/action_case_eye_iop.php?do=delete'
        var datastring = 'delete_tcei_id=' + delete_tcei_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_tcei_id: delete_tcei_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal_delete_iop_single').modal('hide');
            $('#tr_case_eye_iop_' + delete_tcei_id).remove();
            var tbody = $("#example5_17 tbody");

            if (tbody.children().length == 0) {
                tbody.html('<tr class="odd"><td valign="top" colspan="5" class="dataTables_empty">No iop added</td></tr>');
            }

        });
    });

    //case manager examination template start
    $.savecaseExaminationTemplate = function () {
        var edit_toem_id = $('#edit_toem_id').val();
        var toem_template_name = $('#toem_template_name').val();
        var case_custom_popup_textarea = $('#case_custom_popup_textarea').summernote('code');
        //var case_custom_popup_textarea = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if (edit_toem_id > 0 && toem_template_name == '') {
            alert('Please enter name.');
            $('#toem_template_name').focus();
            return false;
        } else if (case_custom_popup_textarea == "") {
            alert("Please enter content.");
            $('#case_custom_popup_textarea').focus();
            return false;
        } else {

        }

        $('#submit_button_popup_custom_box').attr('disabled', 'disabled');
        $('.err_register').show();


        if (edit_toem_id == 0) {
            var examination_temp_action = 'add';
        } else {
            var examination_temp_action = 'edit';
        }

        if (toem_template_name != '') {
            $.ajax({
                type: 'post',
                url: "action/action_case_template_examination.php?do=" + examination_temp_action,
                data: {
                    toem_template_name: toem_template_name,
                    case_custom_popup_textarea: case_custom_popup_textarea,
                    edit_toem_id: edit_toem_id
                },
                dataType: "text",
                cache: false,
                success: function (result) {
                    var result = result.trim();

                    $('#submit_button_popup_custom_box').attr('disabled', false);
                    $('.err_register').hide();

                    if (edit_toem_id == 0) {
                        $("#pre_cash_examination_template").prepend(result);
                    } else {
                        $("#li_case_examination_" + edit_toem_id).html(result.trim());
                    }

                    $("#edit_toem_id").val(0);
                    $('.todo-list li.bg-purple').removeClass('bg-purple');
                    $('#case_custom_popup_textarea').summernote('code', "");

                }
            });
        }
    }

    $(document).on("click", ".select_template_examination", function () {
        var id = $(this).attr('data-id');

        var post_url = 'action/action_case_template_examination.php?do=template'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            var result = result.trim();
            var cleanText = $("#tcm_examination_box").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_examination_box').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_examination_box').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_examination_box').summernote('code', "" + result + "&nbsp;");
            } else {
                $('#tcm_examination_box').summernote('code', old_val_html + "<br>" + result + "&nbsp;");
            }

        });

    });

    $(document).on("click", ".clear_examination", function () {
        $('#tcm_examination_box').summernote('code', "");
    });

    $(document).on("click", ".edit-case-examination", function () {

        var data_title = $(this).attr('data-title');
        $("#case_template_name").val(data_title);

        var id = $(this).attr('data-edit-toem_id');
        $('#modal_custom_template_box').modal('show');

        $('.historyandexamination_modal_title').html('Edit Examination');
        //$('#form_modal_add_examination').attr('action','action/action_case_template_examination.php?do=edit');

        var Link = $(".base_url_practice").val() + 'case_manager/';

        var post_url = Link + 'action/action_case_template_examination.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function (result) {

            $('.examination_template_textbox').show();
            $('.reset-custom-popup').hide();

            $("#edit_toem_id").val(result['toem_id']);
            $("#toem_template_name").val(result['toem_template_name']);
            $('#case_custom_popup_textarea').summernote('code', "" + result['toem_template_content']);

        });

    });

    $(document).on("click", "#delete_case_examination", function () {
        $('#modal-danger-case-examination').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_toem_id').val(id);
    });

    $(document).on("click", "#delete_single_case_examination", function () {
        var delete_toem_id = $("#delete_toem_id").val();
        var Link = $(".base_url_practice").val() + 'case_manager/';
        var post_url = 'action/action_case_template_examination.php?do=delete'
        var datastring = 'delete_toem_id=' + delete_toem_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_toem_id: delete_toem_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-examination').modal('hide');
            $('#li_case_examination_' + result.trim()).remove();
        });
    });

    //case manager examination template end

    $(document).on("click", "#delete_case_investigation", function () {
        $('#modal-danger-case-investigation').modal('show');
        var id = $(this).attr('data-id');
        $('#delete_toim_id').val(id);
    });

    $(document).on("click", "#delete_single_case_investigation", function () {
        var delete_toim_id = $("#delete_toim_id").val();
        var post_url = 'action/action_case_template_investigation.php?do=delete_setting'
        var datastring = 'delete_toim_id=' + delete_toim_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_toim_id: delete_toim_id,
            },
        }).done(function (result) {
            ////console.log(result);
            $('#modal-danger-case-investigation').modal('hide');
            $('#li_case_investigation_' + delete_toim_id).remove();
        });
    });


    $(document).on("click", ".edit_casemanager_case_report", function () {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_report_title_" + id).attr('data-title');

        console.log("id:" + id);
        console.log("title:" + title);

        $("#edit_text_case_report_title").val(id);
        $("#text_case_report_title").val(title);

    });

    $(document).on("click", ".delete_casemanager_case_report", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_case_report_title.php?do=delete'
        var datastring = 'tcrt_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_report_title_' + id).remove();


        });

    });

    $(document).on("click", ".edit_casemanager_case_report_remarks", function () {
        // /e.preventDefault();
        var id = $(this).attr('data-id');
        var title = $("#li_case_report_remarks_" + id).attr('data-title');

        console.log("id:" + id);
        console.log("title:" + title);

        $("#edit_text_case_report_remarks").val(id);
        $("#text_case_report_remarks").val(title);

    });

    $(document).on("click", ".delete_casemanager_case_report_remarks", function (e) {

        var id = $(this).attr('data-id');
        var post_url = 'action/action_case_template_case_report_remarks.php?do=delete'
        var datastring = 'tcrr_id=' + id;
        //console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#li_case_report_remarks_' + id).remove();


        });

    });

    $(document).on("click", ".close-setting-examination", function (e) {
        e.preventDefault();
        $('.todo-list li.bg-purple').removeClass('bg-purple');
        $("#modal_custom_template_box").modal("hide");
        $('#case_custom_popup_textarea').summernote('code', "");

        $('#pre_cash_casemanage_second_tag_template').html('');
        $('#pre_cash_casemanage_third_tag_template').html('');

    });

    $(document).on("keydown", "#modal_custom_template_box", function (e) {
        var charCode = e.charCode || e.keyCode || e.which;
        if (charCode == 27) {
            alert("Escape not allowed!, Please close");
            return false;
        }
    });

    $(document).on("keyup", ".case_search_medicine_template_inpatient", function (e) {

        var searchString1 = $(this).val();
        var department_id = $("#department_id").val();

        $.ajax({
            type: 'post',
            url: 'action/get_search_medicine_name_templae.php',
            data: {
                p_d_data1: searchString1.trim(),
                department_id: department_id,

            },
            dataType: "text",
            success: function (response) {
                $("#pre_medicine_template").html(response);
            }
        });
    });

    $(document).on("keyup", ".search_inpatient_med_template", function (e) {

        var searchString1 = $(this).val();
        //var department_id = $("#department_id").val();

        $.ajax({
            type: 'post',
            url: 'action/get_search_inpatient_med_template.php?do=search_template_medicine',
            data: {
                p_d_data1: searchString1.trim(),
                //department_id: department_id,

            },
            dataType: "text",
            success: function (response) {
                $("#disease_template").html(response);
            }
        });
    });

    $(document).on("change", ".select_settings_template_dropdowan", function () {
        var redirect_page = $(this).val();
        window.location.href = redirect_page;
    });

    $(document).on("click", "#submit_button_popup_custom_box_template", function (e) {
        var edit_toem_id = $('#edit_toem_id').val();
        var toem_template_name = $('#toem_template_name').val();
        var case_custom_popup_textarea = $('#case_custom_popup_textarea').summernote('code');
        //var case_custom_popup_textarea = $("#case_custom_popup_textarea").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if (case_custom_popup_textarea == "") {
            alert("Please enter content.");
            $('#case_custom_popup_textarea').focus();
            return false;
        } else if (toem_template_name == '') {
            alert('Please enter name.');
            $('#toem_template_name').focus();
            return false;
        } else {

        }

        $('#submit_button_popup_custom_box_template').attr('disabled', 'disabled');
        $('.err_register').show();

        if (edit_toem_id == 0) {
            var examination_temp_action = 'add';
        } else {
            var examination_temp_action = 'edit';
        }

        var Link = $(".base_url_practice").val() + 'case_manager/';

        if (toem_template_name != '') {
            $.ajax({
                type: 'post',
                url: Link + "action/action_case_template_examination.php?do=" + examination_temp_action,
                data: {
                    toem_template_name: toem_template_name,
                    case_custom_popup_textarea: case_custom_popup_textarea,
                    edit_toem_id: edit_toem_id
                },
                dataType: "text",
                cache: false,
                success: function (result) {

                    location.reload();

                }
            });
        }
    });

    $(document).on("click", "#delete_single_case_examination_template", function (e) {
        var delete_toem_id = $("#delete_toem_id").val();
        var Link = $(".base_url_practice").val() + 'case_manager/';
        var post_url = 'action/action_case_template_examination.php?do=delete'
        var datastring = 'delete_toem_id=' + delete_toem_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                delete_toem_id: delete_toem_id,
            },
        }).done(function (result) {
            location.reload();
        });
    });

    $('#modal_custom_template_box').on('dragstart drop', function (e) {
        e.preventDefault();
        return false;
    });

    $(document).on("click", ".close-setting-investigation_template", function () {
        $('.todo-list li.bg-purple').removeClass('bg-purple');
        $("#form_modal_add_setting_investigation").trigger("reset");
        $('#pre_cash_casemanage_lab_invs_parameter_template').html('');
        $("#addnewinvestigationtmaplate").modal("hide");
        $('#toim_template_content').summernote('code', "");
    });

    $.hidemodal = function () {
        $(document).on('hidden.bs.modal', function (e) {
            e.preventDefault();
            proceed = true;
            $('body').addClass("modal-open");
        });
    }

    $(document).on("click", ".select_edit_current_complaint", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_hostory').modal('show');
        var post_url = 'action/action_case_template_in_history.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            $("#edit_tihm_id").val(result['tihm_id']);
            $("#edit_tihm_template_name").val(result['tihm_template_name']);
            $("#edit_tihm_template_content").val(result['tihm_template_content']);
        });
    });

    $(document).on("click", "#submit_button_in_history_edit", function (e) {
        var tihm_template_name = $.trim($("#edit_tihm_template_name").val());
        var tihm_template_content = $.trim($("#edit_tihm_template_content").val());
        var tihm_id = $("#edit_tihm_id").val();

        if (tihm_template_name == "") {
            $("#edit_tihm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tihm_template_content == "") {
            alert("Please enter history.");
            $('#edit_tihm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_in_history.php?do=edit'
        $('#submit_button_in_history_edit').attr('disabled', 'disabled');
        $('#submit_button_in_history_edit').hide();
        $(".err_inpregisterloader_history_inp").attr("style", "display:block");

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                tihm_id: tihm_id,
                tihm_template_name: tihm_template_name,
                tihm_template_content: tihm_template_content,
            },
        }).done(function (result) {
            var result = result.trim();
            $('#modal_edit_hostory').modal('hide');
            $('#submit_button_in_history_edit').attr('disabled', false);
            $('#submit_button_in_history_edit').show();
            $(".err_inpregisterloader_history_inp").attr("style", "display:none");

            $("#edit_tihm_id").val('');
            $("#edit_tihm_template_name").val("");
            $("#edit_tihm_template_content").val("");

            //$("#pre_in_history_template").append(result);
            $('#li_current_complaint' + tihm_id).html(result)

        });
    });

    $(document).on("click", ".delete_inp_current_comp_modal_show", function (e) {
        var id = $(this).data('id');
        $('#delete_modal_current_comp').modal('show');
        $('#delete_tihm_id').val(id);
    });

    $(document).on("click", "#delete_inp_current_comp", function (e) {
        var id = $('#delete_tihm_id').val();
        var post_url = 'action/action_case_template_in_history.php?do=delete'

        $('.submit_popup_p_obstetrics_history_edit').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_modal_current_comp').modal('hide');
            $("#li_current_complaint" + id).remove();

            $('.submit_popup_p_obstetrics_history_edit').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });

    $(document).on("click", ".select_edit_inp_examination_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_examination').modal('show');
        var post_url = 'action/action_case_template_in_men_status_exam.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            $("#edit_tiem_id").val(result['tiem_id']);
            $("#edit_tiem_template_name").val(result['tiem_template_name']);
            $("#edit_tiem_template_content").val(result['tiem_template_content']);
        });
    });

    $(document).on("keydown", "#form_modal_men_status_exam_edit", function (e) {
        if (e.keyCode == 13) {
            $('#edit_submit_button_in_men_status_exam').click(e);
            return false;
        }
    });

    $('#edit_submit_button_in_men_status_exam').click(function (e) {
        var tiem_template_name = $.trim($("#edit_tiem_template_name").val());
        var tiem_template_content = $.trim($("#edit_tiem_template_content").val());
        var tiem_id = $("#edit_tiem_id").val();

        if (tiem_template_name == "") {
            $("#edit_tiem_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tiem_template_content == "") {
            alert("Please enter notes.");
            $('#edit_tiem_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_in_men_status_exam.php?do=edit'

        $('#edit_submit_button_in_men_status_exam').attr('disabled', 'disabled');
        $('#edit_submit_button_in_men_status_exam').hide();
        $(".err_inpregisterloader_examination").attr("style", "display:block");

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                tiem_id: tiem_id,
                tiem_template_name: tiem_template_name,
                tiem_template_content: tiem_template_content,
            },
        }).done(function (result) {

            $('#modal_edit_examination').modal('hide');

            $("#edit_tiem_id").val('');
            $("#edit_tiem_template_name").val("");
            $("#edit_tiem_template_content").val("");

            $('#li_inp_examination' + tiem_id).html(result)

            $('#edit_submit_button_in_men_status_exam').attr('disabled', false);
            $('#edit_submit_button_in_men_status_exam').show();
            $(".err_inpregisterloader_examination").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_examination_modal_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_examination_modal').modal('show');
        $('#delete_tiem_id').val(id);
    });

    $(document).on("click", "#delete_inp_examination_btn", function (e) {
        var id = $('#delete_tiem_id').val();
        var post_url = 'action/action_case_template_in_men_status_exam.php?do=delete'

        $('#delete_inp_examination_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_examination_modal').modal('hide');
            $("#li_inp_examination" + id).remove();

            $('#delete_inp_examination_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });


    $(document).on("click", ".select_edit_inp_remark_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_imp_remark').modal('show');
        var post_url = 'action/action_case_template_in_remark.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            $("#edit_tirm_id").val(result['tirm_id']);
            $("#edit_tirm_template_name").val(result['tirm_template_name']);
            $("#edit_tirm_template_content").val(result['tirm_template_content']);
        });
    });

    $(document).on("keydown", "#form_modal_in_remark_edit", function (e) {
        if (e.keyCode == 13) {
            $('#edit_submit_button_in_remark').click(e);
            return false;
        }
    });

    $(document).on("click", "#edit_submit_button_in_remark", function (e) {

        var tirm_template_name = $.trim($("#edit_tirm_template_name").val());
        var tirm_template_content = $.trim($("#edit_tirm_template_content").val());
        var tirm_id = $("#edit_tirm_id").val();

        if (tirm_template_name == "") {
            $("#edit_tirm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tirm_template_content == "") {
            alert("Please enter remark.");
            $('#edit_tirm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_in_remark.php?do=edit'

        $('#edit_submit_button_in_remark').attr('disabled', 'disabled');
        $('#edit_submit_button_in_remark').hide();
        $(".err_inpregisterloader_remarks").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tirm_id: tirm_id,
                tirm_template_name: tirm_template_name,
                tirm_template_content: tirm_template_content,
            },
        }).done(function (result) {
            $('#modal_edit_imp_remark').modal('hide');
            $("#edit_tirm_id").val('');
            $("#edit_tirm_template_name").val("");
            $("#edit_tirm_template_content").val("");

            $('#li_inp_remarks' + tirm_id).html(result)

            $('#edit_submit_button_in_remark').attr('disabled', false);
            $('#edit_submit_button_in_remark').show();
            $(".err_inpregisterloader_remarks").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_remark_modal_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_remarks_modal').modal('show');
        $('#delete_tirm_id').val(id);
    });

    $(document).on("click", "#delete_inp_remarks_btn", function (e) {
        var id = $('#delete_tirm_id').val();
        var post_url = 'action/action_case_template_in_remark.php?do=delete'

        $('#delete_inp_remarks_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_remarks_modal').modal('hide');
            $("#li_inp_remarks" + id).remove();

            $('#delete_inp_remarks_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });

    $("#form_modal_add_popup_diagnosis_box_setting").submit(function (e) {

        e.preventDefault();

        //  proceed = true;
        var select_diagnosis_text = $("#select_diagnosis_text").val();
        var select_todm_type = $("#select_todm_type").val();


        if (select_diagnosis_text == "") {
            alert("Please Enter Diagnosis Name.");
            $("#select_diagnosis_text").focus();
            return false;
        } else if (select_todm_type == "") {
            alert("Please Enter Diagnosis Type.");
            $("#select_todm_type").focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        //console.log(form_data);
        $('#submit_popup_diagnosis_box').attr('disabled', 'disabled');

        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "JSON",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_popup_diagnosis_box').removeAttr('disabled');
            $('#modal_custom_diagnosis_box').modal('hide');
            $("#form_modal_add_popup_diagnosis_box_setting").trigger("reset");

            $.getloadDiagonosis_setting(result['dia_id'], result['type']);
            if (result['medi_temp_id'] !== "" && result['medi_temp_id'] > "0") {
                $.getloadMultipleMedicinetemplate_setting(result['medi_temp_id']);
            }

            if (result['advice_id'] !== "" && result['advice_id'] > "0") {
                $.getloadMultipleAdvicetemplate(result['advice_id']);
            }
            if (result['investigation_id'] !== "" && result['investigation_id'] > "0") {
                $.getloadInvestigationtemplate(result['investigation_id']);
            }


        });

    });

    $.getloadDiagonosis_setting = function (Id, diaType) {

        var id = Id;
        var post_url = 'action/action_case_diagnosis.php?do=get_diagonosis'
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
                diaType: diaType,
            },
            dataType: 'text'
        }).done(function (result) {

            if ($('#add_table_diagnosis_super_admin .dataTables_empty').length) {

                $("#add_table_diagnosis_super_admin").html(result);

            } else {
                $("#add_table_diagnosis_super_admin").prepend(result.trim());
            }

            // $.CustomCashsheetPredictiveJs();

        });
    }

    $.getloadMultipleMedicinetemplate_setting = function (Id) {

        var decode_pm_pid = $("#decode_pm_pid").val();

        var id = Id;
        var last_weight = $("#last_weight").val();
        var last_bsa = $("#last_bsa").val();

        var post_url = '../action/action_case_add_multiple_medicine_template.php?do=template&last_weight=' + last_weight + '&last_bsa=' + last_bsa + "&decode_pm_pid=" + decode_pm_pid;
        var datastring = 'id=' + id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {

            $('#medicinetemplatepopup').modal('hide');
            $(".select_tmm_id").each(function () {
                if ($(this).val() == 0) {
                    var trclass = $(this).closest('tr').attr('id');
                    $('#tr_' + trclass).remove();
                    // alert(trclass);

                }
            });
            $('#medicine_table_rows').append(result.trim());

            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            })

        });
    }

    $(document).on("click", "#delete_oneclick", function (e) {
        e.preventDefault();
        $('#modal-danger-oneclick_consultation').modal('show');
        var id = $(this).attr('data-id');
        var templatename = $(this).attr('data-text');
        var text = "Are you sure you want to delete <b>" + templatename + "</b> record ?";
        $('.delete_oneclick_consultation_text').html(text);
        $('#delete_toc_id').val(id);
    });

    $(document).on("click", "#submit_button_delete_oneclick_consultation", function (e) {
        e.preventDefault();
        var id = $('#delete_toc_id').val();
        var post_url = '../action/action_oneclick_consultation.php?do=delete'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            }
        }).done(function (result) {
            location.reload();
        });
    });

    $(document).on("click", ".edit-case-diagnosis_setting", function () {

        var id = $(this).attr('data-edit-tcd_id');
        var diagnosis = $(this).attr('data-diagnosis');
        var icd_code = $(this).attr('data-icd_code');
        var type = $(this).attr('data-type');
        var created_date = $(this).attr('data-created_date');
        $('#editdiagnosismodal').modal('show');
        var case_diagnosis = $('#diagnosis_table_' + id).is(":checked");
        $("#edit_tcd_id").val(id);
        $("#edit_diagnosis").val(diagnosis);
        $("#edit_icd_code").val(icd_code);
        $("#edit_diagnosis_type").val(type);
        $("#edit_tcd_created_date").val(created_date);

    });

    $("#oneclick_consultation_superadmin_add").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var oneclick_temp_name = $('#oneclick_temp_name').val();
        var dp_main_id = $('#dp_main_id').val();

        if (oneclick_temp_name.trim() == "") {
            alert('Please enter template name');
            $('#oneclick_temp_name').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_oneclick_cosultation').attr('disabled', 'disabled');
        // $('.err_inpregisterloader').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            // $('#submit_button_oneclick_cosultation').attr('disabled', false);
            //$('.err_inpregisterloader').hide();
            window.location.href = "settings_oneclick_cosultation.php";
        });
    });

    $("#oneclick_consultation_superadmin_edit").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var oneclick_temp_name = $('#oneclick_temp_name').val();
        var dp_main_id = $('#dp_main_id').val();

        if (oneclick_temp_name.trim() == "") {
            alert('Please enter template name');
            $('#oneclick_temp_name').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_button_oneclick_cosultation').attr('disabled', 'disabled');
        //$('.err_inpregisterloader').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_button_oneclick_cosultation').attr('disabled', false);
            //$('.err_inpregisterloader').hide();
            window.location.href = "settings_oneclick_cosultation.php";
        });
    });


    $(document).on("click", ".select_edit_inp_hospital_cource_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_imp_hospital_cource').modal('show');
        var post_url = 'action/action_case_template_dis_history.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            $("#edit_tdhpm_id").val(result['tdhpm_id']);
            $("#edit_tdhpm_template_name").val(result['tdhpm_template_name']);
            $("#edit_tdhpm_template_content").val(result['tdhpm_template_content']);
        });
    });

    $(document).on("keydown", "#edit_form_modal_add_dis_hostory", function (e) {
        if (e.keyCode == 13 && !e.shiftKey) {
            $('#edit_submit_button_dis_history').click(e);
            return false;
        }
    });

    $(document).on("click", "#edit_submit_button_dis_history", function (e) {

        var tdhpm_template_name = $.trim($("#edit_tdhpm_template_name").val());
        var tdhpm_template_content = $.trim($("#edit_tdhpm_template_content").val());
        var tdhpm_id = $("#edit_tdhpm_id").val();

        if (tdhpm_template_name == "") {
            $("#edit_tdhpm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tdhpm_template_content == "") {
            alert("Please Enter History.");
            $('#edit_tdhpm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_history.php?do=edit'

        $('#edit_submit_button_dis_history').attr('disabled', 'disabled');
        $('#edit_submit_button_dis_history').hide();
        $(".err_inpregisterloader_hc").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdhpm_id: tdhpm_id,
                tdhpm_template_name: tdhpm_template_name,
                tdhpm_template_content: tdhpm_template_content,
            },
        }).done(function (result) {
            $('#modal_edit_imp_hospital_cource').modal('hide');
            $("#edit_tdhpm_id").val('');
            $("#edit_tdhpm_template_name").val("");
            $("#edit_tdhpm_template_content").val("");

            $('#li_inp_hc' + tdhpm_id).html(result)

            $('#edit_submit_button_dis_history').attr('disabled', false);
            $('#edit_submit_button_dis_history').show();
            $(".err_inpregisterloader_hc").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_hc_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_hc_modal').modal('show');
        $('#delete_tdhpm_id').val(id);
    });

    $(document).on("click", "#delete_inp_hc_btn", function (e) {
        var id = $('#delete_tdhpm_id').val();
        var post_url = 'action/action_case_template_dis_history.php?do=delete'

        $('#delete_inp_hc_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_hc_modal').modal('hide');
            $("#li_inp_hc" + id).remove();

            $('#delete_inp_hc_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });



    $(document).on("click", ".select_edit_inp_discharge_condition_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_condition').modal('show');
        var post_url = 'action/action_case_template_dis_condition.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            $("#edit_tdcm_id").val(result['tdcm_id']);
            $("#edit_tdcm_template_name").val(result['tdcm_template_name']);
            $("#edit_tdcm_template_content").val(result['tdcm_template_content']);
        });
    });

    $(document).on("keydown", "#form_modal_edit_dis_condition", function (e) {
        if (e.keyCode == 13) {
            $('#edit_submit_button_dis_condition').click(e);
            return false;
        }
    });

    $(document).on("click", "#edit_submit_button_dis_condition", function (e) {

        var tdcm_template_name = $.trim($("#edit_tdcm_template_name").val());
        var tdcm_template_content = $.trim($("#edit_tdcm_template_content").val());
        var tdcm_id = $("#edit_tdcm_id").val();

        if (tdcm_template_name == "") {
            $("#edit_tdcm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tdcm_template_content == "") {
            alert("Please Enter History.");
            $('#edit_tdcm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_condition.php?do=edit'

        $('#edit_submit_button_dis_condition').attr('disabled', 'disabled');
        $('#edit_submit_button_dis_condition').hide();
        $(".err_inpregisterloader_dis_condition").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdcm_id: tdcm_id,
                tdcm_template_name: tdcm_template_name,
                tdcm_template_content: tdcm_template_content,
            },
        }).done(function (result) {
            $('#modal_edit_dis_condition').modal('hide');
            $("#edit_tdcm_id").val('');
            $("#edit_tdcm_template_name").val("");
            $("#edit_tdcm_template_content").val("");

            $('#li_inp_discharge_conditions' + tdcm_id).html(result)

            $('#edit_submit_button_dis_condition').attr('disabled', false);
            $('#edit_submit_button_dis_condition').show();
            $(".err_inpregisterloader_dis_condition").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_discharge_condition_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_discharge_condition_modal').modal('show');
        $('#delete_tdcm_id').val(id);
    });

    $(document).on("click", "#delete_inp_discharge_condition_btn", function (e) {
        var id = $('#delete_tdcm_id').val();
        var post_url = 'action/action_case_template_dis_condition.php?do=delete'

        $('#delete_inp_discharge_condition_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_discharge_condition_modal').modal('hide');
            $("#li_inp_discharge_conditions" + id).remove();

            $('#delete_inp_discharge_condition_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });



    $(document).on("click", ".select_edit_inp_dis_advice_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_advice').modal('show');
        var post_url = 'action/action_case_template_dis_advice.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            $("#edit_tdam_id").val(result['tdam_id']);
            $("#edit_tdam_template_name").val(result['tdam_template_name']);
            $("#edit_tdam_template_content").val(result['tdam_template_content']);
        });
    });

    $(document).on("keydown", "#form_modal_edit_dis_advice", function (e) {
        if (e.keyCode == 13) {
            $('#edit_submit_button_dis_advice').click(e);
            return false;
        }
    });

    $(document).on("click", "#edit_submit_button_dis_advice", function (e) {

        var tdam_template_name = $.trim($("#edit_tdam_template_name").val());
        var tdam_template_content = $.trim($("#edit_tdam_template_content").val());
        var tdam_id = $("#edit_tdam_id").val();

        if (tdam_template_name == "") {
            $("#edit_tdam_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (tdam_template_content == "") {
            alert("Please Enter Content.");
            $('#edit_tdam_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_advice.php?do=edit'

        $('#edit_submit_button_dis_advice').attr('disabled', 'disabled');
        $('#edit_submit_button_dis_advice').hide();
        $(".err_inpregisterloader_dis_advice").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                tdam_id: tdam_id,
                tdam_template_name: tdam_template_name,
                tdam_template_content: tdam_template_content,
            },
        }).done(function (result) {
            $('#modal_edit_dis_advice').modal('hide');
            $("#edit_tdam_id").val('');
            $("#edit_tdam_template_name").val("");
            $("#edit_tdam_template_content").val("");

            $('#li_dis_advice' + tdam_id).html(result)

            $('#edit_submit_button_dis_advice').attr('disabled', false);
            $('#edit_submit_button_dis_advice').show();
            $(".err_inpregisterloader_dis_advice").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_discharge_advice_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_discharge_advice_modal').modal('show');
        $('#delete_tdam_id').val(id);
    });

    $(document).on("click", "#delete_inp_discharge_advice_btn", function (e) {
        var id = $('#delete_tdam_id').val();
        var post_url = 'action/action_case_template_dis_advice.php?do=delete'

        $('#delete_inp_discharge_advice_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_discharge_advice_modal').modal('hide');
            $("#li_dis_advice" + id).remove();

            $('#delete_inp_discharge_advice_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });




    $(document).on("click", ".select_edit_inp_dis_when_to_obtain_uc_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_when_obt_urgent_care').modal('show');
        var post_url = 'action/action_case_template_dis_when_obt_urgent_care.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            $("#edit_twoucm_id").val(result['twoucm_id']);
            $("#edit_twoucm_template_name").val(result['twoucm_template_name']);
            $("#edit_twoucm_template_content").val(result['twoucm_template_content']);
        });
    });

    $(document).on("keydown", "#edit_form_modal_add_dis_when_obt_urgent_care", function (e) {
        if (e.keyCode == 13) {
            $('#edit_submit_button_dis_when_to_obtain_uc').click(e);
            return false;
        }
    });

    $(document).on("click", "#edit_submit_button_dis_when_to_obtain_uc", function (e) {

        var twoucm_template_name = $.trim($("#edit_twoucm_template_name").val());
        var twoucm_template_content = $.trim($("#edit_twoucm_template_content").val());
        var twoucm_id = $("#edit_twoucm_id").val();

        if (twoucm_template_name == "") {
            $("#edit_twoucm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (twoucm_template_content == "") {
            alert("Please Enter Content.");
            $('#edit_twoucm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_when_obt_urgent_care.php?do=edit'

        $('#edit_submit_button_dis_when_to_obtain_uc').attr('disabled', 'disabled');
        $('#edit_submit_button_dis_when_to_obtain_uc').hide();
        $(".err_inpregisterloader_dis_when_to_obtain_uc").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                twoucm_id: twoucm_id,
                twoucm_template_name: twoucm_template_name,
                twoucm_template_content: twoucm_template_content,
            },
        }).done(function (result) {
            $('#modal_edit_dis_when_obt_urgent_care').modal('hide');
            $("#edit_twoucm_id").val('');
            $("#edit_twoucm_template_name").val("");
            $("#edit_twoucm_template_content").val("");

            $('#li_dis_when_to_obtain_uc' + twoucm_id).html(result)

            $('#edit_submit_button_dis_when_to_obtain_uc').attr('disabled', false);
            $('#edit_submit_button_dis_when_to_obtain_uc').show();
            $(".err_inpregisterloader_dis_when_to_obtain_uc").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_discharge_when_to_obtain_uc_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_discharge_when_to_obtain_uc_modal').modal('show');
        $('#delete_twoucm_id').val(id);
    });

    $(document).on("click", "#delete_inp_discharge_when_to_obtain_uc_btn", function (e) {
        var id = $('#delete_twoucm_id').val();
        var post_url = 'action/action_case_template_dis_when_obt_urgent_care.php?do=delete'

        $('#delete_inp_discharge_when_to_obtain_uc_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_discharge_when_to_obtain_uc_modal').modal('hide');
            $("#li_dis_when_to_obtain_uc" + id).remove();

            $('#delete_inp_discharge_when_to_obtain_uc_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });

    $(document).on("click", ".select_edit_inp_dis_how_to_obtain_uc_modal", function (e) {
        var id = $(this).attr('data-id');
        $('#modal_edit_dis_how_to_obtain_urgent_care').modal('show');
        var post_url = 'action/action_case_template_dis_how_obt_urgent_care.php?do=edit_pop'
        var datastring = 'id=' + id;
        $.ajax({
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            //console.log(result);
            $("#edit_thoucm_id").val(result['thoucm_id']);
            $("#edit_thoucm_template_name").val(result['thoucm_template_name']);
            $("#edit_thoucm_template_content").val(result['thoucm_template_content']);
        });
    });

    $(document).on("keydown", "#edit_form_modal_add_dis_how_to_obtain_urgent_care", function (e) {
        if (e.keyCode == 13) {
            $('#edit_submit_button_dis_how_to_obtain_uc').click(e);
            return false;
        }
    });

    $(document).on("click", "#edit_submit_button_dis_how_to_obtain_uc", function (e) {

        var thoucm_template_name = $.trim($("#edit_thoucm_template_name").val());
        var thoucm_template_content = $.trim($("#edit_thoucm_template_content").val());
        var thoucm_id = $("#edit_thoucm_id").val();

        if (thoucm_template_name == "") {
            $("#edit_thoucm_template_name").focus();
            alert("Please Enter Title.");
            return false;
        } else if (thoucm_template_content == "") {
            alert("Please Enter Content.");
            $('#edit_thoucm_template_content').focus();
            return false;
        } else {

        }

        var post_url = 'action/action_case_template_dis_how_obt_urgent_care.php?do=edit'

        $('#edit_submit_button_dis_how_to_obtain_uc').attr('disabled', 'disabled');
        $('#edit_submit_button_dis_how_to_obtain_uc').hide();
        $(".err_inpregisterloader_dis_how_to_obtain_uc").attr("style", "display:block");

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                thoucm_id: thoucm_id,
                thoucm_template_name: thoucm_template_name,
                thoucm_template_content: thoucm_template_content,
            },
        }).done(function (result) {
            $('#modal_edit_dis_how_to_obtain_urgent_care').modal('hide');
            $("#edit_thoucm_id").val('');
            $("#edit_thoucm_template_name").val("");
            $("#edit_thoucm_template_content").val("");

            $('#li_dis_how_to_obtain_uc' + thoucm_id).html(result)

            $('#edit_submit_button_dis_how_to_obtain_uc').attr('disabled', false);
            $('#edit_submit_button_dis_how_to_obtain_uc').show();
            $(".err_inpregisterloader_dis_how_to_obtain_uc").attr("style", "display:none");

        });

    });

    $(document).on("click", ".delete_inp_discharge_how_to_obtain_uc_show", function (e) {
        var id = $(this).data('id');
        $('#delete_inp_discharge_how_to_obtain_uc_modal').modal('show');
        $('#delete_thoucm_id').val(id);
    });

    $(document).on("click", "#delete_inp_discharge_how_to_obtain_uc_btn", function (e) {
        var id = $('#delete_thoucm_id').val();
        var post_url = 'action/action_case_template_dis_how_obt_urgent_care.php?do=delete'

        $('#delete_inp_discharge_how_to_obtain_uc_btn').attr('disabled', 'disabled');
        $('.overlay-popup-full').show();

        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            $('#delete_inp_discharge_how_to_obtain_uc_modal').modal('hide');
            $("#li_dis_how_to_obtain_uc" + id).remove();

            $('#delete_inp_discharge_how_to_obtain_uc_btn').attr('disabled', false);
            $('.overlay-popup-full').show();

        });
    });

    $(document).on('click', '#submit_button_oneclick_consultation', function () {
        var oneclick_template_name = $('#oneclick_template_name').val();
        var tcm_investigation = $('#tcm_investigation').val();
        var tcm_advice = $('#tcm_advice').val();
        var tcm_treatment = $('#tcm_treatment').val();

        var arrayTmmId = [];

        $(".select_tmm_id").each(function () {
            var tmId = $(this).val();
            arrayTmmId.push(tmId);
        });

        var arrayTmrType = [];

        $(".select_tmr_type").each(function () {
            var tmrType = $(this).val();
            arrayTmrType.push(tmrType);
        });

        var arrayTmmType = [];

        $(".select_tmm_type").each(function () {
            var tmType = $(this).val();
            arrayTmmType.push(tmType);
        });



        var arrayTmmDosage = [];

        $(".select_tmm_dosage").each(function () {
            var tmDosage = $(this).val();
            arrayTmmDosage.push(tmDosage);
        });



        var arrayTmmUnit = [];

        $(".select_tmm_unit").each(function () {
            var tmUnit = $(this).val();
            arrayTmmUnit.push(tmUnit);
        });



        var arrayTmmFreqType = [];

        $(".select_tmm_freq_type").each(function () {
            var tmFreqType = $(this).val();
            arrayTmmFreqType.push(tmFreqType);
        });



        var arrayTmmMorning = [];

        $(".select_tcm_tmm_freq_morning").each(function () {
            var tmMorning = $(this).val();
            arrayTmmMorning.push(tmMorning);
        });



        var arrayTmmAfternoon = [];

        $(".select_tcm_tmm_freq_afternoon").each(function () {
            var tmAfternoon = $(this).val();
            arrayTmmAfternoon.push(tmAfternoon);
        });



        var arrayTmmEvening = [];

        $(".select_tcm_tmm_freq_evening").each(function () {
            var tmEvening = $(this).val();
            arrayTmmEvening.push(tmEvening);
        });



        var arrayTmmNight = [];

        $(".select_tcm_tmm_freq_night").each(function () {
            var tmNight = $(this).val();
            arrayTmmNight.push(tmNight);
        });



        var arrayTmmTime = [];

        $(".select_tmm_time").each(function () {
            var tmTime = $(this).val();
            arrayTmmTime.push(tmTime);
        });



        var arrayTmmDays = [];

        $(".select_tmm_days").each(function () {
            var tmDays = $(this).val();
            arrayTmmDays.push(tmDays);
        });



        var arrayTmmDuration = [];

        $(".select_tmm_duration_type").each(function () {
            var tmDuration = $(this).val();
            arrayTmmDuration.push(tmDuration);
        });



        var arrayTmmRemarks = [];

        $(".select_tmm_remarks").each(function () {
            var tmRemarks = $(this).val();
            arrayTmmRemarks.push(tmRemarks);
        });

        var arraytcd_id = [];

        $.each($("input[name='tcd_id[]']:checked"), function () {
            var tcd_id = $(this).val();
            arraytcd_id.push(tcd_id);
        });

        var arrayoc_chk_tcd_id = [];

        $.each($("input[name='oc_chk_tcd_id[]']:checked"), function () {
            var oc_chk_tcd_id = $(this).val();
            arrayoc_chk_tcd_id.push(oc_chk_tcd_id);
        });

        var arrayoc_diagnosis_type = [];

        $.each($("input[name='oc_diagnosis_type[]'"), function () {
            var oc_diagnosis_type = $(this).val();
            arrayoc_diagnosis_type.push(oc_diagnosis_type);
        });


        var consultationtempradio = $('input[name="consultationtempradio"]:checked').val();
        if (consultationtempradio == 1) {

            var toc_id = $('#toc_id').val();
            if (toc_id == "") {
                $('#toc_id').focus();
                alert("Please Select Template.");
                return false;
            }

            var post_url = '../action/action_oneclick_consultation.php?do=edit_from_cm'
        } else {

            if (oneclick_template_name == "") {
                $('#oneclick_template_name').focus();
                alert("Please Enter Template Name.");
                return false;
            }

            var post_url = '../action/action_oneclick_consultation.php?do=add_from_cm'
            var toc_id = 0;
        }
        var dp_id = $("#department_id").val();
        $('#submit_button_oneclick_consultation').attr('disabled', 'disabled');

        //var datastring = 'post=data';
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                dp_main_id: dp_id,
                toc_id: toc_id,
                oneclick_temp_name: oneclick_template_name,
                oneclick_temp_name: oneclick_template_name,
                diagnosis_id: arraytcd_id,
                diagnosis_old_id: arrayoc_chk_tcd_id,
                diagnosis_old_type: arrayoc_diagnosis_type,
                onclick_investing: tcm_investigation,
                onclick_advice: tcm_advice,
                onclick_treatment: tcm_treatment,
                tmm_id: arrayTmmId,
                tmr_type: arrayTmrType,
                tmm_type: arrayTmmType,
                tmm_days: arrayTmmDays,
                tmm_duration_type: arrayTmmDuration,
                tmm_dosage: arrayTmmDosage,
                tmm_unit: arrayTmmUnit,
                tmm_freq_type: arrayTmmFreqType,
                tmm_time: arrayTmmTime,
                tmm_remarks: arrayTmmRemarks,
                tcm_tmm_freq_morning: arrayTmmMorning,
                tcm_tmm_freq_afternoon: arrayTmmAfternoon,
                tcm_tmm_freq_evening: arrayTmmEvening,
                tcm_tmm_freq_night: arrayTmmNight
            },
        }).done(function (result) {

            $('#submit_button_oneclick_consultation').attr('disabled', false);

            $('#toc_id').val("");
            $('#oneclick_template_name').val("");
            $('#savetemplatemodal').modal('hide');

            if (consultationtempradio == 1) {

                var edit_consultation_crmsg = document.getElementById('edit_consultation_crmsg')
                var toast_edit_consultation_crmsg = new bootstrap.Toast(edit_consultation_crmsg)
                toast_edit_consultation_crmsg.show();
            }else{
                var add_consultation_crmsg = document.getElementById('add_consultation_crmsg')
                var toast_add_consultation_crmsg = new bootstrap.Toast(add_consultation_crmsg)
                toast_add_consultation_crmsg.show();
            }

        });



    });

    $(document).on("change", "#tura_comorbidity_present", function () {
        $('#tura_hypertension').prop('selectedIndex', 0);
        $('#tura_diabetes_mellitus').prop('selectedIndex', 0);
        $('#tura_comorbidity_present_other').val("");
        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.comorbidity_present').css("display", "block");
        } else {
            $('.comorbidity_present').css("display", "none");
        }
    });

    $(document).on("change", "#tura_starting_dose", function () {
        $('#tura_standard_dose').val('');
        var val_other = $(this).val();
        if (val_other == "Lower") {
            $('.lower_dose').css("display", "block");
        } else {
            $('.lower_dose').css("display", "none");
        }
    });

    $(document).on("change", "#tura_subsequent_cycle", function () {
        $('#tura_which_cycle').prop('selectedIndex', 0);
        $('#tura_subsequent_cycle_reason').val("");
        var val_other = $(this).val();
        if (val_other == "Yes") {
            $('.subsequent_cycle').css("display", "block");
        } else {
            $('.subsequent_cycle').css("display", "none");
        }
    });
    $(document).on("change", "#tura_best_responce", function () {
        $('#response_observed').prop('selectedIndex', 0);

        var val_other = $(this).val();
        if (val_other == "CR" || val_other == "PR") {
            $('.response_observed').css("display", "block");
        } else {
            $('.response_observed').css("display", "none");
        }
    });

    $(document).on("change", "#oneclick_consultation", function () {
        var id = $(this).val();
        var case_consultation_type = $('#case_consultation_type_opt_add').val();

        var post_url = 'action/action_casemanager_box.php?do=view_boxs'
        var datastring = 'id=' + case_consultation_type;

        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring,
            dataType: 'JSON'
        }).done(function (result) {
            if (jQuery.inArray('12', result) != '-1') {
                $.myDiagnosisOneClickHtml(id);
            } else {

            }
            if (jQuery.inArray('13', result) != '-1') {
                $.myPrescriptionOneClickHtml(id);
            } else {

            }
            if (jQuery.inArray('14', result) != '-1') {
                $.myInvestigationOneClickHtml(id);
            } else {

            }
            if (jQuery.inArray('24', result) != '-1') {
                $.myTreatmentOneClickHtml(id);
            } else {

            }
            if (jQuery.inArray('15', result) != '-1') {
                $.myAdviceOneClickHtml(id);
            } else {

            }

           

        });

    });

    $.myDiagnosisOneClickHtml = function (id) {

        var post_url = '../action/action_one_click_consultation.php?do=diagnosis'
        var datastring = 'id=' + patient_uni_id;
        ////console.log(datastring);
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {

            $(".template-dia").remove();
            
            if ($('#add_table_diagnosis .dataTables_empty').length) {

                $("#add_table_diagnosis").html(result);

            } else {
                $("#add_table_diagnosis").prepend(result);
            }

        })

    }

    $.myTreatmentOneClickHtml = function (id) {

        var post_url = '../action/action_one_click_consultation.php?do=treatment'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {
            var old_val = $("#tcm_treatment").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tcm_treatment").val(old_val + new_val);
            } else {
                $("#tcm_treatment").val(old_val + "\n" + new_val);
            }
        })

    }

    $.myAdviceOneClickHtml = function (id) {

        var post_url = '../action/action_one_click_consultation.php?do=advice'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {

            var old_val = $("#tcm_advice").val();
            var new_val = result.trim();
            if (old_val == "") {
                $("#tcm_advice").val(old_val + new_val);
                $("#case_toam_id").val(id);
            } else {
                $("#tcm_advice").val(old_val + "\n" + new_val);
                var old_adv_val = $("#case_toam_id").val();
                $("#case_toam_id").val(old_adv_val + "," + id);
            }

            $(".auto_tcm_advice").animate({
                scrollTop: $('.auto_tcm_advice').prop("scrollHeight")
            }, 800);

        })

        var change_consultation_crmsg = document.getElementById('change_consultation_crmsg')
        var toast_change_consultation_crmsg = new bootstrap.Toast(change_consultation_crmsg)
        toast_change_consultation_crmsg.show();

    }

    $.myInvestigationOneClickHtml = function (id) {

        var post_url = '../action/action_one_click_consultation.php?do=investigation'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {

            var cleanText = $("#tcm_investigation").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            var old_val_html = $('#tcm_investigation').summernote('code').trim();

            if (cleanText == "") {
                $('#tcm_investigation').summernote('code', "");
            }

            if (cleanText == "") {
                $('#tcm_investigation').summernote('code', "" + result + "&nbsp;");
            } else {
                $('#tcm_investigation').summernote('code', old_val_html + "<br>" + result + "&nbsp;");
            }

        })

    }

    $.myPrescriptionOneClickHtml = function (id) {

        var post_url = '../action/action_one_click_consultation.php?do=prescription'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id
            },
        }).done(function (result) {

            $('#medicine_table_rows').append(result.trim());

            $(".select_tmm_id").each(function () {
                if ($(this).val() == 0) {
                    var trclass = $(this).closest('tr').attr('id');
                    $('#tr_' + trclass).remove();
                    // alert(trclass);

                }
            });

            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });

            $('[data-bs-toggle="tooltip"]').on('click', function () {
                $(this).tooltip('hide')
            });

        })

    }

    $("#new_patient_case_manager_form_add, #new_patient_case_manager_form_edit").on("keypress", function (event) {
        var keyPressed = event.keyCode || event.which;
        if (keyPressed === 13) {
            //alert("You pressed the Enter key!!");
            event.preventDefault();
            return false;
        }
    });
    $(document).on('click', '.click_case_print_rx', function (e) {
        e.preventDefault();
        var pdf_id = $(this).data('pdf_id');
        var p_id = $(this).data('p_id');
        var pu_id = $(this).data('pu_id');
        var caseid = $(this).data('caseid');
        var language = $('#select_print_language_' + caseid).val();
        var PrintRxLink = 'pdf_print_prescription.php?pdf_id=' + pdf_id + '&p_id=' + p_id + '&pu_id=' + pu_id + '&lg=' + btoa(language);
        window.open(PrintRxLink, '_blank');
    });

    $(document).on("click", ".edit-case-diagnosis-one-click", function () {

        var id = $(this).attr('data-edit-tcd_id');
        var diagnosis = $(this).attr('data-diagnosis');
        var icd_code = $(this).attr('data-icd_code');
        var type = $(this).attr('data-type');
        var created_date = $(this).attr('data-created_date');
        $('#editdiagnosismodaloneclick').modal('show');
        // var case_diagnosis = $('#diagnosis_table_'+id).is(":checked");
        $("#edit_oc_tcd_id").val(id);
        $("#edit_oc_diagnosis").val(diagnosis);
        $("#edit_oc_icd_code").val(icd_code);
        $("#edit_oc_diagnosis_type").val(type);
        $("#edit_oc_tcd_created_date").val(created_date);

    });

    $("#edit_case_diagnosis_oc").submit(function (e) {

        e.preventDefault();
        proceed = true;

        var edit_oc_icd_code = $('#edit_oc_icd_code').val();
        var edit_oc_diagnosis_type = $('#edit_oc_diagnosis_type').val();
        var edit_oc_diagnosis = $('#edit_oc_diagnosis').val();

        if (edit_oc_diagnosis.trim() == "") {

            alert('Please enter diagnosis');
            $('#edit_oc_diagnosis').focus();
            return false;
        } else if (edit_oc_diagnosis_type.trim() == "") {

            alert('Please select diagnosis type');
            $('#edit_oc_diagnosis_type').focus();
            return false;
        } else {

        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);

        $('#submit_case_edit_oc_diagnosis').attr('disabled', 'disabled');
        $('.err_register').show();

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {

            $('#submit_case_edit_oc_diagnosis').attr('disabled', false);
            $('.err_register').hide();
            var edit_oc_tcd_id = $('#edit_oc_tcd_id').val();
            $('#editdiagnosismodaloneclick').modal('hide');
            $("#edit_case_diagnosis_oc").trigger("reset");
            $('#tr_case_dia_diagnosis_' + edit_oc_tcd_id).html(result.trim())
        });
    });

    $(document).on("change", "#oneclick_consultation_edit", function () {
        var id = $(this).val();
        $.myDiagnosisOneClickHtml(id);
        $.myPrescriptionOneClickHtml(id);
        $.myInvestigationOneClickHtml(id);
        $.myTreatmentOneClickHtml(id);
        $.myAdviceOneClickHtml(id);

    });

    $(document).on("click", ".ap_print_rx_click", function(e) {
        $('#ap_print_rx_modal').modal('show');
        var post_url = 'action/action_ap_print_rx_modal.php'
        var pdf_id = $(this).data('pdf_id');
        var p_id = $(this).data('p_id');
        var pu_id = $(this).data('pu_id');
        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                pdf_id: pdf_id,
                p_id: p_id,
                pu_id: pu_id
            },
        }).done(function(result) {
            $('#ap_print_rx_modal_update').html(result);
        })
    });
    $(document).on('click', '.ap_click_case_print_rx', function(e) {
        e.preventDefault();
        var pdf_id = $(this).data('pdf_id');
        var p_id = $(this).data('p_id');
        var pu_id = $(this).data('pu_id');
        var language = $('#select_print_language_' + atob(pdf_id)).val();
        var Link = $(".base_url_practice").val() + 'case_manager/';
        var PrintRxLink = Link + 'pdf_print_prescription.php?pdf_id=' + pdf_id + '&p_id=' + p_id + '&pu_id=' + pu_id + '&lg=' + btoa(language);
        window.open(PrintRxLink, '_blank');
        $('#ap_print_rx_modal').modal('hide');
    });
    $(document).on("click", ".ap_print_consultation_click", function(e) {
        $('#ap_print_consultation_modal').modal('show');
        var post_url = 'action/action_ap_print_consultation_modal.php'
        var pdf_id = $(this).data('pdf_id');
        var p_id = $(this).data('p_id');
        var pu_id = $(this).data('pu_id');
        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                pdf_id: pdf_id,
                p_id: p_id,
                pu_id: pu_id
            },
        }).done(function(result) {
            $('#ap_print_consultation_modal_update').html(result);
        })
    });
    $(document).on('click', '.ap_click_case_print_onsultation', function(e) {
        e.preventDefault();
        var pdf_id = $(this).data('pdf_id');
        var p_id = $(this).data('p_id');
        var pu_id = $(this).data('pu_id');
        var language_cons = $('#select_print_language_cons_' + atob(pdf_id)).val();
        var Link = $(".base_url_practice").val() + 'case_manager/';
        var PrintonsultationLink = Link + 'pdf_all_casemanager.php?pdf_id=' + pdf_id + '&p_id=' + p_id + '&pu_id=' + pu_id + '&lg=' + btoa(language_cons);
        window.open(PrintonsultationLink, '_blank');
        $('#ap_print_consultation_modal').modal('hide');
    });

     $("#edit_lab_para_historical_values_case").submit(function (e) {
        e.preventDefault();
        proceed = true;

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });

        var arr = [];

        var arrayvalues = [];

        $("input.all_lab_para_value_req").each(function () {

            if ($(this).val() == 0) {

                arrayvalues.push('false');

            } else {

                arrayvalues.push('true');
            }
        });

        if (arrayvalues.indexOf("true") === -1) {
            alert('Please enter anyone lab value');
            return false;
        }

        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
        $('.err_register').show();
        $('#submit_edit_lab_para_historical_values_case').attr('disabled', 'disabled');
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function (result) {
            $('#submit_edit_lab_para_historical_values_case').removeAttr('disabled');

            $('#modal_edit_lab_value_historical').modal('hide');
            $('.err_register').hide();

            var pm_pid = $('#pm_pid').val();
            var patient_uni_id = $('#patient_uni_id').val();

            checkedlabid.push(parseInt(result.trim()));

            $.myAllLabParatable(pm_pid, patient_uni_id, checkedlabid);

        });
    });

    $(document).on("click", "#delete_lab_value_historical_cm", function () {
        $('#deletepopup_pre_lab').modal('show');
        var tcgc_id = $(this).attr('data-id');
        $('#row_tolv_id').val(tcgc_id);

    });

    $(document).on("click", "#submit_delete_popup_preview_lab_report", function () {

        var checkedlabid = []
        $("input[name='tclvp_id[]']:checked").each(function () {
            checkedlabid.push(parseInt($(this).val()));
        });
        
        var row_tolv_id = $("#row_tolv_id").val();
        var post_url = 'action/action_case_lab_para.php?do=delete_cm_value'
        var datastring = 'row_tolv_id=' + row_tolv_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function (result) {
            
            $('#deletepopup_pre_lab').modal('hide');
          

            var pm_pid = $('#pm_pid').val();
            var patient_uni_id = $('#patient_uni_id').val();
            console.log(pm_pid);
            console.log(patient_uni_id);
            checkedlabid.push(parseInt(result.trim()));

            $.myAllLabParatable(pm_pid, patient_uni_id, checkedlabid);
        });
    }); 

    $(document).on("click", ".show_preview_print_modal", function(e) {
        $('#preview_print_modal_dis').modal('show');
    });
    $(document).on('click', '.click_preview_dis_summary', function(e) {
        e.preventDefault();
        var p_id = $(this).data('p_id');
        var ip_id = $(this).data('ip_id');
        var pu_id = $(this).data('pu_id');
        var language = $('#select_print_language_dis').val();
        var PrintonsultationLink = 'pdf_all_discharge.php?p_id=' + p_id + '&ip_id=' + ip_id + '&pu_id=' + pu_id + '&lg=' + btoa(language);
        $('#preview_print_modal_dis').modal('hide');
        window.open(PrintonsultationLink, '_blank');
    });
    $(document).on("click", ".click_inpatient_dis_summury", function(e) {
        $('#print_inpatient_dis_summury_modal').modal('show');
        var post_url = 'action/action_inpatient_dis_summury.php'
        var p_id = $(this).data('p_id');
        var ip_id = $(this).data('ip_id');
        var pu_id = $(this).data('pu_id');
        $.ajax({
            type: "POST",
            url: post_url,
            data: {
                p_id: p_id,
                ip_id: ip_id,
                pu_id: pu_id
            },
        }).done(function(result) {
            $('#print_inpatient_dis_summury_modal_update').html(result);
        })
    });
    $(document).on('click', '.inp_click_inpatient_dis_summury', function(e) {
        e.preventDefault();
        var p_id = $(this).data('p_id');
        var ip_id = $(this).data('ip_id');
        var pu_id = $(this).data('pu_id');
        var language_inp_dis = $('#select_print_language_inp_dis_' + atob(p_id)).val();
        var Link = $(".base_url_practice").val() + 'inpatient/';
        var PrintonsultationLink = Link + 'pdf_all_discharge.php?p_id=' + p_id + '&ip_id=' + ip_id + '&pu_id=' + pu_id + '&lg=' + btoa(language_inp_dis);
        $('#print_inpatient_dis_summury_modal').modal('hide');
        window.open(PrintonsultationLink, '_blank');
    });

    $(document).on("click", "#load_previous_auto_refraction_prescription", function(e) {

        $("#tcm_auto_eye_right_sph").val($("#tcm_auto_eye_right_sph_old").val());
        $("#tcm_auto_eye_right_cyl").val($("#tcm_auto_eye_right_cyl_old").val());
        $("#tcm_auto_eye_right_axis").val($("#tcm_auto_eye_right_axis_old").val());
    
        $("#tcm_auto_eye_left_sph").val($("#tcm_auto_eye_left_sph_old").val());
        $("#tcm_auto_eye_left_cyl").val($("#tcm_auto_eye_left_cyl_old").val());
        $("#tcm_auto_eye_left_axis").val($("#tcm_auto_eye_left_axis_old").val());
    
    });
    
    $(document).on("click", "#load_previous_refraction_prescription", function(e) {

        $("#tcm_sph_re_dis_value").val($("#tcm_sph_re_dis_value_old").val());
        $("#tcm_cyl_re_dis_value").val($("#tcm_cyl_re_dis_value_old").val());
        $("#tcm_axi_re_dis").val($("#tcm_axi_re_dis_old").val());
        $("#tcm_cv_re_dis").val($("#tcm_cv_re_dis_old").val());
    
        $("#tcm_sph_le_dis_value").val($("#tcm_sph_le_dis_value_old").val());
        $("#tcm_cyl_le_dis_value").val($("#tcm_cyl_le_dis_value_old").val());
        $("#tcm_axi_le_dis").val($("#tcm_axi_le_dis_old").val());
        $("#tcm_cv_le_dis").val($("#tcm_cv_le_dis_old").val());
    
        $("#tcm_sph_re_near_value").val($("#tcm_sph_re_near_value_old").val());
        $("#tcm_cyl_re_near_value").val($("#tcm_cyl_re_near_value_old").val());
        $("#tcm_axi_re_near").val($("#tcm_axi_re_near_old").val());
        $("#tcm_cv_re_near").val($("#tcm_cv_re_near_old").val());
    
        $("#tcm_sph_le_near_value").val($("#tcm_sph_le_near_value_old").val());
        $("#tcm_cyl_le_near_value").val($("#tcm_cyl_le_near_value_old").val());
        $("#tcm_axi_le_near").val($("#tcm_axi_le_near_old").val());
        $("#tcm_cv_le_near").val($("#tcm_cv_le_near_old").val());
    
        $("#tcm_sph_re_com_value").val($("#tcm_sph_re_com_value_old").val());
        $("#tcm_cyl_re_com_value").val($("#tcm_cyl_re_com_value_old").val());
        $("#tcm_axi_re_com").val($("#tcm_axi_re_com_old").val());
        $("#tcm_cv_re_com").val($("#tcm_cv_re_com_old").val());
    
        $("#tcm_sph_le_com_value").val($("#tcm_sph_le_com_value_old").val());
        $("#tcm_cyl_le_com_value").val($("#tcm_cyl_le_com_value_old").val());
        $("#tcm_axi_le_com").val($("#tcm_axi_le_com_old").val());
        $("#tcm_cv_le_com").val($("#tcm_cv_le_com_old").val());
    
    });
    
    $(document).on("click", "#modal_add_growth_chart_open", function(e) {
        $('#modal_add_growth_chart').modal('show');
        document.getElementById("form_case_add_growth_chart").reset();
    });
    
    $("#form_case_add_growth_chart").submit(function(e) {
        e.preventDefault();
        proceed = true;
    
        var tcgc_date = $("#tcgc_date").val();
        if (tcgc_date == "") {
            alert("Please enter Date.");
            return false;
        }
    
        var tcgc_mid_arm_left = $("#tcgc_mid_arm_left").val();
        if (tcgc_mid_arm_left == "") {
            alert("Please enter Mid Arm (Left).");
            $('#tcgc_mid_arm_left').focus();
            return false;
        }
    
        var tcgc_mid_arm_right = $("#tcgc_mid_arm_right").val();
        if (tcgc_mid_arm_right == "") {
            alert("Please enter Mid Arm (Right).");
            $('#tcgc_mid_arm_right').focus();
            return false;
        }
    
        var tcgc_chest = $("#tcgc_chest").val();
        if (tcgc_chest == "") {
            alert("Please enter Chest.");
            $('#tcgc_chest').focus();
            return false;
        }
    
        var tcgc_head = $("#tcgc_head").val();
        if (tcgc_head == "") {
            alert("Please enter Head.");
            $('#tcgc_head').focus();
            return false;
        }
    
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
    
        $('#submit_case_growth_chart').attr('disabled', 'disabled');
        $('.err_register_add').show();
    
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function(result) {
    
    
            $('#modal_add_growth_chart').modal('hide');
            $('#submit_case_growth_chart').removeAttr('disabled');
    
            $('.err_register_add').hide();
            if ($('#add_table_growth_chart .dataTables_empty').length) {
                $("#add_table_growth_chart").html(result);
            } else {
                $("#add_table_growth_chart").prepend(result);
            }
    
        });
    
    });
    
    $(document).on("click", "#delete_popup_growth_chart_case", function(e) {
        $('#modal-danger-case-growth_chart_parameter-delete').modal('show');
        var tcgc_id = $(this).attr('data-tcgc_id');
        $('#delete_tcgc_id').val(tcgc_id);
    });
    
    $(document).on("click", "#delete_case_growth_chart_case", function(e) {
        var delete_tcgc_id = $("#delete_tcgc_id").val();
        var post_url = 'action/action_case_growth_chart.php?do=delete'
        var datastring = 'delete_tcgc_id=' + delete_tcgc_id;
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: datastring
        }).done(function(result) {
            ////console.log(result);
            $('#tr_case_growth_chart_' + delete_tcgc_id).remove();
            $('#modal-danger-case-growth_chart_parameter-delete').modal('hide');
        });
    });
    
    $(document).on("click", ".edit-growth-chart-parameter", function(e) {
        var id = $(this).attr('data-edit-tcgc_id');
        $('#edit-growth-chart-parameter-modal').modal('show');
        $('#submit_case_growth_chart_edit').attr('disabled', false);
    
        var growth_chart_parameter_chk = $('#case_growth_chart_parameter_chk' + id).is(":checked");
    
        var post_url = 'action/action_case_growth_chart.php?do=edit_pop'
        $.ajax({ //ajax form submit
            type: "POST",
            url: post_url,
            data: {
                id: id,
            },
            dataType: 'JSON'
        }).done(function(result) {
    
    
            $("#edit_tcgc_id").val(result['tcgc_id']);
            $("#edit_tcgc_date").val(result['tcgc_date']);
            $("#edit_tcgc_mid_arm_left").val(result['tcgc_mid_arm_left']);
            $("#edit_tcgc_mid_arm_right").val(result['tcgc_mid_arm_right']);
            $("#edit_tcgc_chest").val(result['tcgc_chest']);
            $("#edit_tcgc_head").val(result['tcgc_head']);
    
            $("#edit_tcgc_pm_pid").val(result['pm_pid']);
            $("#edit_tcgc_pm_id").val(result['pm_id']);
            $("#edit_tcgc_patient_unique_id").val(result['patient_unique_id']);
    
    
            $("#growth_chart_parameter_chk").val(growth_chart_parameter_chk);
    
            $('#edit_tcgc_date').flatpickr({
                dateFormat: 'Y-m-d',
            });
    
    
        });
    
    });
    
    $("#form_case_edit_growth_chart").submit(function(e) {
        e.preventDefault();
        proceed = true;
    
        var tcgc_id = $("#edit_tcgc_id").val();
    
        var tcgc_date = $("#edit_tcgc_date").val();
        if (tcgc_date == "") {
            alert("Please enter Date.");
            return false;
        }
    
        var tcgc_mid_arm_left = $("#edit_tcgc_mid_arm_left").val();
        if (tcgc_mid_arm_left == "") {
            alert("Please enter Mid Arm (Left).");
            $('#edit_tcgc_mid_arm_left').focus();
            return false;
        }
    
        var tcgc_mid_arm_right = $("#edit_tcgc_mid_arm_right").val();
        if (tcgc_mid_arm_right == "") {
            alert("Please enter Mid Arm (Right).");
            $('#edit_tcgc_mid_arm_right').focus();
            return false;
        }
    
        var tcgc_chest = $("#edit_tcgc_chest").val();
        if (tcgc_chest == "") {
            alert("Please enter Chest.");
            $('#edit_tcgc_chest').focus();
            return false;
        }
    
        var tcgc_head = $("#edit_tcgc_head").val();
        if (tcgc_head == "") {
            alert("Please enter Head.");
            $('#tedit_cgc_head').focus();
            return false;
        }
    
        var post_url = $(this).attr("action");
        var request_method = $(this).attr("method");
        var form_data = new FormData(this);
    
        $('#submit_case_growth_chart_edit').attr('disabled', 'disabled');
        $('.err_register_add').show();
    
        $.ajax({ //ajax form submit
            url: post_url,
            type: request_method,
            data: form_data,
            dataType: "text",
            contentType: false,
            cache: false,
            processData: false
        }).done(function(result) {
    
            $('#tr_case_growth_chart_' + tcgc_id).html(result);

            $('#edit-growth-chart-parameter-modal').modal('hide');
            $('#submit_case_growth_chart_edit').attr('disabled', false);
    
            $("#edit_tcgc_id").val("");
            $("#edit_tcgc_mid_arm_left").val("");
            $("#edit_tcgc_mid_arm_right").val("");
            $("#edit_tcgc_chest").val("");
            $("#edit_tcgc_head").val("");

        });
    
    }); 

    $(document).on("keydown", "#new_inpat_dis_summary_form_add", function (e) {

        if (e.keyCode == 13) {
            // $('#submit_button_dis_condition').click(e);
            return false;
        }
    });

    $('#pm_age').keypress(function(event) {
        if (event.which != 8 && isNaN(String.fromCharCode(event.which))) {
            event.preventDefault(); //stop character from entering input
        }
    });

    $("#pm_age").keyup(function() {
        if ($(this).val().length > 3) {
            $(this).val($(this).val().substr(0, 3))
        } else {
        }
    });

    $(document).on("click", ".delete_case_document", function (e) {
        $("#delete_doc_id").val('');
        var id = $(this).data('id');
        $('#delete_case_document_modal').modal('show');
        $('#delete_doc_id').val(id);
    });

    $(document).on("click", "#delete_case_document_btn", function (e) {
        var id = $('#delete_doc_id').val();
        var post_url = 'action/action_document.php?do=delete'
        $('#delete_case_document_btn').attr('disabled', 'disabled');
        $.ajax({  
            type: "POST",
            url: post_url,
            data: {
                delete_id: id
            },
        }).done(function (result) {
            $('#delete_case_document_btn').attr('disabled', false);
            location.reload();
        });
    });

});